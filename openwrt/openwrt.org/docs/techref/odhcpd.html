
<h1 class="sectionedit1" id="odhcpd">odhcpd</h1>
<div class="level1">

<p>
See also: <a href="https://github.com/openwrt/odhcpd/blob/master/README" class="urlextern" title="https://github.com/openwrt/odhcpd/blob/master/README" rel="ugc nofollow">odhcpd upstream documentation</a>
</p>

<p>
odhcpd is an embedded <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>/DHCPv6/RA server &amp; NDP relay.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;odhcpd&quot;,&quot;hid&quot;:&quot;odhcpd&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-177&quot;} -->
<h2 class="sectionedit2" id="abstract">Abstract</h2>
<div class="level2">

<p>
odhcpd is a daemon for serving and relaying <abbr title="Internet Protocol">IP</abbr> management protocols to configure clients and downstream routers.
It tries to follow the <a href="https://datatracker.ietf.org/doc/html/rfc6204" class="urlextern" title="https://datatracker.ietf.org/doc/html/rfc6204" rel="ugc nofollow">RFC 6204</a> requirements for <abbr title="Internet Protocol version 6">IPv6</abbr> home routers.
</p>

<p>
odhcpd provides server services for <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>, RA, stateless SLAAC and stateful DHCPv6, prefix delegation and can be used to relay RA, DHCPv6 and NDP between routed (non-bridged) interfaces in case no delegated prefixes are available.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Abstract&quot;,&quot;hid&quot;:&quot;abstract&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;178-661&quot;} -->
<h2 class="sectionedit3" id="features">Features</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Features&quot;,&quot;hid&quot;:&quot;features&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;662-682&quot;} -->
<h3 class="sectionedit4" id="router_discovery_rd">Router Discovery (RD)</h3>
<div class="level3">

<p>
Router Discovery (RD) support (solicitations and advertisements) with 2 modes of operation:
</p>
<ol>
<li class="level1 node"><div class="li"> RD Server mode: Router Discovery (RD) server for slave interfaces:</div>
<ol>
<li class="level2"><div class="li"> Automatic detection of prefixes, delegated prefix, default routes and <abbr title="Maximum Transmission Unit">MTU</abbr>.</div>
</li>
<li class="level2"><div class="li"> Automatic re-announcement of any changes in either prefixes or routes.</div>
</li>
</ol>
</li>
<li class="level1 node"><div class="li"> RD Relay mode: Router Discovery (RD) relay between master and slave interfaces.</div>
<ol>
<li class="level2"><div class="li"> Supports rewriting of the announced <abbr title="Domain Name System">DNS</abbr> server addresses.</div>
</li>
</ol>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Router Discovery (RD)&quot;,&quot;hid&quot;:&quot;router_discovery_rd&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;683-1184&quot;} -->
<h3 class="sectionedit5" id="dhcpv6">DHCPv6</h3>
<div class="level3">

<p>
DHCPv6 support with 2 modes of operation:
</p>
<ol>
<li class="level1 node"><div class="li"> DHCPv6 Server mode: stateless, stateful and Prefix Delegation (PD) server mode:</div>
<ol>
<li class="level2"><div class="li"> Stateless and stateful address assignment.</div>
</li>
<li class="level2"><div class="li"> Prefix delegation support.</div>
</li>
<li class="level2"><div class="li"> Dynamic reconfiguration of any changes in Prefix Delegation.</div>
</li>
<li class="level2"><div class="li"> Hostname detection and hosts-file creation.</div>
</li>
</ol>
</li>
<li class="level1 node"><div class="li"> DHCPv6 Relay mode: A mostly standards-compliant DHCPv6-relay:</div>
<ol>
<li class="level2"><div class="li"> Supports rewriting of the announced <abbr title="Domain Name System">DNS</abbr> server addresses.</div>
</li>
</ol>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;DHCPv6&quot;,&quot;hid&quot;:&quot;dhcpv6&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;1185-1657&quot;} -->
<h3 class="sectionedit6" id="dhcpv4">DHCPv4</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> Stateless and stateful DHCPv4 server mode.</div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;DHCPv4&quot;,&quot;hid&quot;:&quot;dhcpv4&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;1658-1722&quot;} -->
<h3 class="sectionedit7" id="neighbor_discovery_proxy_ndp">Neighbor Discovery Proxy (NDP)</h3>
<div class="level3">

<p>
Proxy for Neighbor Discovery solicitation and advertisement messages (NDP):
</p>
<ol>
<li class="level1"><div class="li"> Supports auto-learning of routes to the local routing table.</div>
</li>
<li class="level1"><div class="li"> Supports marking interfaces as “external”.</div>
</li>
</ol>

<p>
Interfaces marked as “external” will not receive any proxyied NDP content and are only served with NDP for Duplicate Address Detection (DAD) and traffic to the router itself.
</p>

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> Interfaces marked as external need additional firewall rules for security!
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Neighbor Discovery Proxy (NDP)&quot;,&quot;hid&quot;:&quot;neighbor_discovery_proxy_ndp&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;1723-2208&quot;} -->
<h2 class="sectionedit8" id="configuration">Configuration</h2>
<div class="level2">

<p>
odhcpd uses a UCI configuration file in <code>/etc/config/dhcp</code> for configuration and may also receive information from ubus.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configuration&quot;,&quot;hid&quot;:&quot;configuration&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:8,&quot;range&quot;:&quot;2209-2358&quot;} -->
<h3 class="sectionedit9" id="odhcpd_section">odhcpd section</h3>
<div class="level3">

<p>
Configuration for the odhcp daemon.
</p>
<div class="table sectionedit10"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign"> Name              </th><th class="col1 leftalign"> Type     </th><th class="col2 leftalign"> Default  </th><th class="col3 leftalign"> Description                                                                                     </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> <code>legacy</code>        </td><td class="col1 leftalign"> boolean  </td><td class="col2 leftalign"> <code>0</code>    </td><td class="col3 leftalign"> Enable DHCPv4 if the &#039;dhcp&#039; section contains a <code>start</code> option, but no <code>dhcpv4</code> option set.  </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <code>maindhcp</code>      </td><td class="col1 leftalign"> boolean  </td><td class="col2 leftalign"> <code>0</code>    </td><td class="col3 leftalign"> Use odhcpd as the main DHCPv4 service.                                                          </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <code>leasefile</code>     </td><td class="col1 leftalign"> string   </td><td class="col2 leftalign">          </td><td class="col3 leftalign"> Location of the lease/hostfile for DHCPv4 and DHCPv6.                                           </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <code>leasetrigger</code>  </td><td class="col1 leftalign"> string   </td><td class="col2 leftalign">          </td><td class="col3 leftalign"> Location of the lease trigger script.                                                           </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <code>loglevel</code>      </td><td class="col1 leftalign"> integer  </td><td class="col2 leftalign"> <code>6</code>    </td><td class="col3 leftalign"> Syslog level priority (0-7). 0=emer, 1=alert, 2=crit, 3=err, 4=warn, 5=notice, 6=info, 7=debug  </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:10,&quot;range&quot;:&quot;2421-3272&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;odhcpd section&quot;,&quot;hid&quot;:&quot;odhcpd_section&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:9,&quot;range&quot;:&quot;2359-3273&quot;} -->
<h3 class="sectionedit11" id="dhcp_section">dhcp section</h3>
<div class="level3">

<p>
Configuration for DHCPv4, DHCPv6, RA and NDP services.
</p>
<div class="sortable"><div class="table sectionedit12"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign"> Name                     </th><th class="col1 leftalign"> Type     </th><th class="col2 leftalign"> Required  </th><th class="col3 leftalign"> Default                      </th><th class="col4 leftalign"> Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> <code>interface</code>            </td><td class="col1 leftalign"> string   </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>&lt;name of UCI section&gt;</code>    </td><td class="col4 leftalign"> Logical OpenWrt interface.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <code>ifname</code>               </td><td class="col1 leftalign"> string   </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>&lt;resolved from logical&gt;</code>  </td><td class="col4 leftalign"> Physical network interface.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <code>networkid</code>            </td><td class="col1 leftalign"> string   </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>&lt;same as ifname&gt;</code>         </td><td class="col4 leftalign"> Alias of <code>ifname</code> for compatibility.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <code>ignore</code>               </td><td class="col1 leftalign"> boolean  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>0</code>                        </td><td class="col4 leftalign"> Do not serve this interface unless overridden by <code>ra</code>, <code>ndp</code>, <code>dhcpv4</code> or <code>dhcpv6</code> options.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <code>master</code>               </td><td class="col1 leftalign"> boolean  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>0</code>                        </td><td class="col4 leftalign"> Is a master interface for relaying.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <code>ra</code>                   </td><td class="col1 leftalign"> string   </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>disabled</code>                 </td><td class="col4 leftalign"> Router Advert service. Set to <code>disabled</code>, <code>server</code>, <code>relay</code> or <code>hybrid</code>.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <code>dhcpv6</code>               </td><td class="col1 leftalign"> string   </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>disabled</code>                 </td><td class="col4 leftalign"> DHCPv6 service. Set to <code>disabled</code>, <code>server</code>, <code>relay</code> or <code>hybrid</code>.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> <code>dhcpv4</code>               </td><td class="col1 leftalign"> string   </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>disabled</code>                 </td><td class="col4 leftalign"> DHCPv4 service. Set to <code>disabled</code> or <code>server</code>.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> <code>ndp</code>                  </td><td class="col1 leftalign"> string   </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>disabled</code>                 </td><td class="col4 leftalign"> Neighbor Discovery Proxy. Set to <code>disabled</code>, <code>relay</code> or <code>hybrid</code>.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> <code>dynamicdhcp</code>          </td><td class="col1 leftalign"> boolean  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>1</code>                        </td><td class="col4 leftalign"> Leases for DHCPv4 and DHCPv6 are created dynamically.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign"> <code>dhcpv4_forcereconf</code>   </td><td class="col1 leftalign"> boolean  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>0</code>                        </td><td class="col4 leftalign"> Force reconfiguration by sending force renew message even if the client did not include the force renew nonce capability option (<a href="https://datatracker.ietf.org/doc/html/rfc6704" class="urlextern" title="https://datatracker.ietf.org/doc/html/rfc6704" rel="ugc nofollow">RFC 6704</a>).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         </td>
	</tr>
	<tr class="row12">
		<td class="col0 leftalign"> <code>dhcpv6_assignall</code>     </td><td class="col1 leftalign"> boolean  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>1</code>                        </td><td class="col4 leftalign"> Assign all viable DHCPv6 addresses in statefull mode. If disabled only the DHCPv6 address having the longest preferred lifetime is assigned.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </td>
	</tr>
	<tr class="row13">
		<td class="col0 leftalign"> <code>dhcpv6_hostidlength</code>  </td><td class="col1 leftalign"> integer  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>12</code>                       </td><td class="col4 leftalign"> Host ID length of dynamically created leases, allowed values: 12 - 64 (bits).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         </td>
	</tr>
	<tr class="row14">
		<td class="col0 leftalign"> <code>dhcpv6_na</code>            </td><td class="col1 leftalign"> boolean  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>1</code>                        </td><td class="col4 leftalign"> DHCPv6 stateful addressing hands out IA_NA - Internet Address - Network Address.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </td>
	</tr>
	<tr class="row15">
		<td class="col0 leftalign"> <code>dhcpv6_pd</code>            </td><td class="col1 leftalign"> boolean  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>1</code>                        </td><td class="col4 leftalign"> DHCPv6 stateful addressing hands out IA_PD - Internet Address - Prefix Delegation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </td>
	</tr>
	<tr class="row16">
		<td class="col0 leftalign"> <code>router</code>               </td><td class="col1 leftalign"> list     </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>&lt;local address&gt;</code>          </td><td class="col4 leftalign"> Routers to announce accepts <abbr title="Internet Protocol version 4">IPv4</abbr> only.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </td>
	</tr>
	<tr class="row17">
		<td class="col0 leftalign"> <code>dns</code>                  </td><td class="col1 leftalign"> list     </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>&lt;local address&gt;</code>          </td><td class="col4 leftalign"> <abbr title="Domain Name System">DNS</abbr> servers to announce on the network. <abbr title="Internet Protocol version 4">IPv4</abbr> and <abbr title="Internet Protocol version 6">IPv6</abbr> addresses are accepted.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         </td>
	</tr>
	<tr class="row18">
		<td class="col0 leftalign"> <code>dns_service</code>          </td><td class="col1 leftalign"> boolean  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>1</code>                        </td><td class="col4 leftalign"> Announce the address of interface as <abbr title="Domain Name System">DNS</abbr> service if the list of <abbr title="Domain Name System">DNS</abbr> is empty.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         </td>
	</tr>
	<tr class="row19">
		<td class="col0 leftalign"> <code>domain</code>               </td><td class="col1 leftalign"> list     </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>&lt;local search domain&gt;</code>    </td><td class="col4 leftalign"> Search domains to announce on the network.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </td>
	</tr>
	<tr class="row20">
		<td class="col0 leftalign"> <code>leasetime</code>            </td><td class="col1 leftalign"> string   </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>12h</code>                      </td><td class="col4 leftalign"> DHCPv4 address leasetime                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              </td>
	</tr>
	<tr class="row21">
		<td class="col0 leftalign"> <code>start</code>                </td><td class="col1 leftalign"> integer  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>100</code>                      </td><td class="col4 leftalign"> Starting address of the DHCPv4 pool.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  </td>
	</tr>
	<tr class="row22">
		<td class="col0 leftalign"> <code>limit</code>                </td><td class="col1 leftalign"> integer  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>150</code>                      </td><td class="col4 leftalign"> Number of addresses in the DHCPv4 pool.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
	</tr>
	<tr class="row23">
		<td class="col0 leftalign"> <code>preferred_lifetime</code>   </td><td class="col1 leftalign"> string   </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>12h</code>                      </td><td class="col4 leftalign"> Value for the preferred lifetime for a prefix.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </td>
	</tr>
	<tr class="row24">
		<td class="col0 leftalign"> <code>ra_default</code>           </td><td class="col1 leftalign"> integer  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>0</code>                        </td><td class="col4 leftalign"> Override default route. Set to <code>0</code> (default), <code>1</code> (ignore, no public address) or <code>2</code> (ignore all).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              </td>
	</tr>
	<tr class="row25">
		<td class="col0 leftalign"> <code>ra_flags</code>             </td><td class="col1 leftalign"> list     </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>other-config</code>             </td><td class="col4 leftalign"> List of RA flags to be advertised in RA messages:<br/>
<code>managed-config</code> - get address information from DHCPv6 server. If this flag is set, <code>other-config</code> flag is redundant.<br/>
<code>other-config</code> - get other configuration from DHCPv6 server (such as <abbr title="Domain Name System">DNS</abbr> servers). See <a href="https://datatracker.ietf.org/doc/html/rfc4861#section-4.2" class="urlextern" title="https://datatracker.ietf.org/doc/html/rfc4861#section-4.2" rel="ugc nofollow">here</a> for details.<br/>
<code>home-agent</code> - see <a href="https://datatracker.ietf.org/doc/html/rfc3775#section-7.1" class="urlextern" title="https://datatracker.ietf.org/doc/html/rfc3775#section-7.1" rel="ugc nofollow">here</a> for details.<br/>
<code>none</code>.<br/>
OpenWrt since version 21.02 configures <code>managed-config</code> and <code>other-config</code> <a href="https://github.com/openwrt/openwrt/blob/openwrt-21.02/package/network/services/odhcpd/files/odhcpd.defaults#L49-L50" class="urlextern" title="https://github.com/openwrt/openwrt/blob/openwrt-21.02/package/network/services/odhcpd/files/odhcpd.defaults#L49-L50" rel="ugc nofollow">by default</a>.  </td>
	</tr>
	<tr class="row26">
		<td class="col0 leftalign"> <code>ra_slaac</code>             </td><td class="col1 leftalign"> boolean  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>1</code>                        </td><td class="col4 leftalign"> Announce SLAAC for a prefix (that is, set the A flag in RA messages).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 </td>
	</tr>
	<tr class="row27">
		<td class="col0 leftalign"> <code>ra_management</code>        </td><td class="col1 leftalign"> integer  </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> <code>1</code>                        </td><td class="col4 leftalign"> <img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> This option is <a href="https://git.openwrt.org/?p=project/odhcpd.git;a=commit;h=e73bf11dee1073aaaddc0dc67ca8c7d75ae3c6ad" class="interwiki iw_commit" title="https://git.openwrt.org/?p=project/odhcpd.git;a=commit;h=e73bf11dee1073aaaddc0dc67ca8c7d75ae3c6ad">deprecated</a>. Use <code>ra_flags</code> and <code>ra_slaac</code> options instead. <br/>
RA management mode: no M-Flag but A-Flag and ra_slaac is ture (<code>0</code>) , both M and A flags and ra_slaac is ture(<code>1</code>), both M and A flags and ra_slaac is false (<code>2</code>)                                                                                                                                                                                                                                                                                                                                                                                                       </td>
	</tr>
	<tr class="row28">
		<td class="col0 leftalign"> <code>ra_offlink</code>           </td><td class="col1 leftalign"> boolean  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>0</code>                        </td><td class="col4 leftalign"> Announce prefixes off-link.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </td>
	</tr>
	<tr class="row29">
		<td class="col0 leftalign"> <code>ra_preference</code>        </td><td class="col1 leftalign"> string   </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>medium</code>                   </td><td class="col4 leftalign"> Route preference <code>medium</code>, <code>high</code> or <code>low</code>.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     </td>
	</tr>
	<tr class="row30">
		<td class="col0 leftalign"> <code>ra_maxinterval</code>       </td><td class="col1 leftalign"> integer  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>600</code>                      </td><td class="col4 leftalign"> Maximum time allowed between sending unsolicited Router Advertisements (RA).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </td>
	</tr>
	<tr class="row31">
		<td class="col0 leftalign"> <code>ra_mininterval</code>       </td><td class="col1 leftalign"> integer  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>200</code>                      </td><td class="col4 leftalign"> Minimum time allowed between sending unsolicited Router Advertisements (RA).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </td>
	</tr>
	<tr class="row32">
		<td class="col0 leftalign"> <code>ra_lifetime</code>          </td><td class="col1 leftalign"> integer  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>1800</code>                     </td><td class="col4 leftalign"> Router Lifetime published in Router Advertisement (RA) messages.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </td>
	</tr>
	<tr class="row33">
		<td class="col0 leftalign"> <code>ra_useleasetime</code>      </td><td class="col1 leftalign"> boolean  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>0</code>                        </td><td class="col4 leftalign"> If set, the configured DHCPv4 <code>leasetime</code> is used both as limit for the preferred and valid lifetime of an <abbr title="Internet Protocol version 6">IPv6</abbr> prefix.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             </td>
	</tr>
	<tr class="row34">
		<td class="col0 leftalign"> <code>ra_reachabletime</code>     </td><td class="col1 leftalign"> integer  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>0</code>                        </td><td class="col4 leftalign"> Reachable Time in milliseconds to be published in Router Advertisement (RA) messages&#039;.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </td>
	</tr>
	<tr class="row35">
		<td class="col0 leftalign"> <code>ra_retranstime</code>       </td><td class="col1 leftalign"> integer  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>0</code>                        </td><td class="col4 leftalign"> Retransmit Time in milliseconds to be published in Router Advertisment (RA) messages.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 </td>
	</tr>
	<tr class="row36">
		<td class="col0 leftalign"> <code>ra_hoplimit</code>          </td><td class="col1 leftalign"> integer  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>0</code>                        </td><td class="col4 leftalign"> The maximum hops to be published in Router Advertisement (RA) messages.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
	</tr>
	<tr class="row37">
		<td class="col0 leftalign"> <code>ra_mtu</code>               </td><td class="col1 leftalign"> integer  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>0</code>                        </td><td class="col4 leftalign"> The <abbr title="Maximum Transmission Unit">MTU</abbr> to be published in Router Advertisement (RA) messages.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </td>
	</tr>
	<tr class="row38">
		<td class="col0 leftalign"> <code>ra_dns</code>               </td><td class="col1 leftalign"> boolean  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>1</code>                        </td><td class="col4 leftalign"> Announce <abbr title="Domain Name System">DNS</abbr> configuration in RA messages (<a href="https://datatracker.ietf.org/doc/html/rfc8106" class="urlextern" title="https://datatracker.ietf.org/doc/html/rfc8106" rel="ugc nofollow">RFC 8106</a>).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
	</tr>
	<tr class="row39">
		<td class="col0 leftalign"> <code>ndproxy_routing</code>      </td><td class="col1 leftalign"> boolean  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>1</code>                        </td><td class="col4 leftalign"> Learn routes from NDP.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </td>
	</tr>
	<tr class="row40">
		<td class="col0 leftalign"> <code>ndproxy_slave</code>        </td><td class="col1 leftalign"> boolean  </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>0</code>                        </td><td class="col4 leftalign"> NDProxy external slave.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
	</tr>
	<tr class="row41">
		<td class="col0 leftalign"> <code>ndproxy_static</code>       </td><td class="col1 leftalign"> list     </td><td class="col2 leftalign">           </td><td class="col3 leftalign">                              </td><td class="col4 leftalign"> Static NDProxy prefixes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              </td>
	</tr>
	<tr class="row42">
		<td class="col0 leftalign"> <code>prefix_filter</code>        </td><td class="col1 leftalign"> string   </td><td class="col2 leftalign">           </td><td class="col3 leftalign"> <code>::/0</code>                     </td><td class="col4 leftalign"> Only advertise on-link prefixes within the provided <abbr title="Internet Protocol version 6">IPv6</abbr> prefix. Others are filtered out.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             </td>
	</tr>
	<tr class="row43">
		<td class="col0 leftalign"> <code>ntp</code>                  </td><td class="col1 leftalign"> list     </td><td class="col2 leftalign">           </td><td class="col3 leftalign">                              </td><td class="col4 leftalign"> DHCPv6 stateful option 56 to Announce <abbr title="Network Time Protocol">NTP</abbr> servers                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table1&quot;,&quot;secid&quot;:12,&quot;range&quot;:&quot;3364-36986&quot;} --></div>
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;dhcp section&quot;,&quot;hid&quot;:&quot;dhcp_section&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:11,&quot;range&quot;:&quot;3274-36999&quot;} -->
<h3 class="sectionedit13" id="host_section">host section</h3>
<div class="level3">

<p>
The <code>host</code> section is where static leases are defined.
</p>
<div class="table sectionedit14"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>ip</code> </td><td class="col1"> string </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> <abbr title="Internet Protocol">IP</abbr> address to lease </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>mac</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> MAC address </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>duid</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> DUID in base16 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>hostid</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> <abbr title="Internet Protocol version 6">IPv6</abbr> host identifier </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>name</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Hostname </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>leasetime</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> DHCPv4/v6 leasetime </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table2&quot;,&quot;secid&quot;:14,&quot;range&quot;:&quot;37081-37485&quot;} -->
<p>
Example <code>hostid=&#039;105ee0badc0de</code>&#039; ⇒ <abbr title="Internet Protocol version 6">IPv6</abbr> &#039;::1:5ee:bad:c0de&#039;
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;host section&quot;,&quot;hid&quot;:&quot;host_section&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:13,&quot;range&quot;:&quot;37000-37549&quot;} -->
<h2 class="sectionedit15" id="ubus_api">ubus API</h2>
<div class="level2">

<p>
Replace dnsmasq with odhcpd to access <abbr title="Internet Protocol version 4">IPv4</abbr> leases.
</p>
<pre class="code bash">ubus <span class="re5">-v</span> list dhcp
ubus call dhcp ipv4leases
ubus call dhcp ipv6leases</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;ubus API&quot;,&quot;hid&quot;:&quot;ubus_api&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:15,&quot;range&quot;:&quot;37550-37713&quot;} -->
<h2 class="sectionedit16" id="compiling">Compiling</h2>
<div class="level2">

<p>
odhcpd uses cmake.
</p>
<pre class="code bash"><span class="co0"># Prepare</span>
cmake .
&nbsp;
<span class="co0"># Build/install</span>
<span class="kw2">make</span>
<span class="kw2">make</span> <span class="kw2">install</span>
&nbsp;
<span class="co0"># Build DEB/RPM packages</span>
<span class="kw2">make</span> package</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Compiling&quot;,&quot;hid&quot;:&quot;compiling&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:16,&quot;range&quot;:&quot;37714-&quot;} -->