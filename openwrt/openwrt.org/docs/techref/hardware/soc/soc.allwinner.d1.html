
<h1 class="sectionedit1" id="allwinner_d1_sun20i">Allwinner D1 (sun20i)</h1>
<div class="level1">

<p>
RISC-V is a free, open, extensible instruction set architecture (ISA), the specification is now maintained by the nonprofit RISC-V Foundation.
</p>

<p>
Allwinner D1 (sun20i, also known as D1-H) is the first SoC of Allwinner which is based on a RISC-V core. D1 features single RV64GCV core XuanTie C906 from T-Head Semiconductor (subsidiary of Alibaba) and an additional 600 <abbr title="Megahertz">MHz</abbr> Tensilica HiFi4 DSP.
</p>

<p>
Peripherals and devices mostly match the sunxi H3 board&#039;s ones, as the same <abbr title="Internet Protocol">IP</abbr> blocks are being used. Supporting them is generally adding new compatibles into the drivers and a few quirks.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Allwinner D1 (sun20i)&quot;,&quot;hid&quot;:&quot;allwinner_d1_sun20i&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-619&quot;} -->
<h3 class="sectionedit2" id="status">Status</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Port status: <a href="https://github.com/openwrt/openwrt/pull/12845" class="urlextern" title="https://github.com/openwrt/openwrt/pull/12845" rel="ugc nofollow">https://github.com/openwrt/openwrt/pull/12845</a></div>
</li>
<li class="level1"><div class="li"> Official doc site: <a href="https://d1.docs.aw-ol.com/" class="urlextern" title="https://d1.docs.aw-ol.com/" rel="ugc nofollow">https://d1.docs.aw-ol.com/</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Status&quot;,&quot;hid&quot;:&quot;status&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;620-753&quot;} -->
<h3 class="sectionedit3" id="hardware_highlights">Hardware Highlights</h3>
<div class="level3">
<div class="table sectionedit4"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Model </th><th class="col1"> RAM </th><th class="col2"> <a href="/docs/techref/flash.layout" class="wikilink1" title="docs:techref:flash.layout" data-wiki-id="docs:techref:flash.layout">Storage</a> </th><th class="col3"> Network </th><th class="col4"> USB </th><th class="col5"> <a href="/docs/techref/hardware/port.serial" class="wikilink1" title="docs:techref:hardware:port.serial" data-wiki-id="docs:techref:hardware:port.serial">Serial</a> </th><th class="col6"> <a href="/docs/techref/hardware/port.jtag" class="wikilink1" title="docs:techref:hardware:port.jtag" data-wiki-id="docs:techref:hardware:port.jtag">JTAG</a> </th><th class="col7"> <a href="https://en.wikipedia.org/wiki/UEXT" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/UEXT">UEXT</a> </th><th class="col8"> Other </th><th class="col9"> linux-sunxi page </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <a href="/toh/allwinner/nezha" class="wikilink2" title="toh:allwinner:nezha" rel="nofollow" data-wiki-id="toh:allwinner:nezha">Nezha D1</a> </td><td class="col1"> 512MiB/1GiB/2GiB DDR3 </td><td class="col2"> μSD, 256Mb NAND </td><td class="col3"> Gigabit Ethernet </td><td class="col4"> 1x USB2 </td><td class="col5"> yes </td><td class="col6"> n/a </td><td class="col7"> n/a </td><td class="col8"> HDMI, audio, CSI </td><td class="col9"> <a href="https://linux-sunxi.org/Allwinner_Nezha" class="urlextern" title="https://linux-sunxi.org/Allwinner_Nezha" rel="ugc nofollow">Page</a> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <a href="/toh/dongshanpi/nezha_stu" class="wikilink2" title="toh:dongshanpi:nezha_stu" rel="nofollow" data-wiki-id="toh:dongshanpi:nezha_stu">DongshanPi Nezha STU</a> </td><td class="col1"> 512MiB </td><td class="col2"> μSD </td><td class="col3"> Gigabit Ethernet </td><td class="col4"> - </td><td class="col5"> yes </td><td class="col6"> n/a </td><td class="col7"> n/a </td><td class="col8"> HDMI, 2&times;20 GPIO </td><td class="col9"> <a href="https://linux-sunxi.org/DongshanPi_Nezha_STU" class="urlextern" title="https://linux-sunxi.org/DongshanPi_Nezha_STU" rel="ugc nofollow">Page</a> </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <a href="/toh/mangopi/mq_pro" class="wikilink2" title="toh:mangopi:mq_pro" rel="nofollow" data-wiki-id="toh:mangopi:mq_pro">MangoPi MQ-Pro</a> </td><td class="col1"> 512MiB/1GiB </td><td class="col2"> μSD, optional SPI flash </td><td class="col3"> RTL8723 </td><td class="col4"> - </td><td class="col5"> yes </td><td class="col6"> n/a </td><td class="col7"> n/a </td><td class="col8"> HDMI, I2S, additional dock </td><td class="col9"> <a href="https://linux-sunxi.org/MangoPi_MQ-Pro" class="urlextern" title="https://linux-sunxi.org/MangoPi_MQ-Pro" rel="ugc nofollow">Page</a> </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <a href="/toh/sipeed/licheepi_rv" class="wikilink2" title="toh:sipeed:licheepi_rv" rel="nofollow" data-wiki-id="toh:sipeed:licheepi_rv">Sipeed LicheePi RV</a> </td><td class="col1"> 512MiB </td><td class="col2"> μSD </td><td class="col3"> RTL8723 </td><td class="col4"> - </td><td class="col5"> yes </td><td class="col6"> n/a </td><td class="col7"> n/a </td><td class="col8"> HDMI, additional dock </td><td class="col9"> <a href="https://linux-sunxi.org/Sipeed_Lichee_RV" class="urlextern" title="https://linux-sunxi.org/Sipeed_Lichee_RV" rel="ugc nofollow">Page</a> </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;785-1737&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Hardware Highlights&quot;,&quot;hid&quot;:&quot;hardware_highlights&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;754-1738&quot;} -->
<h2 class="sectionedit5" id="installing_openwrt">Installing OpenWrt</h2>
<div class="level2">

<p>
Standard SD-card installation via dd-ing the generated image to an SD-card of at least 256Mb.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Installing OpenWrt&quot;,&quot;hid&quot;:&quot;installing_openwrt&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;1739-1865&quot;} -->
<h2 class="sectionedit6" id="upgrading_openwrt">Upgrading OpenWrt</h2>
<div class="level2">

<p>
→<a href="/docs/guide-user/installation/generic.sysupgrade" class="wikilink1" title="docs:guide-user:installation:generic.sysupgrade" data-wiki-id="docs:guide-user:installation:generic.sysupgrade">generic.sysupgrade</a>
</p>

<p>
sysupgrade works out of the box, using (at least) the ext4-sdcard.img.gz files.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Upgrading OpenWrt&quot;,&quot;hid&quot;:&quot;upgrading_openwrt&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;1866-2032&quot;} -->
<h3 class="sectionedit7" id="pre-built_release_and_snapshot_images">Pre-built release and snapshot images</h3>
<div class="level3">
<p><a class="folder" href="#folded_8951d28375b7dae2f5b373537ee6db84_1">OpenWrt firmware downloads for d1 </a></p><div class="folded hidden" id="folded_8951d28375b7dae2f5b373537ee6db84_1">
<p>
<!-- ToH: {
  "source": "json",
  "dom": "t",
  "paging": false,
  "shownColumns": ["brand", "model", "version", "supportedcurrentrel", "unsupported_functions", "cpu", "target", "subtarget", "firmwareopenwrtinstallurl", "firmwareopenwrtsnapshotinstallurl", "deviceid"],
  "filterColumns": {"target": "^d1$"}
} -->
</p>
</div>
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Pre-built release and snapshot images&quot;,&quot;hid&quot;:&quot;pre-built_release_and_snapshot_images&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;2033-2442&quot;} -->
<h2 class="sectionedit8" id="boot_process">Boot process</h2>
<div class="level2">

<p>
(Credits goes to the <a href="https://linux-sunxi.org/Allwinner_Nezha" class="urlextern" title="https://linux-sunxi.org/Allwinner_Nezha" rel="ugc nofollow">https://linux-sunxi.org/Allwinner_Nezha</a> page)
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Boot process&quot;,&quot;hid&quot;:&quot;boot_process&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:8,&quot;range&quot;:&quot;2443-2536&quot;} -->
<h3 class="sectionedit9" id="u-boot">U-Boot</h3>
<div class="level3">

<p>
Boot firmware on the D1 consists of three parts, which largely correspond to the components used by 64-bit ARM SoCs:
</p>

<p>
U-Boot SPL (Secondary Program Loader) which is responsible for initializing DRAM and loading further firmware from storage.
OpenSBI, which runs in machine mode and provides a standard “SBI” interface to less privileged modes. This is similar to how TF-A runs in EL3 and provides PSCI on 64-bit ARM.
U-Boot proper, which initializes additional hardware and loads Linux from storage or the network.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;U-Boot&quot;,&quot;hid&quot;:&quot;u-boot&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:9,&quot;range&quot;:&quot;2537-3070&quot;} -->
<h3 class="sectionedit10" id="opensbi">OpenSBI</h3>
<div class="level3">

<p>
Mainline OpenSBI fully supports the C906 CPU and the Allwinner D1 SoC out of the box since version 1.1. You should use upstream OpenSBI, not any fork.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;OpenSBI&quot;,&quot;hid&quot;:&quot;opensbi&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:10,&quot;range&quot;:&quot;3071-3241&quot;} -->
<h3 class="sectionedit11" id="mainline_u-boot">Mainline U-Boot</h3>
<div class="level3">

<p>
Mainline U-Boot support is mostly complete, but is not merged yet. Booting Linux from the network, USB, and an SD card works. Some refactoring of the various sunxi device drivers is still needed before any RISC-V sunxi platforms can be upstreamed. Full U-Boot SPL support is available, so using the BSP boot0 or a TOC1 image is no longer necessary.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Mainline U-Boot&quot;,&quot;hid&quot;:&quot;mainline_u-boot&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:11,&quot;range&quot;:&quot;3242-&quot;} -->