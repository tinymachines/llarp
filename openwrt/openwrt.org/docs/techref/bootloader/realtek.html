
<h1 class="sectionedit1" id="realtek">RealTek</h1>
<div class="level1">

<p>
The RealTek bootloader was written by RealTek and is used only with their SoCs (RTL819x, RTL8881 etc.). Its source code can be found in the Realtek SDK.
</p>

<p>
Depending on the configuration, the bootloader can support at least <abbr title="Trivial File Transfer Protocol">TFTP</abbr> and optionally <abbr title="Hypertext Transfer Protocol">HTTP</abbr> and <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>.
</p>
<pre class="code">
Booting...

@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@
@ chip__no chip__id mfr___id dev___id cap___id size_sft dev_size chipSize
@ 0000000h 0c84018h 00000c8h 0000040h 0000018h 0000000h 0000018h 1000000h
@ blk_size blk__cnt sec_size sec__cnt pageSize page_cnt chip_clk chipName
@ 0010000h 0000100h 0001000h 0001000h 0000100h 0000010h 000002dh GD25Q128
@ 
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 
---RealTek(RTL8196D)at 2013.12.26-08:32+0800 v1.1 [16bit](700MHz)
no rootfs signature at 000E0000!
no rootfs signature at 000F0000!
no rootfs signature at 00130000!
no rootfs signature at 000E1000!
no rootfs signature at 000E2000!
...
[skipped]
...
no rootfs signature at 0015E000!
no rootfs signature at 0015F000!
P0phymode=03, embedded phy

---Ethernet init Okay!

&lt;RealTek&gt;</pre>

<p>
Short help command:
</p>
<pre class="code">&lt;RealTek&gt;?

----------------- COMMAND MODE HELP ------------------

HELP (?)    : Print this help message
DB &lt;Address&gt; &lt;Len&gt;
DW &lt;Address&gt; &lt;Len&gt;
EB &lt;Address&gt; &lt;Value1&gt; &lt;Value2&gt;...
EW &lt;Address&gt; &lt;Value1&gt; &lt;Value2&gt;...
CMP: CMP &lt;dst&gt;&lt;src&gt;&lt;length&gt;
IPCONFIG:&lt;TargetAddress&gt;
AUTOBURN: 0/1
LOADADDR: &lt;Load Address&gt;
J: Jump to &lt;TargetAddress&gt;
FLR: FLR &lt;dst&gt;&lt;src&gt;&lt;length&gt;
FLW &lt;dst_ROM_offset&gt;&lt;src_RAM_addr&gt;&lt;length_Byte&gt; &lt;SPI cnt#&gt;: Write offset-data to SPI from RAM
MDIOR:  MDIOR &lt;phyid&gt; &lt;reg&gt;
MDIOW:  MDIOW &lt;phyid&gt; &lt;reg&gt; &lt;data&gt;
PHYR: PHYR &lt;PHYID&gt;&lt;reg&gt;
PHYW: PHYW &lt;PHYID&gt;&lt;reg&gt;&lt;data&gt;
D8 &lt;Address&gt;
E8 &lt;Address&gt; &lt;Value&gt;</pre>

<p>
DW - Hex dump memory in 32bit words
Address: Start address in hex ; Len: Words to dump in decimal (rounded up to nearest 4)
</p>
<pre class="code">&lt;RealTek&gt;DW 80000000 8
80000000: DEADBEEF 13371337 00C0FFEE D15EA5ED
80000010: 00000000 00000000 00000000 00000000
&lt;RealTek&gt;</pre>

<p>
EW - Write hex values to memory in 32bit words
Address: Start address in hex ; Values: space separated hex words (Unlimited?)
</p>
<pre class="code">&lt;RealTek&gt;EW 80000000 deadbeef 13371337 c0ffee d15ea5ed
&lt;RealTek&gt;</pre>

<p>
DB - Hex dump memory in bytes
Address: Start address in hex ; Len: Bytes to dump in decimal
</p>
<pre class="code">&lt;RealTek&gt;DB 80000000 32
[Addr] .0 .1 .2 .3 .4 .5 .6 .7 .8 .9 .A .B .C .D .E .F
80000000: de ad be ef 13 37 13 37 00 c0 ff ee d1 5e a5 ed .....7.7.....^..
80000010: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ................
&lt;RealTek&gt;</pre>

<p>
EB - Write hex values to memory in bytes
Address: Start address in hex ; Values: space separated hex words (Unlimited?)
</p>
<pre class="code">&lt;RealTek&gt;EB 80000000 00 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f
&lt;RealTek&gt;</pre>

<p>
CMP - Compare memory in 32bit chunks
dst: First address in hex ; src: Second address in hex ; length: Size in bytes (rounded to nearest word)
</p>
<pre class="code">&lt;RealTek&gt;CMP 80000000 80000010 4
0th data(deadbeef 00000000) error
&lt;RealTek&gt;CMP 80000010 80000014 4
No error found
&lt;RealTek&gt;</pre>

<p>
IPCONFIG - Get/Set the <abbr title="Internet Protocol">IP</abbr> address the bootloader listens for <abbr title="Trivial File Transfer Protocol">TFTP</abbr> on (default is 192.168.1.6)
ip: The <abbr title="Internet Protocol">IP</abbr> address to set
</p>
<pre class="code">&lt;RealTek&gt;IPCONFIG
Target Address=192.168.1.6
&lt;RealTek&gt;IPCONFIG 10.0.0.1
Now your Target IP is 10.0.0.1
&lt;RealTek&gt;</pre>

<p>
AUTOBURN - Should the bootloader automatically burn the received image from <abbr title="Trivial File Transfer Protocol">TFTP</abbr> into flash?
0 = no, 1 = yes
</p>
<pre class="code">&lt;RealTek&gt;AUTOBURN 0
AutoBurning=0
&lt;RealTek&gt;</pre>

<p>
LOADADDR - Set the address <abbr title="Trivial File Transfer Protocol">TFTP</abbr> loads data to
address: Address in hex
</p>
<pre class="code">&lt;RealTek&gt;LOADADDR 80000000
Set TFTP Load Addr 0x80000000
&lt;RealTek&gt;</pre>

<p>
J - Jump to an address
address: Address in hex
</p>
<pre class="code">&lt;RealTek&gt;J 80500000
---Jump to address=80500000
Decompressing kernel... done!
Starting kernel at 80000000...</pre>

<p>
FLR - Read from Flash into RAM
dst: RAM address in hex ; src: Flash address in hex ; length: Byte count in hex(!!!)
</p>
<pre class="code">&lt;RealTek&gt;FLR 80000000 100000 f
Flash read from 00100000 to 80000000 with 0000000F bytes         ?
(Y)es , (N)o ? --&gt; y
Flash Read Successed!</pre>

<p>
The bootloader accepts data over <abbr title="Trivial File Transfer Protocol">TFTP</abbr>. Using the built-in Windows <abbr title="Trivial File Transfer Protocol">TFTP</abbr> command it&#039;s possible to upload a kernel:
</p>
<pre class="code">X:\&gt;tftp -i 192.168.1.6 put testkernel.bin
Transfer successful: 1048576 bytes in 2 second(s), 514296 bytes/s</pre>

<p>
On the target you&#039;ll see:
</p>
<pre class="code">&lt;RealTek&gt;
**TFTP Client Upload, File Name: testkernel.bin
- (Spinning progress indicator)
**TFTP Client Upload File Size = 00100000 Bytes at 80500000
Success!</pre>

</div>
