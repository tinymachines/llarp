
<h1 class="sectionedit1" id="luci-app-statistics">luci-app-statistics</h1>
<div class="level1">

<p>
OpenWrt includes real-time statistics however this does not store historical data for view by default. The luci-app-statistics package, based on collectd and rrdtool, will display historical graphs including ping, interface bandwidth utilization, cpu load, ram, disk, uptime, etc. 
</p>

<p>
For more info see <a href="/docs/guide-user/perf_and_log/statistical.data.overview" class="wikilink1" title="docs:guide-user:perf_and_log:statistical.data.overview" data-wiki-id="docs:guide-user:perf_and_log:statistical.data.overview">statistical.data.overview</a> and collectd <a href="https://advanxer.com/2013/02/openwrt-monitoring-using-collectd/" class="urlextern" title="https://advanxer.com/2013/02/openwrt-monitoring-using-collectd/" rel="ugc nofollow">blog post</a>.
</p>

<p>
For other Bandwidth Monitoring tools, see <a href="/docs/guide-user/services/network_monitoring/bwmon" class="wikilink1" title="docs:guide-user:services:network_monitoring:bwmon" data-wiki-id="docs:guide-user:services:network_monitoring:bwmon">bwmon</a> page.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;luci-app-statistics&quot;,&quot;hid&quot;:&quot;luci-app-statistics&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-598&quot;} -->
<h2 class="sectionedit2" id="installation">Installation</h2>
<div class="level2">

<p>
1. Install package <code>luci-app-statistics</code>. If using <abbr title="Secure Shell">SSH</abbr> run: opkg update &amp;&amp; opkg install luci-app-statistics.
</p>

<p>
2. Install desired plugins:
</p>

<p>
Several are suggested below, but many more exist. To see all the available collectd-modules, run: <code>opkg list | grep collectd-mod</code>
</p>
<pre class="code">opkg install collectd-mod-ethstat collectd-mod-ipstatistics collectd-mod-irq collectd-mod-load collectd-mod-ping collectd-mod-powerdns collectd-mod-sqm collectd-mod-thermal collectd-mod-wireless</pre>

<p>
3. Enable daemons
</p>
<pre class="code">/etc/init.d/collectd enable</pre>

<p>
Note that <code>/tmp/rrd</code>, the directory that keeps statistics data, resides in RAM and consequently will be lost after a reboot. To prevent this, you can configure a persistent storage location or configure backups - see below.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Installation&quot;,&quot;hid&quot;:&quot;installation&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;599-1371&quot;} -->
<h2 class="sectionedit3" id="configuration">Configuration</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configuration&quot;,&quot;hid&quot;:&quot;configuration&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;1372-1398&quot;} -->
<h3 class="sectionedit4" id="uci">UCI</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> View the config with <code>uci export luci_statistics</code> </div>
</li>
<li class="level1"><div class="li"> Edit <code>/etc/config/luci_statistics</code> to make changes</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;UCI&quot;,&quot;hid&quot;:&quot;uci&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;1399-1527&quot;} -->
<h3 class="sectionedit5" id="luci">LuCI</h3>
<div class="level3">

<p>
After installing the packages, a new menu appears in Statistics â†’ Setup. All the installed collectd-modules will show here, but only some are enabled by default.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;LuCI&quot;,&quot;hid&quot;:&quot;luci&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;1528-1707&quot;} -->
<h3 class="sectionedit6" id="suggested_settings">Suggested settings</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <strong>General Plugins tab:</strong> Review the sub-tabs to choose which statistics to monitor</div>
</li>
<li class="level1"><div class="li"> <strong>Network Plugins tab:</strong> Select which interfaces to monitor</div>
</li>
<li class="level1 node"><div class="li"> <strong>Output Plugins tab:</strong> </div>
<ul>
<li class="level2 node"><div class="li"> <em class="u">RRDtool sub-tab:</em> To protect flash-memory from wearing out, the default <em>Storage directory</em> is <code>/tmp/rrd</code>. All statistics data will be lost on reboot. Alternatives:</div>
<ul>
<li class="level3"><div class="li"> Configure backups for sysupgrade and orderly shutdown/reboot, by checking the <em>Backup RRD statistics</em> box, or by setting the UCI configuration variable: <code>uci set luci_statistics.collectd_rrdtool.backup=1</code>.  The statistics are saved to flash-memory only at shutdown or sysupgrade time or when generating a backup archive.   If your router crashes or suffers a power failure or other disorderly restart, the statistics history from the previous orderly shutdown will be restored during reboot.  To create backups more frequently than shutdown/reboot/sysupgrade, create a cron job to run <code>service luci_statistics backup</code>.  (Full details of the mechanism are explained at <a href="https://github.com/openwrt/luci/tree/master/applications/luci-app-statistics#backups" class="urlextern" title="https://github.com/openwrt/luci/tree/master/applications/luci-app-statistics#backups" rel="ugc nofollow">https://github.com/openwrt/luci/tree/master/applications/luci-app-statistics#backups</a>).</div>
</li>
<li class="level3"><div class="li"> Consider having an <a href="https://github.com/sqrwf/openwrt-rrdbackup/" class="urlextern" title="https://github.com/sqrwf/openwrt-rrdbackup/" rel="ugc nofollow">automatic backup-restore script that runs when rebooting</a>).</div>
</li>
<li class="level3"><div class="li"> If you have a USB drive connected, set the <em>Storage directory</em> to a directory on that drive. Since pages are rendered by user &#039;nobody&#039;, the *.rrd files, the storage directory and all its parent directories need to be world readable. See <a href="https://forum.openwrt.org/t/trouble-with-luci-app-statistics-using-storage-directory-on-usb-drive/10683/4" class="urlextern" title="https://forum.openwrt.org/t/trouble-with-luci-app-statistics-using-storage-directory-on-usb-drive/10683/4" rel="ugc nofollow">https://forum.openwrt.org/t/trouble-with-luci-app-statistics-using-storage-directory-on-usb-drive/10683/4</a>.</div>
</li>
<li class="level3"><div class="li"> Or use the <em>Network sub-tab</em> to send the statistics to another router/device that&#039;s acting as a collectd network listener.</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> <em class="u">Network sub-tab:</em> collectd can either listen for other router&#039;s data, or send its data to other routers. The data collection interval must be the same in both devices in order to work properly.</div>
</li>
</ul>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Suggested settings&quot;,&quot;hid&quot;:&quot;suggested_settings&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;1708-&quot;} -->