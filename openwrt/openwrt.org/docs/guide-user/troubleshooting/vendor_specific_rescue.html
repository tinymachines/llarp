
<h1 class="sectionedit1" id="rescue_from_failed_firmware_upgrade">Rescue from failed firmware upgrade</h1>
<div class="level1">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:2,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_info plugin_wrap">
<p>
If you can&#039;t reach the OpenWrt interface after installing packages, changing the password or the network configuration, try using <a href="/docs/guide-user/troubleshooting/failsafe_and_factory_reset" class="wikilink1" title="docs:guide-user:troubleshooting:failsafe_and_factory_reset" data-wiki-id="docs:guide-user:troubleshooting:failsafe_and_factory_reset">failsafe mode and factory reset</a> first.
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:3,&quot;range&quot;:&quot;0-&quot;} -->
<p>
Some device vendors provide built-in rescue functions in their device&#039;s flash ROM boot partition that remain there, even after a OpenWrt firmware upgrade, so a OpenWrt upgrade will not overwrite this rescue function.
</p>

<p>
These rescue functions can be used to recover a failed flash update (no matter if the failed flash was vendor firmware or OpenWrt) or recover from an otherwise dead device, as long as the device hardware and the rescue function is still intact. These rescue partitions do consume a tiny piece of the flash, but renders a device mostly unbrickable.
</p>

<p>
Unfortunately such rescue functions are not available from all vendors, sometimes not for all models from a vendor and the actual rescue process is mostly vendor specific.
This page is meant to collect the known rescue methods of different router vendors or router models.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Rescue from failed firmware upgrade&quot;,&quot;hid&quot;:&quot;rescue_from_failed_firmware_upgrade&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-1144&quot;} -->
<h2 class="sectionedit4" id="check_firstdevice-specific_firmware_recovery_procedures">Check first: Device-specific firmware recovery procedures</h2>
<div class="level2">

<p>
Check the “device page” of your device (look for a link in the last columns of the Table of Hardware). The device page may describe a rescue method for your specific device.
</p>
<ul>
<li class="level1"><div class="li"> <a href="/toh/start" class="wikilink1" title="toh:start" data-wiki-id="toh:start">Table of Hardware</a></div>
</li>
</ul>

<p>
Some of the methods may require creating a custom RS232-serial-cable or soldering-skills, while most newer devices require just a certain software trick to remote flash the device from a PC client.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Check first: Device-specific firmware recovery procedures&quot;,&quot;hid&quot;:&quot;check_firstdevice-specific_firmware_recovery_procedures&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;1145-1624&quot;} -->
<h2 class="sectionedit5" id="manufacturer-generic_firmware_recovery_procedures">Manufacturer-generic firmware recovery procedures</h2>
<div class="level2">

<p>
Many devices of the following manufacturers support a recovery procedures as listed here:
</p>
<div class="table sectionedit6"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 centeralign">  Manufacturer  </th><th class="col1 centeralign">  Procedure  </th><th class="col2 centeralign">  Links  </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> ASUS          </td><td class="col1"> <abbr title="Trivial File Transfer Protocol">TFTP</abbr>-like rescue procedure with a manufacturer utility to be installed on a client PC. </td><td class="col2"> <a href="https://www.asus.com/support/faq/1000814/" class="urlextern" title="https://www.asus.com/support/faq/1000814/" rel="ugc nofollow">Official ASUS recovery documentation</a> </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> D-Link        </td><td class="col1"> Several devices have a dedicated <a href="#rescue_firmware_partition" title="docs:guide-user:troubleshooting:vendor_specific_rescue ↵" class="wikilink1">rescue firmware partition</a> in their flash ROM. </td><td class="col2"> </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> Linksys       </td><td class="col1"> Several older devices support a remote <abbr title="Trivial File Transfer Protocol">TFTP</abbr> recovery procedure.<br/>
 Several newer devices have <a href="#dual_firmware_partition" title="docs:guide-user:troubleshooting:vendor_specific_rescue ↵" class="wikilink1">2 independent firmware partitions</a>. </td><td class="col2"> - <a href="https://www.linksys.com/us/support-article?articleNum=137928" class="urlextern" title="https://www.linksys.com/us/support-article?articleNum=137928" rel="ugc nofollow">Official Linksys TFTP recovery documentation</a><br/>
- For Linksys dual firmware, <a href="#dual_firmware_partition" title="docs:guide-user:troubleshooting:vendor_specific_rescue ↵" class="wikilink1">see below</a> </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> Mikrotik      </td><td class="col1"> <abbr title="Trivial File Transfer Protocol">TFTP</abbr>-like rescure procedure with a manufacturer utility called &#039;netinstall&#039; installed on a client PC. </td><td class="col2"> <a href="https://wiki.mikrotik.com/wiki/Manual:Netinstall" class="urlextern" title="https://wiki.mikrotik.com/wiki/Manual:Netinstall" rel="ugc nofollow">Official Microtik recovery documentation</a> </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign" rowspan="2"> Netgear       </td><td class="col1"> <abbr title="Trivial File Transfer Protocol">TFTP</abbr> on a PC client can be used to rescue the firmware. </td><td class="col2"> <a href="https://kb.netgear.com/000059633/How-to-upload-firmware-to-a-NETGEAR-router-using-TFTP-client" class="urlextern" title="https://kb.netgear.com/000059633/How-to-upload-firmware-to-a-NETGEAR-router-using-TFTP-client" rel="ugc nofollow">Official Netgear TFTP recovery documentation</a> </td>
	</tr>
	<tr class="row6">
		<td class="col0"> nmrpflash </td><td class="col1"> <a href="https://github.com/jclehner/nmrpflash" class="urlextern" title="https://github.com/jclehner/nmrpflash" rel="ugc nofollow">https://github.com/jclehner/nmrpflash</a> </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign" rowspan="2"> TP-Link       </td><td class="col1"> <abbr title="Trivial File Transfer Protocol">TFTP</abbr> on a PC client can be used to rescue the firmware.<br/>
Several newer devices provide a <a href="#rescue_firmware_partition" title="docs:guide-user:troubleshooting:vendor_specific_rescue ↵" class="wikilink1">rescue partition</a>. </td><td class="col2"> <a href="https://community.tp-link.com/en/home/forum/topic/81462?page=1" class="urlextern" title="https://community.tp-link.com/en/home/forum/topic/81462?page=1" rel="ugc nofollow">TP-Link forum TFTP recovery documentation</a> </td>
	</tr>
	<tr class="row8">
		<td class="col0"> Webpage firmware recovery<br/>
See link for models which support this method. </td><td class="col1"> <a href="https://www.tp-link.com/us/faq-1482.html" class="urlextern" title="https://www.tp-link.com/us/faq-1482.html" rel="ugc nofollow">https://www.tp-link.com/us/faq-1482.html</a> </td>
	</tr>
	<tr class="row9">
		<td class="col0"> Ubiquiti (UBNT) </td><td class="col1"> <a href="/docs/guide-user/installation/recovery_methods/ubiquiti_tftp" class="wikilink1" title="docs:guide-user:installation:recovery_methods:ubiquiti_tftp" data-wiki-id="docs:guide-user:installation:recovery_methods:ubiquiti_tftp">TFTP on a PC client</a> can be used to rescue the firmware. </td><td class="col2"> <a href="https://help.ubnt.com/hc/en-us/search?utf8=%E2%9C%93&amp;query=firmware+recovery&amp;commit=Search" class="urlextern" title="https://help.ubnt.com/hc/en-us/search?utf8=%E2%9C%93&amp;query=firmware+recovery&amp;commit=Search" rel="ugc nofollow">Official UBNT site: site search for &#039;firmware recovery&#039;</a> </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> Xiaomi        </td><td class="col1"> Several devices with USB port support a <a href="#rescue_usb_stick" title="docs:guide-user:troubleshooting:vendor_specific_rescue ↵" class="wikilink1">rescue USB stick</a> method. </td><td class="col2"> </td>
	</tr>
	<tr class="row11">
		<td class="col0"> ZBT (ZBTLink) </td><td class="col1"> Several devices support a <a href="#rescue_firmware_partition" title="docs:guide-user:troubleshooting:vendor_specific_rescue ↵" class="wikilink1">rescue partition</a>.<br/>
On some devices, <abbr title="Trivial File Transfer Protocol">TFTP</abbr> on a PC client can be used to rescue the firmware. </td><td class="col2"> </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:6,&quot;range&quot;:&quot;1778-3983&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Manufacturer-generic firmware recovery procedures&quot;,&quot;hid&quot;:&quot;manufacturer-generic_firmware_recovery_procedures&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;1625-3984&quot;} -->
<h2 class="sectionedit7" id="recovery_for_disk-image-based_devices_eg_sd-cards">Recovery for disk-image-based devices (e.g. SD-cards)</h2>
<div class="level2">

<p>
Examples: the different Raspberry PI&#039;s, devices of PC Engines).
</p>

<p>
OpenWrt devices that use a drive-installed image.gz or sdcard.img.gz are not an issue to recover. The OpenWrt <abbr title="Operating System">OS</abbr> is not applied to flash ROM, but installed on a removable drive, e.g. an SD-card. For recovery, mount the removable drive in a working PC and reapply the OpenWrt image to the removable drive according to the device-specific instructions.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Recovery for disk-image-based devices (e.g. SD-cards)&quot;,&quot;hid&quot;:&quot;recovery_for_disk-image-based_devices_eg_sd-cards&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;3985-4467&quot;} -->
<h2 class="sectionedit8" id="tftp_recovery_mode">TFTP recovery mode</h2>
<div class="level2">

<p>
In several of these recovery procedures you will need a working <abbr title="Trivial File Transfer Protocol">TFTP</abbr> server on your PC, see how to install and configure it in <a href="/docs/guide-user/troubleshooting/tftpserver" class="wikilink1" title="docs:guide-user:troubleshooting:tftpserver" data-wiki-id="docs:guide-user:troubleshooting:tftpserver">Set up a TFTP Server</a> article.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;TFTP recovery mode&quot;,&quot;hid&quot;:&quot;tftp_recovery_mode&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:8,&quot;range&quot;:&quot;4468-4703&quot;} -->
<h2 class="sectionedit9" id="rescue_usb_stick">Rescue USB stick</h2>
<div class="level2">

<p>
Supported by some Xiaomi devices process for <a href="http://en.miui.com/thread-157895-1-1.html" class="urlextern" title="http://en.miui.com/thread-157895-1-1.html" rel="ugc nofollow">Xiaomi Mi</a>:
</p>
<ol>
<li class="level1"><div class="li"> Download firmware and store as <code>miwifi.bin</code> on an USB flash drive (must be FAT or FAT32)</div>
</li>
<li class="level1"><div class="li"> Plug USB flash drive into device USB port</div>
</li>
<li class="level1"><div class="li"> Unplug device cord</div>
</li>
<li class="level1"><div class="li"> Press and hold the reset button and then re-plug the power cord</div>
</li>
<li class="level1"><div class="li"> Release reset button, when the orange status LED starts blinking</div>
</li>
<li class="level1"><div class="li"> Flashing is finished, when LED turns blue</div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Rescue USB stick&quot;,&quot;hid&quot;:&quot;rescue_usb_stick&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:9,&quot;range&quot;:&quot;4704-5182&quot;} -->
<h2 class="sectionedit10" id="rescue_firmware_partition">Rescue firmware partition</h2>
<div class="level2">

<p>
Supported by several devices at least of the following vendors: D-Link, TP-Link, ZBTLink
</p>

<p>
This function is based on extra code in the boot partition in the flash ROM and it is still available on the device, even after the device has been flashed to OpenWrt. No further tools are needed, to trigger this rescue function.
</p>

<p>
Procedure, to boot into rescue partition:
</p>
<ol>
<li class="level1"><div class="li"> Switch device power off (or pull the power cord).</div>
</li>
<li class="level1"><div class="li"> Connect a client to the device via Ethernet to LAN1</div>
</li>
<li class="level1"><div class="li"> Trigger the rescue function by pressing and holding the reset button of the device and then turning the device on (or plug in the power cord).</div>
</li>
<li class="level1"><div class="li"> You can release the reset button after a few seconds.</div>
</li>
<li class="level1 node"><div class="li"> The device will take ~15-20 seconds to boot a mini-web server, that provides only a single function: it can upload a firmware file and has a button to trigger the flash process. The web-server will usually be available under either (if in doubt, try both)</div>
<ol>
<li class="level2"><div class="li"> <a href="http://192.168.0.1" class="urlextern" title="http://192.168.0.1" rel="ugc nofollow">http://192.168.0.1</a> (TP-Link and newer D-Link devices) or <a href="http://192.168.0.254" class="urlextern" title="http://192.168.0.254" rel="ugc nofollow">http://192.168.0.254</a> (newer TP-Link devices)</div>
</li>
<li class="level2"><div class="li"> <a href="http://192.168.1.1" class="urlextern" title="http://192.168.1.1" rel="ugc nofollow">http://192.168.1.1</a> (ZBT-Link and older D-Link devices)</div>
</li>
</ol>
</li>
<li class="level1 node"><div class="li"> Note: You need to set your PC client to a fixed <abbr title="Internet Protocol">IP</abbr> address beforehand, as <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> is not supported in this rescue mode. So depending on your device, so you need to set the PC client&#039;s to a matching <abbr title="Internet Protocol">IP</abbr> address, either:</div>
<ol>
<li class="level2"><div class="li"> an <abbr title="Internet Protocol">IP</abbr> of the 192.168.0.x range, e.g. 192.168.0.2 / 255.255.255.0</div>
</li>
<li class="level2"><div class="li"> an <abbr title="Internet Protocol">IP</abbr> of the 192.168.1.x range, e.g. 192.168.1.2 / 255.255.255.0</div>
</li>
</ol>
</li>
</ol>

<p>
Notes:
</p>
<ul>
<li class="level1"><div class="li"> The rescue function provides no Internet access, WiFi or <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>.</div>
</li>
<li class="level1"><div class="li"> OpenWrt firmware can be flashed directly using this rescue function when using a OpenWrt ...<strong>factory.bin</strong> firmware file. There is no need to first flash official D-Link firmware.</div>
</li>
<li class="level1"><div class="li"> Official D-Link documentation of this procedure is rare, a <a href="ftp://ftp.dlink.de/dir/dir-600/documentation/DIR-600_revb12_howto_de_FirmwareRecovery.pdf" class="urlextern" title="ftp://ftp.dlink.de/dir/dir-600/documentation/DIR-600_revb12_howto_de_FirmwareRecovery.pdf" rel="ugc nofollow">german D-Link documentation for the DIR-600</a> exists (with the same procedure also applying for other D-Link devices, if the device supports recovery). Inofficial documentation: <a href="/toh/d-link/dir-505#web_interface" class="wikilink1" title="toh:d-link:dir-505" data-wiki-id="toh:d-link:dir-505">OpenWrt Wiki for DIR-505</a> and  <a href="http://forums.dlink.com/index.php?topic=44909.msg162511#msg162511" class="urlextern" title="http://forums.dlink.com/index.php?topic=44909.msg162511#msg162511" rel="ugc nofollow">D-Link Forum</a>.</div>
</li>
<li class="level1"><div class="li"> Inofficial notes of <a href="https://fccid.io/2AH9TW826/Users-Manual/User-Manual-2994820" class="urlextern" title="https://fccid.io/2AH9TW826/Users-Manual/User-Manual-2994820" rel="ugc nofollow">ZBTLink recovery</a>,</div>
</li>
<li class="level1"><div class="li"> Official <a href="http://www.tp-link.de/faq-1482.html" class="urlextern" title="http://www.tp-link.de/faq-1482.html" rel="ugc nofollow">TP-Link rescue partition notes</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Rescue firmware partition&quot;,&quot;hid&quot;:&quot;rescue_firmware_partition&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:10,&quot;range&quot;:&quot;5183-7623&quot;} -->
<h2 class="sectionedit11" id="dual_firmware_partition">Dual firmware partition</h2>
<div class="level2">

<p>
Supported by newer Linksys devices
</p>

<p>
Most newer devices (mostly those with decent amount of flash ROM) have 2 independent firmware partitions. A usage strategy could be, to install OpenWrt only into one of the 2 partitions and leave the vendor firmware in the other partition. No further tools are required to toggle between the two partitions.
</p>

<p>
Procedure, to manually toggle between the two firmware partitions:
</p>
<ol>
<li class="level1"><div class="li"> Switch device power off.</div>
</li>
<li class="level1"><div class="li"> 3x Switch device power on for 2 seconds, then off again.</div>
</li>
<li class="level1"><div class="li"> Switch device power on, the device should now boot to the alternative partition.</div>
</li>
</ol>

<p>
When successfully booted into any of the two partitions, a triggered firmware update will flash the other, secondary partition. The partition that is currently booted, stays untouched.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Dual firmware partition&quot;,&quot;hid&quot;:&quot;dual_firmware_partition&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:11,&quot;range&quot;:&quot;7624-&quot;} -->