
<h1 class="sectionedit1" id="ipv6_over_bluetooth_smart_low_energy">IPv6 over Bluetooth Smart (Low Energy)</h1>
<div class="level1">

<p>
Cross-compilation tested on Ubuntu 14.10 with kernel 3.18.
Tested routers:
</p>
<ul>
<li class="level1"><div class="li"> ASUS RT-N16</div>
</li>
<li class="level1"><div class="li"> x86_64 (Virtual Box)</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;IPv6 over Bluetooth Smart (Low Energy)&quot;,&quot;hid&quot;:&quot;ipv6_over_bluetooth_smart_low_energy&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-171&quot;} -->
<h2 class="sectionedit2" id="prerequisites">Prerequisites</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Bluetooth 4.0 USB dongle</div>
</li>
<li class="level1"><div class="li"> trunk (CC 3.18)</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Prerequisites&quot;,&quot;hid&quot;:&quot;prerequisites&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;172-248&quot;} -->
<h2 class="sectionedit3" id="needed_modules">Needed Modules</h2>
<div class="level2">

<p>
Kernel modules→Other Modules:
</p>
<ul>
<li class="level1"><div class="li"> kmod-6lowpan</div>
</li>
<li class="level1"><div class="li"> kmod-bluetooth</div>
</li>
<li class="level1"><div class="li"> kmod-bluetooth_6lowpan</div>
</li>
</ul>

<p>
Kernel modules→USB support:
</p>
<ul>
<li class="level1"><div class="li"> kmod-usb-core</div>
</li>
<li class="level1"><div class="li"> kmod-usb-ohci</div>
</li>
<li class="level1"><div class="li"> kmod-usb2</div>
</li>
</ul>

<p>
Libraries:
</p>
<ul>
<li class="level1"><div class="li"> bluez-libs</div>
</li>
</ul>

<p>
Utilities:
</p>
<ul>
<li class="level1"><div class="li"> bluez-utils</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Needed Modules&quot;,&quot;hid&quot;:&quot;needed_modules&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;249-507&quot;} -->
<h2 class="sectionedit4" id="example_of_usage">Example of usage</h2>
<div class="level2">

<p>
Below procedure shows how to establish a connection with Bluetooth Smart device (with <abbr title="Internet Protocol version 6">IPv6</abbr> stack software) and do a ping. Note that router has to have Bluetooth Smart chip or dongle connected to USB.
</p>

<p>
Load 6LoWPAN module:
</p>
<pre class="code">modprobe 6lowpan
modprobe bluetooth_6lowpan</pre>

<p>
Set PSM channel as 0x23 (35):
</p>
<pre class="code">echo 35 &gt; /sys/kernel/debug/bluetooth/6lowpan_psm</pre>

<p>
Look for available HCI devices:
</p>
<pre class="code">hciconfig</pre>

<p>
Reset HCI device - e.g. hci0 device:
</p>
<pre class="code">hciconfig hci0 reset</pre>

<p>
Read 00:AA:BB:XX:YY:ZZ address of bluetooth device:
</p>
<pre class="code">hcitool lescan</pre>

<p>
Connect to the device:
</p>
<pre class="code">echo &quot;connect 00:AA:BB:XX:YY:ZZ 1&quot; &gt; /sys/kernel/debug/bluetooth/6lowpan_control</pre>

<p>
Check if connection has been established:
</p>
<pre class="code">ifconfig</pre>

<p>
Try to ping device using its link-local address, e.g. on bt0 interface:
</p>
<pre class="code">ping6 -I bt0 fe80::2AA:BBFF:FEXX:YYZZ</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Example of usage&quot;,&quot;hid&quot;:&quot;example_of_usage&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;508-&quot;} -->