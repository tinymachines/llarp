
<h1 class="sectionedit1" id="turning_usb_power_on_and_off">Turning USB power on and off</h1>
<div class="level1">

<p>
On some routers, it is possible to turn USB power on and off using <a href="/docs/techref/hardware/port.gpio" class="wikilink1" title="docs:techref:hardware:port.gpio" data-wiki-id="docs:techref:hardware:port.gpio">GPIO</a>, like this:
</p>

<p>
On:
</p>
<pre class="code bash"><span class="kw3">echo</span> <span class="nu0">1</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>sys<span class="sy0">/</span>class<span class="sy0">/</span>gpio<span class="sy0">/</span>gpioN<span class="sy0">/</span>value</pre>

<p>
Off:
</p>
<pre class="code bash"><span class="kw3">echo</span> <span class="nu0">0</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>sys<span class="sy0">/</span>class<span class="sy0">/</span>gpio<span class="sy0">/</span>gpioN<span class="sy0">/</span>value</pre>

<p>
Get current state:
</p>
<pre class="code bash"><span class="kw2">cat</span> <span class="sy0">/</span>sys<span class="sy0">/</span>class<span class="sy0">/</span>gpio<span class="sy0">/</span>gpioN<span class="sy0">/</span>value</pre>

<p>
Here, <code>N</code> should be replaced with pin number, which depends on router model. Here are some known pin numbers:
</p>
<div class="table sectionedit2"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign"> Model                                                               </th><th class="col1 leftalign"> Pin number(s)       </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> <a href="/toh/tp-link/tl-wr703n" class="wikilink1" title="toh:tp-link:tl-wr703n" data-wiki-id="toh:tp-link:tl-wr703n">TP-Link TL-WR703N</a>                         </td><td class="col1 leftalign"> 8                   </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <a href="/toh/tp-link/tl-wr842nd" class="wikilink1" title="toh:tp-link:tl-wr842nd" data-wiki-id="toh:tp-link:tl-wr842nd">TP-Link TL-WR842ND</a>                       </td><td class="col1 leftalign"> 6 (v1), 4 (v2)      </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <a href="/toh/tp-link/tl-wdr3600_v1" class="wikilink1" title="toh:tp-link:tl-wdr3600_v1" data-wiki-id="toh:tp-link:tl-wdr3600_v1">TP-Link TL-WDR3600</a>                       </td><td class="col1 leftalign"> 21, 22              </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <a href="/toh/tp-link/tl-wdr4300_v1" class="wikilink1" title="toh:tp-link:tl-wdr4300_v1" data-wiki-id="toh:tp-link:tl-wdr4300_v1">TP-Link TL-WDR4300</a>                       </td><td class="col1 leftalign"> 21, 22              </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <a href="/toh/tp-link/tl-wr1043nd" class="wikilink1" title="toh:tp-link:tl-wr1043nd" data-wiki-id="toh:tp-link:tl-wr1043nd">TP-Link TL-WR1043ND</a>                     </td><td class="col1"> 21 (v2), 8 (v3, v4) </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <a href="/toh/tp-link/archer_c2600_v1" class="wikilink1" title="toh:tp-link:archer_c2600_v1" data-wiki-id="toh:tp-link:archer_c2600_v1">TP-Link Archer C2600</a> V1.1   </td><td class="col1 leftalign"> 23, 25              </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <a href="/toh/astoria/arv7510pw22" class="wikilink1" title="toh:astoria:arv7510pw22" data-wiki-id="toh:astoria:arv7510pw22">Astoria networks ARV7510PW22</a>            </td><td class="col1 leftalign"> 8                   </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:2,&quot;range&quot;:&quot;470-1219&quot;} -->
<p>
If your model is not listed, you may try to find <code>N</code> by trial and error. For some <code>N</code>, the directory <code>/sys/class/gpio/gpioN</code> might not exist, in this case it can be created like this:
</p>
<pre class="code bash"><span class="kw3">echo</span> N <span class="sy0">&gt;</span> <span class="sy0">/</span>sys<span class="sy0">/</span>class<span class="sy0">/</span>gpio<span class="sy0">/</span><span class="kw3">export</span></pre>

<p>
You may also look at <a href="https://forum.openwrt.org/viewtopic.php?id=44909" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=44909" rel="ugc nofollow">this forum thread</a>.
</p>

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> Some routers might have difficulties providing full USB power output. 
</p>

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> On a TP-Link Archer A7 v5 running OpenWRT 19.07, the USB power can be switched by echoing 1 or 0 to <code>/sys/class/gpio/tp-link:power:usb/value</code>. This may be true of other models as well. Run <code>ls -al  /sys/class/gpio/</code> to check for the existence of a similar predefined symbolic link on your router.
</p>

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> On D-Link DIR-645 running OpenWrt 21.2.1 the USB power can be switched off using <code>echo 0 &gt; /sys/class/gpio/usb/value</code>
</p>

</div>
