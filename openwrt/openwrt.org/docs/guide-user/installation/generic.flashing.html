
<h1 class="sectionedit1" id="installing_openwrt">Installing OpenWrt</h1>
<div class="level1">

<p>
The installation of OpenWrt is device specific.
These device specific procedures should be found in the wiki. See <a href="/toh/start" class="wikilink1" title="toh:start" data-wiki-id="toh:start">Table of Hardware</a> for available procedures. If your device is not listed, information in this Howto may be helpful.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_start&quot;,&quot;name&quot;:&quot;meta:infobox:dangerous&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:2,&quot;range&quot;:&quot;0-&quot;} --><div class="plugin_include_content plugin_include__meta:infobox:dangerous" id="plugin_include__meta__infobox__dangerous">
<div class="level1">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_center wrap_dangerous plugin_wrap" style="width: 70%;">
<p>
<strong>Warning!</strong><br/>

This section describes actions that might damage your device or firmware. Proceed with care!
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;0-&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_end&quot;,&quot;name&quot;:&quot;meta:infobox:dangerous&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:3,&quot;range&quot;:&quot;0-&quot;} --></div>
<div class="level1">

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> If your attempt to install OpenWrt fails, please view <a href="/docs/guide-user/troubleshooting/generic.debrick" class="wikilink1" title="docs:guide-user:troubleshooting:generic.debrick" data-wiki-id="docs:guide-user:troubleshooting:generic.debrick">generic.debrick</a> for fixes.
</p>

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> This HOWTO is VERY generic. You cannot use it in most situations, as you have to adapt values and other parts for specific hardware. Please look at the <a href="/toh/start" class="wikilink1" title="toh:start" data-wiki-id="toh:start">supported hardware page</a> for device-specific documentation.
</p>

<p>
In most circumstances; you have three options:
</p>
<ul>
<li class="level1"><div class="li"> <strong><code>Option 1:</code></strong> install OpenWrt onto the router&#039;s non-volatile memory</div>
</li>
<li class="level1"><div class="li"> <strong><code>Option 2:</code></strong> install OpenWrt onto the RAM</div>
</li>
<li class="level1"><div class="li"> <strong><code>Option 3:</code></strong> boot OpenWrt over the network (<a href="/inbox/howto/netboot" class="wikilink1" title="inbox:howto:netboot" data-wiki-id="inbox:howto:netboot">netbooting</a> is not supported by all <a href="/docs/techref/bootloader" class="wikilink1" title="docs:techref:bootloader" data-wiki-id="docs:techref:bootloader">bootloaders</a>).</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Installing OpenWrt&quot;,&quot;hid&quot;:&quot;installing_openwrt&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-1087&quot;} -->
<h2 class="sectionedit6" id="four_installation_methods">Four Installation Methods</h2>
<div class="level2">

<p>
There are four ways to install OpenWrt on a device:
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Four Installation Methods&quot;,&quot;hid&quot;:&quot;four_installation_methods&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;1088-1178&quot;} -->
<h3 class="sectionedit7" id="method_1via_oem_firmware">Method 1: via OEM firmware</h3>
<div class="level3">

<p>
Open the WebUI of the <strong>OEM firmware</strong> with your web browser and install the OpenWrt <strong>factory</strong> firmware image file using the <em>“Firmware Upgrade”</em> option. Your device should reboot with OpenWrt installed.
</p>

<p>
<strong><code>NOTE:</code></strong> Sometimes the OEM firmware will only allow you to flash your device with a specific firmware file. If that is the case, you will not be able to install OpenWrt using this method. However, for some devices the build bots prepare tagged builds such that they are compliant with the firmwares from the manufacturer. This should be documented on the device specific page for your model.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Method 1: via OEM firmware&quot;,&quot;hid&quot;:&quot;method_1via_oem_firmware&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;1179-1822&quot;} -->
<h3 class="sectionedit8" id="method_2via_bootloader_and_an_ethernet_port">Method 2: via Bootloader and an Ethernet port</h3>
<div class="level3">

<p>
Most, if not all <a href="/docs/techref/bootloader" class="wikilink1" title="docs:techref:bootloader" data-wiki-id="docs:techref:bootloader">bootloaders</a> provide built-in functionality for this purpose. Some use a <a href="https://en.wikipedia.org/wiki/Trivial File Transfer Protocol" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Trivial File Transfer Protocol">TFTP</a>-client, others a <abbr title="Trivial File Transfer Protocol">TFTP</abbr>-server, others a <a href="https://en.wikipedia.org/wiki/File Transfer Protocol" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/File Transfer Protocol">FTP</a>-client, some an <abbr title="File Transfer Protocol">FTP</abbr>-server, some a web server and some use the <a href="https://en.wikipedia.org/wiki/XMODEM" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/XMODEM">XMODEM</a>-protocol.
</p>

<p>
Before proceeding you need to determine the following:
</p>
<ul>
<li class="level1"><div class="li"> a) the preset <abbr title="Internet Protocol">IP</abbr> address of the bootloader (not necessarily identical to the <abbr title="Internet Protocol">IP</abbr> address the device has after it has booted the original firmware!)</div>
</li>
<li class="level1"><div class="li"> b) the protocol and whether the bootloader acts as client or as server</div>
</li>
<li class="level1"><div class="li"> c) the correct port number (if not <a href="https://en.wikipedia.org/wiki/List of TCP and UDP port numbers" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/List of TCP and UDP port numbers">default</a>)</div>
</li>
<li class="level1"><div class="li"> d) the interface you need to connect to</div>
</li>
<li class="level1"><div class="li"> e) a user name and login password (if necessary)</div>
</li>
<li class="level1"><div class="li"> f) the time window you have after starting the device to obtain a connection</div>
</li>
</ul>

<p>
Once you know all of the above parameters, you may proceed.
</p>
<ol>
<li class="level1"><div class="li"> Install the appropriate software on your PC (i.e. if the bootloader uses an <abbr title="File Transfer Protocol">FTP</abbr>-server, you need a <abbr title="File Transfer Protocol">FTP</abbr>-client).</div>
</li>
<li class="level1"><div class="li"> Read the appropriate manual page ie: <code><a href="http://linux.die.net/man/1/tftp" class="urlextern" title="http://linux.die.net/man/1/tftp" rel="ugc nofollow">tftp</a></code>, <code><a href="http://linux.die.net/man/8/tftpd" class="urlextern" title="http://linux.die.net/man/8/tftpd" rel="ugc nofollow">tftpd</a></code>, <code><a href="http://linux.die.net/man/1/ftp" class="urlextern" title="http://linux.die.net/man/1/ftp" rel="ugc nofollow">ftp</a></code>, <code><a href="http://linux.die.net/man/1/ncftp" class="urlextern" title="http://linux.die.net/man/1/ncftp" rel="ugc nofollow">ncftp</a></code>, <code><a href="http://linux.die.net/man/8/ftpd" class="urlextern" title="http://linux.die.net/man/8/ftpd" rel="ugc nofollow">ftpd</a></code>, <code><a href="http://linux.die.net/man/8/pure-ftpd" class="urlextern" title="http://linux.die.net/man/8/pure-ftpd" rel="ugc nofollow">pure-ftpd</a></code>, etc ...</div>
</li>
<li class="level1"><div class="li"> Configure a static <abbr title="Internet Protocol">IP</abbr> address for your PC interface in the same <abbr title="Internet Protocol">IP</abbr> address block as pre-configured in the bootloader.</div>
</li>
<li class="level1"><div class="li"> Connect your PC to the device.</div>
</li>
<li class="level1"><div class="li"> Power cycle the device.</div>
</li>
<li class="level1"><div class="li"> Connect to the bootloader using the software you chose</div>
</li>
<li class="level1"><div class="li"> Install the OpenWrt firmware file.</div>
</li>
<li class="level1"><div class="li"> <strong><span style='color:red; '>Do not overwrite or alter the bootloader</span></strong> until explicitly instructed to do so!</div>
</li>
</ol>

<p>
<strong><code>NOTES:</code></strong> Sometimes even the bootloader prevents you from flashing a non-OEM firmware.
If you have a short time window, the connection between your computer and device needs to be established quickly. To make this as quick possible, you can disable auto-negotiation on your <a href="https://en.wikipedia.org/wiki/Network interface controller" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Network interface controller">NIC</a> and/or <a href="http://support.microsoft.com/kb/239924" class="urlextern" title="http://support.microsoft.com/kb/239924" rel="ugc nofollow">disable media sensing</a>.
</p>

</div>

<h4 id="specific_howtos">Specific Howtos</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> <a href="/docs/guide-user/installation/generic.flashing.tftp" class="wikilink1" title="docs:guide-user:installation:generic.flashing.tftp" data-wiki-id="docs:guide-user:installation:generic.flashing.tftp">generic.flashing.tftp</a></div>
</li>
<li class="level1"><div class="li"> <a href="/docs/guide-user/installation/generic.flashing.ftp" class="wikilink1" title="docs:guide-user:installation:generic.flashing.ftp" data-wiki-id="docs:guide-user:installation:generic.flashing.ftp">generic.flashing.ftp</a></div>
</li>
<li class="level1"><div class="li"> <a href="/docs/guide-user/installation/generic.flashing.xmodem" class="wikilink1" title="docs:guide-user:installation:generic.flashing.xmodem" data-wiki-id="docs:guide-user:installation:generic.flashing.xmodem">generic.flashing.xmodem</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Method 2: via Bootloader and an Ethernet port&quot;,&quot;hid&quot;:&quot;method_2via_bootloader_and_an_ethernet_port&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:8,&quot;range&quot;:&quot;1823-4247&quot;} -->
<h3 class="sectionedit9" id="method_3via_bootloader_and_serial_port">Method 3: via Bootloader and Serial port</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> data info of mentioned items (b) to (f) inside above Method-2.</div>
</li>
<li class="level1"><div class="li"> <a href="/docs/guide-user/installation/generic.flashing.serial" class="wikilink1" title="docs:guide-user:installation:generic.flashing.serial" data-wiki-id="docs:guide-user:installation:generic.flashing.serial">generic.flashing.serial</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Method 3: via Bootloader and Serial port&quot;,&quot;hid&quot;:&quot;method_3via_bootloader_and_serial_port&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:9,&quot;range&quot;:&quot;4248-4427&quot;} -->
<h3 class="sectionedit10" id="method_4via_jtag">Method 4: via JTAG</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="/docs/techref/hardware/port.jtag" class="wikilink1" title="docs:techref:hardware:port.jtag" data-wiki-id="docs:techref:hardware:port.jtag">port.jtag</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Method 4: via JTAG&quot;,&quot;hid&quot;:&quot;method_4via_jtag&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:10,&quot;range&quot;:&quot;4428-4497&quot;} -->
<h3 class="sectionedit11" id="install_a_ramdisk-image_into_main_memory">Install a ramdisk-image into main memory</h3>
<div class="level3">

<p>
This step shows you howto upload a new ramdisk image to the device. The existing firmware on the flash remains unchanged! You require a working serial cable to do the ramdisk upload.
</p>
<ol>
<li class="level1"><div class="li"> specifically select the RAMDISK option to make OpenWrt Buildroot create a ramdisk-image for you to upload</div>
</li>
<li class="level1"><div class="li"> connect an ethernet cable between your computer and one of the <abbr title="Local Area Network">LAN</abbr> ports (doesn&#039;t matter which, just so long as it&#039;s not the <abbr title="Wide Area Network">WAN</abbr> port) of the WNDR3700.</div>
</li>
<li class="level1 node"><div class="li"> connect your serial cable to the header on the WNDR3700 and set your local terminal program (eg. minicom) to</div>
<ul>
<li class="level2"><div class="li"> 115200 bps 8N1</div>
</li>
<li class="level2"><div class="li"> no software flow control</div>
</li>
<li class="level2"><div class="li"> no hardware flow control.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> set your computer&#039;s ethernet port to use the <abbr title="Internet Protocol">IP</abbr> address <code>192.168.0.10/24</code></div>
</li>
<li class="level1"><div class="li"> set up a <abbr title="Trivial File Transfer Protocol">TFTP</abbr> server on your local computer to respond to requests on the 192.168.0.10 interface. Make sure that the ramdisk image (openwrt-ar71xx-uImage-lzma.bin) is in the directory used by the <abbr title="Trivial File Transfer Protocol">TFTP</abbr> server.</div>
</li>
<li class="level1 node"><div class="li"> Fix the header for the ramdisk image so that it&#039;s recognized by the u-Boot firmware. Use the wndr3700.c program that was posted by *aorlinsk* on the forums here <a href="http://aorlinsk2.free.fr/openwrt/wndr3700/" class="urlextern" title="http://aorlinsk2.free.fr/openwrt/wndr3700/" rel="ugc nofollow">http://aorlinsk2.free.fr/openwrt/wndr3700/</a> and run it from the <abbr title="Trivial File Transfer Protocol">TFTP</abbr> server&#039;s data directory. I&#039;ve also reproduced the code here just in case:</div>
<ul>
<li class="level2"><div class="li"> <pre class="code bash">.<span class="sy0">/</span>wndr3700 openwrt-ar71xx-uImage-lzma.bin openwrt-fixed.out</pre>
</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> power up the board. When it gets to the message asking you to press any key to interrupt the normal bootup sequence, press a key on the serial console (or just hold down the enter key from first bootup until you get to a prompt):</div>
</li>
<li class="level1"><div class="li"> enter the following into the serial console:<pre class="code bash">setenv ipaddr 192.168.0.1
setenv serverip 192.168.0.10
setenv bootargs <span class="st_h">'board=WNDR3700'</span>
tftpboot <span class="nu0">80800000</span> openwrt-fixed.out
bootm</pre>

<p>
(if you forget the bootargs piece below, the board will boot and look normal, but it won&#039;t be able to bring up any of the network interfaces!)
</p>
</div>
</li>
<li class="level1"><div class="li"> The system should boot!</div>
</li>
</ol>

<p>
Concrete examples: <a href="/toh/netgear/wnr2000" class="wikilink1" title="toh:netgear:wnr2000" data-wiki-id="toh:netgear:wnr2000">wnr2000</a>, ...
</p>

<p>
Don&#039;t forget to consult the other <a href="/docs/start" class="wikilink1" title="docs:start" data-wiki-id="docs:start">Generic Basic Howtos for OpenWrt</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Install a ramdisk-image into main memory&quot;,&quot;hid&quot;:&quot;install_a_ramdisk-image_into_main_memory&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:11,&quot;range&quot;:&quot;4498-6617&quot;} -->
<h2 class="sectionedit12" id="installation_checklist">Installation Checklist</h2>
<div class="level2">

<p>
<em>This checklist cannot and does not completely cover all the ways you can install OpenWrt.</em>
</p>

<p>
<strong> Pre-Installation </strong>
</p>
<ul>
<li class="level1"><div class="li"> Say hello in <a href="https://webchat.oftc.net/?channels=#openwrt" class="urlextern" title="https://webchat.oftc.net/?channels=#openwrt" rel="ugc nofollow">#openwrt</a> channel at OFTC.</div>
</li>
<li class="level1"><div class="li"> Make sure that the router has currently stock/original firmware installed.</div>
</li>
<li class="level1"><div class="li"> Configure your computer to use static <abbr title="Internet Protocol">IP</abbr> address.</div>
</li>
<li class="level1"><div class="li"> Connect to the router with wire, not WiFi.</div>
</li>
<li class="level1"><div class="li"> Do your own research and read all the resources about installing OpenWrt on your router:</div>
</li>
<li class="level1"><div class="li"> <a href="/docs/guide-user/installation/before.installation" class="wikilink1" title="docs:guide-user:installation:before.installation" data-wiki-id="docs:guide-user:installation:before.installation">FAQ before installation</a></div>
</li>
<li class="level1"><div class="li"> <a href="/toh/start" class="wikilink1" title="toh:start" data-wiki-id="toh:start">Table of Hardware</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://forum.openwrt.org/" class="urlextern" title="https://forum.openwrt.org/" rel="ugc nofollow">OpenWrt forum</a></div>
</li>
<li class="level1 node"><div class="li"> Print or save those pages for offline reading:</div>
<ul>
<li class="level2"><div class="li"> <a href="http://wiki.openwrt.org/doc/howto/firstlogin" class="urlextern" title="http://wiki.openwrt.org/doc/howto/firstlogin" rel="ugc nofollow">First login</a></div>
</li>
<li class="level2"><div class="li"> <a href="/docs/guide-user/troubleshooting/failsafe_and_factory_reset" class="wikilink1" title="docs:guide-user:troubleshooting:failsafe_and_factory_reset" data-wiki-id="docs:guide-user:troubleshooting:failsafe_and_factory_reset">Failsafe</a></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> (optional) <a href="/docs/guide-user/installation/generic.backup" class="wikilink1" title="docs:guide-user:installation:generic.backup" data-wiki-id="docs:guide-user:installation:generic.backup">Backup flash of your router.</a></div>
</li>
</ul>

<p>
<strong>Installation</strong>
</p>
<ul>
<li class="level1"><div class="li"> Reboot router.</div>
</li>
<li class="level1 node"><div class="li"> Download OpenWrt image in proper location.</div>
<ul>
<li class="level2"><div class="li"> In case of <a href="/docs/guide-user/installation/generic.sysupgrade" class="wikilink1" title="docs:guide-user:installation:generic.sysupgrade" data-wiki-id="docs:guide-user:installation:generic.sysupgrade">upgrading</a> existing OpenWrt system, the proper location is RAM (usually /tmp).</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Verify MD5 checksum of the OpenWrt image you downloaded.</div>
</li>
<li class="level1"><div class="li"> Make sure that there is at least as much free RAM as the size of OpenWrt image you have downloaded.</div>
</li>
</ul>

<p>
<strong>Post-Installation</strong>
</p>
<ul>
<li class="level1"><div class="li"> Do <a href="http://wiki.openwrt.org/doc/howto/firstlogin" class="urlextern" title="http://wiki.openwrt.org/doc/howto/firstlogin" rel="ugc nofollow">First login</a> and set root password.</div>
</li>
<li class="level1"><div class="li"> <a href="/docs/guide-user/installation/generic.backup" class="wikilink1" title="docs:guide-user:installation:generic.backup" data-wiki-id="docs:guide-user:installation:generic.backup">Backup flash of your router.</a></div>
</li>
<li class="level1"><div class="li"> Make yourself comfortable with the <a href="/docs/guide-user/troubleshooting/failsafe_and_factory_reset" class="wikilink1" title="docs:guide-user:troubleshooting:failsafe_and_factory_reset" data-wiki-id="docs:guide-user:troubleshooting:failsafe_and_factory_reset">Failsafe</a> mode.</div>
</li>
<li class="level1"><div class="li"> <a href="/docs/guide-user/base-system/basic" class="wikilink1" title="docs:guide-user:base-system:basic" data-wiki-id="docs:guide-user:base-system:basic">Configure your device</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Installation Checklist&quot;,&quot;hid&quot;:&quot;installation_checklist&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:12,&quot;range&quot;:&quot;6618-&quot;} -->