
<h1 class="sectionedit1" id="d-link_recovery_gui">D-Link Recovery GUI</h1>
<div class="level1">

<p>
Most D-Link devices have an emergency recovery mode embedded on the bootloader. This recovery mode provides a basic web page that allows flashing a new firmware even when the device is bricked, which is very handy not only for recovering from bricks but also to install OpenWrt on supported D-Link devices. The emergency recovery mode is normally accessed by holding the reset button for a few seconds while powering up the device.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;D-Link Recovery GUI&quot;,&quot;hid&quot;:&quot;d-link_recovery_gui&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-468&quot;} -->
<h2 class="sectionedit2" id="accessing_the_recovery_mode">Accessing the recovery mode</h2>
<div class="level2">

<p>
Before following the steps below, make sure you already have a local copy of the firmware file you want to flash, as you won&#039;t have any kind of internet connectivity while the device is in the emergency recovery mode. If the file you want to flash is from the stock firmware, make sure it is unencrypted (refer to the section below for more details). Also, the computer you&#039;ll use to access the recovery mode must be directly plugged to one of the <abbr title="Local Area Network">LAN</abbr> ports of the device.
</p>
<ol>
<li class="level1"><div class="li"> Power down the device</div>
</li>
<li class="level1"><div class="li"> Press and hold the reset button on the device and re-plug the power without releasing the reset button</div>
</li>
<li class="level1"><div class="li"> Continue to hold the reset button until the red/orange power light starts blinking</div>
</li>
<li class="level1"><div class="li"> On the computer, manually assign a static <abbr title="Internet Protocol">IP</abbr> address on the 192.168.0.xxx subnet, other than 192.168.0.1 (e.g. 192.168.0.2)</div>
</li>
<li class="level1"><div class="li"> Open a web browser and navigate to <a href="http://192.168.0.1" class="urlextern" title="http://192.168.0.1" rel="ugc nofollow">http://192.168.0.1</a></div>
</li>
<li class="level1"><div class="li"> Choose the firmware file you want to flash and click on “Upload”</div>
</li>
<li class="level1"><div class="li"> After the file has been uploaded, you should see a “Device is upgrading the firmware” message on the web browser</div>
</li>
<li class="level1"><div class="li"> Wait while the device verify the uploaded file and flash the firmware</div>
</li>
<li class="level1"><div class="li"> The device will reboot automatically after the flashing process finishes</div>
</li>
</ol>

<p>
<a href="/_detail/media/dlink/recovery_gui_step1.png?id=docs%3Aguide-user%3Ainstallation%3Ainstallation_methods%3Ad-link_recovery_gui" class="media" title="media:dlink:recovery_gui_step1.png"><img src="/_media/media/dlink/recovery_gui_step1.png?w=200&amp;tok=77c014" class="media" loading="lazy" title="File upload form from step 5" alt="File upload form from step 5" width="200" /></a>
<a href="/_detail/media/dlink/recovery_gui_step2.png?id=docs%3Aguide-user%3Ainstallation%3Ainstallation_methods%3Ad-link_recovery_gui" class="media" title="media:dlink:recovery_gui_step2.png"><img src="/_media/media/dlink/recovery_gui_step2.png?w=200&amp;tok=be1528" class="media" loading="lazy" title="&quot;Device is upgrading the firmware&quot; message from step 7" alt="&quot;Device is upgrading the firmware&quot; message from step 7" width="200" /></a>
<a href="/_detail/media/dlink/recovery_gui_step3.png?id=docs%3Aguide-user%3Ainstallation%3Ainstallation_methods%3Ad-link_recovery_gui" class="media" title="media:dlink:recovery_gui_step3.png"><img src="/_media/media/dlink/recovery_gui_step3.png?w=200&amp;tok=1a6fd7" class="media" loading="lazy" title="&quot;Upgrade successfully&quot; message from step 9" alt="&quot;Upgrade successfully&quot; message from step 9" width="200" /></a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Accessing the recovery mode&quot;,&quot;hid&quot;:&quot;accessing_the_recovery_mode&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;469-1984&quot;} -->
<h2 class="sectionedit3" id="troubleshooting">Troubleshooting</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Troubleshooting&quot;,&quot;hid&quot;:&quot;troubleshooting&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;1985-2012&quot;} -->
<h3 class="sectionedit4" id="recovery_page_doesn_t_load">Recovery page doesn&#039;t load</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <strong>Check the Ethernet cable:</strong> the computer must be connected directly to one of the <abbr title="Local Area Network">LAN</abbr> ports from the device.</div>
</li>
<li class="level1"><div class="li"> <strong>Check the network settings:</strong> the computer must have a static <abbr title="Internet Protocol">IP</abbr> address under the 192.168.0.xxx range (other than 192.168.0.1). Also make sure the subnet mask is set to 255.255.255.0 otherwise the recovery page will be inaccessible even when using a proper <abbr title="Internet Protocol">IP</abbr> address.</div>
</li>
<li class="level1"><div class="li"> <strong>Try another <abbr title="Local Area Network">LAN</abbr> port:</strong> connect the computer to a different <abbr title="Local Area Network">LAN</abbr> port of the device.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Recovery page doesn&#039;t load&quot;,&quot;hid&quot;:&quot;recovery_page_doesn_t_load&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;2013-2531&quot;} -->
<h3 class="sectionedit5" id="file_upload_never_completes_or_fail_with_a_timeout">File upload never completes or fail with a timeout</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <strong>Power the device down and start again:</strong> sometimes the emergency recovery mode just hangs and a reboot solves the problem. </div>
</li>
<li class="level1"><div class="li"> <strong>Try a different web browser:</strong> depending of the combination of <abbr title="Operating System">OS</abbr> and web browser of the computer, the upload might always timeout. There isn&#039;t a clear pattern, and a combination of <abbr title="Operating System">OS</abbr> and browser that worked before might stop working and vice-versa. Using an older web browser (like <abbr title="Internet Explorer">IE</abbr>) seems to help too. Also make sure to repeat the process from start whenever this happens, as the recovery mode goes completely unresponsible when an upload error or timeout occurs.</div>
</li>
<li class="level1"><div class="li"> <strong>Upload the file with cURL:</strong> if everything else fails, you can upload the firmware file through cURL. Repeat the steps 1 to 5 above, then use the following cURL command:</div>
</li>
</ul>
<pre class="code">curl -v -i -F &quot;firmware=@my_firmware_file.bin&quot; 192.168.0.1</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;File upload never completes or fail with a timeout&quot;,&quot;hid&quot;:&quot;file_upload_never_completes_or_fail_with_a_timeout&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;2532-3450&quot;} -->
<h2 class="sectionedit6" id="about_encrypted_firmwares">About encrypted firmwares</h2>
<div class="level2">

<p>
Starting from 2018, D-Link added a layer of encryption to its stock firmware files. Most firmware updates published since then, both for new and for existing D-Link devices, are available only on this encrypted format, generally referenced as D-Link SHRS format. Although the stock firmware from D-Link can flash these SHRS files without issues, <strong>the emergency recovery mode from the bootloader only recognizes unencrypted firmware files</strong>, actively refusing SHRS firmware files if you try to flash them.
</p>

<p>
For some devices (like the <a href="/toh/d-link/dir-878_a1" class="wikilink1" title="toh:d-link:dir-878_a1" data-wiki-id="toh:d-link:dir-878_a1">DIR-878</a> and <a href="/toh/d-link/dir-882_a1" class="wikilink1" title="toh:d-link:dir-882_a1" data-wiki-id="toh:d-link:dir-882_a1">DIR-882</a>), older firmware versions, from before the encryption was added, are often obtainable in unencrypted format directly from <a href="https://www.dlink.com/en/support" class="urlextern" title="https://www.dlink.com/en/support" rel="ugc nofollow">D-Link Support</a>, and these can be flashed in emergency recovery mode without issues if you ever need to recover from a brick or want to go back from OpenWrt to the stock firmware.
</p>

<p>
For newer devices, however, this isn&#039;t an option, as only encrypted SHRS firmwares are publicly available. If you own one of these devices and needs the firmware in unencrypted format to use with the emergency recovery mode, you&#039;ll have to resort to tools like <a href="https://github.com/0xricksanchez/dlink-decrypt" class="urlextern" title="https://github.com/0xricksanchez/dlink-decrypt" rel="ugc nofollow">dlink-decrypt</a> in order to manually decrypt the SHRS firmwares provided by D-Link. 
</p>

<p>
As of November 2020, <a href="https://github.com/0xricksanchez/dlink-decrypt" class="urlextern" title="https://github.com/0xricksanchez/dlink-decrypt" rel="ugc nofollow">dlink-decrypt</a> seems to successfully decrypt the stock firmware files of all devices currently using the D-Link SHRS format. 
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;About encrypted firmwares&quot;,&quot;hid&quot;:&quot;about_encrypted_firmwares&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:6,&quot;range&quot;:&quot;3451-5027&quot;} -->
<h2 class="sectionedit7" id="devices_with_this_installation_method">Devices with this installation method</h2>
<div class="level2">

<p>
Devices listed on this table have the emergency recovery mode on their bootloaders and are able to use this installation method not only to install OpenWrt but also to recover from bricks and even to go back to the stock firmware (as long as an unencrypted firmware file is provided).
</p>

<p>
<!-- ToH: {
  "source": "json",
  "dom": "t",
  "paging": true,
  "pageLength": 25,
  "shownColumns": ["brand", "model", "version", "supportedcurrentrel", "installationmethods", "commentinstallation", "devicepage", "deviceid"],
  "filterColumns": {"installationmethods": "D-Link Recovery GUI", "model": "!^@@Model@@$"}
} -->
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Devices with this installation method&quot;,&quot;hid&quot;:&quot;devices_with_this_installation_method&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:7,&quot;range&quot;:&quot;5028-5689&quot;} -->
<h2 class="sectionedit8" id="notes">Notes</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://forums.dlink.com/index.php?topic=44909.msg163599#msg163599" class="urlextern" title="http://forums.dlink.com/index.php?topic=44909.msg163599#msg163599" rel="ugc nofollow">D-Link Forum: Emergency Flashing HOW-TO</a></div>
</li>
<li class="level1"><div class="li"> <a href="ftp://ftp.dlink.de/dir/dir-600/documentation/DIR-600_revb12_howto_de_FirmwareRecovery.pdf" class="urlextern" title="ftp://ftp.dlink.de/dir/dir-600/documentation/DIR-600_revb12_howto_de_FirmwareRecovery.pdf" rel="ugc nofollow">D-Link Emergency Recovery Mode Usage Instructions for the DIR-600 (in German)</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://0x00sec.org/t/breaking-the-d-link-dir3060-firmware-encryption-recon-part-1/21943" class="urlextern" title="https://0x00sec.org/t/breaking-the-d-link-dir3060-firmware-encryption-recon-part-1/21943" rel="ugc nofollow">0x00sec: Breaking the D-Link DIR3060 Firmware Encryption</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://github.com/0xricksanchez/dlink-decrypt" class="urlextern" title="https://github.com/0xricksanchez/dlink-decrypt" rel="ugc nofollow">dlink-decrypt on GitHub</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Notes&quot;,&quot;hid&quot;:&quot;notes&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:8,&quot;range&quot;:&quot;5690-&quot;} -->