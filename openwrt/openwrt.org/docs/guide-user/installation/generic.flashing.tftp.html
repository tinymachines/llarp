
<h1 class="sectionedit1" id="installing_openwrt_via_tftp">Installing OpenWrt via TFTP</h1>
<div class="level1">

<p>
Go back to <a href="/docs/guide-user/installation/generic.flashing" class="wikilink1" title="docs:guide-user:installation:generic.flashing" data-wiki-id="docs:guide-user:installation:generic.flashing">generic.flashing</a>
</p>

<p>
<abbr title="Trivial File Transfer Protocol">TFTP</abbr> is a very simple protocol; simple enough to be implemented in small boot loaders. The basic idea is as follows:
</p>
<ol>
<li class="level1"><div class="li"> Router is powered on</div>
</li>
<li class="level1"><div class="li"> Bootloader prepares startup of firmware code</div>
</li>
<li class="level1 node"><div class="li"> <strong>For a few seconds</strong> it initializes the wired lan ports</div>
<ul>
<li class="level2"><div class="li"> This doesn&#039;t happen instantly but a short time during startup/boot</div>
</li>
<li class="level2"><div class="li"> The network settings are not always the same as OpenWrt&#039;s defaults</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> It then either:</div>
<ul>
<li class="level2"><div class="li"> Tries to connect to a <abbr title="Trivial File Transfer Protocol">TFTP</abbr> <strong>server</strong> on a predetermined <abbr title="Internet Protocol">IP</abbr> address to download a firmware image, OR</div>
</li>
<li class="level2"><div class="li"> Listens for incoming <abbr title="Trivial File Transfer Protocol">TFTP</abbr> <strong>client</strong> requests to upload a new flash image</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> Behavior thereafter varies by boot loader </div>
<ul>
<li class="level3"><div class="li"> See <a href="/docs/techref/bootloader#additional_functions" class="wikilink1" title="docs:techref:bootloader" data-wiki-id="docs:techref:bootloader">Bootloader functionality</a> for more details about the bootloader</div>
</li>
</ul>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_start&quot;,&quot;name&quot;:&quot;meta:infobox:dangerous&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:2,&quot;range&quot;:&quot;0-&quot;} --><div class="plugin_include_content plugin_include__meta:infobox:dangerous" id="plugin_include__meta__infobox__dangerous">
<div class="level1">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_center wrap_dangerous plugin_wrap" style="width: 70%;">
<p>
<strong>Warning!</strong><br/>

This section describes actions that might damage your device or firmware. Proceed with care!
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;0-&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_end&quot;,&quot;name&quot;:&quot;meta:infobox:dangerous&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:3,&quot;range&quot;:&quot;0-&quot;} --></div>
<div class="level1">

<p>
You must determine whether your hardware&#039;s bootloader has a <abbr title="Trivial File Transfer Protocol">TFTP</abbr> client or server to understand which section below applies to your device.
</p>

<p>
Consult your specific model&#039;s OpenWrt Wiki devicepage for details on necessary settings, <abbr title="Internet Protocol">IP</abbr> addresses to use, and the <abbr title="Trivial File Transfer Protocol">TFTP</abbr> type offered if any.
</p>
<hr />

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Installing OpenWrt via TFTP&quot;,&quot;hid&quot;:&quot;installing_openwrt_via_tftp&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-1236&quot;} -->
<h2 class="sectionedit6" id="bootloader_contains_tftp_client">Bootloader contains TFTP client</h2>
<div class="level2">

<p>
—&gt;<a href="/docs/guide-user/troubleshooting/tftpserver" class="wikilink1" title="docs:guide-user:troubleshooting:tftpserver" data-wiki-id="docs:guide-user:troubleshooting:tftpserver">Setting up a TFTP server for TFTP Recovery/Install</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_start&quot;,&quot;name&quot;:&quot;meta:infobox:tftp_warning&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:7,&quot;range&quot;:&quot;0-&quot;} --><div class="plugin_include_content plugin_include__meta:infobox:tftp_warning" id="plugin_include__meta__infobox__tftp_warning">
<div class="level2">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:9,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_center wrap_important plugin_wrap" style="width: 70%;">
<p>
<strong>Important Information!</strong><br/>

<abbr title="Trivial File Transfer Protocol">TFTP</abbr> server &amp; client tools (based on the <a href="https://en.wikipedia.org/wiki/wiki/Trivial_File_Transfer_Protocol" class="urlextern" title="https://en.wikipedia.org/wiki/wiki/Trivial_File_Transfer_Protocol" rel="ugc nofollow">TFTP</a> protocol) employ no access controls while allowing light-weight file transfer between networked devices.<br/>

Do not leave <abbr title="Trivial File Transfer Protocol">TFTP</abbr> services running longer than needed and use a firewall to restrict access to the local subnet.
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:10,&quot;range&quot;:&quot;0-&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_end&quot;,&quot;name&quot;:&quot;meta:infobox:tftp_warning&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:8,&quot;range&quot;:&quot;0-&quot;} --></div>
<div class="level2">

<p>
If your device is of the type that has a boot loader with a <abbr title="Trivial File Transfer Protocol">TFTP</abbr> <strong>client</strong> that tries to download an image in recovery mode, then you must run a <abbr title="Trivial File Transfer Protocol">TFTP</abbr> <strong>server</strong> to host the new firmware.
Detailed instructions are given on the<a href="/docs/guide-user/troubleshooting/tftpserver#setting_up_tftp_server" class="wikilink1" title="docs:guide-user:troubleshooting:tftpserver" data-wiki-id="docs:guide-user:troubleshooting:tftpserver"> Setting up a TFTP server for TFTP Recovery/Install wiki page</a>.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Bootloader contains TFTP client&quot;,&quot;hid&quot;:&quot;bootloader_contains_tftp_client&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;1237-1806&quot;} -->
<h3 class="sectionedit11" id="mikrotik_routerboards">Mikrotik RouterBoards</h3>
<div class="level3">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:12,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_box plugin_wrap">
<p>
<img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />
Move this section showing how to configure a <abbr title="Trivial File Transfer Protocol">TFTP</abbr> server to <a href="/docs/guide-user/troubleshooting/tftpserver" class="wikilink1" title="docs:guide-user:troubleshooting:tftpserver" data-wiki-id="docs:guide-user:troubleshooting:tftpserver">tftpserver</a>
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:13,&quot;range&quot;:&quot;0-&quot;} -->
<p>
RouterBoards have a <abbr title="Trivial File Transfer Protocol">TFTP</abbr> and <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> clients running in their RouterBoot bootloader.
See : <a href="/toh/mikrotik/common" class="wikilink1" title="toh:mikrotik:common" data-wiki-id="toh:mikrotik:common">Common Procedures for Mikrotik RouterBoard</a> for details.
</p>

<p>
Bash script to set static <abbr title="Internet Protocol">IP</abbr> address, run <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server and run <abbr title="Trivial File Transfer Protocol">TFTP</abbr> server (exemple for Mikrotik).
</p>

<p>
Note: Don&#039;t forget to change USER, NETDEV, <abbr title="Internet Protocol">IP</abbr>/<abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> <abbr title="Internet Protocol">IP</abbr>-range and file name/folder path for your needs.
</p>
<pre class="code">#/bin/bash
USER=user
NETDEV=enp1s0
ip address flush dev $NETDEV
ip address add 10.1.1.10/24 dev $NETDEV
dnsmasq -i $NETDEV --dhcp-range=10.1.1.50,10.1.1.100 \
--dhcp-boot=openwrt-ar71xx-mikrotik-vmlinux-initramfs.elf \
--enable-tftp --tftp-root=/home/$USER/openwrt -d -u $USER -p0 -K --log-dhcp --bootp-dynamic</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Mikrotik RouterBoards&quot;,&quot;hid&quot;:&quot;mikrotik_routerboards&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:11,&quot;range&quot;:&quot;1807-2669&quot;} -->
<h3 class="sectionedit14" id="example1">Example1</h3>
<div class="level3">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:15,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_box plugin_wrap">
<p>
<img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />
Move this section showing how to configure a <abbr title="Trivial File Transfer Protocol">TFTP</abbr> server to <a href="/docs/guide-user/troubleshooting/tftpserver" class="wikilink1" title="docs:guide-user:troubleshooting:tftpserver" data-wiki-id="docs:guide-user:troubleshooting:tftpserver">tftpserver</a>
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:16,&quot;range&quot;:&quot;0-&quot;} -->
<p>
For example the <a href="/docs/techref/bootloader" class="wikilink1" title="docs:techref:bootloader" data-wiki-id="docs:techref:bootloader">bootloader</a> implementation of the <a href="/toh/d-link/dir-300" class="wikilink1" title="toh:d-link:dir-300" data-wiki-id="toh:d-link:dir-300">DIR-300</a> <a href="/docs/techref/bootloader/redboot" class="wikilink1" title="docs:techref:bootloader:redboot" data-wiki-id="docs:techref:bootloader:redboot">redboot</a> contains a <abbr title="Trivial File Transfer Protocol">TFTP</abbr> client. Two steps:
</p>
<ol>
<li class="level1"><div class="li"> first you <a href="/docs/guide-user/troubleshooting/tftpserver" class="wikilink1" title="docs:guide-user:troubleshooting:tftpserver" data-wiki-id="docs:guide-user:troubleshooting:tftpserver">install and start a TFTP server</a> (or daemon) on your host and place the image(s) to be flashed in the &lt;root directory&gt; of this software (you may be required to do this as root). </div>
</li>
</ol>

<p>
Possible directories can be
</p>
<ul>
<li class="level1"><div class="li"> /var/lib/tftpboot</div>
</li>
<li class="level1"><div class="li"> /srv/tftp</div>
</li>
<li class="level1"><div class="li"> You can probably find the directory by running <pre class="code">sudo find / -type d -name &#039;*tftp*&#039;</pre>
</div>
</li>
</ul>

<p>
Example:
</p>
<pre class="code">sudo apt-get install tftpd-hpa tftp
sudo cp ~/uboot/arch/arm/boot/uboot.img /var/lib/tftpboot</pre>
<ol>
<li class="level1"><div class="li"> Test the server:<pre class="code">  tftp localhost
tftp&gt; get uboot.img
tftp&gt; quit
  cmp /var/lib/tftpboot/uboot.img uboot.img
  # no output other then a prompt means it worked correctly</pre>
</div>
</li>
<li class="level1"><div class="li"> connect to the bootloader, and tell it to get the images on your harddisk via its <abbr title="Trivial File Transfer Protocol">TFTP</abbr> client (in case of the DIR-300 you obtain a connection via <a href="https://en.wikipedia.org/wiki/telnet" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/telnet">telnet</a> on the non-default port 9000). Example: <pre class="code">telnet 192.168.20.81 9000
Redboot&gt; load uboot.img
go</pre>
</div>
</li>
<li class="level1"><div class="li"> after successful installation of OpenWrt, do not forget to deactivate the <abbr title="Trivial File Transfer Protocol">TFTP</abbr> server again!</div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Example1&quot;,&quot;hid&quot;:&quot;example1&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:14,&quot;range&quot;:&quot;2670-4054&quot;} -->
<h3 class="sectionedit17" id="example2">Example2</h3>
<div class="level3">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:18,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_box plugin_wrap">
<p>
<img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />
Move this section showing how to configure a <abbr title="Trivial File Transfer Protocol">TFTP</abbr> server to <a href="/docs/guide-user/troubleshooting/tftpserver" class="wikilink1" title="docs:guide-user:troubleshooting:tftpserver" data-wiki-id="docs:guide-user:troubleshooting:tftpserver">tftpserver</a>
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:19,&quot;range&quot;:&quot;0-&quot;} -->
<p>
In case of the xxx Step 3 from Example 1 above is not applicable. There is no console to login to, the bootloader will automatically try to get a firmware over <abbr title="Trivial File Transfer Protocol">TFTP</abbr> from a pre-configured <abbr title="Internet Protocol">IP</abbr> address at every boot.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Example2&quot;,&quot;hid&quot;:&quot;example2&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:17,&quot;range&quot;:&quot;4055-4422&quot;} -->
<h3 class="sectionedit20" id="tftpd_server_on_mac_os_x_lion">tftpd server on Mac OS X Lion</h3>
<div class="level3">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:21,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_box plugin_wrap">
<p>
<img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />
Move this section showing how to configure a <abbr title="Trivial File Transfer Protocol">TFTP</abbr> server to <a href="/docs/guide-user/troubleshooting/tftpserver" class="wikilink1" title="docs:guide-user:troubleshooting:tftpserver" data-wiki-id="docs:guide-user:troubleshooting:tftpserver">tftpserver</a>
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:22,&quot;range&quot;:&quot;0-&quot;} -->
<p>
<em>Note: TftpServer.app places a pleasing <abbr title="Graphical User Interface">GUI</abbr> on top of the native OSX tftpd. There&#039;s a writeup of using TftpServer.app at <a href="/docs/guide-user/troubleshooting/tftpserver" class="wikilink1" title="docs:guide-user:troubleshooting:tftpserver" data-wiki-id="docs:guide-user:troubleshooting:tftpserver">tftpserver</a>. If you prefer to use the command-line, read on... </em>
</p>

<p>
<abbr title="Operating System">OS</abbr> X Lion comes with a tftpd but its disabled by default. Like most services in <abbr title="Operating System">OS</abbr> X, tftpd is controlled by launchctl.
The configuration with which the daemon is lauched is in <strong>/System/Library/LaunchDaemons/tftp.plist</strong> and the the identifier is <strong>com.apple.tftpd</strong>
</p>

<p>
before you make changes to the config run:
</p>
<pre class="code">sudo launchctl unload -F /System/Library/LaunchDaemons/tftp.plist</pre>

<p>
then:
</p>
<pre class="code">sudo launchctl load -F /System/Library/LaunchDaemons/tftp.plist</pre>

<p>
to stop tftpd run:
</p>
<pre class="code">sudo launchctl stop com.apple.tftpd</pre>

<p>
to start tftpd run:
</p>
<pre class="code">sudo launchctl start com.apple.tftpd</pre>

<p>
Here is an example config file that will work:
</p>
<pre class="code">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE plist PUBLIC &quot;-//Apple Computer//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;
&lt;plist version=&quot;1.0&quot;&gt;
&lt;dict&gt;
	&lt;key&gt;Label&lt;/key&gt;
	&lt;string&gt;com.apple.tftpd&lt;/string&gt;
	&lt;key&gt;ProgramArguments&lt;/key&gt;
	&lt;array&gt;
		&lt;string&gt;/usr/libexec/tftpd&lt;/string&gt;
		&lt;string&gt;-l&lt;/string&gt;
		&lt;string&gt;-s&lt;/string&gt;
		&lt;string&gt;/private/tftpboot&lt;/string&gt;
	&lt;/array&gt;
	&lt;key&gt;inetdCompatibility&lt;/key&gt;
	&lt;dict&gt;
		&lt;key&gt;Wait&lt;/key&gt;
		&lt;true/&gt;
	&lt;/dict&gt;
	&lt;key&gt;InitGroups&lt;/key&gt;
	&lt;true/&gt;
	&lt;key&gt;Sockets&lt;/key&gt;
	&lt;dict&gt;
		&lt;key&gt;Listeners&lt;/key&gt;
		&lt;dict&gt;
			&lt;key&gt;SockServiceName&lt;/key&gt;
			&lt;string&gt;tftp&lt;/string&gt;
			&lt;key&gt;SockType&lt;/key&gt;
			&lt;string&gt;dgram&lt;/string&gt;
		&lt;/dict&gt;
	&lt;/dict&gt;
&lt;/dict&gt;
&lt;/plist&gt;</pre>

<p>
Differences from the default include removing this, to enable the service:
</p>
<pre class="code">&lt;key&gt;Disabled&lt;/key&gt;
&lt;true/&gt;</pre>

<p>
Add this to the ProgramArguments array to make it log to <strong>/var/log/syslog.log</strong>
</p>
<pre class="code">&lt;string&gt;-l&lt;/string&gt;</pre>

<p>
Place the openwrt image file you want to serve in:
</p>
<pre class="code">/private/tftpboot</pre>

<p>
Notice that even after running <strong>launchctl start com.apple.tftpd</strong> you will not see tftpd running when executing <strong>ps aux | grep tftpd</strong> because of the way launchctl works. tftpd is in fact <strong>not</strong> running but launchctl will launch it as soon as it is required.
</p>

<p>
In some cases, when the output on the serial console is grabbled you can still act on faith and executer the following commands, which will work in most cases:
</p>
<pre class="code">setenv ipaddr 192.168.1.1
setenv serverip 192.168.1.100
tftpboot 0x80000000 openwrt-xxx-generic-xxx-squashfs-factory.bin
erase 0x9f020000 +0x332004
cp.b 0x80000000 0x9f020000 0x332004
boot.m 0x9f020000</pre>

</div>

<h4 id="tftpd_on_macos_104_tiger">tftpd on MacOS 10.4 &quot;Tiger&quot;</h4>
<div class="level4">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:23,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_box plugin_wrap">
<p>
<img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />
Move this section showing how to configure a <abbr title="Trivial File Transfer Protocol">TFTP</abbr> server to <a href="/docs/guide-user/troubleshooting/tftpserver" class="wikilink1" title="docs:guide-user:troubleshooting:tftpserver" data-wiki-id="docs:guide-user:troubleshooting:tftpserver">tftpserver</a>
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:24,&quot;range&quot;:&quot;0-&quot;} -->
<p>
tftpd works out-of-the-box also on the old 10.4. Maybe the tftp dir is not yet created but this is just a mkdir. Get a root shell and issue these commands:
</p>
<pre class="code">bash-4.2$ sudo bash
Password:
bash-4.2# mkdir -p /private/tftpboot/
bash-4.2# cp /path/to/openwrt-image /private/tftpboot/
bash-4.2# launchctl load -F /System/Library/LaunchDaemons/tftp.plist 
bash-4.2# ps axu|grep ftp
root     23494   0.0  0.0    27696    152  ??  Ss    4:34PM   0:00.00 launchctl load -F /System/Library/LaunchDaemons/tftp.plist
root     23496   0.0  0.0    38604      4  p3  R+    4:34PM   0:00.00 grep ftp
bash-4.2# launchctl start com.apple.tftpd
bash-4.2# ps axu|grep ftp
root     23494   0.0  0.0    27696    152  ??  Ss    4:34PM   0:00.00 launchctl load -F /System/Library/LaunchDaemons/tftp.plist
root     23498   0.0  0.0    27244    464  ??  Ss    4:34PM   0:00.01 /usr/libexec/launchproxy /usr/libexec/tftpd -i /private/tftpboot
root     23500   0.0  0.0    38604      4  p3  R+    4:34PM   0:00.00 grep ftp
bash-4.2# tftp 192.168.100.72   ### just testing
tftp&gt; get openwrt-ar71xx-generic-hornet-ub-squashfs-sysupgrade.bin
Received 7270950 bytes in 2.7 seconds
tftp&gt;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;tftpd server on Mac OS X Lion&quot;,&quot;hid&quot;:&quot;tftpd_server_on_mac_os_x_lion&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:20,&quot;range&quot;:&quot;4423-8481&quot;} -->
<h2 class="sectionedit25" id="bootloader_contains_tftp_server">Bootloader contains TFTP server</h2>
<div class="level2">

<p>
The basic procedure of using a tftp client to upload a new firmware to your router:
</p>
<ol>
<li class="level1"><div class="li"> Unplug the power to your router</div>
</li>
<li class="level1"><div class="li"> Plug the Ethernet connection from your computer (acting as tftp client) into a <abbr title="Local Area Network">LAN</abbr> port on your model.  See your model&#039;s OpenWrt wiki devicepage for details on which port to use</div>
</li>
<li class="level1"><div class="li"> Start your tftp client on your computer</div>
</li>
<li class="level1"><div class="li"> Give it the router&#039;s address (specific to model and bootloader, see your model&#039;s wiki page)</div>
</li>
<li class="level1"><div class="li"> Set mode to octet/binary</div>
</li>
<li class="level1"><div class="li"> Tell the client to resend the file until it succeeds</div>
</li>
<li class="level1"><div class="li"> “put” the file</div>
</li>
<li class="level1"><div class="li"> Plug-in your router while having the tftp client running and constantly probing for a connection</div>
</li>
<li class="level1"><div class="li"> The tftp client will receive an ack from the bootloader and starts sending the firmware</div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Bootloader contains TFTP server&quot;,&quot;hid&quot;:&quot;bootloader_contains_tftp_server&quot;,&quot;codeblockOffset&quot;:7,&quot;secid&quot;:25,&quot;range&quot;:&quot;8482-9272&quot;} -->
<h3 class="sectionedit26" id="tips">Tips</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> <strong>Please be patient</strong>, the reflashing occurs <em>after</em> the firmware has been transferred. In most cases the router will automatically reboot itself. Some models do not reboot so wait at least 15 minutes before power cycling them.</div>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> <strong>Note that the bootloader usually does not use the <abbr title="Internet Protocol">IP</abbr> address or MAC address stored in nvram</strong>, it will revert to a bootloader default instead.  See your model&#039;s wiki documentation for specifics.</div>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> <strong>Put a hub or switch between the router and the computer</strong>, this will make sure that the local computer link is up before the <em>boot_wait</em> period is passed. This is a requirement to make <abbr title="Trivial File Transfer Protocol">TFTP</abbr> work on computers where the local link is brought up too late and is usually simpler than trying to force the link to stay up instead.</div>
</li>
<li class="level1"><div class="li"> On routers with a <abbr title="Demilitarized Zone">DMZ</abbr> LED, OpenWrt will light the <abbr title="Demilitarized Zone">DMZ</abbr> LED while booting, after the bootup scripts are finished it will turn off the <abbr title="Demilitarized Zone">DMZ</abbr> LED.</div>
</li>
</ul>
<hr />

<p>
The <abbr title="Trivial File Transfer Protocol">TFTP</abbr> commands vary across different implementations. Here are some examples:
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Tips&quot;,&quot;hid&quot;:&quot;tips&quot;,&quot;codeblockOffset&quot;:7,&quot;secid&quot;:26,&quot;range&quot;:&quot;9273-10302&quot;} -->
<h3 class="sectionedit27" id="linuxbsd">Linux/BSD</h3>
<div class="level3">

<p>
The network link must be up and established during power up.  One way to ensure this happens is to use a switch or hub in-between your computer and the device you are flashing as this will leave the link established when you power off the device.
</p>

<p>
Another option is to disable network manager in Linux (or use a distro/LiveCD that doesn&#039;t have it).  Some commands that may disable it (depends on the distribution of Linux used):
</p>
<ul>
<li class="level1"><div class="li"> /etc/init.d/networking stop</div>
</li>
<li class="level1"><div class="li"> /etc/init.d/network stop</div>
</li>
<li class="level1"><div class="li"> /etc/init.d/NetworkManager stop</div>
</li>
<li class="level1"><div class="li"> service networking stop</div>
</li>
<li class="level1"><div class="li"> service network stop</div>
</li>
<li class="level1"><div class="li"> service NetworkManager stop</div>
</li>
<li class="level1"><div class="li"> systemctl stop NetworkManager</div>
</li>
</ul>

</div>

<h4 id="preparation_steps">Preparation Steps</h4>
<div class="level4">
<ol>
<li class="level1 node"><div class="li"> Configure a static <abbr title="Internet Protocol">IP</abbr> to match your *bootloaders* network</div>
<ul>
<li class="level2"><div class="li"> ip address add <em>ipv4.x.y.z</em>/24 dev <em>eth0</em></div>
</li>
<li class="level2"><div class="li"> See your device model&#039;s OpenWrt wiki device page for specific settings</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> Preconfigure an ARP entry to increase your changes of catching the <abbr title="Trivial File Transfer Protocol">TFTP</abbr> window</div>
<ul>
<li class="level2 node"><div class="li"> arp -s <em>ipv4.x.y.1</em> <em>02:aa:bb:cc:dd:20</em></div>
<ul>
<li class="level3"><div class="li"> Check your device model&#039;s OpenWrt wiki devicepage for correct <abbr title="Internet Protocol">IP</abbr> and MAC addresses</div>
</li>
</ul>
</li>
</ul>
</li>
</ol>

</div>

<h5 id="using_atftp">Using atftp</h5>
<div class="level5">
<div class="hiddenGlobal  hiddenActive"><div class="hiddenElements"></div><div class="hiddenHead  hiddenSinceBeginning"><div class="hiddenOnHidden">
<p>
Click to display ⇲
</p>
</div><div class="hiddenOnVisible">
<p>
Click to hide ⇱
</p>
</div></div> <!-- .hiddenHead --><div class="hiddenBody">
<p>
As a single command-line:
</p>
<pre class="code">atftp --trace --option &quot;timeout 1&quot; --option &quot;mode octet&quot; --put --local-file openwrt-xxx-x.x-xxx.bin IPv4.x.y.z</pre>

<p>
Step by step:
</p>
<pre class="code">atftp
connect IPv4.x.y.z
mode octet
trace
timeout 1
put openwrt-xxx-x.x-xxx.bin</pre>
</div></div>
</div>

<h5 id="using_netkit_s_tftp">Using netkit&#039;s tftp</h5>
<div class="level5">
<div class="hiddenGlobal  hiddenActive"><div class="hiddenElements"></div><div class="hiddenHead  hiddenSinceBeginning"><div class="hiddenOnHidden">
<p>
Click to display ⇲
</p>
</div><div class="hiddenOnVisible">
<p>
Click to hide ⇱
</p>
</div></div> <!-- .hiddenHead --><div class="hiddenBody">
<p>
As a single command-line:
</p>
<pre class="code">echo -e &quot;binary\nrexmt 1\ntimeout 60\ntrace\nput openwrt-xxx-x.x-xxx.bin\n&quot; | tftp IPv4.x.y.z</pre>

<p>
Step by step:
</p>
<pre class="code">tftp IPv4.x.y.z
binary
rexmt 1
timeout 60
trace
Packet tracing on.
tftp&gt; put openwrt-xxx-x.x-xxx.bin</pre>

<p>
Setting “rexmt 1” will cause the tftp client to constantly retry to send the file to the given address. As advised above, plug in your box after typing the commands, and as soon as the bootloader starts to listen, your client will successfully connect and send the firmware.
</p>

<p>
Some devices will also respond to ping while others do not.
</p>

<p>
Note: for some versions of the CFE bootloader, the last line may need to be “put openwrt-xxx-x.x-xxx.bin code.bin”. If this does not work try other variations instead of code.bin - e.g. openwrt-g-code.bin or openwrt-gs-code.bin.
</p>

<p>
One CFE version only worked after renaming the &#039;....bin&#039; file to &#039;code.bin&#039;. From Linux Ubuntu I then used the command &#039;tftp -m binary 192.168.1.1 -c put code.bin&#039; and the transfer process came to life.
</p>
</div></div>
</div>

<h5 id="using_curl">Using curl</h5>
<div class="level5">
<div class="hiddenGlobal  hiddenActive"><div class="hiddenElements"></div><div class="hiddenHead  hiddenSinceBeginning"><div class="hiddenOnHidden">
<p>
Click to display ⇲
</p>
</div><div class="hiddenOnVisible">
<p>
Click to hide ⇱
</p>
</div></div> <!-- .hiddenHead --><div class="hiddenBody"><pre class="code">curl -T openwrt-xxx-x.x-xxx.bin tftp://IPv4.x.y.z</pre>

<p>
Example: 
</p>
<pre class="code">ip address add 192.168.11.2/24 dev enp0s2; arp -s 192.168.11.1 02:aa:bb:cc:dd:20; curl -T openwrt-tftp.bin tftp://192.168.11.1</pre>
</div></div>
</div>

<h5 id="using_tftpd-hpa">using tftpd-hpa</h5>
<div class="level5">

<p>
<a href="/docs/guide-user/installation/generic.flashing.tftp.easy-ubuntu" class="wikilink1" title="docs:guide-user:installation:generic.flashing.tftp.easy-ubuntu" data-wiki-id="docs:guide-user:installation:generic.flashing.tftp.easy-ubuntu"> A detailed guide for beginners to tftpd-hda</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Linux\/BSD&quot;,&quot;hid&quot;:&quot;linuxbsd&quot;,&quot;codeblockOffset&quot;:7,&quot;secid&quot;:27,&quot;range&quot;:&quot;10303-13182&quot;} -->
<h3 class="sectionedit28" id="macos_x">MacOS X</h3>
<div class="level3">

<p>
On Mac <abbr title="Operating System">OS</abbr> X, you should be able to flash the router with the command line tftp client, which behaves identically to netkit&#039;s tftp above.
</p>

<p>
Some people have had problems with the command line tftp client, however, and recommend using <a href="http://www.mactechnologies.com/index.php?page=downloads#mactftpclient" class="urlextern" title="http://www.mactechnologies.com/index.php?page=downloads#mactftpclient" rel="ugc nofollow">MacTFTP Client</a> instead:
</p>
<ul>
<li class="level1"><div class="li"> Download, install, and open MacTFTP</div>
</li>
<li class="level1"><div class="li"> Choose Send</div>
</li>
<li class="level1"><div class="li"> Address: <em>Your bootloaders <abbr title="Internet Protocol">IP</abbr> address</em></div>
</li>
<li class="level1"><div class="li"> Choose the openwrt-xxx-x.x-xxx.bin file</div>
</li>
<li class="level1"><div class="li"> Click on start while applying power to the WRT54G</div>
</li>
</ul>

<p>
Many Macs will disable the Ethernet card when the router is powered off and will take too long to re-enable the card, causing the <abbr title="Trivial File Transfer Protocol">TFTP</abbr> transfer to fail with an “Invalid Password” error. Many people have had success if they manually configure their network card (in the “Ethernet” tab of “Built-in Ethernet” in System Preferences&#039; Network panel) to:
</p>
<ul>
<li class="level1"><div class="li"> Configure: Manual (Advanced)</div>
</li>
<li class="level1"><div class="li"> Speed: 10 BaseT/UTP</div>
</li>
<li class="level1"><div class="li"> Duplex: full-duplex</div>
</li>
</ul>

<p>
Alternatively, you can connect the router to the Mac via a hub or switch; see <a href="/docs/guide-user/installation/generic.flashing.tftp#troubleshooting" class="wikilink1" title="docs:guide-user:installation:generic.flashing.tftp" data-wiki-id="docs:guide-user:installation:generic.flashing.tftp">the troubleshooting section</a> for more information.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;MacOS X&quot;,&quot;hid&quot;:&quot;macos_x&quot;,&quot;codeblockOffset&quot;:13,&quot;secid&quot;:28,&quot;range&quot;:&quot;13183-14366&quot;} -->
<h3 class="sectionedit29" id="windows">Windows</h3>
<div class="level3">

<p>
There are multiple tftp clients that you can choose from.  
</p>

</div>

<h4 id="tftp_command_line_client_short_instructions">TFTP command line client short Instructions</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> Open a command window (cmd.exe) as administrator</div>
</li>
<li class="level1"><div class="li"> Install the Windows tftp client: <pre class="code">Dism /online /Enable-Feature /FeatureName:TFTP /All</pre>
</div>
</li>
<li class="level1"><div class="li"> Upload the new firmware file to the router: <pre class="code">tftp -i //&lt;bootloader IP tftp server address&gt;// PUT OpenWrt-gs-code.bin</pre>
</div>
</li>
<li class="level1"><div class="li"> Now you may plug in the router (unplug it first if it was plugged).</div>
</li>
</ul>

<p>
Note that some bootloaders do not respond to <abbr title="Internet Control Message Protocol">ICMP</abbr> ping.
</p>
<ul>
<li class="level1"><div class="li"> Plug in your Windows network interface into the appropriate port on the device you will be flashing</div>
</li>
<li class="level1 node"><div class="li"> Configure a static <abbr title="Internet Protocol">IP</abbr> for your wired Ethernet interface to an appropriate <abbr title="Internet Protocol">IP</abbr> address on the same subnet as your <strong>bootloader</strong> </div>
<ul>
<li class="level2"><div class="li"> Example:  Your bootloader has an <abbr title="Internet Protocol">IP</abbr> of 192.0.2.1 (netmask of 255.255.255.0), so your Windows network configuration would use 192.0.2.2/24</div>
</li>
<li class="level2"><div class="li"> See your device&#039;s OpenWrt wiki devicepage for specific settings that the router expects</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> Open an elevated command prompt</div>
<ul>
<li class="level2"><div class="li"> Start, Run, “cmd” on Windows 2000,XP,2003</div>
</li>
<li class="level2"><div class="li"> Start, search on “cmd”, ctrl+shift+enter on Vista, 7, 2008, etc<pre class="code">arp -s &lt;bootloader&#039;s ip address&gt; &lt;bootloaders mac address&gt; &lt;your Windows static IP address&gt;</pre>
</div>
</li>
<li class="level2"><div class="li"> Assists in avoiding delay in reaching tftp server on device</div>
</li>
<li class="level2"><div class="li"> Windows MAC addresses use dashes instead of colons (ex: 00-00-00-00-00-00)</div>
</li>
<li class="level2"><div class="li"> Windows 7 and other similar versions may require:<pre class="code">netsh interface ipv4 add neighbors &quot;Local Area Connection&quot; &lt;bootloaders ip address&gt; &lt;bootloaders mac address&gt;</pre>
</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Disable Windows media sensing (shouldn&#039;t be necessary if you have a switch in the middle)<pre class="code">netsh interface ipv4 set global dhcpmediasense=disabled
netsh interface ipv6 set global dhcpmediasense=disabled</pre>
</div>
</li>
<li class="level1"><div class="li"> <del>Disable Windows firewall and any other firewalls on your client machine</del> (Most host firewalls do not block outbound traffic)</div>
</li>
<li class="level1"><div class="li"> Unplug your router</div>
</li>
<li class="level1"><div class="li"> Run your tftp program (chosen above)    </div>
</li>
<li class="level1"><div class="li"> Plug in router immediately after tftp program begins put attempts</div>
</li>
<li class="level1"><div class="li"> Flash usually takes a few minutes.  See your device&#039;s OpenWrt wiki devicepage for specifics</div>
</li>
<li class="level1"><div class="li"> You will probably want to re-enable Windows media sensing and revert your other network changes</div>
</li>
</ul>

</div>

<h4 id="gui_tftp_clients">GUI TFTP clients</h4>
<div class="level4">
<ul>
<li class="level1 node"><div class="li"> <a href="https://www.3iii.dk/linux/dd-wrt/tftp2.exe" class="urlextern" title="https://www.3iii.dk/linux/dd-wrt/tftp2.exe" rel="ugc nofollow">DD-WRT tftp GUI</a></div>
<ol>
<li class="level2"><div class="li"> Server is the <abbr title="Internet Protocol">IP</abbr> address of your <strong>bootloader</strong> tftp server</div>
</li>
<li class="level2"><div class="li"> Password is typically blank</div>
</li>
<li class="level2"><div class="li"> Select the firmware file</div>
</li>
<li class="level2"><div class="li"> Set retries to 20 or more (most of the time you get it in 3)</div>
</li>
<li class="level2"><div class="li"> Click on Upgrade and it will constantly retry until it gets it</div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> Windows 2000 and Windows XP and later have a built-in <abbr title="Trivial File Transfer Protocol">TFTP</abbr> client that <a href="http://martybugs.net/wireless/openwrt/flash.cgi" class="urlextern" title="http://martybugs.net/wireless/openwrt/flash.cgi" rel="ugc nofollow">can be used</a> to flash with OpenWrt firmware.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Windows&quot;,&quot;hid&quot;:&quot;windows&quot;,&quot;codeblockOffset&quot;:13,&quot;secid&quot;:29,&quot;range&quot;:&quot;14367-17199&quot;} -->
<h2 class="sectionedit30" id="troubleshooting">Troubleshooting</h2>
<div class="level2">

<p>
Don&#039;t forget about your firewall settings, if you use one. It is best to run the “put” command and then immediately apply power to the router, since the upload window is extremely short and very early in boot.
</p>
<div class="table sectionedit31"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> <abbr title="Trivial File Transfer Protocol">TFTP</abbr> Error </th><th class="col1"> Reason </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> Code pattern is incorrect </td><td class="col1"> The firmware image you&#039;re uploading was intended for a different model. </td>
	</tr>
	<tr class="row2">
		<td class="col0"> Invalid Password </td><td class="col1"> The firmware has booted and you&#039;re connected to a password protected tftp server contained in the firmware, not the bootloader&#039;s tftp server. </td>
	</tr>
	<tr class="row3">
		<td class="col0"> Timeout </td><td class="col1"> Ping to verify the router is online<br/>
Try a different tftp client (some are known not to work properly) </td>
	</tr>
	<tr class="row4">
		<td class="col0"> Timeout </td><td class="col1"> Ping to the router works<br/>
NetworkManager (Linux) may still be running causing autosense. Try again with manual configuration. </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:31,&quot;range&quot;:&quot;17440-17995&quot;} -->
<p>
Some machines will disable the ethernet when the router is powered off and not enable it until after the router has been powered on for a few seconds. If you&#039;re consistantly getting “Invalid Password” failures try connecting your computer and the router to a hub or switch. Doing so will keep the link up and prevent the computer from disabling its interface while the router is off.
</p>

<p>
Before you go searching for a hub to keep your link live, try setting your <abbr title="Transmission Control Protocol">TCP</abbr>/<abbr title="Internet Protocol">IP</abbr> setting to a static <abbr title="Internet Protocol">IP</abbr> (192.168.1.10; 255.255.255.0; 192.168.1.1 [gateway]) method instead of <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>.
</p>

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> <strong>If you can flash your router and after that it says “Boot program checksum is invalid” or “Invalid boot block on disk” on serial console try a different tftp client - <em>atftp</em> works well. This occurs with some <em>netkit</em> tftp packages and big firmwares.</strong>
</p>

</div>

<h4 id="example">Example</h4>
<div class="level4">

<p>
<img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" /> would this be better to just exist in specific model&#039;s wiki pages?
</p>

<p>
<img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" /> should we create a page to list models with tftp support, noting which ones need the reset button trick?
</p>

<p>
On many routers, including the Asus WL-500g Premium v1 that I use, you flash an image by disconnecting power, press and hold down the reset button, and connect the power again. Wait a few seconds and the PWR LED will start to blink. Release the reset button. The device will now have a <abbr title="Trivial File Transfer Protocol">TFTP</abbr> server running on <code>192.168.1.1</code>.
</p>

<p>
<strong>Note that many TP-Link models</strong> are reported to support the same trick, including the TL-WR740Nv4, TL-WDR4300v1, TL-WDR3600v1, TL-WR842NDv1, TL-WR841NDv8, TL-WR841Nv11, TL-WR841Nv12, TL-MR3020v1, TL-MR3220v2, TL-MR3420v2, TL-WR940Nv2, TL-WR941NDv5, TL-WR1042NDv1 and possibly any other TP-Link model that has a recent firmware upgrade from the manufacturer. For a summary and ongoing experiments, see: <a href="http://bkil.blogspot.com/2014/12/hidden-tftp-of-tp-link-routers.html" class="urlextern" title="http://bkil.blogspot.com/2014/12/hidden-tftp-of-tp-link-routers.html" rel="ugc nofollow">http://bkil.blogspot.com/2014/12/hidden-tftp-of-tp-link-routers.html</a>
</p>

<p>
You’ll have to use a Ethernet cable at this point. Connect it to LAN1-LAN4, <em class="u">not</em> <abbr title="Wide Area Network">WAN</abbr>. Configure your local machine on the <code>192.168.1.x/24</code> network, for example as <code>192.168.1.42</code>. The router will use <code>192.168.1.1</code>.
</p>
<pre class="code">$ tftp 192.168.1.1
tftp&gt; trace
Packet tracing on.
tftp&gt; binary
tftp&gt; put openwrt-brcm-2.4-squashfs.trx
sent WRQ &lt;file=openwrt-brcm-2.4-squashfs.trx, mode=octet&gt;
received ACK &lt;block=0&gt;
sent DATA &lt;block=1, 512 bytes&gt;
received ACK &lt;block=1&gt;
sent DATA &lt;block=2, 512 bytes&gt;
received ACK &lt;block=2&gt;
sent DATA &lt;block=3, 512 bytes&gt;
received ACK &lt;block=3&gt;
sent DATA &lt;block=4, 512 bytes&gt;
...
received ACK &lt;block=4742&gt;
sent DATA &lt;block=4743, 512 bytes&gt;
received ACK &lt;block=4743&gt;
sent DATA &lt;block=4744, 512 bytes&gt;
received ACK &lt;block=4744&gt;
sent DATA &lt;block=4745, 0 bytes&gt;
received ACK &lt;block=4745&gt;
Sent 2428928 bytes in 6.2 seconds
tftp&gt; quit
$</pre>

<p>
Wait one minute and restart the box by disconnecting and reconnecting power. Some documentations claim that the device should restart by itself but I have never seen this happen, no matter how long I wait.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Troubleshooting&quot;,&quot;hid&quot;:&quot;troubleshooting&quot;,&quot;codeblockOffset&quot;:18,&quot;secid&quot;:30,&quot;range&quot;:&quot;17200-20916&quot;} -->
<h2 class="sectionedit32" id="file_permissions">File Permissions</h2>
<div class="level2">

<p>
Check if your <abbr title="Trivial File Transfer Protocol">TFTP</abbr> Server has sufficient access rights to files or directories.
U-Boots <abbr title="Trivial File Transfer Protocol">TFTP</abbr> Client / tftpboot can complain with:
</p>
<pre class="code">## Error: &#039;Access violation&#039; (2), starting again!</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;File Permissions&quot;,&quot;hid&quot;:&quot;file_permissions&quot;,&quot;codeblockOffset&quot;:19,&quot;secid&quot;:32,&quot;range&quot;:&quot;20917-&quot;} -->