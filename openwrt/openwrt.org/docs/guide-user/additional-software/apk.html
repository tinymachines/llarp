
<h1 class="sectionedit1" id="apk_package_manager">apk package manager</h1>
<div class="level1">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:2,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_round wrap_alert plugin_wrap" style="width: 100%;">
<p>
DO NOT USE <code>apk upgrade</code> to update your packages!
</p>

<p>
Doing so will sooner or later brick your device.  Several library packages have as-yet unhandled ABI versioned names, which will cause a misconfiguration if you blindly upgrade them (<code>libubus</code>, <code>libustream</code> and many others).
</p>

<p>
The safe way to upgrade all packages is to use one of the ASU clients: LuCI Attended Sysupgrade, <code>owut</code> or Firmware Selector.
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:3,&quot;range&quot;:&quot;0-&quot;} -->
<p>
<abbr title="Alpine Package Keeper">APK</abbr> is the package manager originally developed by <a href="https://alpinelinux.org/" class="urlextern" title="https://alpinelinux.org/" rel="ugc nofollow">Alpine Linux</a> and used on OpenWrt development snapshots. Note it has nothing to do with Android or other systems that may use the same acronym.
</p>

<p>
Useful references:
</p>
<ul>
<li class="level1"><div class="li"> <a href="/docs/guide-user/additional-software/opkg-to-apk-cheatsheet" class="wikilink1" title="docs:guide-user:additional-software:opkg-to-apk-cheatsheet" data-wiki-id="docs:guide-user:additional-software:opkg-to-apk-cheatsheet">OPKG to APK Cheatsheet</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://wiki.alpinelinux.org/wiki/Alpine_Package_Keeper" class="urlextern" title="https://wiki.alpinelinux.org/wiki/Alpine_Package_Keeper" rel="ugc nofollow">APK docs on Alpine</a></div>
</li>
</ul>

<p>
<img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" /> Needs some info about OpenWrt&#039;s apk version 3, whereas Alpine Linux still using apk version 2, so there internal/external differences etc.  
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;apk package manager&quot;,&quot;hid&quot;:&quot;apk_package_manager&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-1083&quot;} -->
<h2 class="sectionedit4" id="invocation">Invocation</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Invocation&quot;,&quot;hid&quot;:&quot;invocation&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;1084-1106&quot;} -->
<h2 class="sectionedit5" id="package_manipulation">Package manipulation</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Package manipulation&quot;,&quot;hid&quot;:&quot;package_manipulation&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;1107-1139&quot;} -->
<h2 class="sectionedit6" id="informational_commands">Informational commands</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Informational commands&quot;,&quot;hid&quot;:&quot;informational_commands&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;1140-1174&quot;} -->
<h2 class="sectionedit7" id="options">Options</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Options&quot;,&quot;hid&quot;:&quot;options&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;1175-1194&quot;} -->
<h2 class="sectionedit8" id="examples">Examples</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Examples&quot;,&quot;hid&quot;:&quot;examples&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:8,&quot;range&quot;:&quot;1195-1215&quot;} -->
<h3 class="sectionedit9" id="basics">Basics</h3>
<div class="level3">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Basics&quot;,&quot;hid&quot;:&quot;basics&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:9,&quot;range&quot;:&quot;1216-1232&quot;} -->
<h3 class="sectionedit10" id="extras">Extras</h3>
<div class="level3">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Extras&quot;,&quot;hid&quot;:&quot;extras&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:10,&quot;range&quot;:&quot;1233-1249&quot;} -->
<h3 class="sectionedit11" id="upgrading_packages">Upgrading packages</h3>
<div class="level3">

<p>
Executing the command
</p>
<pre class="code sh">apk update</pre>

<p>
will update the package database from a list of repositories that you can view with the command
</p>
<pre class="code sh">cat /etc/apk/repositories.d/distfeeds.list</pre>

<p>
In that file, lines starting with # are comments; the rest are URLs pointing to package databases, typically under
<a href="https://downloads.openwrt.org/snapshots/targets/" class="urlextern" title="https://downloads.openwrt.org/snapshots/targets/" rel="ugc nofollow">https://downloads.openwrt.org/snapshots/targets/</a>
</p>

<p>
Once the database of available packages has been updated, you can execute the command
</p>
<pre class="code sh">apk upgrade</pre>

<p>
to upgrade all installed packages that are not up to date.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Upgrading packages&quot;,&quot;hid&quot;:&quot;upgrading_packages&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:11,&quot;range&quot;:&quot;1250-1820&quot;} -->
<h2 class="sectionedit12" id="configuration">Configuration</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configuration&quot;,&quot;hid&quot;:&quot;configuration&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:12,&quot;range&quot;:&quot;1821-1846&quot;} -->
<h3 class="sectionedit13" id="adjust_repositories">Adjust repositories</h3>
<div class="level3">

</div>

<h4 id="local_repositories">Local repositories</h4>
<div class="level4">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Adjust repositories&quot;,&quot;hid&quot;:&quot;adjust_repositories&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:13,&quot;range&quot;:&quot;1847-1904&quot;} -->
<h3 class="sectionedit14" id="change_architectures">Change architectures</h3>
<div class="level3">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Change architectures&quot;,&quot;hid&quot;:&quot;change_architectures&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:14,&quot;range&quot;:&quot;1905-1935&quot;} -->
<h3 class="sectionedit15" id="proxy_support">Proxy support</h3>
<div class="level3">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Proxy support&quot;,&quot;hid&quot;:&quot;proxy_support&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:15,&quot;range&quot;:&quot;1936-1959&quot;} -->
<h2 class="sectionedit16" id="troubleshooting">Troubleshooting</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Troubleshooting&quot;,&quot;hid&quot;:&quot;troubleshooting&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:16,&quot;range&quot;:&quot;1960-1987&quot;} -->
<h3 class="sectionedit17" id="out_of_space">Out of space</h3>
<div class="level3">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Out of space&quot;,&quot;hid&quot;:&quot;out_of_space&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:17,&quot;range&quot;:&quot;1988-2010&quot;} -->
<h3 class="sectionedit18" id="local_repository">Local repository</h3>
<div class="level3">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Local repository&quot;,&quot;hid&quot;:&quot;local_repository&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:18,&quot;range&quot;:&quot;2011-2037&quot;} -->
<h2 class="sectionedit19" id="non-standard_installation_destinations">Non-standard installation destinations</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Non-standard installation destinations&quot;,&quot;hid&quot;:&quot;non-standard_installation_destinations&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:19,&quot;range&quot;:&quot;2038-2088&quot;} -->
<h2 class="sectionedit20" id="known_issues">Known Issues</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <code>apk adbdump</code> produces non-standard YAML in certain edge cases.  If you run into this, please report it <a href="https://gitlab.alpinelinux.org/alpine/apk-tools/-/issues/10740" class="urlextern" title="https://gitlab.alpinelinux.org/alpine/apk-tools/-/issues/10740" rel="ugc nofollow">here</a>.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Known Issues&quot;,&quot;hid&quot;:&quot;known_issues&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:20,&quot;range&quot;:&quot;2089-&quot;} -->