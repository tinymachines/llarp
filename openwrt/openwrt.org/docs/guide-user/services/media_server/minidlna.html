
<h1 class="sectionedit1" id="minidlna">MiniDLNA</h1>
<div class="level1">

<p>
MiniDLNA is a lightweight DLNA/UPnP media server. The MiniDNLA daemon serves media files (music, pictures, and video) to clients on a network. 
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;MiniDLNA&quot;,&quot;hid&quot;:&quot;minidlna&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-168&quot;} -->
<h3 class="sectionedit2" id="installation">Installation</h3>
<div class="level3">
<pre class="code bash">opkg update
opkg <span class="kw2">install</span> minidlna</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Installation&quot;,&quot;hid&quot;:&quot;installation&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;169-246&quot;} -->
<h3 class="sectionedit3" id="configuration">Configuration</h3>
<div class="level3">

<p>
Edit one of the following files depending on your miniDLNA Version:
</p>
<pre class="code bash"><span class="sy0">/</span>etc<span class="sy0">/</span>minidlna.conf
<span class="sy0">/</span>etc<span class="sy0">/</span>config<span class="sy0">/</span>minidlna.conf
<span class="sy0">/</span>tmp<span class="sy0">/</span>minidlna.conf</pre>
<pre class="code bash"><span class="co0">#------------------------------------------------------#</span>
<span class="co0"># port for HTTP (descriptions, SOAP, media transfer) traffic</span>
<span class="co0">#------------------------------------------------------#</span>
<span class="re2">port</span>=<span class="nu0">8200</span>
&nbsp;
<span class="co0">#------------------------------------------------------#</span>
<span class="co0"># network interfaces to serve, comma delimited</span>
<span class="co0">#------------------------------------------------------#</span>
<span class="re2">network_interface</span>=br-lan
&nbsp;
<span class="co0">#------------------------------------------------------#</span>
<span class="co0"># set this to the directory you want scanned.</span>
<span class="co0"># * if have multiple directories, you can have multiple media_dir= lines</span>
<span class="co0"># * if you want to restrict a media_dir to a specific content type, you</span>
<span class="co0">#   can prepend the type, followed by a comma, to the directory:</span>
<span class="co0">#   + &quot;A&quot; for audio  (eg. media_dir=A,/home/jmaggard/Music)</span>
<span class="co0">#   + &quot;V&quot; for video  (eg. media_dir=V,/home/jmaggard/Videos)</span>
<span class="co0">#   + &quot;P&quot; for images (eg. media_dir=P,/home/jmaggard/Pictures)</span>
<span class="co0">#------------------------------------------------------#</span>
<span class="co0"># Directory of media is depend on your storage</span>
<span class="co0">#------------------------------------------------------#</span>
<span class="re2">media_dir</span>=A,<span class="sy0">/</span>mnt<span class="sy0">/</span>sda1<span class="sy0">/</span>music
<span class="re2">media_dir</span>=P,<span class="sy0">/</span>mnt<span class="sy0">/</span>sda1<span class="sy0">/</span>picture
<span class="re2">media_dir</span>=V,<span class="sy0">/</span>mnt<span class="sy0">/</span>sda1<span class="sy0">/</span>video
<span class="co0">#------------------------------------------------------#</span>
<span class="co0"># set this if you want to customize the name that shows up on your clients</span>
<span class="co0">#------------------------------------------------------#</span>
<span class="re2">friendly_name</span>=My DLNA Server
&nbsp;
<span class="co0">#------------------------------------------------------#</span>
<span class="co0"># set this if you would like to specify the directory where you want MiniDLNA to store its database and album art cache</span>
<span class="co0">#------------------------------------------------------#</span>
<span class="re2">db_dir</span>=<span class="sy0">/</span>mnt<span class="sy0">/</span>sda1<span class="sy0">/</span>minidlna<span class="sy0">/</span>db
&nbsp;
<span class="co0">#------------------------------------------------------#</span>
<span class="co0"># set this if you would like to specify the directory where you want MiniDLNA to store its log file</span>
<span class="co0">#------------------------------------------------------#</span>
<span class="re2">log_dir</span>=<span class="sy0">/</span>mnt<span class="sy0">/</span>sda1<span class="sy0">/</span>minidlna<span class="sy0">/</span>log
&nbsp;
<span class="co0">#------------------------------------------------------#</span>
<span class="co0"># this should be a list of file names to check for when searching for album art</span>
<span class="co0"># note: names should be delimited with a forward slash (&quot;/&quot;)</span>
<span class="co0">#------------------------------------------------------#</span>
<span class="re2">album_art_names</span>=Cover.jpg<span class="sy0">/</span>cover.jpg<span class="sy0">/</span>AlbumArtSmall.jpg<span class="sy0">/</span>albumartsmall.jpg<span class="sy0">/</span>AlbumArt.jpg<span class="sy0">/</span>albumart.jpg<span class="sy0">/</span>Album.jpg<span class="sy0">/</span>album.jpg<span class="sy0">/</span>Folder.jpg<span class="sy0">/</span>folder.jpg<span class="sy0">/</span>Thumb.jpg<span class="sy0">/</span>thumb.jpg
&nbsp;
<span class="co0">#------------------------------------------------------#</span>
<span class="co0"># set this to no to disable inotify monitoring to automatically discover new files</span>
<span class="co0"># note: the default is yes</span>
<span class="co0">#------------------------------------------------------#</span>
<span class="re2">inotify</span>=<span class="kw2">yes</span>
&nbsp;
<span class="co0">#------------------------------------------------------#</span>
<span class="co0"># set this to yes to enable support for streaming .jpg and .mp3 files to a TiVo supporting HMO</span>
<span class="co0">#------------------------------------------------------#</span>
<span class="re2">enable_tivo</span>=no
&nbsp;
<span class="co0">#------------------------------------------------------#</span>
<span class="co0"># set this to strictly adhere to DLNA standards.</span>
<span class="co0"># * This will allow server-side downscaling of very large JPEG images,</span>
<span class="co0">#   which may hurt JPEG serving performance on (at least) Sony DLNA products.</span>
<span class="co0">#------------------------------------------------------#</span>
<span class="re2">strict_dlna</span>=no
&nbsp;
<span class="co0">#------------------------------------------------------#</span>
<span class="co0"># default presentation url is http address on port 80</span>
<span class="co0">#------------------------------------------------------#</span>
<span class="re2">presentation_url</span>=http:<span class="sy0">//</span>192.168.1.1:<span class="nu0">8200</span><span class="sy0">/</span>
&nbsp;
<span class="co0">#------------------------------------------------------#</span>
<span class="co0"># notify interval in seconds. default is 895 seconds.</span>
<span class="co0">#------------------------------------------------------#</span>
<span class="re2">notify_interval</span>=<span class="nu0">900</span>
&nbsp;
<span class="co0">#------------------------------------------------------#</span>
<span class="co0"># serial and model number the daemon will report to clients</span>
<span class="co0"># in its XML description</span>
<span class="co0">#------------------------------------------------------#</span>
<span class="re2">serial</span>=<span class="nu0">12345678</span>
<span class="re2">model_number</span>=<span class="nu0">1</span>
&nbsp;
<span class="co0">#------------------------------------------------------#</span>
<span class="co0"># specify the path to the MiniSSDPd socket</span>
<span class="co0">#------------------------------------------------------#</span>
<span class="co0">#minissdpdsocket=/var/run/minissdpd.sock</span>
&nbsp;
<span class="co0">#------------------------------------------------------#</span>
<span class="co0"># use different container as root of the tree</span>
<span class="co0"># possible values:</span>
<span class="co0">#   + &quot;.&quot; - use standard container (this is the default)</span>
<span class="co0">#   + &quot;B&quot; - &quot;Browse Directory&quot;</span>
<span class="co0">#   + &quot;M&quot; - &quot;Music&quot;</span>
<span class="co0">#   + &quot;V&quot; - &quot;Video&quot;</span>
<span class="co0">#   + &quot;P&quot; - &quot;Pictures&quot;</span>
<span class="co0"># if you specify &quot;B&quot; and client device is audio-only then &quot;Music/Folders&quot; will be used as root</span>
<span class="co0">#------------------------------------------------------#</span>
<span class="co0">#root_container=.</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configuration&quot;,&quot;hid&quot;:&quot;configuration&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:3,&quot;range&quot;:&quot;247-4769&quot;} -->
<h3 class="sectionedit4" id="configuration_uci">Configuration (uci)</h3>
<div class="level3">

<p>
This describes the configuration options in <code>/etc/config/minidlna</code>.
</p>
<div class="table sectionedit5"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />  This is just an initial dump of all the options I found, I am not certain about any other options or their actual meaning! </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;4872-5005&quot;} --><div class="table sectionedit6"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" /> I just guessed the Type entries. --- <em>hcc23 2013/02/21 02:02</em> </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table1&quot;,&quot;secid&quot;:6,&quot;range&quot;:&quot;5007-5080&quot;} --><div class="table sectionedit7"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>enabled</code> </td><td class="col1"> boolean </td><td class="col2"> ??? </td><td class="col3"> 0 </td><td class="col4"> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>port</code> </td><td class="col1"> string </td><td class="col2"> ??? </td><td class="col3"> 8200 </td><td class="col4"> port for <abbr title="Hypertext Transfer Protocol">HTTP</abbr> (descriptions, SOAP, media transfer) traffic </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>interface</code> </td><td class="col1"> string </td><td class="col2"> ??? </td><td class="col3"> br-lan </td><td class="col4"> network interfaces to serve; comma (<code>,</code>) delimited </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>friendly_name</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> (<em>none</em>) </td><td class="col4"> set this if you want to customize the name that shows up on your clients </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>db_dir</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> /var/run/minidlna </td><td class="col4"> set this if you would like to specify the directory where you want MiniDLNA to store its database and album art cache </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>log_dir</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> /var/log </td><td class="col4"> set this if you would like to specify the directory where you want MiniDLNA to store its log file </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>inotify</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> 1 </td><td class="col4"> set this to no to disable inotify monitoring to automatically discover new files </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <code>enable_tivo</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> 0 </td><td class="col4"> set this to yes to enable support for streaming .jpg and .mp3 files to a TiVo supporting HMO </td>
	</tr>
	<tr class="row9">
		<td class="col0"> <code>strict_dlna</code> </td><td class="col1"> boolean </td><td class="col2"> ??? </td><td class="col3"> 0 </td><td class="col4"> strictly adhere to DLNA standards; This will allow server-side down-scaling of very large JPEG images, which may hurt JPEG serving performance on (at least) Sony DLNA products. </td>
	</tr>
	<tr class="row10">
		<td class="col0"> <code>notify_interval</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 895 </td><td class="col4"> notify interval in seconds </td>
	</tr>
	<tr class="row11">
		<td class="col0"> <code>serial</code> </td><td class="col1"> integer </td><td class="col2"> ??? </td><td class="col3"> 12345678 </td><td class="col4"> model number the daemon will report to clients in its XML description </td>
	</tr>
	<tr class="row12">
		<td class="col0"> <code>model_number</code> </td><td class="col1"> integer </td><td class="col2"> ??? </td><td class="col3"> 1 </td><td class="col4"> model number the daemon will report to clients in its XML description </td>
	</tr>
	<tr class="row13">
		<td class="col0"> <code>root_container</code> </td><td class="col1"> <code>.</code>,<code>B</code>,<code>M</code>,<code>V</code>,<code>P</code> </td><td class="col2"> no </td><td class="col3"> <code>.</code> </td><td class="col4"> container for the tree root; <code>.</code>: default, <code>B</code>:browse directory, <code>M</code>:music, <code>V</code>:video, <code>P</code>:pictures</td>
	</tr>
	<tr class="row14">
		<td class="col0"> <code>media_dir</code> </td><td class="col1"> string </td><td class="col2"> ??? </td><td class="col3"> /mnt </td><td class="col4"> set this to the directory you want scanned;if have multiple directories, you can have multiple <code>media_dir</code> lines; if you want to restrict a media_dir to a specific content type, you can prepend the type, followed by a comma, to the directory: <code>A</code> for audio  (eg. <code>A,/home/jmaggard/Music</code>)<code>V</code> for video, <code>P</code> for pictures; if you specify <code>B</code> and client device is audio-only then “Music/Folders” will be used as root </td>
	</tr>
	<tr class="row15">
		<td class="col0"> <code>album_art_names</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> Cover.jpg/<br/>
cover.jpg/<br/>
AlbumArtSmall.jpg/<br/>
albumartsmall.jpg/<br/>
AlbumArt.jpg/<br/>
albumart.jpg/<br/>
Album.jpg/<br/>
album.jpg/<br/>
Folder.jpg/<br/>
folder.jpg </td><td class="col4"> a list of file names to check when searching for album art; <code>/</code> delimited </td>
	</tr>
	<tr class="row16">
		<td class="col0"> <code>presentation_url</code> </td><td class="col1"> string </td><td class="col2"> ??? </td><td class="col3 leftalign">  </td><td class="col4"> default presentation url is http address on port 80 </td>
	</tr>
	<tr class="row17">
		<td class="col0"> <code>minisdpdsocket</code> </td><td class="col1"> string </td><td class="col2"> ??? </td><td class="col3"> </td><td class="col4"> specify the path to the MiniSSDPd socket </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table2&quot;,&quot;secid&quot;:7,&quot;range&quot;:&quot;5082-7665&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configuration (uci)&quot;,&quot;hid&quot;:&quot;configuration_uci&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:4,&quot;range&quot;:&quot;4770-7666&quot;} -->
<h3 class="sectionedit8" id="notes">Notes</h3>
<div class="level3">

<p>
MiniDLNA&#039;s inotify support may not work as expected when trying to watch on an overlayfs filesystem.
In the case of extroot, e.g. you can watch on <code>/overlay/root/minidlna</code> instead of <code>/root/minidlna</code>.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Notes&quot;,&quot;hid&quot;:&quot;notes&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:8,&quot;range&quot;:&quot;7667-7888&quot;} -->
<h3 class="sectionedit9" id="reference">Reference:</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="https://en.wikipedia.org/wiki/Comparison of UPnP AV media servers" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Comparison of UPnP AV media servers">Comparison of UPnP AV media servers</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://wiki.archlinux.org/index.php/Minidlna" class="urlextern" title="https://wiki.archlinux.org/index.php/Minidlna" rel="ugc nofollow">https://wiki.archlinux.org/index.php/Minidlna</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ubuntuusers.de/MiniDLNA" class="urlextern" title="http://wiki.ubuntuusers.de/MiniDLNA" rel="ugc nofollow">http://wiki.ubuntuusers.de/MiniDLNA</a></div>
</li>
<li class="level1"><div class="li"> The package has uci-support since <a href="https://dev.openwrt.org/changeset/31211/packages" class="urlextern" title="https://dev.openwrt.org/changeset/31211/packages" rel="ugc nofollow">R31211</a>.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Reference:&quot;,&quot;hid&quot;:&quot;reference&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:9,&quot;range&quot;:&quot;7889-8147&quot;} -->
<h2 class="sectionedit10" id="example">Example</h2>
<div class="level2">

<p>
A video demonstration of how MiniDLNA 1.1.3-1 in the repositories can be installed on OpenWrt 14.07 Barrier Breaker: <a href="https://www.youtube.com/watch?v=-vU2zOw6ga0" class="urlextern" title="https://www.youtube.com/watch?v=-vU2zOw6ga0" rel="ugc nofollow">https://www.youtube.com/watch?v=-vU2zOw6ga0</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Example&quot;,&quot;hid&quot;:&quot;example&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:10,&quot;range&quot;:&quot;8148-8329&quot;} -->
<h2 class="sectionedit11" id="tips">Tips</h2>
<div class="level2">

<p>
If you have a decent size music library, you will more than likely find building the minidlna database on your OpenWrt device extremely slow or impossible due to RAM constraints.
The solution is to build the minidlna database on a Linux PC.
</p>
<pre class="code bash"><span class="co0"># Create a directory on your OpenWrt hard or flash drive to hold the minidlna log and database files</span>
<span class="kw2">mkdir</span> <span class="sy0">/</span>mnt<span class="sy0">/</span>hdd<span class="sy0">/</span>minidlna
&nbsp;
<span class="co0"># Configure minidlna to put database and log file on the hard or flash drive connected to your OpenWrt device</span>
uci <span class="kw1">set</span> minidlna.<span class="sy0">@</span>minidlna<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.option.inotify=<span class="st0">&quot;0&quot;</span>
uci <span class="kw1">set</span> minidlna.<span class="sy0">@</span>minidlna<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.db_dir=<span class="st0">&quot;/mnt/hdd/minidlna&quot;</span>
uci <span class="kw1">set</span> minidlna.<span class="sy0">@</span>minidlna<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.log_dir=<span class="st0">&quot;/mnt/hdd/minidlna&quot;</span>
uci add_list minidlna.<span class="sy0">@</span>minidlna<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.media_dir=<span class="st0">&quot;A,/mnt/hdd/media&quot;</span>
uci commit minidlna
&nbsp;
<span class="co0"># Create a minidlna configuration file on the hard or flash drive connected to your OpenWrt device</span>
<span class="kw2">cat</span> <span class="sy0">&lt;&lt;</span> EOF <span class="sy0">&gt;</span> cp_minidlna_conf.sh
<span class="co0">#!/bin/sh</span>
&nbsp;
<span class="kw3">source</span> <span class="sy0">/</span>lib<span class="sy0">/</span>functions.sh
&nbsp;
minidlna_cfg_append<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="kw3">echo</span> <span class="st0">&quot;$1&quot;</span> 
<span class="br0">&#125;</span>
&nbsp;
minidlna_cfg_addbool<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="kw3">local</span> <span class="re2">cfg</span>=<span class="st0">&quot;$1&quot;</span>
	<span class="kw3">local</span> <span class="re2">key</span>=<span class="st0">&quot;$2&quot;</span>
	<span class="kw3">local</span> <span class="re2">def</span>=<span class="st0">&quot;$3&quot;</span>
	<span class="kw3">local</span> val
&nbsp;
	config_get_bool val <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> <span class="st0">&quot;<span class="es2">$key</span>&quot;</span> <span class="st0">&quot;<span class="es2">$def</span>&quot;</span>
	<span class="br0">&#91;</span> <span class="st0">&quot;<span class="es2">$val</span>&quot;</span> <span class="re5">-gt</span> <span class="nu0">0</span> <span class="br0">&#93;</span> <span class="sy0">&amp;&amp;</span> <span class="re2">val</span>=<span class="st0">&quot;yes&quot;</span> <span class="sy0">||</span> <span class="re2">val</span>=<span class="st0">&quot;no&quot;</span>
	minidlna_cfg_append <span class="st0">&quot;<span class="es2">$key</span>=<span class="es2">$val</span>&quot;</span>
<span class="br0">&#125;</span>
&nbsp;
minidlna_cfg_addstr<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="kw3">local</span> <span class="re2">cfg</span>=<span class="st0">&quot;$1&quot;</span>
	<span class="kw3">local</span> <span class="re2">key</span>=<span class="st0">&quot;$2&quot;</span>
	<span class="kw3">local</span> <span class="re2">def</span>=<span class="st0">&quot;$3&quot;</span>
	<span class="kw3">local</span> val
&nbsp;
	config_get val <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> <span class="st0">&quot;<span class="es2">$key</span>&quot;</span> <span class="st0">&quot;<span class="es2">$def</span>&quot;</span>
	<span class="br0">&#91;</span> <span class="re5">-n</span> <span class="st0">&quot;<span class="es2">$val</span>&quot;</span> <span class="br0">&#93;</span> <span class="sy0">&amp;&amp;</span> minidlna_cfg_append <span class="st0">&quot;<span class="es2">$key</span>=<span class="es2">$val</span>&quot;</span>
<span class="br0">&#125;</span>
&nbsp;
minidlna_cfg_add_media_dir<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="kw3">local</span> <span class="re2">val</span>=<span class="st0">&quot;$1&quot;</span>
&nbsp;
	minidlna_cfg_append <span class="st0">&quot;media_dir=<span class="es2">$val</span>&quot;</span>
<span class="br0">&#125;</span>
&nbsp;
minidlna_create_config<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="kw3">local</span> <span class="re2">cfg</span>=<span class="st0">&quot;$1&quot;</span>
	<span class="kw3">local</span> port
	<span class="kw3">local</span> interface
&nbsp;
	config_get port <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> port
	config_get interface <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> interface
&nbsp;
	<span class="br0">&#91;</span> <span class="re5">-z</span> <span class="st0">&quot;<span class="es2">$interface</span>&quot;</span> <span class="re5">-o</span> <span class="re5">-t</span> <span class="st0">&quot;<span class="es2">$port</span>&quot;</span> <span class="br0">&#93;</span> <span class="sy0">&amp;&amp;</span> <span class="kw3">return</span> <span class="nu0">1</span>
&nbsp;
	<span class="kw3">echo</span> <span class="st0">&quot;# this file is generated automatically, don't edit&quot;</span> 
&nbsp;
	minidlna_cfg_append <span class="st0">&quot;port=<span class="es2">$port</span>&quot;</span>
	minidlna_cfg_append <span class="st0">&quot;network_interface=<span class="es2">$interface</span>&quot;</span>
&nbsp;
	minidlna_cfg_addstr <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> friendly_name
	minidlna_cfg_addstr <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> db_dir
	minidlna_cfg_addstr <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> log_dir
	minidlna_cfg_addbool <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> inotify <span class="st0">&quot;1&quot;</span>
	minidlna_cfg_addbool <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> enable_tivo <span class="st0">&quot;0&quot;</span>
	minidlna_cfg_addbool <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> strict_dlna <span class="st0">&quot;0&quot;</span>
	minidlna_cfg_addstr <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> album_art_names
	minidlna_cfg_addstr <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> presentation_url
	minidlna_cfg_addstr <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> notify_interval <span class="st0">&quot;900&quot;</span>
	minidlna_cfg_addstr <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> serial <span class="st0">&quot;12345678&quot;</span>
	minidlna_cfg_addstr <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> model_number <span class="st0">&quot;1&quot;</span>
	minidlna_cfg_addstr <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> minissdpsocket
	minidlna_cfg_addstr <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> root_container <span class="st0">&quot;.&quot;</span>
	config_list_foreach <span class="st0">&quot;<span class="es2">$cfg</span>&quot;</span> media_dir minidlna_cfg_add_media_dir
&nbsp;
	<span class="kw3">return</span> <span class="nu0">0</span>
<span class="br0">&#125;</span>
&nbsp;
config_load minidlna
&nbsp;
minidlna_create_config config
EOF
&nbsp;
<span class="kw2">chmod</span> +x cp_minidlna_conf.sh
.<span class="sy0">/</span>cp_minidlna_conf.sh <span class="sy0">&gt;</span> <span class="sy0">/</span>mnt<span class="sy0">/</span>hdd<span class="sy0">/</span>minidlna<span class="sy0">/</span>minidlna.conf
&nbsp;
<span class="co0"># Remove the hard or flash drive from the OpenWrt device and connect it to your Linux PC</span>
block <span class="kw2">umount</span>
&nbsp;
<span class="co0"># Build the minidlna database on a Linux PC with http://sourceforge.net/projects/minidlna/files/minidlna/1.1.4/</span>
minidlnad <span class="re5">-d</span> <span class="re5">-R</span> <span class="re5">-v</span> <span class="re5">-f</span> <span class="sy0">/</span>mnt<span class="sy0">/</span>hdd<span class="sy0">/</span>minidlna<span class="sy0">/</span>minidlna.conf
&nbsp;
<span class="co0"># Remove the hard or flash drive from your Linux PC and reconnect to your OpenWrt device</span>
block <span class="kw2">mount</span></pre>
<div class="table sectionedit12"><table class="inline">
	<tr class="row0">
		<td class="col0"> <a href="/_detail/meta/icons/tango/48px-dialog-warning.svg.png?id=docs%3Aguide-user%3Aservices%3Amedia_server%3Aminidlna" class="media" title="meta:icons:tango:48px-dialog-warning.svg.png"><img src="/_media/meta/icons/tango/48px-dialog-warning.svg.png" class="medialeft" loading="lazy" alt="" /></a> Ensure that the Linux PC portable hard or flash drive mount point is <strong>exactly</strong> the same as the OpenWrt hard or flash drive mount point. Otherwise, the OpenWrt minidlna will delete and rescan the database you generated on the PC since the paths don&#039;t match </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table3&quot;,&quot;secid&quot;:12,&quot;range&quot;:&quot;11267-11579&quot;} -->
<p>
This method has been tested with an Openwrt device with 32MB of RAM and a music library of over 11,000 songs. You may also want to add <a href="/docs/guide-user/storage/fstab#adding_swap_partitions" class="wikilink1" title="docs:guide-user:storage:fstab" data-wiki-id="docs:guide-user:storage:fstab">swap</a> if you are running low on memory.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Tips&quot;,&quot;hid&quot;:&quot;tips&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:11,&quot;range&quot;:&quot;8330-&quot;} -->