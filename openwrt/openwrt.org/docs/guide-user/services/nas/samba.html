
<h1 class="sectionedit1" id="samba_advanced_settings">Samba Advanced Settings</h1>
<div class="level1">

<p>
For installation instructions see <a href="/docs/guide-user/services/nas/cifs.server" class="wikilink1" title="docs:guide-user:services:nas:cifs.server" data-wiki-id="docs:guide-user:services:nas:cifs.server">Samba How To</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Samba Advanced Settings&quot;,&quot;hid&quot;:&quot;samba_advanced_settings&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-131&quot;} -->
<h2 class="sectionedit2" id="uci_configuration_options">UCI configuration options</h2>
<div class="level2">

<p>
The UCI configuration file is located at /etc/config/samba. Be extremely careful editing this file by hand - the samba shell interface (<code>service samba restart</code>) will ignore invalid options, but LuCI Services/Network Shares will bring up an error like this:
</p>
<pre class="code">/usr/lib/lua/luci/dispatcher.lua:449: Failed to execute cbi dispatcher target for entry &#039;/admin/services/samba&#039;.</pre>

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> It is hence<strong> strongly recommended</strong> that you use LuCI to establish the initial configuration and then edit the template file (/etc/samba/smb.conf.template) via LuCI Edit Template tab or from the shell as needed.
</p>

<p>
If luci-app-samba not working or can&#039;t find in web gui - &gt; type “rm /tmp/luci-indexcache” or restart router.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;UCI configuration options&quot;,&quot;hid&quot;:&quot;uci_configuration_options&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;132-886&quot;} -->
<h3 class="sectionedit3" id="common_options">Common Options</h3>
<div class="level3">

<p>
The config section type <code>samba</code> determines values and options relevant to the overall operation of samba. The following table lists all available options, their default value and respectively a short characterization. See <a href="http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html#idp58030944" class="urlextern" title="http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html#idp58030944" rel="ugc nofollow">smb.conf man page</a> for further details.
</p>

<p>
These are the default settings for the common options:
</p>
<pre class="code bash">config <span class="st_h">'samba'</span>
        option <span class="st_h">'name'</span> <span class="st_h">'OpenWrt'</span>
        option <span class="st_h">'workgroup'</span> <span class="st_h">'OpenWrt'</span>
        option <span class="st_h">'description'</span> <span class="st_h">'Samba on OpenWrt'</span>
        option <span class="st_h">'charset'</span> <span class="st_h">'UTF-8'</span>
        option <span class="st_h">'homes'</span> <span class="st_h">'0'</span>
        option <span class="st_h">'interface'</span> <span class="st_h">'loopback lan'</span></pre>
<div class="sortable"><div class="table sectionedit4"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Option </th><th class="col5"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>name</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> hostname or OpenWrt </td><td class="col4"> </td><td class="col5"> Name of the Server </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>workgroup</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> hostname or OpenWrt </td><td class="col4"> </td><td class="col5"> Name of the Workgroup </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>description</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> Samba on hostname or OpenWrt </td><td class="col4"> </td><td class="col5"> Description of the Server </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>charset</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> UTF-8 </td><td class="col4"> </td><td class="col5"> Display charset &amp; unix charset </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>homes</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> 0 </td><td class="col4"> 0, 1 </td><td class="col5"> Share the user directory </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>interface</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> loopback lan </td><td class="col4"> </td><td class="col5"> Interfaces samba should listen on. Syntax: “&lt;uci-interface-name&gt; &lt;uci-interface-name&gt; ...”. Note, that it is <em class="u">not</em> of type list. </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;1577-2205&quot;} --></div>
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Common Options&quot;,&quot;hid&quot;:&quot;common_options&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:3,&quot;range&quot;:&quot;887-2218&quot;} -->
<h3 class="sectionedit5" id="sambashare">Sambashare</h3>
<div class="level3">

<p>
The daemons are up and running and recheable via NetBIOS. Now you only need to configure the directories you intend to make accesible to users in your <abbr title="Local Area Network">LAN</abbr>. This example assumes you attached a USB harddisk to the USB-Port and <em>correctly</em> mounted a partition. You can now choose to share the partition as a whole, or just individual directories on it. Fo each entry you need to create an individual config &#039;sambashare&#039; section.
</p>
<pre class="code bash">config <span class="st_h">'sambashare'</span>
        option <span class="st_h">'name'</span> <span class="st_h">'Shares'</span>
        option <span class="st_h">'path'</span> <span class="st_h">'/mnt/sda3'</span>
<span class="co0">#       option 'users' 'sandra'</span>
        option <span class="st_h">'guest_ok'</span> <span class="st_h">'yes'</span>
        option <span class="st_h">'create_mask'</span> <span class="st_h">'0700'</span>
        option <span class="st_h">'dir_mask'</span> <span class="st_h">'0700'</span>
        option <span class="st_h">'read_only'</span> <span class="st_h">'yes'</span></pre>
<div class="sortable"><div class="table sectionedit6"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Option </th><th class="col5"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>name</code> </td><td class="col1"> string </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> </td><td class="col5"> Name of the entry. Will be shown in the filebrowser. </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>path</code> </td><td class="col1"> file path </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> </td><td class="col5"> The complete path of the directory. <a href="http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html#PATH" class="urlextern" title="http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html#PATH" rel="ugc nofollow">path</a> </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>users</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> guest account or from global template </td><td class="col4"> </td><td class="col5"> the samba-users allowed access to this entry; use <code>smbpasswd</code> to create a user-pwd combination! Several users can be specified, separated by a coma (ex : option &#039;users&#039; &#039;root,nobody&#039; ). Translated to <a href="http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html#VALIDUSERS" class="urlextern" title="http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html#VALIDUSERS" rel="ugc nofollow">valid users</a>. </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>read_only</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> yes or from global template </td><td class="col4"> no, yes </td><td class="col5"> no allows for read/write, else only read access is granted; (for rw, you also need to mount fs rw!). <a href="http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html#READONLY" class="urlextern" title="http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html#READONLY" rel="ugc nofollow">read only</a>. </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>guest_ok</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> no or from global template </td><td class="col4"> no, yes </td><td class="col5"> Specifies if you need to login via samba-username and password to access this share. <a href="http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html#GUESTOK" class="urlextern" title="http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html#GUESTOK" rel="ugc nofollow">guest ok</a>. </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>create_mask</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 0744 or from global template </td><td class="col4"> </td><td class="col5"> chmod mask for files created (need write access). <a href="http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html#CREATEMASK" class="urlextern" title="http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html#CREATEMASK" rel="ugc nofollow">create mask</a> </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>dir_mask</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 0755 or from global template </td><td class="col4"> </td><td class="col5"> chmod mask for directories created (need write access). <a href="http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html#DIRECTORYMASK" class="urlextern" title="http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html#DIRECTORYMASK" rel="ugc nofollow">directory mask</a>. </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table1&quot;,&quot;secid&quot;:6,&quot;range&quot;:&quot;2952-4569&quot;} --></div>
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Sambashare&quot;,&quot;hid&quot;:&quot;sambashare&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:5,&quot;range&quot;:&quot;2219-4582&quot;} -->
<h2 class="sectionedit7" id="additional_configuration_options">Additional Configuration Options</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Additional Configuration Options&quot;,&quot;hid&quot;:&quot;additional_configuration_options&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:7,&quot;range&quot;:&quot;4583-4627&quot;} -->
<h3 class="sectionedit8" id="common_options1">Common Options</h3>
<div class="level3">

<p>
In addition to the UCI file (<code>/etc/config/samba</code>), modifications can be made to the <code>/etc/samba/smb.conf.template</code> file.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Common Options&quot;,&quot;hid&quot;:&quot;common_options1&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:8,&quot;range&quot;:&quot;4628-4778&quot;} -->
<h3 class="sectionedit9" id="sambashare1">Sambashare</h3>
<div class="level3">

<p>
Modifications can be made to the <code>/etc/samba/smb.conf.template</code> file, based on <code>/var/etc/smb.conf</code> file, created by the <code>samba</code> service.
</p>

<p>
The full section from <code>/var/etc/smb.conf</code> should be added to <code>/etc/samba/smb.conf.template</code> and removed from UCI.
</p>

<p>
For example:
</p>
<pre class="code bash">uci show samba <span class="sy0">|</span> <span class="kw2">grep</span> name
samba.<span class="sy0">@</span>sambashare<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.name=over9000
<span class="kw2">sed</span> <span class="re5">-e</span> <span class="st_h">'/\[over9000\]/,/^$/ !d'</span> <span class="sy0">/</span>var<span class="sy0">/</span>etc<span class="sy0">/</span>smb.conf <span class="sy0">&gt;&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>samba<span class="sy0">/</span>smb.conf.template
uci delete samba.<span class="sy0">@</span>sambashare<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>
uci commit samba
service samba restart</pre>

<p>
In a second approach the <code>samba</code> service could also be edited for spit whatever to <code>/var/etc/smb.conf</code> associated with UCI.
</p>

<p>
For example, hack once:
</p>
<pre class="code bash"><span class="kw2">sed</span> <span class="re5">-i</span> <span class="re5">-e</span> <span class="st_h">'/dir_mask/p;s/dir_mask\|directory mask/browsable/g'</span> <span class="sy0">/</span>etc<span class="sy0">/</span>init.d<span class="sy0">/</span>samba</pre>

<p>
Then, anytime:
</p>
<pre class="code bash">uci show samba <span class="sy0">|</span> <span class="kw2">grep</span> name
samba.<span class="sy0">@</span>sambashare<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.name=over9000
uci <span class="kw1">set</span> samba.<span class="sy0">@</span>sambashare<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.browsable=no
uci commit samba
service samba restart
<span class="kw2">cat</span> <span class="sy0">/</span>var<span class="sy0">/</span>etc<span class="sy0">/</span>smb.conf</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Sambashare&quot;,&quot;hid&quot;:&quot;sambashare1&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:9,&quot;range&quot;:&quot;4779-5770&quot;} -->
<h2 class="sectionedit10" id="configuration_examples">Configuration examples</h2>
<div class="level2">

<p>
Samba can be configured at either share level access or user level access.
At share level access all users on the network can access the share, and all files are shared with all users.
At user level access a username and password are needed to access the share.
By default Samba is configured for user level access.
</p>

<p>
These configurations have proven to work for some:
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configuration examples&quot;,&quot;hid&quot;:&quot;configuration_examples&quot;,&quot;codeblockOffset&quot;:6,&quot;secid&quot;:10,&quot;range&quot;:&quot;5771-6174&quot;} -->
<h3 class="sectionedit11" id="share_level_access">Share level access</h3>
<div class="level3">

<p>
At share level access all users on the network can access the share, and all files are shared with all users. To set share level access change <code>security = user</code> to <code>security = share</code> in <code>/etc/samba/smb.conf.template</code>:
</p>
<pre class="code ini"><span class="re0"><span class="br0">&#91;</span>global<span class="br0">&#93;</span></span>
	netbios name <span class="sy0">=</span><span class="sy0"><span class="re2"> |NAME| </span></span>
	<span class="re1">workgroup</span> <span class="sy0">=</span><span class="sy0"><span class="re2"> |WORKGROUP|</span></span>
	server string <span class="sy0">=</span><span class="sy0"><span class="re2"> |DESCRIPTION|</span></span>
	<span class="re1">syslog</span> <span class="sy0">=</span><span class="re2"> 10</span>
	encrypt passwords <span class="sy0">=</span><span class="re2"> true</span>
	passdb backend <span class="sy0">=</span><span class="re2"> smbpasswd</span>
	obey pam restrictions <span class="sy0">=</span><span class="re2"> yes</span>
	socket options <span class="sy0">=</span><span class="re2"> TCP_NODELAY</span>
	unix charset <span class="sy0">=</span><span class="re2"> ISO-8859-1</span>
	local master <span class="sy0">=</span><span class="re2"> yes</span>
	preferred master <span class="sy0">=</span><span class="re2"> yes</span>
	os level <span class="sy0">=</span><span class="re2"> 20</span>
	<span class="re1">security</span> <span class="sy0">=</span><span class="re2"> share</span>
	guest account <span class="sy0">=</span><span class="re2"> nobody</span>
	invalid users <span class="sy0">=</span><span class="re2"> root</span>
	smb passwd file <span class="sy0">=</span><span class="re2"> /etc/samba/smbpasswd</span></pre>

<p>
Then add a share to <code>/etc/config/samba</code>. Make sure that <code>guest ok</code> is set to <code>yes</code>
</p>
<pre class="code bash">config <span class="st_h">'samba'</span>
	option <span class="st_h">'name'</span> <span class="st_h">'openwrt'</span>
	option <span class="st_h">'workgroup'</span> <span class="st_h">'WORKGROUP'</span>
	option <span class="st_h">'description'</span> <span class="st_h">'openwrt'</span>
	option <span class="st_h">'homes'</span> <span class="st_h">'1'</span>
&nbsp;
config <span class="st_h">'sambashare'</span>
	option <span class="st_h">'read_only'</span> <span class="st_h">'no'</span>
	option <span class="st_h">'create_mask'</span> <span class="st_h">'0700'</span>
	option <span class="st_h">'dir_mask'</span> <span class="st_h">'0700'</span>
	option <span class="st_h">'name'</span> <span class="st_h">'name-of-share'</span>
	option <span class="st_h">'path'</span> <span class="st_h">'/path/of/share'</span>
	option <span class="st_h">'guest_ok'</span> <span class="st_h">'yes'</span></pre>

<p>
This share should now be accessible by <code>\\ip-adress-openwrt\name-of-share</code> (windows, username and password can be anything).
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Share level access&quot;,&quot;hid&quot;:&quot;share_level_access&quot;,&quot;codeblockOffset&quot;:6,&quot;secid&quot;:11,&quot;range&quot;:&quot;6175-7403&quot;} -->
<h3 class="sectionedit12" id="user_level_access">User level access</h3>
<div class="level3">

<p>
At user level access a username and password are needed to access the share.
</p>

<p>
Steps:
</p>

</div>

<h4 id="add_user_to_system">1. Add user to system</h4>
<div class="level4">

<p>
To access a samba share with user level access there must be a user added to the system. Edit <code>/etc/passwd</code> and add a line for the new user “foo”. Choose a user id (the first number in the line) of 1000 or higher that does not exist yet.
</p>
<pre class="code">root:!:0:0:root:/root:/bin/ash
nobody:*:65534:65534:nobody:/var:/bin/false
daemon:*:65534:65534:daemon:/var:/bin/false
foo:x:1001:1001:smb user:/dev/null:/bin/false</pre>

<p>
Edit <code>/etc/group</code> and add a line for the new user “foo”.
</p>
<pre class="code">root:x:0:
nogroup:x:65534:
daemon:x:1:
foo:x:1001:foo</pre>

<p>
<strong>Note:</strong> keep in mind that the user(s) and group(s) utilized by Samba need to have the proper permissions for their shares, i.e. they need write access in order to write via smb.
</p>

</div>

<h4 id="add_samba_password_to_user">2. Add samba password to user</h4>
<div class="level4">

<p>
<code>smbpasswd -a foo</code>
</p>

</div>

<h4 id="change_samba_config_to_accept_users_with_null_passwords">3. Change samba config to accept users with null passwords</h4>
<div class="level4">

<p>
Edit <code>/etc/samba/smb.conf.template</code> and add <code>null passwords = yes</code>:
</p>
<pre class="code ini"><span class="re0"><span class="br0">&#91;</span>global<span class="br0">&#93;</span></span>
	netbios name <span class="sy0">=</span><span class="sy0"><span class="re2"> |NAME| </span></span>
	<span class="re1">workgroup</span> <span class="sy0">=</span><span class="sy0"><span class="re2"> |WORKGROUP|</span></span>
	server string <span class="sy0">=</span><span class="sy0"><span class="re2"> |DESCRIPTION|</span></span>
	<span class="re1">syslog</span> <span class="sy0">=</span><span class="re2"> 10</span>
	encrypt passwords <span class="sy0">=</span><span class="re2"> true</span>
	passdb backend <span class="sy0">=</span><span class="re2"> smbpasswd</span>
	obey pam restrictions <span class="sy0">=</span><span class="re2"> yes</span>
	socket options <span class="sy0">=</span><span class="re2"> TCP_NODELAY</span>
	unix charset <span class="sy0">=</span><span class="re2"> ISO-8859-1</span>
	local master <span class="sy0">=</span><span class="re2"> yes</span>
	preferred master <span class="sy0">=</span><span class="re2"> yes</span>
	os level <span class="sy0">=</span><span class="re2"> 20</span>
	<span class="re1">security</span> <span class="sy0">=</span><span class="re2"> user</span>
	null passwords <span class="sy0">=</span><span class="re2"> yes</span>
	guest account <span class="sy0">=</span><span class="re2"> nobody</span>
	invalid users <span class="sy0">=</span><span class="re2"> root</span>
	smb passwd file <span class="sy0">=</span><span class="re2"> /etc/samba/smbpasswd</span></pre>

</div>

<h4 id="add_a_share">4. Add a share</h4>
<div class="level4">

<p>
Then add a share to <code>/etc/config/samba</code>. Make shure that <code>guest ok</code> is set to <code>no</code>
</p>
<pre class="code bash">config <span class="st_h">'samba'</span>
	option <span class="st_h">'name'</span> <span class="st_h">'openwrt'</span>
	option <span class="st_h">'workgroup'</span> <span class="st_h">'WORKGROUP'</span>
	option <span class="st_h">'description'</span> <span class="st_h">'openwrt'</span>
	option <span class="st_h">'homes'</span> <span class="st_h">'1'</span>
&nbsp;
config <span class="st_h">'sambashare'</span>
	option <span class="st_h">'read_only'</span> <span class="st_h">'no'</span>
	option <span class="st_h">'create_mask'</span> <span class="st_h">'0700'</span>
	option <span class="st_h">'dir_mask'</span> <span class="st_h">'0700'</span>
	option <span class="st_h">'name'</span> <span class="st_h">'name-of-share'</span>
	option <span class="st_h">'path'</span> <span class="st_h">'/path/of/share'</span>
	option <span class="st_h">'guest_ok'</span> <span class="st_h">'no'</span></pre>

<p>
This share should now be accessible by <code>\\ip-adress-openwrt\name-of-share</code> (windows, correct username and password are needed).
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;User level access&quot;,&quot;hid&quot;:&quot;user_level_access&quot;,&quot;codeblockOffset&quot;:8,&quot;secid&quot;:12,&quot;range&quot;:&quot;7404-9501&quot;} -->
<h2 class="sectionedit13" id="notes">Notes</h2>
<div class="level2">

<p>
If you use a trunk version and experience connection aborts take a look at this file <code>/etc/samba/samba.conf.template</code> and search for <code>reset on zero vc = yes</code>, remove this line or set it to <code>no</code>.
</p>

<p>
More information about this issue here: <a href="https://dev.openwrt.org/ticket/9992" class="urlextern" title="https://dev.openwrt.org/ticket/9992" rel="ugc nofollow">https://dev.openwrt.org/ticket/9992</a>
</p>

<p>
If your CPU is your samba bottleneck, disabling sendfile might help.
See <a href="http://www.linksysinfo.org/index.php?threads/speeding-up-the-samba-by-30.52240/" class="urlextern" title="http://www.linksysinfo.org/index.php?threads/speeding-up-the-samba-by-30.52240/" rel="ugc nofollow">http://www.linksysinfo.org/index.php?threads/speeding-up-the-samba-by-30.52240/</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Notes&quot;,&quot;hid&quot;:&quot;notes&quot;,&quot;codeblockOffset&quot;:12,&quot;secid&quot;:13,&quot;range&quot;:&quot;9502-&quot;} -->