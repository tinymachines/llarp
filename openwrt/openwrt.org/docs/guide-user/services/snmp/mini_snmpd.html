
<h1 class="sectionedit1" id="minimal_snmp_daemon_mini_snmpd_configuration">Minimal SNMP Daemon (mini_snmpd) configuration</h1>
<div class="level1">

<p>
The <em>mini_snmpd</em> configuration is located in <code>/etc/config/mini_snmpd</code>.
This configuration is responsible for defining basic snmp attributes, such as <em>location</em>, <em>contact</em>, <em>community</em> and snmp tables for <em>disks</em> and <em>interfaces</em>.
This daemon reports only 32bit counters (Counter32).
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Minimal SNMP Daemon (mini_snmpd) configuration&quot;,&quot;hid&quot;:&quot;minimal_snmp_daemon_mini_snmpd_configuration&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-359&quot;} -->
<h2 class="sectionedit2" id="sections">Sections</h2>
<div class="level2">

<p>
Configuration consists of single section called <em>mini_snmpd</em>.
</p>

<p>
The default configuration defines following settings:
</p>
<pre class="code">config mini_snmpd
        option enabled          &#039;0&#039;
        option ipv6             &#039;0&#039;
        option community        &#039;public&#039;
        option location         &#039; &#039;
        option contact          &#039; &#039;
        list disks              &#039;/tmp&#039;
        list disks              &#039;/jffs&#039;
        list interfaces         &#039;lo&#039;
        list interfaces         &#039;br-lan&#039;
        list interfaces         &#039;br-wan&#039; # Max 4</pre>
<ul>
<li class="level1"><div class="li"> <code>enabled</code> defines if daemon should be started on by rc script</div>
</li>
<li class="level1"><div class="li"> <code>ipv6</code> enables daemon&#039;s support of ipv6 sockets - it will listen on :::161 instead of 0.0.0.0:161</div>
</li>
<li class="level1"><div class="li"> <code>community</code> sets SNMP community string</div>
</li>
<li class="level1"><div class="li"> <code>location</code> and <code>contact</code> set those base SNMP attributes</div>
</li>
<li class="level1"><div class="li"> <code>disks</code> and <code>interfaces</code> specifies which filesystems and interfaces should be referenced by corresponding management tables.</div>
</li>
<li class="level1"><div class="li"> <code>sysName</code> is set automatically from the Hostname on the main System page of the web <abbr title="Graphical User Interface">GUI</abbr></div>
</li>
</ul>
<div class="table sectionedit3"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>enabled</code> </td><td class="col1"> boolean </td><td class="col2"> yes </td><td class="col3"> <code>0</code> </td><td class="col4"> Switches daemon on or off in rc (init.d) script </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>ipv6</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> <code>0</code> </td><td class="col4"> Enables daemon&#039;s support of ipv6 sockets </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>community</code> </td><td class="col1"> string </td><td class="col2"> yes </td><td class="col3"> <code>public</code> </td><td class="col4"> Sets SNMP Community string to contact this agent </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>location</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> If defined, sets <em>location</em> OID which <em>mini_snmpd</em> reports </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>contact</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> If defined, sets <em>contact</em> OID wchi <em>mini_snmpd</em> reports </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>disks</code> </td><td class="col1"> list of filesystems&#039; mountpoints </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> If defined, <em>mini_snmpd</em> includes this filesystem in output table </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>interfaces</code> </td><td class="col1"> list of network interfaces </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> If defined, <em>mini_snmpd</em> includes this interfaces in output table </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:3,&quot;range&quot;:&quot;1433-2237&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Sections&quot;,&quot;hid&quot;:&quot;sections&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;360-2238&quot;} -->
<h2 class="sectionedit4" id="examples">Examples</h2>
<div class="level2">

<p>
<em class="u">Simple example:</em> enable daemon, excluding ipv6 support, defining other parameters.
</p>
<pre class="code">config mini_snmpd
	option enabled 1
	option ipv6 0
	option community public
	option location &#039;&#039;
	option contact &#039;&#039;
	option disks &#039;/tmp,/jffs&#039;
	option interfaces &#039;wlan0,br-lan,eth0.1,eth0&#039; # Max 4</pre>

<p>
Example of the <code>snmpwalk</code>:
</p>
<pre class="code">$ snmpwalk -m ALL -v 2c -c public 192.168.1.1 
SNMPv2-MIB::sysDescr.0 = STRING: 
SNMPv2-MIB::sysObjectID.0 = OID: SNMPv2-SMI::enterprises
DISMAN-EVENT-MIB::sysUpTimeInstance = Timeticks: (17915) 0:02:59.15
SNMPv2-MIB::sysContact.0 = STRING: 
SNMPv2-MIB::sysName.0 = STRING: OpenWrt
SNMPv2-MIB::sysLocation.0 = STRING: 
RFC1213-MIB::ifNumber.0 = INTEGER: 4
RFC1213-MIB::ifIndex.1 = INTEGER: 1
RFC1213-MIB::ifIndex.2 = INTEGER: 2
RFC1213-MIB::ifIndex.3 = INTEGER: 3
RFC1213-MIB::ifIndex.4 = INTEGER: 4
RFC1213-MIB::ifDescr.1 = STRING: &quot;wlan0&quot;
RFC1213-MIB::ifDescr.2 = STRING: &quot;br-lan&quot;
RFC1213-MIB::ifDescr.3 = STRING: &quot;eth0.1&quot;
RFC1213-MIB::ifDescr.4 = STRING: &quot;eth0&quot;
RFC1213-MIB::ifOperStatus.1 = INTEGER: up(1)
RFC1213-MIB::ifOperStatus.2 = INTEGER: up(1)
RFC1213-MIB::ifOperStatus.3 = INTEGER: up(1)
RFC1213-MIB::ifOperStatus.4 = INTEGER: up(1)
RFC1213-MIB::ifInOctets.1 = Counter32: 19574486
RFC1213-MIB::ifInOctets.2 = Counter32: 18252147
RFC1213-MIB::ifInOctets.3 = Counter32: 124204634
RFC1213-MIB::ifInOctets.4 = Counter32: 126247040
RFC1213-MIB::ifInUcastPkts.1 = Counter32: 91002
RFC1213-MIB::ifInUcastPkts.2 = Counter32: 90354
RFC1213-MIB::ifInUcastPkts.3 = Counter32: 113467
RFC1213-MIB::ifInUcastPkts.4 = Counter32: 113467
RFC1213-MIB::ifInDiscards.1 = Counter32: 0
RFC1213-MIB::ifInDiscards.2 = Counter32: 0
RFC1213-MIB::ifInDiscards.3 = Counter32: 0
RFC1213-MIB::ifInDiscards.4 = Counter32: 0
RFC1213-MIB::ifInErrors.1 = Counter32: 0
RFC1213-MIB::ifInErrors.2 = Counter32: 0
RFC1213-MIB::ifInErrors.3 = Counter32: 0
RFC1213-MIB::ifInErrors.4 = Counter32: 0
RFC1213-MIB::ifOutOctets.1 = Counter32: 127834842
RFC1213-MIB::ifOutOctets.2 = Counter32: 125363371
RFC1213-MIB::ifOutOctets.3 = Counter32: 19332841
RFC1213-MIB::ifOutOctets.4 = Counter32: 20197296
RFC1213-MIB::ifOutUcastPkts.1 = Counter32: 112239
RFC1213-MIB::ifOutUcastPkts.2 = Counter32: 111021
RFC1213-MIB::ifOutUcastPkts.3 = Counter32: 85992
RFC1213-MIB::ifOutUcastPkts.4 = Counter32: 88600
RFC1213-MIB::ifOutDiscards.1 = Counter32: 0
RFC1213-MIB::ifOutDiscards.2 = Counter32: 0
RFC1213-MIB::ifOutDiscards.3 = Counter32: 0
RFC1213-MIB::ifOutDiscards.4 = Counter32: 0
RFC1213-MIB::ifOutErrors.1 = Counter32: 0
RFC1213-MIB::ifOutErrors.2 = Counter32: 0
RFC1213-MIB::ifOutErrors.3 = Counter32: 0
RFC1213-MIB::ifOutErrors.4 = Counter32: 0
HOST-RESOURCES-MIB::hrSystemUptime.0 = Timeticks: (1547471) 4:17:54.71&quot;</pre>

<p>
As you see walk doesn&#039;t catch on disks for some reason.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_start&quot;,&quot;name&quot;:&quot;meta:infobox:construction&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;0-&quot;} --><div class="plugin_include_content plugin_include__meta:infobox:construction" id="plugin_include__meta__infobox__construction">
<div class="level2">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:7,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_center wrap_construction plugin_wrap" style="width: 70%;">
<p>
<strong>Under Construction!</strong><br/>

This page is currently under construction. You can edit the article to help completing it.
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:8,&quot;range&quot;:&quot;0-&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_end&quot;,&quot;name&quot;:&quot;meta:infobox:construction&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:6,&quot;range&quot;:&quot;0-&quot;} --></div>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Examples&quot;,&quot;hid&quot;:&quot;examples&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:4,&quot;range&quot;:&quot;2239-&quot;} -->