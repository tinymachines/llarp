
<h1 class="sectionedit1" id="snmpd">SNMPD</h1>
<div class="level1">

</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_start&quot;,&quot;name&quot;:&quot;meta:infobox:construction&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:2,&quot;range&quot;:&quot;0-&quot;} --><div class="plugin_include_content plugin_include__meta:infobox:construction" id="plugin_include__meta__infobox__construction">
<div class="level1">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_center wrap_construction plugin_wrap" style="width: 70%;">
<p>
<strong>Under Construction!</strong><br/>

This page is currently under construction. You can edit the article to help completing it.
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;0-&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_end&quot;,&quot;name&quot;:&quot;meta:infobox:construction&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:3,&quot;range&quot;:&quot;0-&quot;} --></div>
<div class="level1">

<p>
There are two options: mini-snmpd or snmpd.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;SNMPD&quot;,&quot;hid&quot;:&quot;snmpd&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-129&quot;} -->
<h2 class="sectionedit6" id="how_to_install_snmpd">How to install snmpd</h2>
<div class="level2">
<pre class="code bash">opkg <span class="kw2">install</span> snmpd</pre>

<p>
Then Edit the /etc/config/snmpd file and finetune what you need.
More advanced configurations might need to edit the snmpd init script and make the snmpd program to load another custom config.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;How to install snmpd&quot;,&quot;hid&quot;:&quot;how_to_install_snmpd&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;130-396&quot;} -->
<h2 class="sectionedit7" id="usage_notes_for_snmpd">Usage notes for snmpd</h2>
<div class="level2">

<p>
Basic information about WIFi 802.11 interfaces can be obtained using the OID 1.2.840.10036, the <a href="https://sourceforge.net/p/net-snmp/patches/_discuss/thread/35fa2f88/2b10/attachment/80211-MIB.txt" class="urlextern" title="https://sourceforge.net/p/net-snmp/patches/_discuss/thread/35fa2f88/2b10/attachment/80211-MIB.txt" rel="ugc nofollow">MIB file for this OID is available for download from sourceforge</a>.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Usage notes for snmpd&quot;,&quot;hid&quot;:&quot;usage_notes_for_snmpd&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:7,&quot;range&quot;:&quot;397-695&quot;} -->
<h2 class="sectionedit8" id="how_to_install_mini-snmpd">How to install mini-snmpd</h2>
<div class="level2">
<pre class="code bash">opkg <span class="kw2">install</span> mini_snmpd</pre>

<p>
<strong>Note:</strong> minisnmpd uses a 32 bit counter, which maxes out at 4294967295.
This means any traffic over that does not appear on the counter, making it appear that you no longer have traffic.
This is by design of minisnmpd.
See <a href="https://dev.openwrt.org/ticket/13597" class="urlextern" title="https://dev.openwrt.org/ticket/13597" rel="ugc nofollow">Bug Report</a> and minisnmpd <a href="http://freecode.com/projects/minisnmpd" class="urlextern" title="http://freecode.com/projects/minisnmpd" rel="ugc nofollow">project page</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;How to install mini-snmpd&quot;,&quot;hid&quot;:&quot;how_to_install_mini-snmpd&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:8,&quot;range&quot;:&quot;696-1126&quot;} -->
<h2 class="sectionedit9" id="basic_configuration_for_mini-snmpd">Basic configuration for mini-snmpd</h2>
<div class="level2">

<p>
Open /etc/config/mini_snmpd and update the entries in the brackets to something that makes sense for you:
</p>
<pre class="code bash">config mini_snmpd
        option enabled <span class="nu0">1</span>
        option ipv6 <span class="nu0">0</span>
        option community <span class="sy0">&lt;</span>SNMP COMMUNITY<span class="sy0">&gt;</span>
        option location <span class="st_h">'&lt;WHERE YOUR OPENWRT IS :)&gt;'</span>
        option contact <span class="st_h">'&lt;YOUR CONTACT DETAILS&gt;'</span>
        option disks <span class="st_h">'/tmp,/jffs,&lt;ANY OTHER DISKS&gt;'</span>
        option interfaces <span class="st_h">'lo,br-lan,eth0.1,eth1'</span> <span class="co0"># Max 4</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Basic configuration for mini-snmpd&quot;,&quot;hid&quot;:&quot;basic_configuration_for_mini-snmpd&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:9,&quot;range&quot;:&quot;1127-1619&quot;} -->
<h2 class="sectionedit10" id="bit_counters_issues">64-bit counters issues</h2>
<div class="level2">
<div class="table sectionedit11"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="/_media/meta/icons/tango/48px-outdated.svg.png" class="media" loading="lazy" alt="" /> </td><td class="col1"> As of <a href="https://dev.openwrt.org/changeset/25486" class="urlextern" title="https://dev.openwrt.org/changeset/25486" rel="ugc nofollow">r25486</a> this patch is in the tree. </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:11,&quot;range&quot;:&quot;1655-1795&quot;} -->
<p>
Take a look at the <a href="https://forum.openwrt.org/viewtopic.php?pid=127560#p127560" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=127560#p127560" rel="ugc nofollow">forum post</a> (“64 bit counter support in SNMP (TL-WR1043ND)”), i.e. get the patch from <a href="https://dev.openwrt.org/ticket/8818" class="urlextern" title="https://dev.openwrt.org/ticket/8818" rel="ugc nofollow">Ticket 8818</a> (“Enable 64 bit counters in net-snmp”), build and reinstall the whole kernel/system (rebuild and opkg install the new snmp package didn&#039;t work).
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;64-bit counters issues&quot;,&quot;hid&quot;:&quot;bit_counters_issues&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:10,&quot;range&quot;:&quot;1620-2161&quot;} -->
<h2 class="sectionedit12" id="usage_with_cacti">Usage with Cacti</h2>
<div class="level2">

<p>
For some reason, Cacti doesn&#039;t like the system response that mini_snmpd gives (eg uptime, syslocation etc).
In order to get your graphs correctly generated within Cacti, you need to change the way Cacti polls the OpenWRT system to see if it is up - on the device page within Cacti you should change the &#039;downed device detection&#039; method to &#039;Ping&#039; and the ping method to &#039;<abbr title="Internet Control Message Protocol">ICMP</abbr> Ping&#039;.
This should then work :)
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Usage with Cacti&quot;,&quot;hid&quot;:&quot;usage_with_cacti&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:12,&quot;range&quot;:&quot;2162-2598&quot;} -->
<h2 class="sectionedit13" id="wireless_signal_and_noise">Wireless signal and noise</h2>
<div class="level2">

<p>
Here is a small patch for mini_snmpd to support monitoring wireless signal and noise with Cacti.
Here is the <a href="http://nottheoilrig.com/openwrt/201212090/wireless.patch" class="urlextern" title="http://nottheoilrig.com/openwrt/201212090/wireless.patch" rel="ugc nofollow">patch for mini_snmpd</a> and here is a patch to <a href="http://patchwork.openwrt.org/patch/3061/" class="urlextern" title="http://patchwork.openwrt.org/patch/3061/" rel="ugc nofollow">add it to OpenWrt</a>.
Here is a blog post about <a href="http://jdbates.blogspot.com/2012/12/heres-patch-for-mini-snmp-daemon-to.html" class="urlextern" title="http://jdbates.blogspot.com/2012/12/heres-patch-for-mini-snmp-daemon-to.html" rel="ugc nofollow">how to configure Cacti</a> to make graphs from signal and noise data.
</p>

<p>
The OIDs in the patch are chosen to work with the kbridge.xml SNMP query this is distributed with Cacti.
</p>

<p>
<a href="/lib/exe/fetch.php?tok=a59450&amp;media=http%3A%2F%2Fnottheoilrig.com%2Fopenwrt%2F201212090%2Findex_files%2Fgraph_image_003.png" class="media" title="http://nottheoilrig.com/openwrt/201212090/index_files/graph_image_003.png"><img src="/lib/exe/fetch.php?tok=a59450&amp;media=http%3A%2F%2Fnottheoilrig.com%2Fopenwrt%2F201212090%2Findex_files%2Fgraph_image_003.png" class="media" loading="lazy" title="http://nottheoilrig.com/openwrt/201212090/" alt="http://nottheoilrig.com/openwrt/201212090/" /></a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Wireless signal and noise&quot;,&quot;hid&quot;:&quot;wireless_signal_and_noise&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:13,&quot;range&quot;:&quot;2599-&quot;} -->