
<h1 class="sectionedit1" id="umurmur">µMurmur</h1>
<div class="level1">

<p>
µMurmur or uMurmur is a minimalistic <a href="https://en.wikipedia.org/wiki/Mumble (software)" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Mumble (software)">Mumble (software)</a> server primarily targeted to run on embedded devices with an open <abbr title="Operating System">OS</abbr> like OpenWrt.
</p>

<p>
Project page for more info and most up-to-date documentation at <a href="https://github.com/umurmur/umurmur" class="urlextern" title="https://github.com/umurmur/umurmur" rel="ugc nofollow">https://github.com/umurmur/umurmur</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\u00b5Murmur&quot;,&quot;hid&quot;:&quot;umurmur&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-270&quot;} -->
<h2 class="sectionedit2" id="preparation">Preparation</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Preparation&quot;,&quot;hid&quot;:&quot;preparation&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;271-294&quot;} -->
<h3 class="sectionedit3" id="prerequisites">Prerequisites</h3>
<div class="level3">

<p>
So far there are two uMurmur packages available in the repos, one compiled against the Mbed-<abbr title="Transport Layer Security">TLS</abbr> library and one against the OpenSSL library.
</p>
<pre class="code">opkg info umurmur-mbedtls
opkg info umurmur-openssl</pre>

<p>
<em class="u"><strong>Note</strong></em> that currently, the Mbed-<abbr title="Transport Layer Security">TLS</abbr> version does not auto-generate a certificate, causing it to not startup correctly. It is therefor suggested to use the OpenSSL version for the time being.
</p>

<p>
See this GitHub issue: <a href="https://github.com/openwrt/packages/issues/22188" class="urlextern" title="https://github.com/openwrt/packages/issues/22188" rel="ugc nofollow">https://github.com/openwrt/packages/issues/22188</a>
</p>

<p>
<em class="u">Firewall:</em> The default ports are 64738 tcp and 64738 udp. <a href="/docs/guide-user/firewall/fw3_configurations/fw3_config_examples#opening_ports_on_the_openwrt_router" class="wikilink1" title="docs:guide-user:firewall:fw3_configurations:fw3_config_examples" data-wiki-id="docs:guide-user:firewall:fw3_configurations:fw3_config_examples">open</a> them up in <code><a href="/docs/guide-user/firewall/start" class="wikilink1" title="docs:guide-user:firewall:start" data-wiki-id="docs:guide-user:firewall:start">/etc/config/firewall</a></code>.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Prerequisites&quot;,&quot;hid&quot;:&quot;prerequisites&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;295-1047&quot;} -->
<h3 class="sectionedit4" id="required_packages">Required Packages</h3>
<div class="level3">

<p>
The following list specifies package versions for latest stable release of OpenWrt. At time of writing, 23.05.
</p>

</div>

<h4 id="server_openwrt">Server (OpenWrt)</h4>
<div class="level4">
<div class="table sectionedit5"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign"> Name             </th><th class="col1 leftalign"> Version   </th><th class="col2 centeralign">  Size  </th><th class="col3 leftalign"> Description  </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> umurmur-openssl   </td><td class="col1 centeralign">  0.2.20-2   </td><td class="col2 rightalign">   36762 </td><td class="col3 leftalign"> Minimalistic Mumble server daemon. Uses OpenSSL library for <abbr title="Secure Socket Layer">SSL</abbr> and crypto.  </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> libopenssl3       </td><td class="col1 centeralign">  3.0.12-1   </td><td class="col2"> 1394609 </td><td class="col3 leftalign"> The OpenSSL Project is a collaborative effort to develop a robust, commercial-grade, full-featured, and Open Source toolkit implementing the Secure Sockets Layer (<abbr title="Secure Socket Layer">SSL</abbr> v2/v3) and Transport Layer Security (<abbr title="Transport Layer Security">TLS</abbr> v1) protocols as well as a full-strength general purpose cryptography library. This package contains the OpenSSL shared libraries, needed by other programs.  </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> libconfig11       </td><td class="col1 centeralign">   1.7.3-1   </td><td class="col2 rightalign">   15719 </td><td class="col3 leftalign"> Libconfig is a simple library for manipulating structured configuration files. This file format is more compact and more readable than XML. And unlike XML, it is type-aware, so it is not necessary to do string  parsing in application code.  Libconfig is very compact -- just 38K for the stripped C shared library (less than one-fourth the size of the expat XML parser library) and 66K for the stripped C++ shared library. This makes it well-suited for memory-constrained systems like handheld devices.  </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> libprotobuf-c     </td><td class="col1 centeralign">   1.4.1-1   </td><td class="col2 rightalign">    9922 </td><td class="col3 leftalign"> Runtime library to use Google Protocol Buffers from C applications. Protocol Buffers are a way of encoding structured data in an efficient yet extensible format. Google uses Protocol Buffers for almost all of its internal RPC protocols and file formats.  </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;1212-2661&quot;} -->
</div>

<h4 id="client_your_pc">Client (your PC)</h4>
<div class="level4">

<p>
On Linux you need to install the <code>mumble</code> package, like <a href="http://packages.debian.org/squeeze/mumble" class="urlextern" title="http://packages.debian.org/squeeze/mumble" rel="ugc nofollow">this one</a>. On Windows or MacOSX you have to download it: <a href="http://mumble.sourceforge.net/" class="urlextern" title="http://mumble.sourceforge.net/" rel="ugc nofollow">http://mumble.sourceforge.net/</a>.
</p>

<p>
<em class="u"><strong>Note</strong></em> that uMurmur version 0.2.x is compatible with Mumble version 1.2.x series. Mumble version 1.1.x series is <strong>not</strong> compatible.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Required Packages&quot;,&quot;hid&quot;:&quot;required_packages&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:4,&quot;range&quot;:&quot;1048-3025&quot;} -->
<h2 class="sectionedit6" id="installation">Installation</h2>
<div class="level2">

<p>
Example using shell access:
</p>
<pre class="code bash">opkg <span class="kw2">install</span> umurmur-openssl
<span class="kw2">vi</span> <span class="sy0">/</span>etc<span class="sy0">/</span>umurmur.conf
<span class="sy0">/</span>etc<span class="sy0">/</span>init.d<span class="sy0">/</span>umurmur <span class="kw3">enable</span>
<span class="sy0">/</span>etc<span class="sy0">/</span>init.d<span class="sy0">/</span>umurmur start
logread</pre>

<p>
Check log output that the <code>uMurmurd</code> started up OK.
</p>

<p>
<a href="/docs/guide-user/firewall/fw3_configurations/fw3_config_examples#opening_ports_on_the_openwrt_router" class="wikilink1" title="docs:guide-user:firewall:fw3_configurations:fw3_config_examples" data-wiki-id="docs:guide-user:firewall:fw3_configurations:fw3_config_examples">open</a> port 64738 for <abbr title="Transmission Control Protocol">TCP</abbr> and <abbr title="User Datagram Protocol">UDP</abbr> in <code><a href="/docs/guide-user/firewall/start" class="wikilink1" title="docs:guide-user:firewall:start" data-wiki-id="docs:guide-user:firewall:start">/etc/config/firewall</a></code>.
</p>
<pre class="code bash"><span class="kw2">vi</span> <span class="sy0">/</span>etc<span class="sy0">/</span>config<span class="sy0">/</span>firewall
<span class="sy0">/</span>etc<span class="sy0">/</span>init.d<span class="sy0">/</span>firewall reload </pre>

<p>
You should now be able to connect via the mumble protocol.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Installation&quot;,&quot;hid&quot;:&quot;installation&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:6,&quot;range&quot;:&quot;3026-3598&quot;} -->
<h2 class="sectionedit7" id="configuration">Configuration</h2>
<div class="level2">

<p>
<code>cat /etc/umurmur.conf</code>
</p>
<div class="table sectionedit8"><table class="inline">
	<tr class="row0">
		<td class="col0"> <code>max_bandwidth = 48000;
welcometext = “Welcome to uMurmur!”;
certificate = “/etc/umurmur/cert.crt”;
private_key = “/etc/umurmur/key.key”;
password = “”;
max_users = 10;

# Root channel must always be defined first.
# If a channel has a parent, the parent must be defined before the child channel(s).
channels = ( {
         name = “Root”;
         parent = “”;
         description = “The Root of all channels”;
         },
         {
         name = “Lobby”;
         parent = “Root”;
         description = “Lobby channel”;
         },
         {
         name = “Red team”;
         parent = “Lobby”;
         description = “The Red team channel”;
         },
         {
         name = “Blue team”;
         parent = “Lobby”;
         description = “The Blue team channel”;
         }
);
# Channel links configuration.
channel_links = ( {
         source = “Lobby”;
         destination = “Red team”;
         },
         {
         source = “Lobby”;
         destination = “Blue team”;
         }
);

default_channel = “Lobby”;</code> </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table1&quot;,&quot;secid&quot;:8,&quot;range&quot;:&quot;3652-4691&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configuration&quot;,&quot;hid&quot;:&quot;configuration&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:7,&quot;range&quot;:&quot;3599-4692&quot;} -->
<h2 class="sectionedit9" id="start_on_boot">Start on boot</h2>
<div class="level2">

<p>
To enable/disable start on boot:
<code>/etc/init.d/umurmur enable</code>  this simply creates a symlink to umurmur in “<code>/etc/rc.d/</code>”
<code>/etc/init.d/umurmur disable</code> this removes the symlink again
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Start on boot&quot;,&quot;hid&quot;:&quot;start_on_boot&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:9,&quot;range&quot;:&quot;4693-4908&quot;} -->
<h2 class="sectionedit10" id="administration">Administration</h2>
<div class="level2">

<p>
There is no privilege system implemented in uMurmur version &lt; 0.2.10 meaning that users cannot be kicked, banned or muted by other users. If you have a need for this kind of functionality the options are:
</p>
<ul>
<li class="level1"><div class="li"> Set a server password </div>
</li>
<li class="level1"><div class="li"> Add the <abbr title="Internet Protocol">IP</abbr> of misbehaving users to your firewall.</div>
</li>
</ul>

<p>
Since uMurmur 0.2.10 there is a password based administration scheme. A package is available in OpenWRT trunk. For this to work you&#039;d need to install the dependencies from trunk as well if you are running Backfire.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Administration&quot;,&quot;hid&quot;:&quot;administration&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:10,&quot;range&quot;:&quot;4909-5439&quot;} -->
<h2 class="sectionedit11" id="troubleshooting">Troubleshooting</h2>
<div class="level2">

<p>
The most common error is the firewall. Double check connection problems with 
</p>
<pre class="code">iptables -n -v</pre>

<p>
 and check those counters.
</p>

<p>
If users cannot connect and you get this error in the log 
</p>
<pre class="code">WARN: SSL handshake failed: -28672</pre>

<p>
 you&#039;re probably running Backfire 10.03.1-rc4 with Polarssl 0.14. Upgrade to Backfire 10.03.1-RC5 or later.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Troubleshooting&quot;,&quot;hid&quot;:&quot;troubleshooting&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:11,&quot;range&quot;:&quot;5440-5813&quot;} -->
<h2 class="sectionedit12" id="notes">Notes</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> Read about certificates in general. Do it!  <a href="https://en.wikipedia.org/wiki/Public key certificate" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Public key certificate">Public key certificate</a></div>
</li>
<li class="level1"><div class="li"> enlighten your friends, there is no point in security if not all users understand the principle of operation</div>
</li>
</ol>
<ul>
<li class="level1"><div class="li"> Project Homepage: <a href="https://github.com/umurmur/umurmur" class="urlextern" title="https://github.com/umurmur/umurmur" rel="ugc nofollow">https://github.com/umurmur/umurmur</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Notes&quot;,&quot;hid&quot;:&quot;notes&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:12,&quot;range&quot;:&quot;5814-&quot;} -->