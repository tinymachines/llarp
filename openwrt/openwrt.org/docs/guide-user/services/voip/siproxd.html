
<h1 class="sectionedit1" id="siproxd_on_openwrt_intro">Siproxd on OpenWrt intro</h1>
<div class="level1">

<p>
<a href="http://siproxd.sourceforge.net/" class="urlextern" title="http://siproxd.sourceforge.net/" rel="ugc nofollow">Siproxd</a> is a proxy/masquerading daemon for the SIP protocol. It handles registrations of SIP clients on a private <abbr title="Internet Protocol">IP</abbr> network and performs rewriting of the SIP message bodies to make SIP connections work via an masquerading firewall (<abbr title="Network Address Translation">NAT</abbr>). It allows SIP software clients (like kphone, linphone) or SIP hardware clients (Voice over <abbr title="Internet Protocol">IP</abbr> phones which are SIP-compatible) to work behind an <abbr title="Internet Protocol">IP</abbr> masquerading firewall or <abbr title="Network Address Translation">NAT</abbr> router. 
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Siproxd on OpenWrt intro&quot;,&quot;hid&quot;:&quot;siproxd_on_openwrt_intro&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-502&quot;} -->
<h2 class="sectionedit2" id="siproxd_configuration">Siproxd configuration</h2>
<div class="level2">

<p>
In <code>/etc/config/siproxd</code> you can configure Siproxd. You can add to the default configuration to setup the plugins that you&#039;d like to use. For example to load and configure the regex plugin something along the following lines would be appropriate:
</p>
<pre class="code"># Load regex plugin and define some replacement rules to ensure that
# local and domestic numbers without area/country code are dialled
# properly:
list load_plugin &#039;plugin_regex.so&#039;

# International calls, prefix 00 converted to +:
# 00 385 1 123456 -&gt; +385 1 123456
list plugin_regex_desc   = &#039;Intl&#039;
list plugin_regex_pattern = &#039;^(sips?:)00&#039;
list plugin_regex_replace = &#039;\1+&#039;

# Domestic calls to a different area code, drop the 0 and prefix with
# country code added:
# 01 123456 -&gt; +385 1 123456
list plugin_regex_desc    = &#039;Domestic&#039;
list plugin_regex_pattern = &#039;^(sips?:)0&#039;
list plugin_regex_replace = &#039;\1+385&#039;

# Local calls without an area code - prefix with country code + local
# area code:
# 123456 -&gt; +385 1 123456
list plugin_regex_desc  = &#039;Local&#039;
list plugin_regex_pattern = &#039;^(sips?:)&#039;
list plugin_regex_replace = &#039;\1+3851&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Siproxd configuration&quot;,&quot;hid&quot;:&quot;siproxd_configuration&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;503-&quot;} -->