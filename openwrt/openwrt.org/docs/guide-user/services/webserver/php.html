
<h1 class="sectionedit1" id="php">PHP</h1>
<div class="level1">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;PHP&quot;,&quot;hid&quot;:&quot;php&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-18&quot;} -->
<h2 class="sectionedit2" id="installation">Installation</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> List available php packages <pre class="code bash">opkg update
opkg list php<span class="sy0">*</span></pre>
</div>
</li>
<li class="level1"><div class="li"> Install php <pre class="code bash">opkg <span class="kw2">install</span> php7 php7-cgi</pre>
</div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Installation&quot;,&quot;hid&quot;:&quot;installation&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;19-186&quot;} -->
<h2 class="sectionedit3" id="configuration">Configuration</h2>
<div class="level2">

<p>
For configuration please see the wiki-page for the particular web server: <a href="/docs/guide-user/services/webserver/start" class="wikilink1" title="docs:guide-user:services:webserver:start" data-wiki-id="docs:guide-user:services:webserver:start">webserver</a>, e.g.
</p>
<ul>
<li class="level1"><div class="li"> <a href="/docs/guide-user/services/webserver/http.apache#configuring_apache_and_php5" class="wikilink1" title="docs:guide-user:services:webserver:http.apache" data-wiki-id="docs:guide-user:services:webserver:http.apache">Configuring Apache and PHP5</a></div>
</li>
<li class="level1"><div class="li"> <a href="/docs/guide-user/services/webserver/lighttpd#configuring_lighttpd_and_php5" class="wikilink1" title="docs:guide-user:services:webserver:lighttpd" data-wiki-id="docs:guide-user:services:webserver:lighttpd">Configuring Lighttpd and PHP5</a></div>
</li>
<li class="level1"><div class="li"> <a href="/docs/guide-user/services/webserver/http.hiawatha#configuring_hiawatha_and_php5" class="wikilink1" title="docs:guide-user:services:webserver:http.hiawatha" data-wiki-id="docs:guide-user:services:webserver:http.hiawatha">Configuring Hiawatha and PHP5</a></div>
</li>
<li class="level1"><div class="li"> <a href="/docs/guide-user/services/webserver/nginx#configuring_nginx_and_php5" class="wikilink1" title="docs:guide-user:services:webserver:nginx" data-wiki-id="docs:guide-user:services:webserver:nginx">Configuring Nginx and PHP5</a></div>
</li>
<li class="level1"><div class="li"> <a href="/docs/guide-user/services/webserver/uhttpd" class="wikilink1" title="docs:guide-user:services:webserver:uhttpd" data-wiki-id="docs:guide-user:services:webserver:uhttpd">Configuring uhttpd and PHP5</a></div>
</li>
<li class="level1"><div class="li"> or see <a href="/docs/guide-user/services/webserver/lamp#configuring_php" class="wikilink1" title="docs:guide-user:services:webserver:lamp" data-wiki-id="docs:guide-user:services:webserver:lamp">Configuring PHP</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configuration&quot;,&quot;hid&quot;:&quot;configuration&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:3,&quot;range&quot;:&quot;187-815&quot;} -->
<h2 class="sectionedit4" id="troubleshooting">Troubleshooting</h2>
<div class="level2">

<p>
If you encounter PHP errors, like undefined functions, you need take a look into the <code>php.ini</code> file. Search for the appropriate extension line(s), and uncomment them (remove the ; sign). If the problem persists, you probably need to install the appropriate extension too. If PHP runs out of memory, you can increase the amount of memory which the script can consume:<br/>

</p>
<pre class="code">memory_limit = 8M       ; Maximum amount of memory a script may consume.
post_max_size = 8M</pre>

<p>
Do not specify more memory than is available, and remember that other processes need memory too. Please note, some things will probably never run on the router. Especially under Backfire 10.03. PHP compiled without the SimpleXML extension, and libxml is missing too. If they are necessary, you need to recompile your own PHP. Without this extensions, some software, like Joomla 1.6 will never run. If you do manage to achieve to run, serious software solutions will run extremely slow, and will consume too much memory.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Troubleshooting&quot;,&quot;hid&quot;:&quot;troubleshooting&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:4,&quot;range&quot;:&quot;816-1831&quot;} -->
<h2 class="sectionedit5" id="php_development_server">PHP Development Server</h2>
<div class="level2">

<p>
This section explains how to quickly setup a php test server for prototyping php web applications, using php&#039;s own internal web server.
</p>

<p>
A little known trick about php is that it has it&#039;s own built in web server.<br/>

If you install the command line php binary, you can run a quick, no frills web server on OpenWrt for development work and prototyping.<br/>

In no way should you expect a fully production ready web server from this method. php&#039;s internal web server is recommended for your own internal network testing and is not recommended as an alternative to a fully fledged http server daemon.<br/>

With that said; complete the following steps to create a quick php development server inside of an OpenWrt instance:
</p>

<p>
Install the <a href="/packages/pkgdata/php7-cgi" class="wikilink2" title="packages:pkgdata:php7-cgi" rel="nofollow" data-wiki-id="packages:pkgdata:php7-cgi">php7-cgi</a> package using <a href="/docs/guide-user/additional-software/opkg" class="wikilink1" title="docs:guide-user:additional-software:opkg" data-wiki-id="docs:guide-user:additional-software:opkg">opkg</a>.
</p>
<pre class="code bash">opkg update <span class="sy0">&amp;&amp;</span> opkg <span class="kw2">install</span> php7-cli</pre>

<p>
<em>(This pulls in packages <a href="/packages/pkgdata/libpcre" class="wikilink1" title="packages:pkgdata:libpcre" data-wiki-id="packages:pkgdata:libpcre">libpcre</a> <a href="/packages/pkgdata/zlib" class="wikilink1" title="packages:pkgdata:zlib" data-wiki-id="packages:pkgdata:zlib">zlib</a> <a href="/packages/pkgdata/libxml2" class="wikilink1" title="packages:pkgdata:libxml2" data-wiki-id="packages:pkgdata:libxml2">libxml2</a> <a href="/packages/pkgdata/zoneinfo-core" class="wikilink1" title="packages:pkgdata:zoneinfo-core" data-wiki-id="packages:pkgdata:zoneinfo-core">zoneinfo-core</a> <a href="/packages/pkgdata/php7" class="wikilink2" title="packages:pkgdata:php7" rel="nofollow" data-wiki-id="packages:pkgdata:php7">php7</a> as part of the installation.)</em>
</p>

<p>
Optionally, now remove the package cache if you are low on memory space.
</p>
<pre class="code bash"><span class="kw2">rm</span> <span class="re5">-r</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>opkg-lists<span class="sy0">/</span></pre>

<p>
Create a www directory (during testing, I skipped this normal step and just used the /root directory instead.)
</p>
<pre class="code bash"><span class="kw2">mkdir</span> <span class="sy0">/</span>www</pre>

<p>
Use a text editor (<a href="/packages/pkgdata/nano" class="wikilink1" title="packages:pkgdata:nano" data-wiki-id="packages:pkgdata:nano">nano</a> in this example) to create the file <strong>index.php</strong> inside of the <strong>/www</strong> directory (nano can be installed via <a href="/docs/guide-user/additional-software/opkg" class="wikilink1" title="docs:guide-user:additional-software:opkg" data-wiki-id="docs:guide-user:additional-software:opkg">opkg</a> if need be.)
</p>
<pre class="code bash"><span class="kw2">nano</span> <span class="sy0">/</span>www<span class="sy0">/</span>index.php</pre>

<p>
Add the text “<strong>It works!</strong>” into the file, save and close it.
</p>

<p>
Start the webserver from the command line.
</p>
<pre class="code bash">php-cli <span class="re5">-S</span> 172.16.0.1:<span class="nu0">8080</span> <span class="re5">-t</span> <span class="sy0">/</span>www</pre>

<p>
<em>(Replace <strong>172.16.0.1:8080</strong> with the ip address of your OpenWrt instance and the port number you want to use to access the server by.)</em>
</p>

<p>
Open a web browser and visit the address <strong>http://172.16.0.1:8080</strong> (or whatever you used instead) and you should see the text “<strong>It works!</strong>” on the page.
</p>

<p>
That&#039;s all there is to it.
</p>

<p>
Taking it further, you could optionally <a href="/docs/guide-user/base-system/uci" class="wikilink1" title="docs:guide-user:base-system:uci" data-wiki-id="docs:guide-user:base-system:uci">create a startup script</a> which automates starting the server.<br/>

To stop the server use the <strong>ctrl + c</strong> key combination.<br/>

To spawn the server into a separate process and return command back to the console, add a double ampersand to the end of the command line options you use to start the server.
</p>
<pre class="code bash">php-cli <span class="re5">-S</span> 172.16.0.1:<span class="nu0">8080</span> <span class="re5">-t</span> <span class="sy0">/</span>www <span class="sy0">&amp;&amp;</span></pre>

<p>
The web server will then remain running until it&#039;s process is manually ended or the OpenWrt instance has been rebooted.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;PHP Development Server&quot;,&quot;hid&quot;:&quot;php_development_server&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:5,&quot;range&quot;:&quot;1832-&quot;} -->