
<h1 class="sectionedit1" id="saned_scanner_server">saned Scanner Server</h1>
<div class="level1">

<p>
This page attempts to document how to get a simple USB scanner working and accessible via network by using <a href="http://www.sane-project.org/" class="urlextern" title="http://www.sane-project.org/" rel="ugc nofollow">The SANE project</a>.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;saned Scanner Server&quot;,&quot;hid&quot;:&quot;saned_scanner_server&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-194&quot;} -->
<h2 class="sectionedit2" id="requirements">Requirements</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> <a href="/docs/guide-user/storage/usb-installing" class="wikilink1" title="docs:guide-user:storage:usb-installing" data-wiki-id="docs:guide-user:storage:usb-installing">usb-installing</a> (or support for the parallel port, if you have a parallel port scanners)</div>
</li>
<li class="level1"><div class="li"> install the right backend supporting your scanner</div>
</li>
<li class="level1"><div class="li"> xinetd installed or alternatively manually starting up saned</div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Requirements&quot;,&quot;hid&quot;:&quot;requirements&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;195-459&quot;} -->
<h3 class="sectionedit3" id="usb_port">USB port</h3>
<div class="level3">

<p>
Note: I&#039;m having a printer-scanner, which is why the “scanner” is recognized as a printer. I&#039;m not actually sure, if this is needed for scanning functionality!
</p>
<pre class="code">opkg update
opkg install kmod-usb-printer</pre>

<p>
Now plug in scanner, run <code>dmesg</code> and look for lines similar to the following ones:
</p>
<pre class="code">hub.c: new USB ice 01:02.0-1, assigned address 2
printer.c: usblp0: USB Bidirectional printer  2 if 0 alt 0 proto 2 vid 0x04A9 pid 0x1094
usb.c: USB disconnect on ice 01:02.0-1 address 2
hub.c: new USB ice 01:02.0-1, assigned address 3
printer.c: usblp1: USB Bidirectional printer  3 if 0 alt 0 proto 2 vid 0x04A9 pid 0x1094</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;USB port&quot;,&quot;hid&quot;:&quot;usb_port&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;460-1123&quot;} -->
<h3 class="sectionedit4" id="parallel_port">Parallel port</h3>
<div class="level3">

<p>
In case you have a parallel port scanner, you will need this:
</p>
<pre class="code">opkg update
opkg install kmod-lp</pre>

<p>
Check the output of the <code>dmesg</code>.
If there is a device node <code>/dev/printers/0</code> then the installation succeeded.
</p>

<p>
<strong><code>TIP:</code></strong> p910nd is reported as working with some noname USB-to-Parport adapter/converter as well; maybe the same is true for some scanners?
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Parallel port&quot;,&quot;hid&quot;:&quot;parallel_port&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:4,&quot;range&quot;:&quot;1124-1517&quot;} -->
<h3 class="sectionedit5" id="install_xinetd">Install xinetd</h3>
<div class="level3">

<p>
Xinet makes possible to run saned only when the port is accessed via network. Because we&#039;re lazy, let&#039;s go trough this route. Install xinetd (if not already installed):
</p>
<pre class="code">opkg install xinetd</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Install xinetd&quot;,&quot;hid&quot;:&quot;install_xinetd&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:5,&quot;range&quot;:&quot;1518-1746&quot;} -->
<h2 class="sectionedit6" id="installation">Installation</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Installation&quot;,&quot;hid&quot;:&quot;installation&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:6,&quot;range&quot;:&quot;1747-1771&quot;} -->
<h3 class="sectionedit7" id="command_line">Command line</h3>
<div class="level3">

<p>
At minimum, we need saned and a working backend. <a href="http://www.sane-project.org/sane-backends.html#SCANNERS" class="urlextern" title="http://www.sane-project.org/sane-backends.html#SCANNERS" rel="ugc nofollow">The SANE project has a partial list of supported scanners</a>. If you are not sure, what backend you need, xerox_mfp is a good starting point. 
</p>

<p>
Installing sane-all will presumably pull in all backends, but usually this is not needed and takes up unnecessary space. Sane-frontends is not strictly needed, but recommended for testing/troubleshooting as it includes scanimage. Scanimage will also tell you, what frontend it uses when/if it finds your scanner, so if unsure, one could install -all and remove the unneeded backends afterwards.
</p>

<p>
<a href="/docs/guide-user/additional-software/opkg" class="wikilink1" title="docs:guide-user:additional-software:opkg" data-wiki-id="docs:guide-user:additional-software:opkg">opkg</a>
</p>

<p>
Basis-system
</p>
<pre class="code">opkg update
opkg install sane-daemon </pre>

<p>
Scanner 
</p>
<pre class="code">opkg install sane-xerox_mfp
#if you have a xerox scanner
opkg install sane-plustek
#example for Canon lide 20 (canon use sometimes plustek hardware) </pre>

<p>
all availble scanner can be install with 
</p>
<pre class="code">opkg install sane-backends-all</pre>

<p>
<a href="/packages/pkgdata/sane-backends-all" class="wikilink1" title="packages:pkgdata:sane-backends-all" data-wiki-id="packages:pkgdata:sane-backends-all">package: sane-backends-all</a>
there are also list of all avaible single scanner package
</p>

<p>
Optional
</p>
<pre class="code">opkg install sane-frontend</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Command line&quot;,&quot;hid&quot;:&quot;command_line&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:7,&quot;range&quot;:&quot;1772-2994&quot;} -->
<h2 class="sectionedit8" id="optionaltesting_the_scanner">(Optional): testing the scanner</h2>
<div class="level2">

<p>
Run this on the router to see if the scanner is found and working :
</p>
<pre class="code">scanimage -L</pre>

<p>
If you get this:
</p>
<pre class="code">No scanners were identified. If you were expecting something different,
check that the scanner is plugged in, turned on and detected by the
sane-find-scanner tool (if appropriate). Please read the documentation
which came with this software (README, FAQ, manpages).</pre>

<p>
You most probably do not have the right backend installed. Please try again after installing the right backend. You should get something similar to this:
</p>
<pre class="code">device `xerox_mfp:libusb:002:003&#039; is a SAMSUNG ORION multi-function peripheral</pre>

<p>
Presumably you could try to brute-force, install all backends and then remove them as scanimage will tell you which backend it is using if/when it finds your scanner.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;(Optional): testing the scanner&quot;,&quot;hid&quot;:&quot;optionaltesting_the_scanner&quot;,&quot;codeblockOffset&quot;:8,&quot;secid&quot;:8,&quot;range&quot;:&quot;2995-3845&quot;} -->
<h2 class="sectionedit9" id="configuration">Configuration</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configuration&quot;,&quot;hid&quot;:&quot;configuration&quot;,&quot;codeblockOffset&quot;:11,&quot;secid&quot;:9,&quot;range&quot;:&quot;3846-3871&quot;} -->
<h3 class="sectionedit10" id="use_xinetd_to_start_saned">Use xinetd to start saned</h3>
<div class="level3">

<p>
sane-daemon should have come with a configuration file, enable it in /etc/xinetd.d/sane-port  :
</p>
<pre class="code"># default: off
# description: The saned provides scanner service via the network.  \
#	Applications like kooka, xsane or xscanimage can use the remote \
#	scanner. 
service sane-port
{
	socket_type = stream
	port        = 6566
	wait        = no
	user        = saned
	group       = scanner
	server      = /usr/sbin/saned
	disable     = no
}</pre>

<p>
(i.e. change disable = yes to no)
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Use xinetd to start saned&quot;,&quot;hid&quot;:&quot;use_xinetd_to_start_saned&quot;,&quot;codeblockOffset&quot;:11,&quot;secid&quot;:10,&quot;range&quot;:&quot;3872-4394&quot;} -->
<h3 class="sectionedit11" id="start_saned_without_xinetd">Start saned without xinetd</h3>
<div class="level3">

<p>
saned is already a deamon by default
</p>

<p>
you can start saned with rc.local
</p>
<pre class="code">saned -a</pre>

<p>
The -a
flag requests that saned run in standalone daemon mode. In this  mode, saned  will 
detach  from  the  console  and  run  in  the  background,  listening  for incoming client
connections; inetd is not required for saned operations in  this  mode.  If  the  optional
username  is  given  after  -a , saned will drop root privileges and run as this user (and group).
</p>

<p>
 <a href="https://manpages.ubuntu.com/manpages/xenial/man8/saned.8.html" class="urlextern" title="https://manpages.ubuntu.com/manpages/xenial/man8/saned.8.html" rel="ugc nofollow">saned manpage </a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Start saned without xinetd&quot;,&quot;hid&quot;:&quot;start_saned_without_xinetd&quot;,&quot;codeblockOffset&quot;:12,&quot;secid&quot;:11,&quot;range&quot;:&quot;4395-4985&quot;} -->
<h3 class="sectionedit12" id="enable_saned_to_be_accessible_from_the_lan">Enable saned to be accessible from the LAN</h3>
<div class="level3">

<p>
Put your subnet in <code>/etc/sane.d/saned.conf</code> :
</p>
<pre class="code">192.168.1.1/24</pre>

<p>
<strong>TODO:</strong> <abbr title="Internet Protocol version 6">IPv6</abbr> <abbr title="Local Area Network">LAN</abbr> addressing for those who need it?
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Enable saned to be accessible from the LAN&quot;,&quot;hid&quot;:&quot;enable_saned_to_be_accessible_from_the_lan&quot;,&quot;codeblockOffset&quot;:13,&quot;secid&quot;:12,&quot;range&quot;:&quot;4986-5169&quot;} -->
<h3 class="sectionedit13" id="firewall_rules">Firewall rules</h3>
<div class="level3">

<p>
<strong>TODO:</strong> Placeholder. Add examples here to open port 6566 if closed.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Firewall rules&quot;,&quot;hid&quot;:&quot;firewall_rules&quot;,&quot;codeblockOffset&quot;:14,&quot;secid&quot;:13,&quot;range&quot;:&quot;5170-5265&quot;} -->
<h3 class="sectionedit14" id="zeroconf">Zeroconf</h3>
<div class="level3">

<p>
AirSane exposes a sane scanner over AirScan/eSCL, which is available by default on Windows and macOS.
See <a href="https://github.com/cmangla/AirSane-openwrt" class="urlextern" title="https://github.com/cmangla/AirSane-openwrt" rel="ugc nofollow">https://github.com/cmangla/AirSane-openwrt</a>.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Zeroconf&quot;,&quot;hid&quot;:&quot;zeroconf&quot;,&quot;codeblockOffset&quot;:14,&quot;secid&quot;:14,&quot;range&quot;:&quot;5266-5439&quot;} -->
<h2 class="sectionedit15" id="access_from_your_computer_client_on_the_network">Access from your computer (client) on the network</h2>
<div class="level2">

<p>
You probably want to access the scanner from some client software.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Access from your computer (client) on the network&quot;,&quot;hid&quot;:&quot;access_from_your_computer_client_on_the_network&quot;,&quot;codeblockOffset&quot;:14,&quot;secid&quot;:15,&quot;range&quot;:&quot;5440-5569&quot;} -->
<h3 class="sectionedit16" id="linux">Linux</h3>
<div class="level3">

<p>
If you are using Linux, enable saned on all your computers you want to access the scanner from, and add your router <abbr title="Internet Protocol">IP</abbr> in <code>/etc/sane.d/net.conf</code> on <strong>the client machine</strong> (if you have name resolving working on your <abbr title="Local Area Network">LAN</abbr>, presumably you can also use your router name here).
</p>

<p>
After adding the <abbr title="Internet Protocol">IP</abbr> address, running <code>scanimage -L</code> on the client should produce something like this:
</p>
<pre class="code">device &#039;net:192.168.1.1:xerox_mfp:libusb:002:003&#039; is a SAMSUNG ORION multi-function peripheral</pre>

<p>
Your scanner is now ready to use!
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Linux&quot;,&quot;hid&quot;:&quot;linux&quot;,&quot;codeblockOffset&quot;:14,&quot;secid&quot;:16,&quot;range&quot;:&quot;5570-6109&quot;} -->
<h3 class="sectionedit17" id="os_x_windows_and_other_oses">OS X, Windows and other OSes</h3>
<div class="level3">

<p>
The SANE project has <a href="http://www.sane-project.org/sane-frontends.html" class="urlextern" title="http://www.sane-project.org/sane-frontends.html" rel="ugc nofollow">a list of frontends (applications)</a>, which includes a few choices for Windows and a choice for <abbr title="Operating System">OS</abbr> X. How to use these might be out of scope on this Wiki, but feel free to add links here to tips and right documentation. One thing worth mentioning is that at least on Linux, LibreOffice can use sane backend.
</p>

<p>
<strong>TODO:</strong> find out if LibreOffice requires a local running saned, or is it usable without one, and us such usable OOTB for a saned running somewhere on the network?
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;OS X, Windows and other OSes&quot;,&quot;hid&quot;:&quot;os_x_windows_and_other_oses&quot;,&quot;codeblockOffset&quot;:15,&quot;secid&quot;:17,&quot;range&quot;:&quot;6110-6694&quot;} -->
<h2 class="sectionedit18" id="troubleshooting">Troubleshooting</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Run <code>scanimage -L</code> on the router, if it does not find your scanner, you need to solve this first</div>
</li>
<li class="level1"><div class="li"> If scanimage does not find your scanner, install <code>sane-all</code> and try again?</div>
</li>
<li class="level1"><div class="li"> Run <code>scanimage -L</code> on your client (Linux), it should find the scanner. If it doesn&#039;t, but your router does, the saned on the client is not configured correctly</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Troubleshooting&quot;,&quot;hid&quot;:&quot;troubleshooting&quot;,&quot;codeblockOffset&quot;:15,&quot;secid&quot;:18,&quot;range&quot;:&quot;6695-&quot;} -->