
<h1 class="sectionedit1" id="telegraf">Telegraf</h1>
<div class="level1">

<p>
Telegraf is a plugin-driven agent for collecting and sending metrics and events. It supports various inputs (including Prometheus endpoints) and can send data into InfluxDB. More inforamtion on telegraf&#039;s website: <a href="https://www.influxdata.com/time-series-platform/telegraf/" class="urlextern" title="https://www.influxdata.com/time-series-platform/telegraf/" rel="ugc nofollow">https://www.influxdata.com/time-series-platform/telegraf/</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Telegraf&quot;,&quot;hid&quot;:&quot;telegraf&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-300&quot;} -->
<h2 class="sectionedit2" id="installation">Installation</h2>
<div class="level2">

<p>
At the <a href="https://github.com/openwrt/packages/pull/16238#event-5493323261" class="urlextern" title="https://github.com/openwrt/packages/pull/16238#event-5493323261" rel="ugc nofollow">20th of October</a> the first telegraf was merged into the package repository. If you use the openwrt snapshot packages, you can install <code>telegraf</code> with the following commands.
</p>

<p>
To install the full version use the package <code>telegraf-full</code>.
</p>
<pre class="code bash">opkg <span class="kw2">install</span> telegraf-full</pre>

<p>
To use a smaller version (around 27M when installing with `opkg` and around 6M when including into squashfs) use the package `telegraf`
</p>
<pre class="code bash">opkg <span class="kw2">install</span> telegraf</pre>

<p>
The reduced version includes:
</p>

<p>
<strong>Aggregators</strong>:
</p>
<ul>
<li class="level1"><div class="li"> None</div>
</li>
</ul>

<p>
<strong>Inputs</strong>:
</p>
<ul>
<li class="level1"><div class="li"> cpu </div>
</li>
<li class="level1"><div class="li"> ethtool </div>
</li>
<li class="level1"><div class="li"> internal </div>
</li>
<li class="level1"><div class="li"> interrupts </div>
</li>
<li class="level1"><div class="li"> ipset </div>
</li>
<li class="level1"><div class="li"> iptables </div>
</li>
<li class="level1"><div class="li"> kernel </div>
</li>
<li class="level1"><div class="li"> mem </div>
</li>
<li class="level1"><div class="li"> net </div>
</li>
<li class="level1"><div class="li"> net_response </div>
</li>
<li class="level1"><div class="li"> ping </div>
</li>
<li class="level1"><div class="li"> processes </div>
</li>
<li class="level1"><div class="li"> procstat </div>
</li>
<li class="level1"><div class="li"> prometheus </div>
</li>
<li class="level1"><div class="li"> sensors </div>
</li>
<li class="level1"><div class="li"> snmp </div>
</li>
<li class="level1"><div class="li"> socket_listener </div>
</li>
<li class="level1"><div class="li"> swap </div>
</li>
<li class="level1"><div class="li"> syslog </div>
</li>
<li class="level1"><div class="li"> system </div>
</li>
<li class="level1"><div class="li"> tail </div>
</li>
<li class="level1"><div class="li"> tcp_listener </div>
</li>
<li class="level1"><div class="li"> udp_listener </div>
</li>
<li class="level1"><div class="li"> wireguard </div>
</li>
<li class="level1"><div class="li"> wireless </div>
</li>
</ul>

<p>
<strong>Outputs</strong>:
</p>
<ul>
<li class="level1"><div class="li"> exec</div>
</li>
<li class="level1"><div class="li"> file</div>
</li>
<li class="level1"><div class="li"> graphite</div>
</li>
<li class="level1"><div class="li"> http</div>
</li>
<li class="level1"><div class="li"> influxdb</div>
</li>
<li class="level1"><div class="li"> prometheus_client</div>
</li>
<li class="level1"><div class="li"> syslog</div>
</li>
</ul>

<p>
<strong>Processors</strong>:
</p>
<ul>
<li class="level1"><div class="li"> None</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Installation&quot;,&quot;hid&quot;:&quot;installation&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;301-1396&quot;} -->
<h2 class="sectionedit3" id="configuration">Configuration</h2>
<div class="level2">

<p>
Since version <code>1.20.3</code> the configuration file is stored at <code>/etc/telegraf.conf</code>. By default, the provided telegraf configuration file is deployed. You can find it <a href="https://github.com/influxdata/telegraf/blob/master/etc/telegraf.conf" class="urlextern" title="https://github.com/influxdata/telegraf/blob/master/etc/telegraf.conf" rel="ugc nofollow">here</a> or in the package. 
</p>

<p>
Changes in the configuration file will not be overwritten by updates of the package.
</p>

<p>
After changing the configuration the service needs to be restarted or you can reload the configuration.
</p>

<p>
To test the current configuration the following command can be used:
</p>
<pre class="code bash">telegraf <span class="re5">--test</span> <span class="re5">--config</span> <span class="sy0">/</span>etc<span class="sy0">/</span>telegraf.conf</pre>

<p>
To limit the test to a specific plugin use:
</p>
<pre class="code bash">telegraf <span class="re5">--test</span> <span class="re5">--config</span> <span class="sy0">/</span>etc<span class="sy0">/</span>telegraf.conf <span class="re5">--input-filter</span> <span class="sy0">&lt;</span>FILTER-NAME<span class="sy0">&gt;</span>  <span class="re5">--output-filter</span> <span class="sy0">&lt;</span>FILTER-NAME<span class="sy0">&gt;</span></pre>

<p>
For the further configuration see the official telegraf <a href="https://docs.influxdata.com/telegraf/v1.21/" class="urlextern" title="https://docs.influxdata.com/telegraf/v1.21/" rel="ugc nofollow">documentation</a>.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configuration&quot;,&quot;hid&quot;:&quot;configuration&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:3,&quot;range&quot;:&quot;1397-2303&quot;} -->
<h3 class="sectionedit4" id="manage_service">Manage service</h3>
<div class="level3">

<p>
The telegraf service is managed via a <code>init.d</code> script.
</p>

<p>
The following command are available:
</p>
<ul>
<li class="level1"><div class="li"> start</div>
</li>
<li class="level1"><div class="li"> stop</div>
</li>
<li class="level1"><div class="li"> restart</div>
</li>
<li class="level1"><div class="li"> enable (autostart on bootup)</div>
</li>
<li class="level1"><div class="li"> disable (autostart on bootup)</div>
</li>
<li class="level1"><div class="li"> reload (configuration)</div>
</li>
</ul>
<pre class="code bash"><span class="sy0">/</span>etc<span class="sy0">/</span>init.d<span class="sy0">/</span>telegraf <span class="sy0">&lt;</span>COMMAND<span class="sy0">&gt;</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Manage service&quot;,&quot;hid&quot;:&quot;manage_service&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:4,&quot;range&quot;:&quot;2304-&quot;} -->