
<h1 class="sectionedit1" id="ddns_client_hurricane_electric">DDNS Client Hurricane Electric</h1>
<div class="level1">

<p>
This document describes the steps to configure the DDNS Client via LuCI to use Hurricane Electric&#039;s Free <abbr title="Domain Name System">DNS</abbr> Service. In this example I will show the steps to configure host.example.com domain to update with your router&#039;s public <abbr title="Internet Protocol">IP</abbr> address.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;DDNS Client Hurricane Electric&quot;,&quot;hid&quot;:&quot;ddns_client_hurricane_electric&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-287&quot;} -->
<h2 class="sectionedit2" id="requirements">Requirements</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> A domain name. (eg: example.com)</div>
</li>
<li class="level1"><div class="li"> A <a href="https://dns.he.net/" class="urlextern" title="https://dns.he.net/" rel="ugc nofollow">https://dns.he.net/</a> account</div>
</li>
<li class="level1"><div class="li"> Installed <a href="/docs/guide-user/services/ddns/client#installation" class="wikilink1" title="docs:guide-user:services:ddns:client" data-wiki-id="docs:guide-user:services:ddns:client">DDNS LuCI packages</a>, the <a href="/docs/guide-user/services/ddns/client#ssl_support" class="wikilink1" title="docs:guide-user:services:ddns:client" data-wiki-id="docs:guide-user:services:ddns:client">ca-certificates package</a></div>
</li>
<li class="level1"><div class="li"> Download the CA authority certificate with which the portal for dynamic <abbr title="Domain Name System">DNS</abbr> updates is signed. As of 6.1.2017, dyn.dns.he.net is signed by CACert Level 3 CA.</div>
</li>
<li class="level1"><div class="li"> Import the 3rd party CA authority certs if you get dyndns errors. See <a href="/docs/guide-user/services/ddns/client#ssl_support" class="wikilink1" title="docs:guide-user:services:ddns:client" data-wiki-id="docs:guide-user:services:ddns:client">ca-certificates package</a> how to import the CACert or any 3rd party certs to <code>/etc/ssl/certificates</code> which might be needed to overcome the problems for failing dns updates due to untrusted certificates.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Requirements&quot;,&quot;hid&quot;:&quot;requirements&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;288-1045&quot;} -->
<h2 class="sectionedit3" id="domain_setup">Domain Setup</h2>
<div class="level2">

<p>
Login to your registrar or edit your <abbr title="Domain Name System">DNS</abbr> Zone file to add the NS records for host.example.com to point to ns2.he.net, ns3.he.net, ns4.he.net, and ns5.he.net.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Domain Setup&quot;,&quot;hid&quot;:&quot;domain_setup&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;1046-1229&quot;} -->
<h2 class="sectionedit4" id="dns_host_setup">DNS Host Setup</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> Login to <a href="https://dns.he.net/" class="urlextern" title="https://dns.he.net/" rel="ugc nofollow">https://dns.he.net/</a> and “Add a new domain” for host.example.com</div>
</li>
<li class="level1"><div class="li"> Edit the host.example.com zone entry and add click “New A” and enter the Name of “@” and check the “Enable entry for dynamic dns” checkbox.</div>
</li>
<li class="level1"><div class="li"> For the newly created A record, find the DDNS column and click the “Generate a DDNS key” circle arrow icon.</div>
</li>
<li class="level1"><div class="li"> Generate a new password and copy that text for later before you save the form.</div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;DNS Host Setup&quot;,&quot;hid&quot;:&quot;dns_host_setup&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;1230-1673&quot;} -->
<h2 class="sectionedit5" id="luci_setup">LuCI Setup</h2>
<div class="level2">

<p>
On your OpenWrt router under Services &gt; Dynamic <abbr title="Domain Name System">DNS</abbr> enable the service with this configuration:
</p>
<ul>
<li class="level1"><div class="li"> Event interface: wan</div>
</li>
<li class="level1"><div class="li"> Service: he.net</div>
</li>
<li class="level1"><div class="li"> Hostname: host.example.com</div>
</li>
<li class="level1"><div class="li"> Username: host.example.com</div>
</li>
<li class="level1"><div class="li"> Password: [the DDNS key you saved above]</div>
</li>
<li class="level1"><div class="li"> Source of <abbr title="Internet Protocol">IP</abbr> address: <abbr title="Uniform Resource Locator">URL</abbr></div>
</li>
<li class="level1"><div class="li"> <abbr title="Uniform Resource Locator">URL</abbr> to detect <abbr title="Internet Protocol">IP</abbr>: <a href="http://checkip.dyndns.com" class="urlextern" title="http://checkip.dyndns.com" rel="ugc nofollow">http://checkip.dyndns.com</a> (by default)</div>
</li>
</ul>

<p>
Save and Apply.
</p>

<p>
That should do it. If the above is useful and you use Hover to register a domain you can toss the author a buck credit with this referral link: <a href="https://hover.com/hUyus9hH" class="urlextern" title="https://hover.com/hUyus9hH" rel="ugc nofollow">https://hover.com/hUyus9hH</a>
</p>

<p>
Remark: While this DDNS may work for <abbr title="Internet Protocol version 6">IPv6</abbr> tunnel addresses, it does not work for auto-updating a dynamic he.net tunnel - at least on a <abbr title="Network Address Translation">NAT</abbr> trunk / 3G with Austrian providers.
See details for <a href="https://forums.he.net/index.php?topic=1994.0" class="urlextern" title="https://forums.he.net/index.php?topic=1994.0" rel="ugc nofollow">https://forums.he.net/index.php?topic=1994.0</a>
It seems, that the custom url for auto detection of the ipv4 adress is:
</p>
<pre class="code">https://&lt;USERNAME&gt;:&lt;PASSWORD&gt;@ipv4.tunnelbroker.net/nic/update?hostname=&lt;TUNNEL_ID&gt;
https://ipv4.tunnelbroker.net/nic/update?username=&lt;USERNAME&gt;&amp;password=&lt;PASSWORD&gt;&amp;hostname=&lt;TUNNEL_ID&gt;</pre>

<p>
These URLs work well with the correct parameters from the tunnelbroker.net website.
When using these values or a custum setup Luci-DDNS will always complain about not being able to retrieve the local <abbr title="Internet Protocol">IP</abbr>. That may be due to to format of the <abbr title="Uniform Resource Locator">URL</abbr> update script&#039;s output format.
A workaround may be to call wget from within a cronjob.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;LuCI Setup&quot;,&quot;hid&quot;:&quot;luci_setup&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;1674-3079&quot;} -->
<h2 class="sectionedit6" id="troubleshooting">Troubleshooting</h2>
<div class="level2">

<p>
Check the /var/log/ddns/myddns_ipvX.log and google for the error messages of transport agent. Trying to manually authenticate can help you understand better the error and the root cause.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Troubleshooting&quot;,&quot;hid&quot;:&quot;troubleshooting&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:6,&quot;range&quot;:&quot;3080-&quot;} -->