
<h1 class="sectionedit1" id="tor_extras">Tor extras</h1>
<div class="level1">

</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_start&quot;,&quot;name&quot;:&quot;meta:infobox:howto_links&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:2,&quot;range&quot;:&quot;0-&quot;} --><div class="plugin_include_content plugin_include__meta:infobox:howto_links">
<div class="level1">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_info plugin_wrap">
<p>
This article relies on the following:
</p>
<ul>
<li class="level1"><div class="li"> Accessing <a href="/docs/guide-quick-start/walkthrough_login" class="wikilink1" title="docs:guide-quick-start:walkthrough_login" data-wiki-id="docs:guide-quick-start:walkthrough_login">web interface</a> / <a href="/docs/guide-quick-start/sshadministration" class="wikilink1" title="docs:guide-quick-start:sshadministration" data-wiki-id="docs:guide-quick-start:sshadministration">command-line interface</a></div>
</li>
<li class="level1"><div class="li"> Managing <a href="/docs/guide-user/base-system/uci" class="wikilink1" title="docs:guide-user:base-system:uci" data-wiki-id="docs:guide-user:base-system:uci">configs</a> / <a href="/docs/guide-user/additional-software/managing_packages" class="wikilink1" title="docs:guide-user:additional-software:managing_packages" data-wiki-id="docs:guide-user:additional-software:managing_packages">packages</a> / <a href="/docs/guide-user/base-system/managing_services" class="wikilink1" title="docs:guide-user:base-system:managing_services" data-wiki-id="docs:guide-user:base-system:managing_services">services</a> / <a href="/docs/guide-user/base-system/log.essentials" class="wikilink1" title="docs:guide-user:base-system:log.essentials" data-wiki-id="docs:guide-user:base-system:log.essentials">logs</a></div>
</li>
</ul>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;0-&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_end&quot;,&quot;name&quot;:&quot;meta:infobox:howto_links&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:3,&quot;range&quot;:&quot;0-&quot;} --></div>
<div class="level1">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Tor extras&quot;,&quot;hid&quot;:&quot;tor_extras&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-107&quot;} -->
<h2 class="sectionedit6" id="introduction">Introduction</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> This how-to describes the most common <a href="https://en.wikipedia.org/wiki/Tor_(anonymity_network)" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Tor_(anonymity_network)">Tor</a> tuning scenarios adapted for OpenWrt.</div>
</li>
<li class="level1"><div class="li"> Follow <a href="/docs/guide-user/services/tor/client" class="wikilink1" title="docs:guide-user:services:tor:client" data-wiki-id="docs:guide-user:services:tor:client">Tor client</a> for client setup and <a href="/docs/guide-user/services/tor/hs" class="wikilink1" title="docs:guide-user:services:tor:hs" data-wiki-id="docs:guide-user:services:tor:hs">Tor hidden service</a> for onion service setup.</div>
</li>
<li class="level1"><div class="li"> Follow <a href="/docs/guide-user/services/rng" class="wikilink1" title="docs:guide-user:services:rng" data-wiki-id="docs:guide-user:services:rng">Random generator</a> to overcome low entropy issues.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Introduction&quot;,&quot;hid&quot;:&quot;introduction&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;108-504&quot;} -->
<h2 class="sectionedit7" id="extras">Extras</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Extras&quot;,&quot;hid&quot;:&quot;extras&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;505-523&quot;} -->
<h3 class="sectionedit8" id="references">References</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="https://2019.www.torproject.org/docs/tor-manual.html.en" class="urlextern" title="https://2019.www.torproject.org/docs/tor-manual.html.en" rel="ugc nofollow">Tor manual</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://community.torproject.org/" class="urlextern" title="https://community.torproject.org/" rel="ugc nofollow">Tor community documentation</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://support.torproject.org/" class="urlextern" title="https://support.torproject.org/" rel="ugc nofollow">Tor frequently asked questions</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;References&quot;,&quot;hid&quot;:&quot;references&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:8,&quot;range&quot;:&quot;524-761&quot;} -->
<h3 class="sectionedit9" id="exit_nodes">Exit nodes</h3>
<div class="level3">

<p>
Exclude dubious exit nodes by their <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">country code</a>.
</p>
<pre class="code bash"><span class="co0"># Install packages</span>
opkg update
opkg <span class="kw2">install</span> tor-geoip
&nbsp;
<span class="co0"># Exclude exit nodes</span>
<span class="kw2">cat</span> <span class="sy0">&lt;&lt;</span> EOF <span class="sy0">&gt;&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>tor<span class="sy0">/</span>custom
ExcludeExitNodes <span class="br0">&#123;</span>??<span class="br0">&#125;</span>, <span class="br0">&#123;</span>by<span class="br0">&#125;</span>, <span class="br0">&#123;</span>kz<span class="br0">&#125;</span>, <span class="br0">&#123;</span>ru<span class="br0">&#125;</span>, <span class="br0">&#123;</span>ua<span class="br0">&#125;</span>
EOF
service tor restart</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Exit nodes&quot;,&quot;hid&quot;:&quot;exit_nodes&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:9,&quot;range&quot;:&quot;762-1056&quot;} -->
<h3 class="sectionedit10" id="socks_proxy">Socks proxy</h3>
<div class="level3">

<p>
Enable Tor socks proxy.
</p>
<pre class="code bash"><span class="co0"># Enable Tor socks proxy</span>
<span class="kw2">cat</span> <span class="sy0">&lt;&lt;</span> EOF <span class="sy0">&gt;&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>tor<span class="sy0">/</span>custom
SOCKSPort 0.0.0.0:<span class="nu0">9050</span>
SOCKSPort <span class="br0">&#91;</span>::<span class="br0">&#93;</span>:<span class="nu0">9050</span>
EOF
service tor restart</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Socks proxy&quot;,&quot;hid&quot;:&quot;socks_proxy&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:10,&quot;range&quot;:&quot;1057-1246&quot;} -->
<h3 class="sectionedit11" id="pluggable_transports">Pluggable transports</h3>
<div class="level3">

<p>
Circumvent <abbr title="Internet Service Provider">ISP</abbr> restrictions with <a href="https://tb-manual.torproject.org/bridges/" class="urlextern" title="https://tb-manual.torproject.org/bridges/" rel="ugc nofollow">bridges</a>.
</p>
<pre class="code bash"><span class="co0"># Install packages</span>
opkg update
opkg <span class="kw2">install</span> obfs4proxy
&nbsp;
<span class="co0"># Configure bridges</span>
<span class="kw2">cat</span> <span class="sy0">&lt;&lt;</span> EOF <span class="sy0">&gt;&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>tor<span class="sy0">/</span>custom
UseBridges <span class="nu0">1</span>
ClientTransportPlugin obfs4 <span class="kw3">exec</span> <span class="sy0">/</span>usr<span class="sy0">/</span>bin<span class="sy0">/</span>obfs4proxy
Bridge obfs4 154.35.22.10:<span class="nu0">443</span> 8FB9F4319E89E5C6223052AA525A192AFBC85D55 \
<span class="re2">cert</span>=GGGS1TX4R81m3r0HBl79wKy1OtPPNR2CZUIrHjkRg65Vc2VR8fOyo64f9kmT1UAFG7j0HQ iat-mode=<span class="nu0">0</span>
Bridge obfs4 154.35.22.12:<span class="nu0">80</span> 00DC6C4FA49A65BD1472993CF6730D54F11E0DBB \
<span class="re2">cert</span>=N86E9hKXXXVz6G7w2z8wFfhIDztDAzZ<span class="sy0">/</span>3poxVePHEYjbKDWzjkRDccFMAnhK75fc65pYSg iat-mode=<span class="nu0">0</span>
EOF
service tor restart</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Pluggable transports&quot;,&quot;hid&quot;:&quot;pluggable_transports&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:11,&quot;range&quot;:&quot;1247-1902&quot;} -->
<h3 class="sectionedit12" id="onion_services">Onion services</h3>
<div class="level3">

<p>
Allow remote access to the router with <a href="/docs/guide-user/services/tor/hs" class="wikilink1" title="docs:guide-user:services:tor:hs" data-wiki-id="docs:guide-user:services:tor:hs">Tor Onion services</a>.
Be sure to enable <a href="/docs/guide-user/services/tor/extras#client_authorization" class="wikilink1" title="docs:guide-user:services:tor:extras" data-wiki-id="docs:guide-user:services:tor:extras">client authorization</a>.
</p>
<pre class="code bash"><span class="co0"># Install packages</span>
opkg update
opkg <span class="kw2">install</span> tor-hs
&nbsp;
<span class="co0"># Configure Tor onion service</span>
uci <span class="re5">-q</span> delete tor-hs.ssh
uci <span class="kw1">set</span> tor-hs.ssh=<span class="st0">&quot;hidden-service&quot;</span>
uci <span class="kw1">set</span> tor-hs.ssh.Name=<span class="st0">&quot;ssh&quot;</span>
uci <span class="kw1">set</span> tor-hs.ssh.Enabled=<span class="st0">&quot;1&quot;</span>
uci <span class="kw1">set</span> tor-hs.ssh.IPv4=<span class="st0">&quot;127.0.0.1&quot;</span>
uci add_list tor-hs.ssh.PublicLocalPort=<span class="st0">&quot;22;22&quot;</span>
uci commit tor-hs
service tor-hs restart
&nbsp;
<span class="co0"># Fetch onion service hostname</span>
<span class="kw2">cat</span> <span class="sy0">/</span>etc<span class="sy0">/</span>tor<span class="sy0">/</span>hidden_service<span class="sy0">/</span>ssh<span class="sy0">/</span><span class="kw2">hostname</span></pre>

<p>
Access the onion service from Tor client.
</p>
<pre class="code bash"><span class="co0"># Install packages</span>
opkg update
opkg <span class="kw2">install</span> torsocks
&nbsp;
<span class="co0"># Access onion service</span>
torsocks <span class="kw2">ssh</span> <span class="co1">${TOR_HOST}</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Onion services&quot;,&quot;hid&quot;:&quot;onion_services&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:12,&quot;range&quot;:&quot;1903-2713&quot;} -->
<h3 class="sectionedit13" id="client_authorization">Client authorization</h3>
<div class="level3">

<p>
Secure access to onion services with <a href="https://community.torproject.org/onion-services/advanced/client-auth/" class="urlextern" title="https://community.torproject.org/onion-services/advanced/client-auth/" rel="ugc nofollow">client authorization</a>.
</p>
<pre class="code bash"><span class="co0"># Install packages</span>
opkg update
opkg <span class="kw2">install</span> openssl-util coreutils-base32
&nbsp;
<span class="co0"># Enable client authorization</span>
openssl genpkey <span class="re5">-algorithm</span> x25519 <span class="re5">-out</span> <span class="sy0">/</span>etc<span class="sy0">/</span>tor<span class="sy0">/</span>hidden_service.pem
<span class="re2">TOR_KEY</span>=<span class="st0">&quot;$(openssl pkey -in /etc/tor/hidden_service.pem -outform der <span class="es1">\
</span>| tail -c 32 <span class="es1">\
</span>| base32 <span class="es1">\
</span>| sed -e &quot;</span>s<span class="sy0">/</span>=<span class="sy0">//</span>g<span class="st0">&quot;)&quot;</span>
<span class="re2">TOR_PUB</span>=<span class="st0">&quot;$(openssl pkey -in /etc/tor/hidden_service.pem -outform der -pubout <span class="es1">\
</span>| tail -c 32 <span class="es1">\
</span>| base32 <span class="es1">\
</span>| sed -e &quot;</span>s<span class="sy0">/</span>=<span class="sy0">//</span>g<span class="st0">&quot;)&quot;</span>
<span class="re2">TOR_HOST</span>=<span class="st0">&quot;<span class="es4">$(cat /etc/tor/hidden_service/ssh/hostname)</span>&quot;</span>
<span class="kw2">cat</span> <span class="sy0">&lt;&lt;</span> EOF <span class="sy0">&gt;</span> client.auth_private
<span class="co1">${TOR_HOST%.onion}</span>:descriptor:x25519:<span class="co1">${TOR_KEY}</span>
EOF
<span class="kw2">cat</span> <span class="sy0">&lt;&lt;</span> EOF <span class="sy0">&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>tor<span class="sy0">/</span>hidden_service<span class="sy0">/</span>ssh<span class="sy0">/</span>authorized_clients<span class="sy0">/</span>client.auth
descriptor:x25519:<span class="co1">${TOR_PUB}</span>
EOF
<span class="kw2">chown</span> <span class="re5">-R</span> tor:tor <span class="sy0">/</span>etc<span class="sy0">/</span>tor<span class="sy0">/</span>hidden_service<span class="sy0">/</span>
service tor restart</pre>

<p>
Configure authorization on the client using the private key.
</p>
<pre class="code bash"><span class="co0"># Configure client authorization</span>
<span class="kw2">cat</span> <span class="sy0">&lt;&lt;</span> EOF <span class="sy0">&gt;&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>tor<span class="sy0">/</span>custom
ClientOnionAuthDir <span class="sy0">/</span>etc<span class="sy0">/</span>tor<span class="sy0">/</span>onion_auth
EOF
<span class="kw3">umask</span> <span class="re2">go</span>=
<span class="re2">TOR_AUTH</span>=<span class="st0">&quot;<span class="es4">$(cat client.auth_private)</span>&quot;</span>
<span class="re2">TOR_HOST</span>=<span class="st0">&quot;<span class="es3">${TOR_AUTH%%:*}</span>.onion&quot;</span>
<span class="kw2">mkdir</span> <span class="re5">-p</span> <span class="sy0">/</span>etc<span class="sy0">/</span>tor<span class="sy0">/</span>onion_auth
<span class="kw2">cat</span> <span class="sy0">&lt;&lt;</span> EOF <span class="sy0">&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>tor<span class="sy0">/</span>onion_auth<span class="sy0">/</span>client.auth_private
<span class="co1">${TOR_AUTH}</span>
EOF
<span class="kw2">chown</span> <span class="re5">-R</span> tor:tor <span class="sy0">/</span>etc<span class="sy0">/</span>tor<span class="sy0">/</span>onion_auth
service tor restart</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Client authorization&quot;,&quot;hid&quot;:&quot;client_authorization&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:13,&quot;range&quot;:&quot;2714-4045&quot;} -->
<h3 class="sectionedit14" id="selective_routing">Selective routing</h3>
<div class="level3">

<p>
Route only specific domains to Tor network.
Selectively utilize <abbr title="Domain Name System">DNS</abbr> over Tor.
Beware of privacy issues as each site may use multiple domains.
</p>
<pre class="code bash"><span class="co0"># Process traffic by destination</span>
<span class="kw1">for</span> IPV <span class="kw1">in</span> <span class="nu0">4</span> <span class="nu0">6</span>
<span class="kw1">do</span> <span class="kw1">case</span> <span class="co1">${IPV}</span> <span class="kw1">in</span>
<span class="br0">&#40;</span><span class="nu0">4</span><span class="br0">&#41;</span> <span class="re2">TOR_DST</span>=<span class="st0">&quot;172.16.0.0/12&quot;</span> <span class="sy0">;;</span>
<span class="br0">&#40;</span><span class="nu0">6</span><span class="br0">&#41;</span> <span class="re2">TOR_DST</span>=<span class="st0">&quot;fc00::/8&quot;</span> <span class="sy0">;;</span>
<span class="kw1">esac</span>
uci <span class="re5">-q</span> delete firewall.tcp_int<span class="co1">${IPV%4}</span>
uci <span class="kw1">set</span> firewall.tcp_int<span class="co1">${IPV%4}</span>=<span class="st0">&quot;redirect&quot;</span>
uci <span class="kw1">set</span> firewall.tcp_int<span class="co1">${IPV%4}</span>.name=<span class="st0">&quot;Intercept-TCP&quot;</span>
uci <span class="kw1">set</span> firewall.tcp_int<span class="co1">${IPV%4}</span>.src=<span class="st0">&quot;lan&quot;</span>
uci <span class="kw1">set</span> firewall.tcp_int<span class="co1">${IPV%4}</span>.src_dip=<span class="st0">&quot;<span class="es3">${TOR_DST}</span>&quot;</span>
uci <span class="kw1">set</span> firewall.tcp_int<span class="co1">${IPV%4}</span>.src_dport=<span class="st0">&quot;0-65535&quot;</span>
uci <span class="kw1">set</span> firewall.tcp_int<span class="co1">${IPV%4}</span>.dest_port=<span class="st0">&quot;9040&quot;</span>
uci <span class="kw1">set</span> firewall.tcp_int<span class="co1">${IPV%4}</span>.proto=<span class="st0">&quot;tcp&quot;</span>
uci <span class="kw1">set</span> firewall.tcp_int<span class="co1">${IPV%4}</span>.target=<span class="st0">&quot;DNAT&quot;</span>
uci <span class="re5">-q</span> delete firewall.lan_wan<span class="co1">${IPV%4}</span>
uci <span class="kw1">set</span> firewall.lan_wan<span class="co1">${IPV%4}</span>=<span class="st0">&quot;rule&quot;</span>
uci <span class="kw1">set</span> firewall.lan_wan<span class="co1">${IPV%4}</span>.name=<span class="st0">&quot;Allow-NonTor-Forward&quot;</span>
uci <span class="kw1">set</span> firewall.lan_wan<span class="co1">${IPV%4}</span>.src=<span class="st0">&quot;lan&quot;</span>
uci <span class="kw1">set</span> firewall.lan_wan<span class="co1">${IPV%4}</span>.dest=<span class="st0">&quot;wan&quot;</span>
uci <span class="kw1">set</span> firewall.lan_wan<span class="co1">${IPV%4}</span>.dest_ip=<span class="st0">&quot;!<span class="es3">${TOR_DST}</span>&quot;</span>
uci <span class="kw1">set</span> firewall.lan_wan<span class="co1">${IPV%4}</span>.proto=<span class="st0">&quot;all&quot;</span>
uci <span class="kw1">set</span> firewall.lan_wan<span class="co1">${IPV%4}</span>.target=<span class="st0">&quot;ACCEPT&quot;</span>
<span class="kw1">done</span>
uci <span class="re5">-q</span> delete firewall.tor_nft
uci commit firewall
service firewall restart
&nbsp;
<span class="co0"># Configure Tor domains</span>
uci <span class="re5">-q</span> delete dhcp.<span class="sy0">@</span>dnsmasq<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.noresolv
uci <span class="re5">-q</span> delete dhcp.<span class="sy0">@</span>dnsmasq<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.server
uci add_list dhcp.<span class="sy0">@</span>dnsmasq<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.server=<span class="st0">&quot;/onion/127.0.0.1#9053&quot;</span>
uci add_list dhcp.<span class="sy0">@</span>dnsmasq<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.server=<span class="st0">&quot;/example.com/127.0.0.1#9053&quot;</span>
uci add_list dhcp.<span class="sy0">@</span>dnsmasq<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.server=<span class="st0">&quot;/example.net/127.0.0.1#9053&quot;</span>
uci commit dhcp
service dnsmasq restart</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Selective routing&quot;,&quot;hid&quot;:&quot;selective_routing&quot;,&quot;codeblockOffset&quot;:7,&quot;secid&quot;:14,&quot;range&quot;:&quot;4046-5589&quot;} -->
<h3 class="sectionedit15" id="hardware_acceleration">Hardware acceleration</h3>
<div class="level3">

<p>
Some devices have <a href="/docs/techref/hardware/cryptographic.hardware.accelerators" class="wikilink1" title="docs:techref:hardware:cryptographic.hardware.accelerators" data-wiki-id="docs:techref:hardware:cryptographic.hardware.accelerators">hardware crypto accelerator chips</a>.
Enabling Tor to use a hardware accelerator offloads CPU pressure.
Because Tor uses the openssl library acceleration must also be enabled by openssl, which can be done by following these <a href="/docs/techref/hardware/cryptographic.hardware.accelerators#cryptodev" class="wikilink1" title="docs:techref:hardware:cryptographic.hardware.accelerators" data-wiki-id="docs:techref:hardware:cryptographic.hardware.accelerators">instructions</a>.
Then hardware acceleration must be enabled in Tor.
In the Tor notice log after the above setup, you should notice multiple lines like <strong><code>Default OpenSSL engine for 3DES-CBC is /dev/crypto engine [devcrypto]</code></strong>.
</p>
<pre class="code bash"><span class="co0"># Enable Tor hardware acceleration</span>
<span class="kw2">cat</span> <span class="sy0">&lt;&lt;</span> EOF <span class="sy0">&gt;&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>tor<span class="sy0">/</span>custom
HardwareAccel <span class="nu0">1</span>
EOF
service tor restart</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Hardware acceleration&quot;,&quot;hid&quot;:&quot;hardware_acceleration&quot;,&quot;codeblockOffset&quot;:8,&quot;secid&quot;:15,&quot;range&quot;:&quot;5590-6348&quot;} -->
<h3 class="sectionedit16" id="automated">Automated</h3>
<div class="level3">

<p>
Automated Tor client installation.
</p>
<pre class="code bash"><span class="re2">URL</span>=<span class="st0">&quot;https://openwrt.org/_export/code/docs/guide-user/services/tor/client&quot;</span>
<span class="kw2">cat</span> <span class="sy0">&lt;&lt;</span> EOF <span class="sy0">&gt;</span> tor-client.sh
$<span class="br0">&#40;</span><span class="kw2">wget</span> <span class="re5">-U</span> <span class="st0">&quot;&quot;</span> <span class="re5">-O</span> - <span class="st0">&quot;<span class="es3">${URL}</span>?codeblock=0&quot;</span><span class="br0">&#41;</span>
$<span class="br0">&#40;</span><span class="kw2">wget</span> <span class="re5">-U</span> <span class="st0">&quot;&quot;</span> <span class="re5">-O</span> - <span class="st0">&quot;<span class="es3">${URL}</span>?codeblock=1&quot;</span><span class="br0">&#41;</span>
$<span class="br0">&#40;</span><span class="kw2">wget</span> <span class="re5">-U</span> <span class="st0">&quot;&quot;</span> <span class="re5">-O</span> - <span class="st0">&quot;<span class="es3">${URL}</span>?codeblock=2&quot;</span><span class="br0">&#41;</span>
$<span class="br0">&#40;</span><span class="kw2">wget</span> <span class="re5">-U</span> <span class="st0">&quot;&quot;</span> <span class="re5">-O</span> - <span class="st0">&quot;<span class="es3">${URL}</span>?codeblock=3&quot;</span><span class="br0">&#41;</span>
EOF
<span class="kw2">sh</span> tor-client.sh</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Automated&quot;,&quot;hid&quot;:&quot;automated&quot;,&quot;codeblockOffset&quot;:9,&quot;secid&quot;:16,&quot;range&quot;:&quot;6349-&quot;} -->