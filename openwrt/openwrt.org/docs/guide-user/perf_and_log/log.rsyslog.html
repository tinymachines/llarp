
<h1 class="sectionedit1" id="rsyslog">rsyslog</h1>
<div class="level1">

<p>
The <a href="https://www.rsyslog.com/" class="urlextern" title="https://www.rsyslog.com/" rel="ugc nofollow">rsyslog</a> is a <a href="https://en.wikipedia.org/wiki/Syslog" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Syslog">Syslog</a> logging daemon.
</p>

</div>

<h4 id="install">Install</h4>
<div class="level4">
<pre class="code bash">opkg <span class="kw2">install</span> rsyslog</pre>

</div>

<h4 id="route_all_or_specific_logs_to_a_central_rsyslog_receiver">Route all or specific logs to a (central) rsyslog receiver</h4>
<div class="level4">

<p>
With the config file: /etc/rsyslog.conf
</p>
<pre class="code">*.info;mail.none;authpriv.none;cron.none;kern.none  /var/log/messages
..
kern.*					  @192.168.1.119:514</pre>

<p>
If you add to the rsyslog receiver&#039;s /etc/rsyslog.conf e.g. this template:
</p>
<pre class="code">$template DynamicFile,&quot;/mnt/sda1/logs/%HOSTNAME%/forwarded-logs.log&quot;
*.* -?DynamicFile</pre>

<p>
you get the messages separated from every sender in a own folder.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;rsyslog&quot;,&quot;hid&quot;:&quot;rsyslog&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-633&quot;} -->
<h3 class="sectionedit2" id="rsyslog_and_logzio">rsyslog and Logz.io</h3>
<div class="level3">

<p>
You can support logging direct to a cloud ELK provider like Logz.io by adding a few lines to your <code>rsyslog.conf</code>.
</p>

<p>
Replace <code>codecodecode</code> with your unique Logz.io identifier, it&#039;s 32 characters.
And will appear in help manuals when you&#039;re logged in, reference the guide <a href="https://app.logz.io/#/dashboard/data-sources/rsyslog" class="urlextern" title="https://app.logz.io/#/dashboard/data-sources/rsyslog" rel="ugc nofollow">here</a>.
</p>
<pre class="code">$template logzFormatFileTagName,&quot;[codecodecodecode] &lt;%pri%&gt;%protocol-version% %timestamp:::date-rfc3339% %HOSTNAME% %app-name% %procid% %msgid% [type=TYPE] %msg%\n&quot;
*.* @@listener.logz.io:5000;logzFormatFileTagName</pre>

<p>
Confirm you have the right config with:
</p>
<pre class="code bash">rsyslogd <span class="re5">-N1</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;rsyslog and Logz.io&quot;,&quot;hid&quot;:&quot;rsyslog_and_logzio&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:2,&quot;range&quot;:&quot;634-&quot;} -->