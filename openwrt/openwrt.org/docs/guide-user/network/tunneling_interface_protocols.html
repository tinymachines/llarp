
<h1 class="sectionedit1" id="tunneling_interface_protocols">Tunneling interface protocols</h1>
<div class="level1">

<p>
This page describes all available tunneling protocol usable in <code><a href="/docs/guide-user/network/network_configuration" class="wikilink1" title="docs:guide-user:network:network_configuration" data-wiki-id="docs:guide-user:network:network_configuration">/etc/config/network</a></code> and their options.
Some example configurations are provided at the end of the page.
</p>

<p>
Note that, for most protocols, installing an opkg package is required for protocol support.
</p>
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:2,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_important plugin_wrap">
<p>
Most OpenWrt protocol handlers add a protocol-specific prefix to the UCI interface names.
There is a default 15-character limit for interface names in the Linux kernel.
</p>

<p>
With prefixes seen at least as long as <code>gre4t-</code> and allowing possibility of using .<abbr title="Virtual Local Area Network">VLAN</abbr> notation, declared names should be kept under four (4) characters.
</p>

<p>
<code>abcd.NNNN</code> ⇒ <code>gre4t-abcd.NNNN</code> (15 characters)
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:3,&quot;range&quot;:&quot;0-&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_start&quot;,&quot;name&quot;:&quot;meta:infobox:howto_links&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;0-&quot;} --><div class="plugin_include_content plugin_include__meta:infobox:howto_links">
<div class="level1">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:6,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_important plugin_wrap">
<p>
This article may contain network configuration that depends on migration to DSA in OpenWrt 21.02
</p>
<ul>
<li class="level1"><div class="li"> Check if your device uses DSA or swconfig as not all devices have been migrated</div>
</li>
<li class="level1"><div class="li"> ifname@interface has been moved to device sections</div>
</li>
<li class="level1"><div class="li"> <a href="/docs/guide-user/network/dsa/start" class="wikilink1" title="docs:guide-user:network:dsa:start" data-wiki-id="docs:guide-user:network:dsa:start">DSA Networking</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://forum.openwrt.org/t/mini-tutorial-for-dsa-network-config/96998" class="urlextern" title="https://forum.openwrt.org/t/mini-tutorial-for-dsa-network-config/96998" rel="ugc nofollow">Mini tutorial for DSA network config</a> on the forum</div>
</li>
<li class="level1"><div class="li"> <a href="https://openwrt.org/releases/21.02/notes-21.02.0#new_network_configuration_syntax_and_boardjson_change" class="urlextern" title="https://openwrt.org/releases/21.02/notes-21.02.0#new_network_configuration_syntax_and_boardjson_change" rel="ugc nofollow">DSA in the 21.02 release notes</a></div>
</li>
</ul>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:7,&quot;range&quot;:&quot;0-&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_end&quot;,&quot;name&quot;:&quot;meta:infobox:howto_links&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;0-&quot;} --></div>
<div class="level1">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Tunneling interface protocols&quot;,&quot;hid&quot;:&quot;tunneling_interface_protocols&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-857&quot;} -->
<h2 class="sectionedit8" id="protocol_pptp_point-to-point_tunneling_protocol">Protocol &quot;pptp&quot; (Point-to-Point Tunneling Protocol)</h2>
<div class="level2">

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> The package <a href="/packages/pkgdata/ppp-mod-pptp" class="wikilink1" title="packages:pkgdata:ppp-mod-pptp" data-wiki-id="packages:pkgdata:ppp-mod-pptp">ppp-mod-pptp</a> must be installed to use this protocol.
</p>
<div class="table sectionedit9"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>server</code> </td><td class="col1"> ip address </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Remote PPtP server </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>username</code> </td><td class="col1"> string </td><td class="col2"> no(?) </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Username for PAP/CHAP authentication </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>password</code> </td><td class="col1"> string </td><td class="col2"> no(?) </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Password for PAP/CHAP authentication </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>keepalive</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> ? </td><td class="col4"> Number of attempts to reconnect </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>defaultroute</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> 1 </td><td class="col4"> Whether to create a default route over the tunnel </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>peerdns</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> 1 </td><td class="col4">Use PPTP-provided <abbr title="Domain Name System">DNS</abbr> server(s) </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>delegate</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> ? </td><td class="col4">Use builtin <abbr title="Internet Protocol version 6">IPv6</abbr>-management </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <code>iface</code> </td><td class="col1"> string </td><td class="col2"> no(?) </td><td class="col3"> <code>pptp-&lt;ifname&gt;</code> </td><td class="col4"> Name of the physical interface. Defaults to <code>pptp-&lt;ifname&gt;</code> no matter what you use where <code>&lt;ifname&gt;</code> is the name of the logical interface </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:9,&quot;range&quot;:&quot;1013-1793&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;pptp\&quot; (Point-to-Point Tunneling Protocol)&quot;,&quot;hid&quot;:&quot;protocol_pptp_point-to-point_tunneling_protocol&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:8,&quot;range&quot;:&quot;858-1794&quot;} -->
<h3 class="sectionedit10" id="pptp_configs">PPTP configs</h3>
<div class="level3">

<p>
Common PPTP and PPP configuration locations:
</p>
<div class="table sectionedit11"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>/etc/ppp/options.pptpd</code> </td><td class="col1" rowspan="2"> <a href="/docs/guide-user/network/tunneling_interface_protocols#pptp_options" class="wikilink1" title="docs:guide-user:network:tunneling_interface_protocols" data-wiki-id="docs:guide-user:network:tunneling_interface_protocols">PPTP options</a> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>/var/etc/options.pptpd</code> </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>/etc/ppp/chap-secrets</code> </td><td class="col1" rowspan="2"> <a href="/docs/guide-user/network/tunneling_interface_protocols#pptp_secrets" class="wikilink1" title="docs:guide-user:network:tunneling_interface_protocols" data-wiki-id="docs:guide-user:network:tunneling_interface_protocols">PPTP secrets</a> </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>/var/etc/chap-secrets</code> </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>/etc/ppp/peers</code> </td><td class="col1"> <a href="/docs/guide-user/network/tunneling_interface_protocols#pptp_peers" class="wikilink1" title="docs:guide-user:network:tunneling_interface_protocols" data-wiki-id="docs:guide-user:network:tunneling_interface_protocols">PPTP peers</a> </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>/etc/ppp/ip-up</code> </td><td class="col1" rowspan="2"> <a href="/docs/guide-user/network/tunneling_interface_protocols#ppp_scripts" class="wikilink1" title="docs:guide-user:network:tunneling_interface_protocols" data-wiki-id="docs:guide-user:network:tunneling_interface_protocols">Tunnel up scripts</a> </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>/etc/ppp/ip-up.d</code> </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <code>/etc/ppp/ip-down</code> </td><td class="col1" rowspan="2"> <a href="/docs/guide-user/network/tunneling_interface_protocols#ppp_scripts" class="wikilink1" title="docs:guide-user:network:tunneling_interface_protocols" data-wiki-id="docs:guide-user:network:tunneling_interface_protocols">Tunnel down scripts</a> </td>
	</tr>
	<tr class="row9">
		<td class="col0"> <code>/etc/ppp/ip-down.d</code> </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table1&quot;,&quot;secid&quot;:11,&quot;range&quot;:&quot;1864-2591&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;PPTP configs&quot;,&quot;hid&quot;:&quot;pptp_configs&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:10,&quot;range&quot;:&quot;1795-2592&quot;} -->
<h3 class="sectionedit12" id="pptp_options">PPTP options</h3>
<div class="level3">

<p>
PPTP options are configured using :
</p>
<div class="table sectionedit13"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>lcp-echo-failure n</code> </td><td class="col1"> Keep-alive, maximum number of echo attempts before considering the link to be dead </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>lcp-echo-interval n</code> </td><td class="col1"> Keep-alive, time between each echo attempt in seconds </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>idle n</code> </td><td class="col1"> Terminated tunnel after n seconds of inactivity, set to 0 to disable </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>refuse-eap</code> </td><td class="col1"> Refuse to authenticate using EAP, needed with some recent servers, try it if you see EAP responses in debug log </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>persist</code> </td><td class="col1"> Do not exit after a connection is terminated; instead try to reopen the connection </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>mppe required,no40,no56</code> </td><td class="col1"> Forces 128-bit encryption </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>demand</code> </td><td class="col1"> Reconnect on demand </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table2&quot;,&quot;secid&quot;:13,&quot;range&quot;:&quot;2653-3288&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;PPTP options&quot;,&quot;hid&quot;:&quot;pptp_options&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:12,&quot;range&quot;:&quot;2593-3289&quot;} -->
<h3 class="sectionedit14" id="pptp_secrets">PPTP secrets</h3>
<div class="level3">
<div class="table sectionedit15"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>[&lt;domain&gt;\\]&lt;user&gt;</code> </td><td class="col1"> Matches <code>name</code> in <code>/etc/ppp/peers/&lt;peer_name&gt;</code> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>&lt;peer_name&gt;</code> </td><td class="col1"> Matches <code>remotename</code> in <code>/etc/ppp/peers/&lt;peer_name&gt;</code> </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>&lt;password&gt;</code> </td><td class="col1"> Matches password given by the owner of the PPTP server, blanks or special characters should be enclosed in double quotes if any </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>*</code> </td><td class="col1"> Allow the tunnel use any <abbr title="Internet Protocol">IP</abbr> address, normally the PPTP server determines the address </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table3&quot;,&quot;secid&quot;:15,&quot;range&quot;:&quot;3313-3740&quot;} --><pre class="code bash"><span class="kw3">umask</span> <span class="re2">go</span>=
<span class="kw2">cat</span> <span class="sy0">&lt;&lt;</span> <span class="st0">&quot;EOF&quot;</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>ppp<span class="sy0">/</span>chap-secrets
<span class="br0">&#91;</span><span class="sy0">&lt;</span>domain<span class="sy0">&gt;</span>\\<span class="br0">&#93;</span><span class="sy0">&lt;</span>user<span class="sy0">&gt;</span> <span class="sy0">&lt;</span>peer_name<span class="sy0">&gt;</span> <span class="sy0">&lt;</span>password<span class="sy0">&gt;</span> <span class="sy0">*</span>
EOF</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;PPTP secrets&quot;,&quot;hid&quot;:&quot;pptp_secrets&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:14,&quot;range&quot;:&quot;3290-3857&quot;} -->
<h3 class="sectionedit16" id="pptp_peers">PPTP peers</h3>
<div class="level3">
<div class="table sectionedit17"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>pty &quot;pptp &lt;hostname_or_ip&gt; --nolaunchpppd&quot;</code> </td><td class="col1"> Instruct pppd to launch pptp to connect to the <abbr title="Virtual Private Network">VPN</abbr> server </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>mppe required,stateless</code> </td><td class="col1"> Require that the connection be encrypted, using stateless encryption </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>name [&lt;domain&gt;\\]&lt;user&gt;</code> </td><td class="col1"> Define the username for the <abbr title="Virtual Private Network">VPN</abbr> connection, assuming that the password is stored in <code>chap-secrets</code> </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>remotename &lt;peer_name&gt;</code> </td><td class="col1"> Specify the account and password in <code>chap-secrets</code> </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>replacedefaultroute</code> </td><td class="col1"> Redirect default gateway to the <abbr title="Virtual Private Network">VPN</abbr> </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>ipparam &lt;peer_name&gt;</code> </td><td class="col1"> A parameter for the PPP scripts to distinguish particular peer </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>file &lt;path&gt;</code> </td><td class="col1"> Include PPTP options, e.g. <code>/etc/ppp/options.pptpd</code> </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table4&quot;,&quot;secid&quot;:17,&quot;range&quot;:&quot;3879-4575&quot;} --><pre class="code bash"><span class="kw3">umask</span> <span class="re2">go</span>=
<span class="kw2">mkdir</span> <span class="re5">-p</span> <span class="sy0">/</span>etc<span class="sy0">/</span>ppp<span class="sy0">/</span>peers
<span class="kw2">cat</span> <span class="sy0">&lt;&lt;</span> <span class="st0">&quot;EOF&quot;</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>ppp<span class="sy0">/</span>peers<span class="sy0">/&lt;</span>peer_name<span class="sy0">&gt;</span>
...
EOF</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;PPTP peers&quot;,&quot;hid&quot;:&quot;pptp_peers&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:16,&quot;range&quot;:&quot;3858-4681&quot;} -->
<h3 class="sectionedit18" id="ppp_scripts">PPP scripts</h3>
<div class="level3">

<p>
PPP script parameters:
</p>
<div class="table sectionedit19"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> # </th><th class="col1"> Name </th><th class="col2"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>1</code> </td><td class="col1"> <code>IFNAME</code> </td><td class="col2"> Interface name used by pppd, e.g. <code>ppp3</code> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>2</code> </td><td class="col1"> <code>DEVICE</code> </td><td class="col2"> TTY device name </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>3</code> </td><td class="col1"> <code>SPEED</code> </td><td class="col2"> TTY device speed </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>4</code> </td><td class="col1"> <code>IPLOCAL</code> </td><td class="col2"> Local tunnel <abbr title="Internet Protocol">IP</abbr> address </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>5</code> </td><td class="col1"> <code>IPREMOTE</code> </td><td class="col2 leftalign"> Remote tunnel <abbr title="Internet Protocol">IP</abbr> address  </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>6</code> </td><td class="col1"> <em>(none)</em> </td><td class="col2"> Client <abbr title="Internet Protocol">IP</abbr> address, or <code>ipparam</code> parameter </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <em>(none)</em> </td><td class="col1"><code>PEERNAME</code> </td><td class="col2"> Client <code>username</code> parameter </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table5&quot;,&quot;secid&quot;:19,&quot;range&quot;:&quot;4728-5137&quot;} -->
<p>
An example script to invoke peer-specific code:
</p>
<pre class="code bash"><span class="kw2">cat</span> <span class="sy0">&lt;&lt;</span> <span class="st0">&quot;EOF&quot;</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>ppp<span class="sy0">/</span>ip-up
<span class="co0">#!/bin/sh</span>
<span class="kw1">case</span> <span class="co1">${PEERNAME}</span> <span class="kw1">in</span>
<span class="br0">&#40;</span>USERNAME1<span class="br0">&#41;</span> ... <span class="sy0">;;</span>
<span class="br0">&#40;</span><span class="sy0">*</span><span class="br0">&#41;</span> ... <span class="sy0">;;</span>
<span class="kw1">esac</span>
EOF
<span class="kw2">chmod</span> +x <span class="sy0">/</span>etc<span class="sy0">/</span>ppp<span class="sy0">/</span>ip-up</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;PPP scripts&quot;,&quot;hid&quot;:&quot;ppp_scripts&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:18,&quot;range&quot;:&quot;4682-5331&quot;} -->
<h2 class="sectionedit20" id="protocol_relay_relayd_pseudo_bridge">Protocol &quot;relay&quot; (Relayd Pseudo Bridge)</h2>
<div class="level2">

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> The package <a href="/packages/pkgdata/relayd" class="wikilink1" title="packages:pkgdata:relayd" data-wiki-id="packages:pkgdata:relayd">relayd</a> must be installed to use this protocol.
</p>
<div class="table sectionedit21"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>network</code> </td><td class="col1"> list of <em>logical interface names</em> </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Specifies the networks between which traffic is relayed </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>gateway</code> </td><td class="col1"> <abbr title="Internet Protocol version 4">IPv4</abbr> address </td><td class="col2"> no </td><td class="col3"> <em>(network default)</em> </td><td class="col4"> Override the gateway address sent to clients within <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> responses </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>expiry</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 30 </td><td class="col4"> Host expiry timeout in seconds </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>retry</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 5 </td><td class="col4"> Number of ARP ping retries before a host is considered dead </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>table</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 16800 </td><td class="col4"> Table ID for automatically added routes </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>forward_bcast</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> 1 </td><td class="col4"> Enables forwarding of broadcast traffic, <code>0</code> disables it </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>forward_dhcp</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> 1 </td><td class="col4"> Enables forwarding of <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> requests and responses, <code>0</code> disables it </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table6&quot;,&quot;secid&quot;:21,&quot;range&quot;:&quot;5469-6234&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;relay\&quot; (Relayd Pseudo Bridge)&quot;,&quot;hid&quot;:&quot;protocol_relay_relayd_pseudo_bridge&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:20,&quot;range&quot;:&quot;5332-6235&quot;} -->
<h2 class="sectionedit22" id="common_options_for_gre_protocols">Common options for GRE protocols</h2>
<div class="level2">

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> The package <a href="/packages/pkgdata/gre" class="wikilink1" title="packages:pkgdata:gre" data-wiki-id="packages:pkgdata:gre">gre</a> must be installed to use this protocol.
Additionally, you need <a href="/packages/pkgdata/kmod-gre" class="wikilink1" title="packages:pkgdata:kmod-gre" data-wiki-id="packages:pkgdata:kmod-gre">kmod-gre</a> and/or <a href="/packages/pkgdata/kmod-gre6" class="wikilink1" title="packages:pkgdata:kmod-gre6" data-wiki-id="packages:pkgdata:kmod-gre6">kmod-gre6</a>.
</p>

<p>
GRE support has been introduced in Barrier Breaker.
Four protocols are defined (“gre”, “gretap”, grev6“, and “grev6tap”), which will generate GRE interfaces named:
</p>
<div class="table sectionedit23"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Protocol </th><th class="col1"> GRE type </th><th class="col2"> Interface name </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> gre </td><td class="col1"> <code><abbr title="Internet Protocol version 4">IPv4</abbr> GRE</code> </td><td class="col2"> gre4-&lt;logical interface name&gt; </td>
	</tr>
	<tr class="row2">
		<td class="col0"> gretap </td><td class="col1"> <code>GRE-TAP <abbr title="Internet Protocol version 4">IPv4</abbr></code> </td><td class="col2"> gre4t-&lt;logical interface name&gt; </td>
	</tr>
	<tr class="row3">
		<td class="col0"> grev6 </td><td class="col1"> <code>GRE <abbr title="Internet Protocol version 6">IPv6</abbr></code> </td><td class="col2"> gre6-&lt;logical interface name&gt; </td>
	</tr>
	<tr class="row4">
		<td class="col0"> grev6tap </td><td class="col1"> <code>GRE-TAP <abbr title="Internet Protocol version 6">IPv6</abbr></code> </td><td class="col2"> gre6t-&lt;logical interface name&gt; </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table7&quot;,&quot;secid&quot;:23,&quot;range&quot;:&quot;6620-6900&quot;} -->
<p>
All four protocols accept the following common options:
</p>
<div class="table sectionedit24"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>mtu</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 1280 </td><td class="col4"> <abbr title="Maximum Transmission Unit">MTU</abbr> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>ttl</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 64 </td><td class="col4"> <abbr title="Time To Live">TTL</abbr> of the encapsulating packets </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>tunlink</code> </td><td class="col1"> logical interface name </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Bind the tunnel to this interface (<code>dev</code> option of “ip tunnel”) </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>zone</code> </td><td class="col1"> zone name </td><td class="col2"> no </td><td class="col3"> <code>wan</code> </td><td class="col4"> Firewall zone to which the interface will be added </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>tos</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Type of Service (<abbr title="Internet Protocol version 4">IPv4</abbr>), Traffic Class (<abbr title="Internet Protocol version 6">IPv6</abbr>): either “inherit” (the outer header inherits the value of the inner header) or an hexadecimal value (Chaos Calmer and later only) </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>ikey</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 0 </td><td class="col4"> key for incoming packets </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>okey</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 0 </td><td class="col4"> key for outgoing packets </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <code>icsum</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> 0 </td><td class="col4"> require incoming checksum </td>
	</tr>
	<tr class="row9">
		<td class="col0"> <code>ocsum</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> 0 </td><td class="col4"> compute outgoing checksum </td>
	</tr>
	<tr class="row10">
		<td class="col0"> <code>iseqno</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> 0 </td><td class="col4"> require incoming packets serialization </td>
	</tr>
	<tr class="row11">
		<td class="col0"> <code>oseqno</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> 0 </td><td class="col4"> perform outgoing packets serialization </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table8&quot;,&quot;secid&quot;:24,&quot;range&quot;:&quot;6959-7942&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Common options for GRE protocols&quot;,&quot;hid&quot;:&quot;common_options_for_gre_protocols&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:22,&quot;range&quot;:&quot;6236-7943&quot;} -->
<h2 class="sectionedit25" id="protocol_gre_gre_tunnel_over_ipv4">Protocol &quot;gre&quot; (GRE tunnel over IPv4)</h2>
<div class="level2">

<p>
The following options are supported, in addition to all common options above:
</p>
<div class="table sectionedit26"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>ipaddr</code> </td><td class="col1"> <abbr title="Internet Protocol version 4">IPv4</abbr> address </td><td class="col2"> no </td><td class="col3"> <abbr title="Wide Area Network">WAN</abbr> <abbr title="Internet Protocol">IP</abbr> </td><td class="col4"> Local endpoint </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>peeraddr</code> </td><td class="col1"> <abbr title="Internet Protocol version 4">IPv4</abbr> address </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Remote endpoint </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>df</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> 1 </td><td class="col4"> Set “Don&#039;t Fragment” flag on encapsulating packets </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table9&quot;,&quot;secid&quot;:26,&quot;range&quot;:&quot;8073-8336&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;gre\&quot; (GRE tunnel over IPv4)&quot;,&quot;hid&quot;:&quot;protocol_gre_gre_tunnel_over_ipv4&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:25,&quot;range&quot;:&quot;7944-8337&quot;} -->
<h2 class="sectionedit27" id="protocol_gretap_ethernet_gre_tunnel_over_ipv4">Protocol &quot;gretap&quot; (Ethernet GRE tunnel over IPv4)</h2>
<div class="level2">

<p>
The following options are supported, in addition to all common options above:
</p>
<div class="table sectionedit28"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>ipaddr</code> </td><td class="col1"> <abbr title="Internet Protocol version 4">IPv4</abbr> address </td><td class="col2"> no </td><td class="col3"> <abbr title="Wide Area Network">WAN</abbr> <abbr title="Internet Protocol">IP</abbr> </td><td class="col4"> Local endpoint </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>peeraddr</code> </td><td class="col1"> <abbr title="Internet Protocol version 4">IPv4</abbr> address </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Remote endpoint </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>df</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> 1 </td><td class="col4"> Set “Don&#039;t Fragment” flag on encapsulating packets </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>network</code> </td><td class="col1"> logical interface name </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Logical network to which the tunnel will be added (bridged) </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table10&quot;,&quot;secid&quot;:28,&quot;range&quot;:&quot;8479-8863&quot;} -->
<p>
<code>ipaddr</code> <em>may </em>be required in some setups.
Repeated log entries about “setting up now” and “now down” may be related to this.
</p>

<p>
Additionally, the <code>resolveip</code> package may also be needed.
<code>./gre.sh: eval: line 1: resolveip: not found</code> in the logs are an indication of the need.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;gretap\&quot; (Ethernet GRE tunnel over IPv4)&quot;,&quot;hid&quot;:&quot;protocol_gretap_ethernet_gre_tunnel_over_ipv4&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:27,&quot;range&quot;:&quot;8338-9148&quot;} -->
<h2 class="sectionedit29" id="protocol_grev6_gre_tunnel_over_ipv6">Protocol &quot;grev6&quot; (GRE tunnel over IPv6)</h2>
<div class="level2">

<p>
The following options are supported, in addition to all common options above:
</p>
<div class="table sectionedit30"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>ip6addr</code> </td><td class="col1"> <abbr title="Internet Protocol version 6">IPv6</abbr> address </td><td class="col2"> no </td><td class="col3"> <abbr title="Wide Area Network">WAN</abbr> <abbr title="Internet Protocol">IP</abbr> </td><td class="col4"> Local endpoint </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>peer6addr</code> </td><td class="col1"> <abbr title="Internet Protocol version 6">IPv6</abbr> address </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Remote endpoint </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>weakif</code> </td><td class="col1"> logical interface name </td><td class="col2"> no </td><td class="col3"> <code>lan</code> </td><td class="col4"> Logical network from which to select the local endpoint if ip6addr parameter is empty and no <abbr title="Wide Area Network">WAN</abbr> <abbr title="Internet Protocol">IP</abbr> is available </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table11&quot;,&quot;secid&quot;:30,&quot;range&quot;:&quot;9280-9632&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;grev6\&quot; (GRE tunnel over IPv6)&quot;,&quot;hid&quot;:&quot;protocol_grev6_gre_tunnel_over_ipv6&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:29,&quot;range&quot;:&quot;9149-9633&quot;} -->
<h2 class="sectionedit31" id="protocol_grev6tap_ethernet_gre_tunnel_over_ipv6">Protocol &quot;grev6tap&quot; (Ethernet GRE tunnel over IPv6)</h2>
<div class="level2">

<p>
The following options are supported, in addition to all common options above:
</p>
<div class="table sectionedit32"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>ip6addr</code> </td><td class="col1"> <abbr title="Internet Protocol version 6">IPv6</abbr> address </td><td class="col2"> no </td><td class="col3"> <abbr title="Wide Area Network">WAN</abbr> <abbr title="Internet Protocol">IP</abbr> </td><td class="col4"> Local endpoint </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>peer6addr</code> </td><td class="col1"> <abbr title="Internet Protocol version 6">IPv6</abbr> address </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Remote endpoint </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>weakif</code> </td><td class="col1"> logical interface name </td><td class="col2"> no </td><td class="col3"> <code>lan</code> </td><td class="col4"> Logical network from which to select the local endpoint if ip6addr is empty and no <abbr title="Wide Area Network">WAN</abbr> <abbr title="Internet Protocol">IP</abbr> is available </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>network</code> </td><td class="col1"> logical interface name </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Logical network to which the tunnel will be added (bridged) </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table12&quot;,&quot;secid&quot;:32,&quot;range&quot;:&quot;9777-10240&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;grev6tap\&quot; (Ethernet GRE tunnel over IPv6)&quot;,&quot;hid&quot;:&quot;protocol_grev6tap_ethernet_gre_tunnel_over_ipv6&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:31,&quot;range&quot;:&quot;9634-10241&quot;} -->
<h2 class="sectionedit33" id="protocol_ieee8021xclient_ieee_8021x_client">Protocol &quot;ieee8021xclient&quot; (IEEE 802.1X client)</h2>
<div class="level2">

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> The package <a href="/packages/pkgdata/ieee8021xclient" class="wikilink1" title="packages:pkgdata:ieee8021xclient" data-wiki-id="packages:pkgdata:ieee8021xclient">ieee8021xclient</a> must be installed to use this protocol.
</p>
<div class="table sectionedit34"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>identity</code> </td><td class="col1"> string </td><td class="col2"> yes(?) </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Username for IEEE 802.1X authentication </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>password</code> </td><td class="col1"> string </td><td class="col2"> yes(?) </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Password for IEEE 802.1X authentication </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>ca_cert</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Specifies the path the CA certificate used for authentication </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>client_cert</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Specifies the client certificate used for the authentication </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>private_key</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Specifies the path to the private key file used for authentication </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>private_key_passwd</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Password to unlock the private key file, only works in conjunction with <em>private_key</em> </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table13&quot;,&quot;secid&quot;:34,&quot;range&quot;:&quot;10396-11103&quot;} -->
<p>
See alse <a href="/docs/guide-user/network/wifi/basic#wpa_enterprise_client" class="wikilink1" title="docs:guide-user:network:wifi:basic" data-wiki-id="docs:guide-user:network:wifi:basic">wpa_enterprise_client</a>.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;ieee8021xclient\&quot; (IEEE 802.1X client)&quot;,&quot;hid&quot;:&quot;protocol_ieee8021xclient_ieee_8021x_client&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:33,&quot;range&quot;:&quot;10242-11176&quot;} -->
<h2 class="sectionedit35" id="protocol_vti_vti_tunnel_over_ipv4">Protocol &quot;vti&quot; (VTI tunnel over IPv4)</h2>
<div class="level2">

<p>
VTI Tunnels are IPsec policies with a fwmark set.
The traffic is redirected to the matching VTI interface.
</p>
<div class="table sectionedit36"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>ipaddr</code> </td><td class="col1"> <abbr title="Internet Protocol version 4">IPv4</abbr> address </td><td class="col2"> no </td><td class="col3"> <abbr title="Wide Area Network">WAN</abbr> <abbr title="Internet Protocol">IP</abbr> </td><td class="col4"> Local endpoint </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>peeraddr</code> </td><td class="col1"> <abbr title="Internet Protocol version 4">IPv4</abbr> address </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Remote endpoint </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>mtu</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 1280 </td><td class="col4"> <abbr title="Maximum Transmission Unit">MTU</abbr> </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>tunlink</code> </td><td class="col1"> logical interface name </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Bind the tunnel to this interface (<code>dev</code> option of “ip tunnel”) </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>zone</code> </td><td class="col1"> zone name </td><td class="col2"> no </td><td class="col3"> <code>wan</code> </td><td class="col4"> Firewall zone to which the interface will be added </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>ikey</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 0 </td><td class="col4"> key/fwmark for incoming packets </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>okey</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 0 </td><td class="col4"> key/fwmark for outgoing packets </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table14&quot;,&quot;secid&quot;:36,&quot;range&quot;:&quot;11335-11907&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;vti\&quot; (VTI tunnel over IPv4)&quot;,&quot;hid&quot;:&quot;protocol_vti_vti_tunnel_over_ipv4&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:35,&quot;range&quot;:&quot;11177-11908&quot;} -->
<h2 class="sectionedit37" id="protocol_vti6_vti_tunnel_over_ipv6">Protocol &quot;vti6&quot; (VTI tunnel over IPv6)</h2>
<div class="level2">

<p>
The following options are supported, in addition to all common options above:
</p>
<div class="table sectionedit38"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>ip6addr</code> </td><td class="col1"> <abbr title="Internet Protocol version 6">IPv6</abbr> address </td><td class="col2"> no </td><td class="col3"> <abbr title="Wide Area Network">WAN</abbr> <abbr title="Internet Protocol">IP</abbr> </td><td class="col4"> Local endpoint </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>peer6addr</code> </td><td class="col1"> <abbr title="Internet Protocol version 6">IPv6</abbr> address </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Remote endpoint </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>mtu</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 1280 </td><td class="col4"> <abbr title="Maximum Transmission Unit">MTU</abbr> </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>tunlink</code> </td><td class="col1"> logical interface name </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Bind the tunnel to this interface (<code>dev</code> option of “ip tunnel”) </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>zone</code> </td><td class="col1"> zone name </td><td class="col2"> no </td><td class="col3"> <code>wan</code> </td><td class="col4"> Firewall zone to which the interface will be added </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>ikey</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 0 </td><td class="col4"> key/fwmark for incoming packets </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>okey</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 0 </td><td class="col4"> key/fwmark for outgoing packets </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table15&quot;,&quot;secid&quot;:38,&quot;range&quot;:&quot;12039-12613&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;vti6\&quot; (VTI tunnel over IPv6)&quot;,&quot;hid&quot;:&quot;protocol_vti6_vti_tunnel_over_ipv6&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:37,&quot;range&quot;:&quot;11909-12614&quot;} -->
<h2 class="sectionedit39" id="protocol_vxlan_vxlan_layer_2_virtualization_over_layer_3_network">Protocol &quot;vxlan&quot; (VXLAN layer 2 virtualization over layer 3 network)</h2>
<div class="level2">

<p>
A working VXLAN configuration consists of two interface definitions.
One is the actual VXLAN interface, the other one is an alias interface.
The following options can be used in the VXLAN interface definition (with <code>option proto &#039;vxlan</code>&#039;):
</p>
<div class="table sectionedit40"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign"> Name            </th><th class="col1 leftalign"> Type                    </th><th class="col2 leftalign"> Required  </th><th class="col3 leftalign"> Default                      </th><th class="col4 leftalign"> Description                                                                                                                                                                       </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> <code>peeraddr</code>    </td><td class="col1 leftalign"> string                  </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> <em>(none)</em>                   </td><td class="col4 leftalign"> <abbr title="Internet Protocol">IP</abbr> address of the peer to connect to or a multicast address for a group of peers. Use <code>vxlan_peer</code> as described below for multiple peers                                        </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <code>port</code>        </td><td class="col1 leftalign"> integer                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> 8472 or 4789                 </td><td class="col4 leftalign"> Port for VXLAN connection, <abbr title="Internet Assigned Numbers Authority">IANA</abbr>-assigned default is &#039;4789&#039;, several Linux distros use &#039;8472&#039; for historical reasons                                                               </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <code>srcportmin</code>  </td><td class="col1 leftalign"> integer                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> <em>(none)</em>                   </td><td class="col4 leftalign"> range of port numbers to use as  <abbr title="User Datagram Protocol">UDP</abbr> source ports to communicate to the remote VXLAN tunnel endpoint                                                                              </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <code>srcportmax</code>  </td><td class="col1 leftalign"> integer                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> <em>(none)</em>                   </td><td class="col4 leftalign"> range of port numbers to use as  <abbr title="User Datagram Protocol">UDP</abbr> source ports to communicate to the remote VXLAN tunnel endpoint                                                                              </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <code>vid</code>         </td><td class="col1 leftalign"> integer                 </td><td class="col2 leftalign"> yes       </td><td class="col3 leftalign"> <em>(none)</em>                   </td><td class="col4 leftalign"> VXLAN identifier used to identify a VXLAN network and properly convey frames                                                                                                      </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <code>ageing</code>      </td><td class="col1 leftalign"> integer                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> <em>(none)</em>                   </td><td class="col4 leftalign"> lifetime in seconds of FDB entries learned by the kernel                                                                                                                          </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <code>maxaddress</code>  </td><td class="col1 leftalign"> integer                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> <em>(none)</em>                   </td><td class="col4 leftalign"> maximum number of FDB entries                                                                                                                                                     </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> <code>tunlink</code>     </td><td class="col1 leftalign"> logical interface name  </td><td class="col2 leftalign"> yes       </td><td class="col3 leftalign"> <em>(none)</em>                   </td><td class="col4 leftalign"> Bind the VXLAN tunnel to this interface                                                                                                                                           </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> <code>macaddr</code>     </td><td class="col1 leftalign"> MAC address             </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> <em>(dynamically generated)</em>  </td><td class="col4 leftalign"> Specify the MAC address of this interface manually                                                                                                                                </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> <code>mtu</code>         </td><td class="col1 leftalign"> integer                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> 1280                         </td><td class="col4 leftalign"> Manually specify the Maximum Transmission Unit of the VXLAN interface (VXLAN extends the length of the network frame, make sure it still fits the <abbr title="Maximum Transmission Unit">MTU</abbr> of the underlying network)  </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign"> <code>ttl</code>         </td><td class="col1 leftalign"> integer                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> 64                           </td><td class="col4 leftalign"> <abbr title="Time To Live">TTL</abbr> of the encapsulation packets                                                                                                                                                  </td>
	</tr>
	<tr class="row12">
		<td class="col0 leftalign"> <code>tos</code>         </td><td class="col1 leftalign"> integer                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> ?                            </td><td class="col4 leftalign"> Type of Service (<abbr title="Internet Protocol version 4">IPv4</abbr>) or Traffic Class (<abbr title="Internet Protocol version 6">IPv6</abbr>)                                                                                                                                    </td>
	</tr>
	<tr class="row13">
		<td class="col0 leftalign"> <code>rxcsum</code>      </td><td class="col1 leftalign"> boolean                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> 1                            </td><td class="col4 leftalign"> Use checksum validation in RX (receiving) direction (0 = inactive, 1 = active)                                                                                                    </td>
	</tr>
	<tr class="row14">
		<td class="col0 leftalign"> <code>txcsum</code>      </td><td class="col1 leftalign"> boolean                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> 1                            </td><td class="col4 leftalign"> Use checksum validation in TX (transmission) direction (0 = inactive, 1 = active)                                                                                                 </td>
	</tr>
	<tr class="row15">
		<td class="col0 leftalign"> <code>force_link</code>  </td><td class="col1 leftalign"> boolean                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> 0                            </td><td class="col4 leftalign"> Set interface properties regardless of the link carrier (If set, carrier sense events do not invoke hotplug handlers) (0 = inactive, 1 = active)                                  </td>
	</tr>
	<tr class="row16">
		<td class="col0 leftalign"> <code>delegate</code>    </td><td class="col1 leftalign"> boolean                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> 1                            </td><td class="col4 leftalign"> Use built-in <abbr title="Internet Protocol version 6">IPv6</abbr> management (0 = inactive, 1 = active)                                                                                                                           </td>
	</tr>
	<tr class="row17">
		<td class="col0 leftalign"> <code>learning</code>    </td><td class="col1 leftalign"> boolean                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> <em>(none)</em>                   </td><td class="col4 leftalign"> enable/disable entering unknown source link layer addresses and <abbr title="Internet Protocol">IP</abbr> addresses into the VXLAN device FDB.                                                                           </td>
	</tr>
	<tr class="row18">
		<td class="col0 leftalign"> <code>rsc</code>         </td><td class="col1 leftalign"> boolean                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> 0                            </td><td class="col4 leftalign"> Route short-circuit: If destination MAC refers to router, replace it with destination MAC address                                                                                 </td>
	</tr>
	<tr class="row19">
		<td class="col0 leftalign"> <code>proxy</code>       </td><td class="col1 leftalign"> boolean                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> <em>(none)</em>                   </td><td class="col4 leftalign"> ARP proxy: reply on Neighbor request                                                                                                                                              </td>
	</tr>
	<tr class="row20">
		<td class="col0 leftalign"> <code>l2miss</code>      </td><td class="col1 leftalign"> boolean                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> <em>(none)</em>                   </td><td class="col4 leftalign"> Layer 2 miss: Emits netlink LLADDR miss notifications                                                                                                                             </td>
	</tr>
	<tr class="row21">
		<td class="col0 leftalign"> <code>l3miss</code>      </td><td class="col1 leftalign"> boolean                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> <em>(none)</em>                   </td><td class="col4 leftalign"> Layer 3 miss: Emits netlink <abbr title="Internet Protocol">IP</abbr> ADDR miss notifications                                                                                                                            </td>
	</tr>
	<tr class="row22">
		<td class="col0 leftalign"> <code>gbp</code>         </td><td class="col1 leftalign"> boolean                 </td><td class="col2 leftalign"> no        </td><td class="col3 leftalign"> <em>(none)</em>                   </td><td class="col4 leftalign"> Group Based Policy                                                                                                                                                                </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table16&quot;,&quot;secid&quot;:40,&quot;range&quot;:&quot;12939-19126&quot;} -->
<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> <code>ipaddr</code> can be specified, but it does not have the effect of setting the <abbr title="Internet Protocol">IP</abbr> address of the VXLAN interface.
For correct configuration see the example <code>VXLAN example configuration</code> at the end of the page.
</p>

<p>
Multiple peers can be configured with <code>config vxlan_peer</code> entries:
</p>
<pre class="code bash">config vxlan_peer
        option vxlan vxlan0
        option dst <span class="st_h">'10.0.0.2'</span>
&nbsp;
config vxlan_peer
        option vxlan vxlan0
        option dst <span class="st_h">'10.0.0.3'</span></pre>

<p>
All available options for <code>config vxlan_peer</code>:
</p>
<div class="table sectionedit41"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>vxlan</code> </td><td class="col1"> string </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> which vxlan interface to add peer to </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>lladdr</code> </td><td class="col1"> MAC address </td><td class="col2"> no </td><td class="col3"> <code>00:00:00:00:00:00</code> </td><td class="col4"> L2 (MAC) address of peer. Uses source-address learning when <code>00:00:00:00:00:00</code> is specified </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>dst</code> </td><td class="col1"> <abbr title="Internet Protocol">IP</abbr> address </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> the <abbr title="Internet Protocol">IP</abbr> address of the remote VXLAN tunnel endpoint where the MAC address (lladdr) resides or a multicast address for a group of peers. For multicast, an outgoing interface needs to be specified (<code>via</code>) </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>port</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> the <abbr title="User Datagram Protocol">UDP</abbr> destination port number to use to connect to the remote VXLAN tunnel endpoint </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>via</code> </td><td class="col1"> logical interface name </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> name of the outgoing interface to reach the remote VXLAN tunnel endpoint </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>vni</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> the VXLAN VNI Network Identifier (or VXLAN Segment ID) to use to connect to the remote VXLAN tunnel endpoint </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>src_vni</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> the source VNI Network Identifier (or VXLAN Segment ID) this entry belongs to. Used only when the vxlan device is in external or collect metadata mode </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table17&quot;,&quot;secid&quot;:41,&quot;range&quot;:&quot;19644-20787&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;vxlan\&quot; (VXLAN layer 2 virtualization over layer 3 network)&quot;,&quot;hid&quot;:&quot;protocol_vxlan_vxlan_layer_2_virtualization_over_layer_3_network&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:39,&quot;range&quot;:&quot;12615-20788&quot;} -->
<h2 class="sectionedit42" id="protocol_xfrm_xfrm_tunnel_interface">Protocol &quot;xfrm&quot; (XFRM tunnel interface)</h2>
<div class="level2">

<p>
XFRM Tunnel interfaces are bound to if_id set in the sa policy.
</p>
<div class="table sectionedit43"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>ifid</code> </td><td class="col1"> integer </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> if_id set in ipsec sa policy </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>tunlink</code> </td><td class="col1"> logical interface name </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Bind the tunnel to this interface (<code>dev</code> option of “ip tunnel”) </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>mtu</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 1280 </td><td class="col4"> <abbr title="Maximum Transmission Unit">MTU</abbr> </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>zone</code> </td><td class="col1"> zone name </td><td class="col2"> no </td><td class="col3"> <code>wan</code> </td><td class="col4"> Firewall zone to which the interface will be added </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table18&quot;,&quot;secid&quot;:43,&quot;range&quot;:&quot;20906-21290&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;xfrm\&quot; (XFRM tunnel interface)&quot;,&quot;hid&quot;:&quot;protocol_xfrm_xfrm_tunnel_interface&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:42,&quot;range&quot;:&quot;20789-21291&quot;} -->
<h2 class="sectionedit44" id="protocol_openconnect_openconnect_vpn">Protocol &quot;openconnect&quot; (OpenConnect VPN)</h2>
<div class="level2">

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> The package <a href="/packages/pkgdata/openconnect" class="wikilink1" title="packages:pkgdata:openconnect" data-wiki-id="packages:pkgdata:openconnect">openconnect</a> must be installed to use this protocol.
</p>
<div class="table sectionedit45"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign"> Name              </th><th class="col1 leftalign"> OpenConnect CLI option                            </th><th class="col2 leftalign"> Description                                                                        </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> <code>server</code>        </td><td class="col1 leftalign"> <code>--server</code>                                  </td><td class="col2 leftalign"> Server address, <abbr title="Fully Qualified Domain Name">FQDN</abbr> or <abbr title="Internet Protocol">IP</abbr>; required until <code>uri</code> is in use                   </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <code>port</code>          </td><td class="col1 leftalign"> (part of server)                                  </td><td class="col2 leftalign"> Server port number. Default is 443                                                 </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <code>uri</code>           </td><td class="col1 leftalign"> <code>--server</code>                                  </td><td class="col2 leftalign"> Complete server <abbr title="Uniform Resource Identifier">URI</abbr>, like <code>https://vpn.example.com:4443/?mysecretkey</code>        </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <code>juniper</code>       </td><td class="col1 leftalign"> <code>--juniper</code>                                 </td><td class="col2 leftalign"> Connect to a Juniper server. DEPRECATED, 8.0 uses <code>--protocol=nc</code> instead.   </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <code>serverhash</code>    </td><td class="col1 leftalign"> <code>--servercert=</code>; <code>--no-system-trust</code>  </td><td class="col2 leftalign"> Force trust of server&#039;s certificate based only on hash matching                    </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <code>authgroup</code>     </td><td class="col1 leftalign"> <code>--authgroup=</code>                              </td><td class="col2 leftalign"> Group membership to request from the server                                        </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <code>username</code>      </td><td class="col1 leftalign"> <code>--user=</code>                                   </td><td class="col2 leftalign"> Login username for user/pass authentication                                        </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> <code>password</code>      </td><td class="col1 leftalign"> (passed via stdin)                                </td><td class="col2 leftalign"> Password for user/pass authentication                                              </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> <code>password2</code>     </td><td class="col1 leftalign"> (passed via stdin)                                </td><td class="col2 leftalign"> Second password for 2 factor                                                       </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> <code>token_mode</code>    </td><td class="col1 leftalign"> <code>--token-mode=</code>                             </td><td class="col2 leftalign"> <code>rsa</code>, <code>totp</code> or <code>hotp</code> to internally compute a two-factor token as passwd2  </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign"> <code>token_secret</code>  </td><td class="col1 leftalign"> <code>--token-secret=</code>                           </td><td class="col2 leftalign"> Crypto secret required by token_mode                                               </td>
	</tr>
	<tr class="row12">
		<td class="col0 leftalign"> <code>token_script</code>  </td><td class="col1 leftalign"> <code>--token-script=</code>                           </td><td class="col2 leftalign"> Local shell script that will dynamically produce passwd2                           </td>
	</tr>
	<tr class="row13">
		<td class="col0 leftalign"> <code>os</code>            </td><td class="col1 leftalign"> <code>--os=</code>                                     </td><td class="col2 leftalign"> Operating system to report to the server. Default is <code>Linux</code>                     </td>
	</tr>
	<tr class="row14">
		<td class="col0 leftalign"> <code>interface</code>     </td><td class="col1 leftalign"> N/A                                               </td><td class="col2 leftalign"> Outgoing local interface (used to create a netifd host dependency)                 </td>
	</tr>
	<tr class="row15">
		<td class="col0 leftalign"> <code>csd_wrapper</code>   </td><td class="col1 leftalign"> <code>--csd-wrapper=</code>                            </td><td class="col2 leftalign"> Run this instead of any binary or script that the server pushes us to run          </td>
	</tr>
	<tr class="row16">
		<td class="col0 leftalign"> <code>defaultroute</code>  </td><td class="col1 leftalign"> N/A                                               </td><td class="col2 leftalign"> Create default route over the tunnel, boolean, default is 1                        </td>
	</tr>
	<tr class="row17">
		<td class="col0 leftalign"> <code>peerdns</code>       </td><td class="col1 leftalign"> N/A                                               </td><td class="col2 leftalign"> Use provided <abbr title="Domain Name System">DNS</abbr> servers, boolean, default is 1                                    </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table19&quot;,&quot;secid&quot;:45,&quot;range&quot;:&quot;21435-24296&quot;} -->
<p>
Most of these options are passed directly to the OpenConnect executive, so see <a href="http://man.cx/openconnect%288%29" class="interwiki iw_man" title="http://man.cx/openconnect%288%29">openconnect</a> for details.
</p>

<p>
Certificates and keys files must be in the <a href="https://en.wikipedia.org/wiki/Privacy-Enhanced_Mail" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Privacy-Enhanced_Mail">PEM</a> format and named as shown below where <code>&lt;ifname&gt;</code> is the name of the logical interface.
</p>
<div class="table sectionedit46"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> OpenConnect CLI option </th><th class="col2"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>/etc/openconnect/ca-vpn-&lt;ifname&gt;.pem</code> </td><td class="col1"> <code>--cafile=</code> </td><td class="col2"> CA certificate used to verify the server&#039;s certificate. </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>/etc/openconnect/user-cert-vpn-&lt;ifname&gt;.pem</code> </td><td class="col1"> <code>--certificate=</code> </td><td class="col2"> Client certificate, signed by a CA that the server knows. </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>/etc/openconnect/user-key-vpn-&lt;ifname&gt;.pem</code> </td><td class="col1"> <code>--sslkey=</code> </td><td class="col2"> Private key of the client certificate, Must not be encrypted. </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table20&quot;,&quot;secid&quot;:46,&quot;range&quot;:&quot;24592-25034&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;openconnect\&quot; (OpenConnect VPN)&quot;,&quot;hid&quot;:&quot;protocol_openconnect_openconnect_vpn&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:44,&quot;range&quot;:&quot;21292-25035&quot;} -->
<h2 class="sectionedit47" id="protocol_pppossh_point-to-point_over_ssh">Protocol &quot;pppossh&quot; (Point-to-Point over SSH)</h2>
<div class="level2">

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> The package <a href="/packages/pkgdata/pppossh" class="wikilink1" title="packages:pkgdata:pppossh" data-wiki-id="packages:pkgdata:pppossh">pppossh</a> must be installed to use this protocol.
</p>
<div class="table sectionedit48"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <em>server</em> </td><td class="col1"> string </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> <abbr title="Secure Shell">SSH</abbr> server name </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <em>port</em> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> 22 </td><td class="col4"> <abbr title="Secure Shell">SSH</abbr> server port </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <em>sshuser</em> </td><td class="col1"> string </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> <abbr title="Secure Shell">SSH</abbr> login username </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <em>identity</em> </td><td class="col1"> list </td><td class="col2"> no </td><td class="col3"> <code>~/.ssh/id_{rsa,dsa}</code> </td><td class="col4"> list of client private key files. The defaults will be used if no identity file was specified and at least one of them must be valid for the public key authentication to proceed. </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <em>ipaddr</em> </td><td class="col1"> string </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> local ip address to be assigned </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <em>peeraddr</em> </td><td class="col1"> string </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> peer ip address to be assigned </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <em>ssh_options</em> </td><td class="col1"> list </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> peer ip address to be assigned </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <em>use_hostdep</em> </td><td class="col1"> bool </td><td class="col2"> no </td><td class="col3"> 1 </td><td class="col4"> set it to 0 to disable the use of proto_add_host_dependency. This is mainly for the case that the appropriate route to server is not registered to netifd and thus causing a incorrect route being setup </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table21&quot;,&quot;secid&quot;:48,&quot;range&quot;:&quot;25179-26115&quot;} -->
<p>
For configuration see current <a href="https://github.com/openwrt/packages/blob/master/net/pppossh/README.md" class="urlextern" title="https://github.com/openwrt/packages/blob/master/net/pppossh/README.md" rel="ugc nofollow">README</a>.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;pppossh\&quot; (Point-to-Point over SSH)&quot;,&quot;hid&quot;:&quot;protocol_pppossh_point-to-point_over_ssh&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:47,&quot;range&quot;:&quot;25036-26229&quot;} -->
<h2 class="sectionedit49" id="protocol_vpnc_vpnc_client">Protocol &quot;vpnc&quot; (VPNC client)</h2>
<div class="level2">

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> The package <a href="/packages/pkgdata/vpnc" class="wikilink1" title="packages:pkgdata:vpnc" data-wiki-id="packages:pkgdata:vpnc">vpnc</a> must be installed to use this protocol.
</p>

<p>
For configuration see current <a href="https://github.com/openwrt/packages/blob/master/net/vpnc/README" class="urlextern" title="https://github.com/openwrt/packages/blob/master/net/vpnc/README" rel="ugc nofollow">README</a>.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;vpnc\&quot; (VPNC client)&quot;,&quot;hid&quot;:&quot;protocol_vpnc_vpnc_client&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:49,&quot;range&quot;:&quot;26230-26461&quot;} -->
<h2 class="sectionedit50" id="protocol_wireguard_wireguard_vpn">Protocol &quot;wireguard&quot; (WireGuard VPN)</h2>
<div class="level2">

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> The package <a href="/packages/pkgdata/wireguard-tools" class="wikilink1" title="packages:pkgdata:wireguard-tools" data-wiki-id="packages:pkgdata:wireguard-tools">wireguard-tools</a> must be installed to use this protocol.
</p>

<p>
Each WireGuard interface is configured in two parts:
</p>
<ul>
<li class="level1"><div class="li"> the configuration relative to the interface itself (private key, <abbr title="Maximum Transmission Unit">MTU</abbr>, <abbr title="User Datagram Protocol">UDP</abbr> port to bind to, etc.)</div>
</li>
<li class="level1"><div class="li"> configuration relative to each peer (public key, <abbr title="Internet Protocol">IP</abbr> address, etc.)</div>
</li>
</ul>

<p>
Interface configuration (using <code>proto wireguard</code>):
</p>
<div class="table sectionedit51"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>private_key</code> </td><td class="col1"> string </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> WireGuard private key, generated with <code>wg genkey</code> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>listen_port</code> </td><td class="col1"> int </td><td class="col2"> no </td><td class="col3"> <em>wireguard-specific</em> </td><td class="col4"> <abbr title="User Datagram Protocol">UDP</abbr> port used for outgoing and incoming packets </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>addresses</code> </td><td class="col1"> list of IPs </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> <abbr title="Internet Protocol version 4">IPv4</abbr> or <abbr title="Internet Protocol version 6">IPv6</abbr> addresses to assign to this interface </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>mtu</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> <em>wireguard-specific</em> </td><td class="col4"> Interface <abbr title="Maximum Transmission Unit">MTU</abbr> </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>fwmark</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>derived from listen_port</em> </td><td class="col4"> Firewall mark to apply to tunnel endpoint packets </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>ip6prefix</code> </td><td class="col1"> list of prefixes </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> <abbr title="Internet Protocol version 6">IPv6</abbr> prefixes to delegate to other interfaces </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>nohostroute</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> 0 </td><td class="col4"> Do not add routes to ensure the tunnel endpoints are routed via non-tunnel device </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <code>tunlink</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Bind the tunnel to the specified interface, OpenWrt 21.02+ </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table22&quot;,&quot;secid&quot;:51,&quot;range&quot;:&quot;26885-27756&quot;} -->
<p>
The name of the network interface will be the name of the configuration section.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;wireguard\&quot; (WireGuard VPN)&quot;,&quot;hid&quot;:&quot;protocol_wireguard_wireguard_vpn&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:50,&quot;range&quot;:&quot;26462-27839&quot;} -->
<h3 class="sectionedit52" id="wireguard_peers">WireGuard peers</h3>
<div class="level3">

<p>
Peer configuration, for each peer:
</p>
<div class="table sectionedit53"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>public_key</code> </td><td class="col1"> string </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Public key of the peer </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>preshared_key</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Optional shared secret, to provide an additional layer of symmetric-key cryptography for post-quantum resistance </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>allowed_ips</code> </td><td class="col1"> list of prefixes </td><td class="col2"> yes </td><td class="col3"> <em>(none)</em> </td><td class="col4"> <abbr title="Internet Protocol">IP</abbr> addresses and prefixes that this peer is allowed to use inside the tunnel, also used for WireGuard&#039;s internal routing table. Works for both <abbr title="Internet Protocol version 4">IPv4</abbr> and <abbr title="Internet Protocol version 6">IPv6</abbr> </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>route_allowed_ips</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> 0 </td><td class="col4"> Automatically create a route for each Allowed IPs for this peer </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>endpoint_host</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> <abbr title="Internet Protocol">IP</abbr> address or hostname of the peer. If not specified, WireGuard will wait for connections from the peer </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>endpoint_port</code> </td><td class="col1"> int </td><td class="col2"> no </td><td class="col3"> 51820 </td><td class="col4"> <abbr title="User Datagram Protocol">UDP</abbr> port of the peer </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>persistent_keepalive</code> </td><td class="col1"> int </td><td class="col2"> no </td><td class="col3"> 0 </td><td class="col4"> Number of second between keepalive messages, 0 means disabled </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table23&quot;,&quot;secid&quot;:53,&quot;range&quot;:&quot;27902-28843&quot;} -->
<p>
The name of a peer section must be <code>wireguard_&lt;ifname&gt;</code> where <code>&lt;ifname&gt;</code> is the name of the logical interface.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;WireGuard peers&quot;,&quot;hid&quot;:&quot;wireguard_peers&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:52,&quot;range&quot;:&quot;27840-28960&quot;} -->
<h2 class="sectionedit54" id="examples">Examples</h2>
<div class="level2">

<p>
Below are a few examples for special, non-standard interface configurations.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Examples&quot;,&quot;hid&quot;:&quot;examples&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:54,&quot;range&quot;:&quot;28961-29059&quot;} -->
<h3 class="sectionedit55" id="vpn_interfaces">VPN interfaces</h3>
<div class="level3">

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> Avoid OpenVPN tunnel interface declaration to prevent the <a href="https://forum.openwrt.org/t/openvpn-client-tun-adapter-loses-its-ip-address-on-network-restart/13825" class="urlextern" title="https://forum.openwrt.org/t/openvpn-client-tun-adapter-loses-its-ip-address-on-network-restart/13825" rel="ugc nofollow">race condition</a> with netifd service.
</p>

<p>
If you still want to manage <abbr title="Virtual Private Network">VPN</abbr> interface such as <code>tun0</code> via UCI configuration and LuCI:
</p>
<pre class="code bash"><span class="co0"># /etc/config/network</span>
config interface <span class="st_h">'vpn'</span>
	option device <span class="st_h">'tun0'</span>
	option proto <span class="st_h">'none'</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;VPN interfaces&quot;,&quot;hid&quot;:&quot;vpn_interfaces&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:55,&quot;range&quot;:&quot;29060-29489&quot;} -->
<h3 class="sectionedit56" id="in4_tunnel">6in4 Tunnel</h3>
<div class="level3">

<p>
Follow <a href="/docs/guide-user/network/ipv6_ipv4_transitioning" class="wikilink1" title="docs:guide-user:network:ipv6_ipv4_transitioning" data-wiki-id="docs:guide-user:network:ipv6_ipv4_transitioning">IPv4/IPv6 Transition Technologies</a>.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;6in4 Tunnel&quot;,&quot;hid&quot;:&quot;in4_tunnel&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:56,&quot;range&quot;:&quot;29490-29606&quot;} -->
<h3 class="sectionedit57" id="l2tp_tunnel">L2TP Tunnel</h3>
<div class="level3">

<p>
Support for L2TP is provided by <code>xl2tpd</code> package. The username and password are for PPP authentication.
</p>
<pre class="code bash">config interface <span class="st_h">'l2tpwan'</span>
	option proto <span class="st_h">'l2tp'</span>
	option server <span class="st_h">'1.2.3.4'</span>
	option username <span class="st_h">'mylogin'</span>
	option password <span class="st_h">'mypassword'</span>
	option keepalive <span class="st_h">'30'</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;L2TP Tunnel&quot;,&quot;hid&quot;:&quot;l2tp_tunnel&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:57,&quot;range&quot;:&quot;29607-29909&quot;} -->
<h3 class="sectionedit58" id="l2tpv3_pseudowire_bridged_to_lan">L2TPv3 Pseudowire bridged to LAN</h3>
<div class="level3">

<p>
This example establishes a Pseudowire Tunnel and bridges it to the <abbr title="Local Area Network">LAN</abbr> ports.
The existing lan interface is reused with protocol <code>l2tp</code> instead of <code>static</code>.
</p>
<pre class="code bash">config interface <span class="st_h">'lan'</span>
	option proto     <span class="st_h">'l2tp'</span>
	option <span class="kw3">type</span>      <span class="st_h">'bridge'</span>
	option ifname    <span class="st_h">'eth0'</span>
	option ipaddr    <span class="st_h">'192.168.1.1'</span>
	option netmask   <span class="st_h">'255.255.255.0'</span>
	option localaddr <span class="st_h">'178.24.154.19'</span>
	option peeraddr  <span class="st_h">'89.44.33.61'</span>
	option encap     <span class="st_h">'udp'</span>
	option sport     <span class="st_h">'4000'</span>
	option dport     <span class="st_h">'5410'</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;L2TPv3 Pseudowire bridged to LAN&quot;,&quot;hid&quot;:&quot;l2tpv3_pseudowire_bridged_to_lan&quot;,&quot;codeblockOffset&quot;:6,&quot;secid&quot;:58,&quot;range&quot;:&quot;29910-30441&quot;} -->
<h3 class="sectionedit59" id="relay_between_lan_and_wireless_station">Relay between LAN and Wireless Station</h3>
<div class="level3">

<p>
This example sets up a <code>relayd</code> pseudo bridge between a wireless client network and <abbr title="Local Area Network">LAN</abbr>, so that it works similarly to the Broadcom Bridged Client mode.
</p>

<p>
Wireless configuration (excerpt):
</p>
<pre class="code bash">config wifi-iface
	option device     <span class="st_h">'radio0'</span>
	option mode       <span class="st_h">'sta'</span>
	option ssid       <span class="st_h">'Some Wireless Network'</span>
	option encryption <span class="st_h">'psk2'</span>
	option key	<span class="st_h">'12345678'</span>
	option network    <span class="st_h">'wwan'</span></pre>

<p>
Network configuration (excerpt):<br/>

<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> Note that the <abbr title="Local Area Network">LAN</abbr> subnet must be different from the one used by wireless network&#039;s <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>.
</p>
<pre class="code bash">config interface <span class="st_h">'lan'</span>
	option ifname     <span class="st_h">'eth0.1'</span>
	option proto      <span class="st_h">'static'</span>
	option ipaddr     <span class="st_h">'192.168.1.1'</span>
	option netmask    <span class="st_h">'255.255.255.0'</span>
&nbsp;
config interface <span class="st_h">'wwan'</span>
	option proto      <span class="st_h">'dhcp'</span>
&nbsp;
config interface <span class="st_h">'stabridge'</span>
	option proto      <span class="st_h">'relay'</span>
	option network    <span class="st_h">'lan wwan'</span></pre>

<p>
In contrast to true bridging, traffic forwarded in this manner is affected by firewall rules, therefore both the wireless client network and the lan network should be covered by the same <abbr title="Local Area Network">LAN</abbr> firewall zone with forward policy set to <code>accept</code> to allow traffic flow between both interfaces:
</p>
<pre class="code bash">config zone
	option name	<span class="st_h">'lan'</span>
	option network     <span class="st_h">'lan wwan'</span>  <span class="co0"># Important</span>
	option input       <span class="st_h">'ACCEPT'</span>
	option forward     <span class="st_h">'ACCEPT'</span>    <span class="co0"># Important</span>
	option output      <span class="st_h">'ACCEPT'</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Relay between LAN and Wireless Station&quot;,&quot;hid&quot;:&quot;relay_between_lan_and_wireless_station&quot;,&quot;codeblockOffset&quot;:7,&quot;secid&quot;:59,&quot;range&quot;:&quot;30442-31815&quot;} -->
<h3 class="sectionedit60" id="static_addressing_of_a_gre_tunnel">Static addressing of a GRE tunnel</h3>
<div class="level3">

<p>
Create a GRE tunnel with static address 10.42.0.253/30, adding it to an existing firewall zone called <code>tunnels</code>:
</p>

<p>
<em>See warning on top of page about interface-name length.
Previous interface names here were too long and silently fail.</em>
</p>
<pre class="code bash">config interface <span class="st_h">'tunA'</span>
	option proto    <span class="st_h">'gre'</span>
	option zone     <span class="st_h">'tunnels'</span>
	option peeraddr <span class="st_h">'198.51.100.42'</span>
&nbsp;
config interface <span class="st_h">'tunAA'</span>
	option proto    <span class="st_h">'static'</span>
	option ifname   <span class="st_h">'@tunA'</span>
	option ipaddr   <span class="st_h">'10.42.0.253'</span>
	option netmask  <span class="st_h">'255.255.255.252'</span>
	<span class="co0"># Fixes IPv6 multicast (long-standing bug in kernel).</span>
	<span class="co0"># Useful if you run Babel or OSPFv3.</span>
	option ip6addr  <span class="st_h">'fe80::42/64'</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Static addressing of a GRE tunnel&quot;,&quot;hid&quot;:&quot;static_addressing_of_a_gre_tunnel&quot;,&quot;codeblockOffset&quot;:10,&quot;secid&quot;:60,&quot;range&quot;:&quot;31816-32494&quot;} -->
<h3 class="sectionedit61" id="static_addressing_of_a_ipsec_vti_tunnel">Static addressing of a IPSEC VTI tunnel</h3>
<div class="level3">

<p>
This adds support for configuring VTI interfaces within /etc/config/network.
VTI interfaces are used to create IPsec tunnel interfaces.
These interfaces may be used for routing and other purposes.
</p>
<pre class="code bash">config interface <span class="st_h">'vti1'</span>
	option proto <span class="st_h">'vti'</span>
	option mtu <span class="st_h">'1500'</span>
	option tunlink <span class="st_h">'wan'</span>
	option peeraddr <span class="st_h">'192.168.5.16'</span>
	option zone <span class="st_h">'VPN'</span>
	option ikey <span class="nu0">2</span>
	option okey <span class="nu0">2</span>
&nbsp;
config interface <span class="st_h">'vti1_static'</span>
	option proto <span class="st_h">'static'</span>
	option ifname <span class="st_h">'@vti1'</span>
	option ipaddr <span class="st_h">'192.168.7.2/24'</span></pre>

<p>
The options ikey and okey correspond to the fwmark value of an ipsec policy.
This may be null if you do not want a fwmark.
Also peeraddr may be 0.0.0.0 if you want all ESP packets go through the
interface.
</p>

<p>
Example strongswan config:
</p>
<pre class="code bash">conn vti
	<span class="re2">left</span>=<span class="sy0">%</span>any
	<span class="re2">leftcert</span>=peer2.test.der
	<span class="re2">leftid</span>=<span class="sy0">@</span>peer2.test
	<span class="re2">right</span>=192.168.5.16
	<span class="re2">rightid</span>=<span class="sy0">@</span>peer3.test
	<span class="re2">leftsubnet</span>=0.0.0.0<span class="sy0">/</span><span class="nu0">0</span>
	<span class="re2">rightsubnet</span>=0.0.0.0<span class="sy0">/</span><span class="nu0">0</span>
	<span class="re2">mark</span>=<span class="nu0">2</span>
	<span class="re2">auto</span>=route</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Static addressing of a IPSEC VTI tunnel&quot;,&quot;hid&quot;:&quot;static_addressing_of_a_ipsec_vti_tunnel&quot;,&quot;codeblockOffset&quot;:11,&quot;secid&quot;:61,&quot;range&quot;:&quot;32495-33466&quot;} -->
<h3 class="sectionedit62" id="static_addressing_of_wireguard_tunnel">Static addressing of WireGuard tunnel</h3>
<div class="level3">

<p>
An example of WireGuard server configuration.
</p>
<pre class="code bash">config interface <span class="st_h">'vpn'</span>
	option proto <span class="st_h">'wireguard'</span>
	option private_key <span class="st_h">'SERVER_PRIVATE_KEY'</span>
	option listen_port <span class="st_h">'51820'</span>
	list addresses <span class="st_h">'192.168.9.1/24'</span>
	list addresses <span class="st_h">'fd00:9::1/64'</span>
&nbsp;
config wireguard_vpn <span class="st_h">'wgclient'</span>
	option public_key <span class="st_h">'CLIENT_PUBLIC_KEY'</span>
	option preshared_key <span class="st_h">'PRESHARED_KEY'</span>
	list allowed_ips <span class="st_h">'192.168.9.2'</span>
	list allowed_ips <span class="st_h">'fd00:9::2'</span></pre>

<p>
An example of WireGuard client configuration.
</p>
<pre class="code bash">config interface <span class="st_h">'vpn'</span>
	option proto <span class="st_h">'wireguard'</span>
	option private_key <span class="st_h">'CLIENT_PRIVATE_KEY'</span>
	list addresses <span class="st_h">'192.168.9.2/24'</span>
	list addresses <span class="st_h">'fd00:9::2/64'</span>
&nbsp;
config wireguard_vpn <span class="st_h">'wgserver'</span>
	option public_key <span class="st_h">'SERVER_PUBLIC_KEY'</span>
	option preshared_key <span class="st_h">'PRESHARED_KEY'</span>
	option endpoint_host <span class="st_h">'SERVER_ADDRESS'</span>
	option endpoint_port <span class="st_h">'51820'</span>
	option route_allowed_ips <span class="st_h">'1'</span>
	option persistent_keepalive <span class="st_h">'25'</span>
	list allowed_ips <span class="st_h">'0.0.0.0/0'</span>
	list allowed_ips <span class="st_h">'::/0'</span></pre>

<p>
Create a WireGuard tunnel interface named <code>foo</code> that connects to one peer (<abbr title="Virtual Private Network">VPN</abbr> server at vpn.example.com) and allows another peer (e.g. road warrior) to connect.
Peer configurations are managed via one or more <code>wireguard_&lt;ifname&gt;</code> sections.
</p>
<pre class="code bash">config interface <span class="st_h">'foo'</span>
	option proto <span class="st_h">'wireguard'</span>
	option private_key <span class="st_h">'qLvQnx5CpXPDo6oplzdIvXLNqkbgpXip3Yv4ouHWZ0Q='</span>
	list addresses <span class="st_h">'fd00:13:37:ffff::1/64'</span>
&nbsp;
config wireguard_foo
	option public_key <span class="st_h">'9mD+mTiOp7SGIkB4t3ZfWAcfp5iA/WwQRdVypKKwrjY='</span>
	option route_allowed_ips <span class="st_h">'1'</span>
	list allowed_ips <span class="st_h">'fd00:13:37::/64'</span>
	option endpoint_host <span class="st_h">'vpn.example.com'</span>
	option persistent_keepalive <span class="st_h">'25'</span>
&nbsp;
config wireguard_foo
	option public_key <span class="st_h">'4mLeSytW6/y4UcOT6rNorw1Ae9nXSxhXUjxsdzMWkUA='</span>
	option preshared_key <span class="st_h">'M1IbkkDVwXsQbFbURiMXiVe/iUCjC5TKHCmemVs+oLQ='</span>
	list allowed_ips <span class="st_h">'fd00:13:37:ffff::2'</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Static addressing of WireGuard tunnel&quot;,&quot;hid&quot;:&quot;static_addressing_of_wireguard_tunnel&quot;,&quot;codeblockOffset&quot;:13,&quot;secid&quot;:62,&quot;range&quot;:&quot;33467-35303&quot;} -->
<h3 class="sectionedit63" id="vxlan_example_configuration">VXLAN example configuration</h3>
<div class="level3">

<p>
Here is an example configuration for a VXLAN tunnel.
Only the required options are used, optional ones can be specified additionally.
</p>

<p>
VXLAN interface definition:
</p>
<pre class="code bash">config interface <span class="st_h">'vxlan0'</span>
	option proto <span class="st_h">'vxlan'</span>
	option peeraddr <span class="st_h">'10.10.222.1'</span>
	option port <span class="st_h">'4789'</span>
	option vid <span class="st_h">'8'</span>
	option tunlink <span class="st_h">'eth0'</span></pre>

<p>
Now it is necessary to create an alias interface for <code>vxlan0</code> to assign an <abbr title="Internet Protocol">IP</abbr> address as this is not possible with <code>option ipaddr</code>:
</p>
<pre class="code bash">config interface <span class="st_h">'l2vpn'</span>
	option ifname <span class="st_h">'@vxlan0'</span>
	option proto <span class="st_h">'static'</span>
	option ipaddr <span class="st_h">'10.10.0.1'</span>
	option netmask <span class="st_h">'255.255.255.0'</span>
	option layer <span class="st_h">'2'</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;VXLAN example configuration&quot;,&quot;hid&quot;:&quot;vxlan_example_configuration&quot;,&quot;codeblockOffset&quot;:16,&quot;secid&quot;:63,&quot;range&quot;:&quot;35304-35972&quot;} -->
<h3 class="sectionedit64" id="how_to_create_ethernet_vpn_port_using_vxlan">How to create Ethernet VPN port using VXLAN</h3>
<div class="level3">

<p>
An Ethernet adapter is being inserted into the port, its Ethernet frame is send to the distant br-lan.
</p>

<p>
It will obtain an <abbr title="Internet Protocol">IP</abbr> address in the 192.168.200.x range from a distant <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server via a Layer 2 <abbr title="Virtual Private Network">VPN</abbr>.
</p>

<p>
Assuming you are using <abbr title="Virtual Local Area Network">VLAN</abbr> on your router.
</p>

<p>
Assuming you have setup site-to-site <abbr title="Virtual Private Network">VPN</abbr> with subnet routing with Wireguard or Tailscale.
</p>

<p>
<abbr title="Virtual Local Area Network">VLAN</abbr> ID 100 is native <abbr title="Local Area Network">LAN</abbr>.
</p>

<p>
<abbr title="Virtual Local Area Network">VLAN</abbr> ID 1000 is used to short circuit VXLAN to port and only avaliable on sender.
</p>

<p>
Sender :
</p>
<ul>
<li class="level1"><div class="li"> detach ethernet port from any <abbr title="Virtual Local Area Network">VLAN</abbr> ID</div>
</li>
<li class="level1"><div class="li"> create a new <abbr title="Virtual Local Area Network">VLAN</abbr> ID, not join to existing <abbr title="Virtual Local Area Network">VLAN</abbr> ID and short circuit Ethernet port to VXLAN interface</div>
</li>
</ul>

<p>
Overview of Bridge device br-lan:
</p>
<pre class="code bash"><span class="re5">--------------------------------------------------------------------------------------</span>
<span class="sy0">|</span> VLAN ID <span class="sy0">|</span> Local <span class="sy0">|</span> br-lan.100 <span class="sy0">|</span> br-lan.1000 <span class="sy0">|</span> lan1 <span class="sy0">|</span> lan2 <span class="sy0">|</span> lan3 <span class="sy0">|</span> lan4 <span class="sy0">|</span> vxlan100  <span class="sy0">|</span>
<span class="re5">--------------------------------------------------------------------------------------</span>
<span class="sy0">|</span>         <span class="sy0">|</span>       <span class="sy0">|</span> Connected  <span class="sy0">|</span> Connected   <span class="sy0">|</span>      <span class="sy0">|</span>      <span class="sy0">|</span>      <span class="sy0">|</span>      <span class="sy0">|</span> Connected <span class="sy0">|</span>
<span class="re5">--------------------------------------------------------------------------------------</span>
<span class="sy0">|</span> <span class="nu0">100</span>     <span class="sy0">|</span> Yes   <span class="sy0">|</span> T          <span class="sy0">|</span> -           <span class="sy0">|</span> U    <span class="sy0">|</span> U    <span class="sy0">|</span> U    <span class="sy0">|</span> -    <span class="sy0">|</span>           <span class="sy0">|</span>
<span class="re5">--------------------------------------------------------------------------------------</span>
<span class="sy0">|</span> <span class="nu0">1000</span>    <span class="sy0">|</span> Yes   <span class="sy0">|</span> -          <span class="sy0">|</span> -           <span class="sy0">|</span> -    <span class="sy0">|</span> -    <span class="sy0">|</span> -    <span class="sy0">|</span> U    <span class="sy0">|</span> U         <span class="sy0">|</span>
<span class="re5">--------------------------------------------------------------------------------------</span></pre>

<p>
Add vxlan100 interface to the br-lan bridge.
</p>
<pre class="code bash">config device
	option name <span class="st_h">'br-lan'</span>
	option <span class="kw3">type</span> <span class="st_h">'bridge'</span>
	option bridge_empty <span class="st_h">'1'</span>
	list ports <span class="st_h">'lan1'</span>
	list ports <span class="st_h">'lan2'</span>
	list ports <span class="st_h">'lan3'</span>
	list ports <span class="st_h">'lan4'</span>
	list ports <span class="st_h">'vxlan100'</span>
	list ports <span class="st_h">'br-lan.100'</span></pre>

<p>
Don&#039;t use “option tunlink”, it is not working with Wireguard and Tailscale with <abbr title="Virtual Local Area Network">VLAN</abbr>/subnet routing.
</p>
<pre class="code bash">config interface <span class="st_h">'vxlan100'</span>
	option proto <span class="st_h">'vxlan'</span>
	option peeraddr <span class="st_h">'192.168.200.1'</span>
	option ipaddr <span class="st_h">'192.168.100.1'</span>
	option port <span class="st_h">'4789'</span>
	option vid <span class="st_h">'100'</span>
&nbsp;
config bridge-vlan
	option device <span class="st_h">'br-lan'</span>
	option vlan <span class="st_h">'1000'</span>
	list ports <span class="st_h">'lan4'</span>
	list ports <span class="st_h">'vxlan100'</span></pre>

<p>
Receiver:
</p>
<ul>
<li class="level1"><div class="li"> Join VXLAN datagram to destination <abbr title="Virtual Local Area Network">VLAN</abbr> ID.</div>
</li>
</ul>

<p>
Overview of Bridge device br-lan:
</p>
<pre class="code bash"><span class="re5">------------------------------------------------------------------------</span>
<span class="sy0">|</span> VLAN ID <span class="sy0">|</span> Local <span class="sy0">|</span> br-lan.100 <span class="sy0">|</span> lan1 <span class="sy0">|</span> lan2 <span class="sy0">|</span> lan3 <span class="sy0">|</span> lan4 <span class="sy0">|</span> vxlan100  <span class="sy0">|</span>
<span class="re5">------------------------------------------------------------------------</span>
<span class="sy0">|</span>         <span class="sy0">|</span>       <span class="sy0">|</span> Connected  <span class="sy0">|</span>      <span class="sy0">|</span>      <span class="sy0">|</span>      <span class="sy0">|</span>      <span class="sy0">|</span> Connected <span class="sy0">|</span>
<span class="re5">------------------------------------------------------------------------</span>
<span class="sy0">|</span> <span class="nu0">100</span>     <span class="sy0">|</span> Yes   <span class="sy0">|</span> T          <span class="sy0">|</span> U    <span class="sy0">|</span> U    <span class="sy0">|</span> U    <span class="sy0">|</span> U    <span class="sy0">|</span> U         <span class="sy0">|</span>
<span class="re5">------------------------------------------------------------------------</span></pre>

<p>
Add vxlan100 interface to the br-lan bridge.
</p>
<pre class="code bash">config device
	option name <span class="st_h">'br-lan'</span>
	option <span class="kw3">type</span> <span class="st_h">'bridge'</span>
	option bridge_empty <span class="st_h">'1'</span>
	list ports <span class="st_h">'lan1'</span>
	list ports <span class="st_h">'lan2'</span>
	list ports <span class="st_h">'lan3'</span>
	list ports <span class="st_h">'lan4'</span>
	list ports <span class="st_h">'vxlan100'</span>
	list ports <span class="st_h">'br-lan.100'</span></pre>

<p>
Join VXLAN datagram to the native <abbr title="Local Area Network">LAN</abbr>, <abbr title="Virtual Local Area Network">VLAN</abbr> ID 100
</p>
<pre class="code bash">config bridge-vlan
	option device <span class="st_h">'br-lan'</span>
	option vlan <span class="st_h">'100'</span>
	list ports <span class="st_h">'br-lan.100:t'</span>
	list ports <span class="st_h">'lan1'</span>
	list ports <span class="st_h">'lan2'</span>
	list ports <span class="st_h">'lan3'</span>
	list ports <span class="st_h">'lan4'</span>
	list ports <span class="st_h">'vxlan100'</span>
&nbsp;
config interface <span class="st_h">'vxlan100'</span>
	option proto <span class="st_h">'vxlan'</span>
	option peeraddr <span class="st_h">'192.168.100.1'</span>
	option ipaddr <span class="st_h">'192.168.200.1'</span>
	option port <span class="st_h">'4789'</span>
	option vid <span class="st_h">'100'</span></pre>

<p>
You can set up bidirectional layer 2 <abbr title="Virtual Private Network">VPN</abbr> on port4 with the same approach and use difference VXLAN VNI.
</p>

<p>
Site one&#039;s port4 is send to site two&#039;s br-lan and site two&#039;s port4 is send to site one&#039;s br-lan.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;How to create Ethernet VPN port using VXLAN&quot;,&quot;hid&quot;:&quot;how_to_create_ethernet_vpn_port_using_vxlan&quot;,&quot;codeblockOffset&quot;:18,&quot;secid&quot;:64,&quot;range&quot;:&quot;35973-&quot;} -->