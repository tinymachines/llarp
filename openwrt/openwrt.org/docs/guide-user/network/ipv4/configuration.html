
<h1 class="sectionedit1" id="ipv4_configuration">IPv4 configuration</h1>
<div class="level1">

<p>
Due to obvious reasons, <abbr title="Internet Protocol version 4">IPv4</abbr> is fully supported in default firmware.
</p>

<p>
See also:
<a href="/docs/guide-user/network/routing/routes_configuration#ipv4_routes" class="wikilink1" title="docs:guide-user:network:routing:routes_configuration" data-wiki-id="docs:guide-user:network:routing:routes_configuration">Static IPv4 routes</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;IPv4 configuration&quot;,&quot;hid&quot;:&quot;ipv4_configuration&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-201&quot;} -->
<h2 class="sectionedit2" id="upstream_configuration_for_wan_interfaces">Upstream configuration for WAN interfaces</h2>
<div class="level2">

<p>
The following sections describe the configuration of <abbr title="Internet Protocol version 4">IPv4</abbr> connections to your <abbr title="Internet Service Provider">ISP</abbr> or an upstream router.
</p>

<p>
For an uplink with native <abbr title="Internet Protocol version 4">IPv4</abbr> connectivity you can just use the default configuration.
</p>
<pre class="code bash">config interface <span class="st_h">'wan'</span>
	option device <span class="st_h">'eth0.2'</span>
	option proto <span class="st_h">'dhcp'</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Upstream configuration for WAN interfaces&quot;,&quot;hid&quot;:&quot;upstream_configuration_for_wan_interfaces&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;202-539&quot;} -->
<h2 class="sectionedit3" id="protocol_static_ipv4">Protocol &quot;static&quot;, IPv4</h2>
<div class="level2">
<div class="table sectionedit4"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>ipaddr</code> </td><td class="col1"> ip address </td><td class="col2"> yes, if no <code>ip6addr</code> is set. </td><td class="col3"> <em>(none)</em> </td><td class="col4"> <abbr title="Internet Protocol">IP</abbr> address. [openwrt 12.09] It could be a list of ipaddr , that is: several ipaddresses will be assigned to the interface. If, instead of a list, several ipaddr are specified as options, only the last is applied. </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>netmask</code> </td><td class="col1"> netmask </td><td class="col2"> yes, if no <code>ip6addr</code> is set </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Netmask </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>gateway</code> </td><td class="col1"> ip address </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Default gateway </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>broadcast</code> </td><td class="col1"> ip address </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Broadcast address (autogenerated if not set) </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>dns</code> </td><td class="col1"> list of ip addresses </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> <abbr title="Domain Name System">DNS</abbr> server(s) </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>dns_metric</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> <code>0</code> </td><td class="col4"> <a href="https://git.openwrt.org/?p=project/netifd.git;a=commitdiff;h=7f6be657e2dabc185417520de4d0d0de2580c27d" class="interwiki iw_commit" title="https://git.openwrt.org/?p=project/netifd.git;a=commitdiff;h=7f6be657e2dabc185417520de4d0d0de2580c27d">DNS metric</a> </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>dns_search</code> </td><td class="col1"> list of domain names </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Search list for host-name lookup, relevant only for the router </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <code>metric</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> <code>0</code> </td><td class="col4"> Specifies the default route metric to use </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;576-1577&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;static\&quot;, IPv4&quot;,&quot;hid&quot;:&quot;protocol_static_ipv4&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:3,&quot;range&quot;:&quot;540-1578&quot;} -->
<h2 class="sectionedit5" id="protocol_dhcp">Protocol &quot;dhcp&quot;</h2>
<div class="level2">
<div class="table sectionedit6"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Type </th><th class="col2"> Required </th><th class="col3"> Default </th><th class="col4"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>broadcast</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> <code>0</code> </td><td class="col4"> Enable the broadcast flag in <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> requests, required for certain ISPs, e.g. Charter with DOCSIS 3 </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>ipaddr</code> </td><td class="col1"> <abbr title="Internet Protocol">IP</abbr> address </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> <abbr title="Internet Protocol">IP</abbr> address to request from the <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>hostname</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>system hostname</em> </td><td class="col4"> Hostname to include in <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> requests (option 12)</td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>clientid</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Override client identifier in <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> requests (option 61)</td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>vendorid</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <code>udhcp VERSION</code> </td><td class="col4"> Override the vendor class in <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> requests (option 60)</td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>dns</code> </td><td class="col1"> list of ip addresses </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Supplement <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>-assigned <abbr title="Domain Name System">DNS</abbr> server(s), or use only these if peerdns is 0 </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>peerdns</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> <code>1</code> </td><td class="col4"> Use <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>-provided <abbr title="Domain Name System">DNS</abbr> server(s) </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <code>defaultroute</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> <code>1</code> </td><td class="col4"> Whether to create a default route via the received gateway </td>
	</tr>
	<tr class="row9">
		<td class="col0"> <code>customroutes</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Space-separated list of additional routes to insert via the received gateway </td>
	</tr>
	<tr class="row10">
		<td class="col0"> <code>metric</code> </td><td class="col1"> integer </td><td class="col2"> no </td><td class="col3"> <code>0</code> </td><td class="col4"> Specifies the route metric to use for both default route and custom routes </td>
	</tr>
	<tr class="row11">
		<td class="col0"> <code>classlessroute</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> <code>1</code> </td><td class="col4"> Whether to request the “classless route” option (<abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> option 121) — <em>available since LEDE r2001</em> </td>
	</tr>
	<tr class="row12">
		<td class="col0"> <code>reqopts</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Space-separated list of additional <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> options to request from the server </td>
	</tr>
	<tr class="row13">
		<td class="col0"> <code>sendopts</code> </td><td class="col1"> string </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Space-separated list of additional <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> options to send to the server. Syntax: <code>option:value</code> where <code>option</code> is either an integer code or a symbolic name such as <code>hostname</code>. </td>
	</tr>
	<tr class="row14">
		<td class="col0"> <code>norelease</code> </td><td class="col1"> boolean </td><td class="col2"> no </td><td class="col3"> <code>0</code> </td><td class="col4"> If set DO NOT release <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> address on interface shutdown </td>
	</tr>
	<tr class="row15">
		<td class="col0"> <code>zone</code> </td><td class="col1"> firewall zone </td><td class="col2"> no </td><td class="col3"> <em>(none)</em> </td><td class="col4"> Firewall zone to which this interface should be added </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table1&quot;,&quot;secid&quot;:6,&quot;range&quot;:&quot;1607-3447&quot;} -->
<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> These parameters are handled partially by netifd (in <code>interface.c</code>) and partially by a shell script in <code>lib/netifd/proto/dhcp.sh</code>.
Note prior to commit 3cee6f3f24 the norelease option was known as release and had the opposite sense.
</p>

<p>
<img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" /> Outdated information, please proofread and test it: 
</p>

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> If an interface is configured as <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> client, the default route received by <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> will be the only one listed and will remove other default route/metrics defined for other interfaces if those interfaces comes “before” the interface with <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> in terms of “device” values.
For example:
</p>
<pre class="code bash">config interface <span class="st_h">'wan'</span>
    option device <span class="st_h">'eth0'</span>
    option proto <span class="st_h">'static'</span>
&nbsp;
config interface <span class="st_h">'wan2'</span>
    option device <span class="st_h">'eth1'</span>
    option proto <span class="st_h">'dhcp'</span></pre>

<p>
The interface with <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> comes after (because eth1 comes after eth0 in a lexicografical order) and will overwrite the default routes set up by the interface “wan”, while the contrary is not true:
</p>
<pre class="code bash">config interface <span class="st_h">'wan'</span>
    option device <span class="st_h">'eth0'</span>
    option proto <span class="st_h">'dhcp'</span>
&nbsp;
config interface <span class="st_h">'wan2'</span>
    option device <span class="st_h">'eth1'</span>
    option proto <span class="st_h">'static'</span></pre>

<p>
Both default routes set up by wan and wan2 will appear in the routing table.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Protocol \&quot;dhcp\&quot;&quot;,&quot;hid&quot;:&quot;protocol_dhcp&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:5,&quot;range&quot;:&quot;1579-4658&quot;} -->
<h2 class="sectionedit7" id="downstream_configuration_for_lan_interfaces">Downstream configuration for LAN interfaces</h2>
<div class="level2">

<p>
For a downlink with <abbr title="Internet Protocol version 4">IPv4</abbr> connectivity you can just use the default configuration, <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server is enabled by default, please see <a href="/docs/guide-user/base-system/dhcp" class="wikilink1" title="docs:guide-user:base-system:dhcp" data-wiki-id="docs:guide-user:base-system:dhcp">DHCP configuration</a> for more details on that.
</p>
<pre class="code bash">config interface <span class="st_h">'lan'</span>
	option device <span class="st_h">'br-lan'</span>
	option proto <span class="st_h">'static'</span>
	option netmask <span class="st_h">'255.255.255.0'</span>
	option ip6assign <span class="st_h">'60'</span>
	option ipaddr <span class="st_h">'192.168.1.1'</span>
&nbsp;
config device <span class="st_h">'lan_dev'</span>
	option name <span class="st_h">'br-lan'</span>
	option <span class="kw3">type</span> <span class="st_h">'bridge'</span>
	list ports <span class="st_h">'lan3'</span>
	list ports <span class="st_h">'lan4'</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Downstream configuration for LAN interfaces&quot;,&quot;hid&quot;:&quot;downstream_configuration_for_lan_interfaces&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:7,&quot;range&quot;:&quot;4659-&quot;} -->