
<h1 class="sectionedit1" id="wi-fi_extenderrepeater_with_bridged_ap_over_ethernet">Wi-Fi Extender/Repeater with Bridged AP over Ethernet</h1>
<div class="level1">

<p>
Bridged <abbr title="Access Point">AP</abbr> configuration (sometimes known as a “Dumb <abbr title="Access Point">AP</abbr>” or simply an “<abbr title="Access Point">AP</abbr>”) is used to add WiFi to an existing network using an <strong>Ethernet uplink</strong>.  This is commonly used in situations where the router does not have wifi and/or where there is a need to increase wifi coverage throughout a space by adding one or more dedicated APs. As mentioned, this method requires that the bridged <abbr title="Access Point">AP</abbr> is connected to the upstream network with a wired Ethernet connection, and it simply transparently bridges the wired <abbr title="Local Area Network">LAN</abbr> with a Wifi SSID. This configuration allows your wifi devices to participate on the same network as your wired ones, and broadcast traffic from <abbr title="Local Area Network">LAN</abbr>-to-<abbr title="Wireless Local Area Network">WLAN</abbr> and vice versa works without any additional configuration.
</p>

<p>
As an <abbr title="Access Point">AP</abbr>, the device will not perform any duties beyond simply bridging Ethernet and Wifi. That is to say that it will not be responsible for routing, firewall, <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>, or <abbr title="Domain Name System">DNS</abbr>, as these are performed by the upstream router and/or other device(s). Wireless clients connecting to the <abbr title="Access Point">AP</abbr> will get an <abbr title="Internet Protocol">IP</abbr> address from the <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server already running on the network, and will send traffic to the existing router to reach the internet.
</p>
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:2,&quot;range&quot;:&quot;0-&quot;} --><div class="plugin_wrap">
<p>
<a href="/_detail/doc/recipes/bridged.ap_v3.png?id=docs%3Aguide-user%3Anetwork%3Awifi%3Awifiextenders%3Abridgedap" class="media" title="doc:recipes:bridged.ap_v3.png"><img src="/_media/doc/recipes/bridged.ap_v3.png?w=450&amp;tok=38e09e" class="media" loading="lazy" title="Bridged AP example" alt="Bridged AP example" width="450" /></a>
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:3,&quot;range&quot;:&quot;0-&quot;} --><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_box plugin_wrap">
<p>
Overview of configuration for a Wireless <abbr title="Access Point">AP</abbr>:
</p>
<ol>
<li class="level1"><div class="li"> The wireless <abbr title="Access Point">AP</abbr> is connected <abbr title="Local Area Network">LAN</abbr>-to-<abbr title="Local Area Network">LAN</abbr> to the router/upstream network by <strong>Ethernet</strong>. </div>
</li>
<li class="level1"><div class="li"> The wireless <abbr title="Access Point">AP</abbr> bridges its <abbr title="Local Area Network">LAN</abbr> interface to an SSID (wifi network). WiFi traffic will traverse the bridge to reach the router and/or other lan devices.</div>
</li>
<li class="level1"><div class="li"> The wireless <abbr title="Access Point">AP</abbr> device may hold either a static <abbr title="Internet Protocol">IP</abbr> address on the same subnet as the upstream network, or it may obtain an address via <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> from the upstream <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server.</div>
</li>
<li class="level1"><div class="li"> The wireless <abbr title="Access Point">AP</abbr> does not provide services such as <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>, <abbr title="Domain Name System">DNS</abbr>, or firewall as this is done on the router and/or other device(s).</div>
</li>
</ol>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;0-&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Wi-Fi Extender\/Repeater with Bridged AP over Ethernet&quot;,&quot;hid&quot;:&quot;wi-fi_extenderrepeater_with_bridged_ap_over_ethernet&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-1919&quot;} -->
<h2 class="sectionedit6" id="method_1configuration_via_editing_config_files">Method 1: Configuration via Editing Config Files</h2>
<div class="level2">

<p>
The changes below assume a default OpenWrt configuration. The relevant files are:
</p>
<ul>
<li class="level1"><div class="li"> <a href="/docs/guide-user/network/network_configuration" class="wikilink1" title="docs:guide-user:network:network_configuration" data-wiki-id="docs:guide-user:network:network_configuration">/etc/config/network</a></div>
</li>
<li class="level1"><div class="li"> <a href="/docs/guide-user/base-system/dhcp" class="wikilink1" title="docs:guide-user:base-system:dhcp" data-wiki-id="docs:guide-user:base-system:dhcp">/etc/config/dhcp</a></div>
</li>
<li class="level1"><div class="li"> <a href="/docs/guide-user/network/wifi/basic" class="wikilink1" title="docs:guide-user:network:wifi:basic" data-wiki-id="docs:guide-user:network:wifi:basic">/etc/config/wireless</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Method 1: Configuration via Editing Config Files&quot;,&quot;hid&quot;:&quot;method_1configuration_via_editing_config_files&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;1920-2264&quot;} -->
<h3 class="sectionedit7" id="step_1change_the_lan_interface">Step 1: Change the LAN interface</h3>
<div class="level3">

<p>
Edit <code>/etc/config/network</code> and change the lan <code><a href="/docs/guide-user/base-system/basic-networking#interfaces" class="wikilink1" title="docs:guide-user:base-system:basic-networking" data-wiki-id="docs:guide-user:base-system:basic-networking">interface</a></code> section to set the <abbr title="Internet Protocol">IP</abbr> your access point should have in the future:
</p>
<pre class="code bash">config interface <span class="st_h">'lan'</span>
        option device <span class="st_h">'br-lan'</span>
        option proto <span class="st_h">'static'</span>
        option ipaddr <span class="st_h">'192.168.1.2'</span>
        option netmask <span class="st_h">'255.255.255.0'</span>
        option gateway <span class="st_h">'192.168.1.1'</span>
        option dns <span class="st_h">'192.168.1.1'</span></pre>

<p>
This must be an <em>unused</em> <abbr title="Internet Protocol">IP</abbr> within the network subnet of the main router. You could also change <code>proto</code> from <code>static</code> to <code>dhcp</code> if you want the main <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server to provide an address to the <abbr title="Access Point">AP</abbr>. When using <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> client mode, remove the last 4 lines above. Keep in mind that the access point needs a <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server to obtain an address. Should the <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server be unavailable, it is possible that the <abbr title="Access Point">AP</abbr> will not have an address and it will not be possible to administer the <abbr title="Access Point">AP</abbr> until it has obtained a new <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> lease.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Step 1: Change the LAN interface&quot;,&quot;hid&quot;:&quot;step_1change_the_lan_interface&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;2265-3265&quot;} -->
<h3 class="sectionedit8" id="step_2configure_and_enable_the_wireless_network">Step 2: Configure and enable the wireless network</h3>
<div class="level3">

<p>
In <code>/etc/config/wireless</code>, locate the existing <code>wifi-device</code> and <code>wifi-iface</code> sections. Change the SSID, encryption type, and passphrase according to your needs, set your country code, and then enable the radio. When you&#039;re done, it will look something like this:
</p>
<pre class="code bash">config wifi-device <span class="st_h">'radio0'</span>
	option <span class="kw3">type</span> <span class="st_h">'mac80211'</span>
	option path <span class="st_h">'platform/soc/18000000.wifi'</span>
	option channel <span class="st_h">'1'</span>
	option band <span class="st_h">'2g'</span>
	option htmode <span class="st_h">'HE20'</span>
	option disabled <span class="st_h">'0'</span>
	option cell_density <span class="st_h">'0'</span>
	option country <span class="st_h">'US'</span>
&nbsp;
config wifi-iface <span class="st_h">'default_radio0'</span>
	option device <span class="st_h">'radio0'</span>
	option network <span class="st_h">'lan'</span>
	option mode <span class="st_h">'ap'</span>
	option ssid <span class="st_h">'YourSSID'</span>
	option encryption <span class="st_h">'psk2'</span>
	option key <span class="st_h">'YourSecurePassphrase'</span></pre>

<p>
If your device contains multiple radios, such as a 2G and 5G bands, you&#039;ll probably want to do the same for the other radio(s). It is generally recommended to use the same SSID and passphrase for all bands so that the client device can use its own internal logic to determine the best band to use at any given time.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Step 2: Configure and enable the wireless network&quot;,&quot;hid&quot;:&quot;step_2configure_and_enable_the_wireless_network&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:8,&quot;range&quot;:&quot;3266-4340&quot;} -->
<h3 class="sectionedit9" id="step_3disable_the_dhcp_server_on_the_lan_interface">Step 3: Disable the DHCP server on the lan interface</h3>
<div class="level3">

<p>
It is critical that the <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server is disabled for the lan interface since only one <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server may be running on a subnet at a time. Within the `/etc/config/dhcp` file, find the lan <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server. Add `option ignore &#039;1&#039;` to the lan <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server as shown below and remove the DHCPv6 related entries:
</p>
<pre class="code bash">config dhcp <span class="st_h">'lan'</span>
	option interface <span class="st_h">'lan'</span>
	option start <span class="st_h">'100'</span>
	option limit <span class="st_h">'150'</span>
	option leasetime <span class="st_h">'12h'</span>
	option dhcpv4 <span class="st_h">'server'</span>
	option ignore <span class="st_h">'1'</span></pre>

<p>
Note: It is not recommended or necessary to disable the dnsmasq service. Disabling the dnsmasq service will stop the <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server, but may result in it becoming reactivated should the service be started again such as during a sysupgrade event. The only way to guarantee that the <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server will be disabled is to set the ignore flag as shown above. 
</p>

<p>
Likewise, the firewall can be left as-is and it does not need to be disabled.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Step 3: Disable the DHCP server on the lan interface&quot;,&quot;hid&quot;:&quot;step_3disable_the_dhcp_server_on_the_lan_interface&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:9,&quot;range&quot;:&quot;4341-5302&quot;} -->
<h3 class="sectionedit10" id="step_4connect_host_router_and_openwrt_router_correctly">Step 4: Connect host router and openwrt router correctly</h3>
<div class="level3">

<p>
Ensure the host router is connected with a <abbr title="Local Area Network">LAN</abbr> port of the wireless <abbr title="Access Point">AP</abbr>, not the <abbr title="Wide Area Network">WAN</abbr> port!
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Step 4: Connect host router and openwrt router correctly&quot;,&quot;hid&quot;:&quot;step_4connect_host_router_and_openwrt_router_correctly&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:10,&quot;range&quot;:&quot;5303-5461&quot;} -->
<h3 class="sectionedit11" id="step_5apply_changes">Step 5: Apply changes</h3>
<div class="level3">

<p>
Once the changes have been made to the `/etc/config/network`, `/etc/config/wireless`, and `/etc/config/dhcp` files, you&#039;ll want to make sure those changes are applied. While it is certainly possible to restart the individual services, the fastest method is to simply restart your device. On the command line, you can issue `reboot`, or just power cycle the unit.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Step 5: Apply changes&quot;,&quot;hid&quot;:&quot;step_5apply_changes&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:11,&quot;range&quot;:&quot;5462-5859&quot;} -->
<h3 class="sectionedit12" id="optionaladd_wan_port_to_the_lan_bridge">Optional: Add wan port to the lan bridge</h3>
<div class="level3">

<p>
In some cases, it may be desirable to modify the configuration such that the physical wan port is &#039;just another port&#039; on the lan. This is useful if the device is also being used as an ethernet switch and the extra port is needed and/or if the intent is to make all the ports functionally equivalent. This step is not required, and there is some additional nuance to this process which is different if the device uses swconfig vs DSA for managing the built-in switch. Do not mix these two methods in the configuration file, as they are not cross-compatible. 
</p>

<p>
What follows is a set of examples -- one from a DSA device and another that uses swconfig. <strong>Do not blindly implement these changes</strong> since your device might be different. Instead, use these examples as a reference for the general method.
</p>

</div>

<h4 id="dsa">DSA</h4>
<div class="level4">

<p>
In a default DSA configuration, `br-lan` will contain all of the lan ports, and the wan port will be used directly as the device for the `wan`/`wan6` network interfaces. Many DSA configurations will appear the same or very similar to the one shown here, but this is not universal, so remember that this serves as an example: 
</p>
<pre class="code bash">config device
	option name <span class="st_h">'br-lan'</span>
	option <span class="kw3">type</span> <span class="st_h">'bridge'</span>
	list ports <span class="st_h">'lan1'</span>
	list ports <span class="st_h">'lan2'</span>
	list ports <span class="st_h">'lan3'</span>
	list ports <span class="st_h">'lan4'</span>
&nbsp;
...
&nbsp;
config interface <span class="st_h">'wan'</span>
	option device <span class="st_h">'wan'</span>
	option proto <span class="st_h">'dhcp'</span>
&nbsp;
config interface <span class="st_h">'wan6'</span>
	option device <span class="st_h">'wan'</span>
	option proto <span class="st_h">'dhcpv6'</span></pre>

<p>
To add the wan port to `br-lan`, we simply delete the `wan` and `wan6` network interfaces and then add the wan port to the bridge like this:
</p>
<pre class="code bash">config device
	option name <span class="st_h">'br-lan'</span>
	option <span class="kw3">type</span> <span class="st_h">'bridge'</span>
	list ports <span class="st_h">'lan1'</span>
	list ports <span class="st_h">'lan2'</span>
	list ports <span class="st_h">'lan3'</span>
	list ports <span class="st_h">'lan4'</span>
	list ports <span class="st_h">'wan'</span></pre>

<p>
It is important to delete the wan interfaces, or at the very least the device line from each of the wan interfaces because the wan port must only be used in one place -- a network interface or the bridge.
</p>

</div>

<h4 id="swconfig">swconfig</h4>
<div class="level4">

<p>
A device that uses swconfig will have `switch_vlan` configuration blocks like what is shown below. Keep in mind that this is also just an example, as there can be very significant differences in the swconfig default configuration when comparing from one device to another.
</p>
<pre class="code bash">config switch_vlan
	option device <span class="st_h">'switch0'</span>
	option vlan <span class="st_h">'1'</span>
	option ports <span class="st_h">'0 8t'</span>
&nbsp;
config switch_vlan
	option device <span class="st_h">'switch0'</span>
	option vlan <span class="st_h">'2'</span>
	option ports <span class="st_h">'1 2 3 4 8t'</span></pre>

<p>
In the above swconfig example, we can see that the CPU (eth0) is logical port 8 as it is tagged (`t`) in both VLANs. We can also observe that <abbr title="Virtual Local Area Network">VLAN</abbr> 1 has logical port 0 -- the physical wan port, while <abbr title="Virtual Local Area Network">VLAN</abbr> 2 represents the lan with logical ports 1-4.
</p>

<p>
Here, we can either remove <abbr title="Virtual Local Area Network">VLAN</abbr> 1 altogether, or we can simply remove logical port 0 from that <abbr title="Virtual Local Area Network">VLAN</abbr> block. Then, we&#039;ll add logical port 0 to <abbr title="Virtual Local Area Network">VLAN</abbr> 2. Below, we have simply removed the logical port that maps to the physical wan port from <abbr title="Virtual Local Area Network">VLAN</abbr> 1, and added to <abbr title="Virtual Local Area Network">VLAN</abbr> 2:
</p>
<pre class="code bash">config switch_vlan
	option device <span class="st_h">'switch0'</span>
	option vlan <span class="st_h">'1'</span>
	option ports <span class="st_h">'8t'</span>
&nbsp;
config switch_vlan
	option device <span class="st_h">'switch0'</span>
	option vlan <span class="st_h">'2'</span>
	option ports <span class="st_h">'0 1 2 3 4 8t'</span></pre>

<p>
In a swconfig device, it is not necessary to delete the wan/wan6 config blocks unless we have deleted the underlying device (in this case <abbr title="Virtual Local Area Network">VLAN</abbr> 1 which equates to `eth0.1`), but deleting those interfaces will not cause any problems, either. 
</p>

<p>
<strong>Performance Caveat for adding the wan port to the bridge</strong>
In many devices, the physical wan port is connected to the switch and is fundamentally &#039;just another port&#039; on the switch chip. In these cases, the configuration of the switch chip will separate the wan port from the lan ports by the use of VLANs (this is immediately apparent in the swconfig method, but DSA obfuscates this aspect). When all ports are part of the same switch, the performance can be expected to be equivalent on all ports.
</p>

<p>
Some devices, however, may have a different architecture insofar as the wan port is not connected to the switch chip. Under these circumstances, it is possible that to observe lower performance when traffic is traversing between the wan port and the lan ports as compared to purely between the lan ports. This is because, for these devices, the switching must be performed at a software layer on hardware that is optimized for *routing*, not *switching*. If the performance penalty is noticeable, it may be best to keep the wan port separate and not use it as part of the lan bridge. 
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Optional: Add wan port to the lan bridge&quot;,&quot;hid&quot;:&quot;optionaladd_wan_port_to_the_lan_bridge&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:12,&quot;range&quot;:&quot;5860-10394&quot;} -->
<h1 class="sectionedit13" id="method_2configuration_via_luci">Method 2: Configuration via LuCI</h1>
<div class="level1">

<p>
WARNING for <a href="https://openwrt.org/toh/openwrt/one" class="urlextern" title="https://openwrt.org/toh/openwrt/one" rel="ugc nofollow">https://openwrt.org/toh/openwrt/one</a> devices ensure WiFi access is already working before following the instructions below.
</p>

<p>
Start by disconnecting the wireless <abbr title="Access Point">AP</abbr> from your network.<br/>

Use an Ethernet cable to connect your computer to one of the <abbr title="Local Area Network">LAN</abbr> ports (not the <em>Internet</em><em>/<abbr title="Wide Area Network">WAN</abbr></em> port) of the wireless <abbr title="Access Point">AP</abbr>.<br/>

Be sure to turn off WiFi on your computer while configuring to ensure that the only network connection is via Ethernet between your computer and your “to be” configured wireless <abbr title="Access Point">AP</abbr>.<br/>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Method 2: Configuration via LuCI&quot;,&quot;hid&quot;:&quot;method_2configuration_via_luci&quot;,&quot;codeblockOffset&quot;:7,&quot;secid&quot;:13,&quot;range&quot;:&quot;10395-10992&quot;} -->
<h3 class="sectionedit14" id="changing_configuration_for_bridged_ap">Changing configuration for Bridged AP</h3>
<div class="level3">

<p>
<strong>Open the router <abbr title="Graphical User Interface">GUI</abbr>:</strong> From a browser, navigate to LuCI by going to <a href="http://192.168.1.1" class="urlextern" title="http://192.168.1.1" rel="ugc nofollow">http://192.168.1.1</a>, login, set the admin password if necessary.<br/>

</p>

<p>
<a href="/_detail/media/docs/howto/dumbap_1_interface_overview.jpg?id=docs%3Aguide-user%3Anetwork%3Awifi%3Awifiextenders%3Abridgedap" class="media" title="media:docs:howto:dumbap_1_interface_overview.jpg"><img src="/_media/media/docs/howto/dumbap_1_interface_overview.jpg?w=750&amp;tok=bcf821" class="media" loading="lazy" alt="" width="750" /></a>
</p>

<p>
<strong>Set a static <abbr title="Local Area Network">LAN</abbr> address:</strong> Go to <em>Network → Interfaces</em> and on the <em>General Settings</em> tab, click on the <strong>Edit</strong> button of the <abbr title="Local Area Network">LAN</abbr> interface.
</p>

<p>
Although you could configure the wireless <abbr title="Access Point">AP</abbr> to use <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> to obtain an address from the main router,<br/>
this guide will show how configure a static <abbr title="Internet Protocol">IP</abbr> address for it.<br/>

By default, the main router will have an address of 192.168.1.1, so use 192.168.1.2 (or similar). <br/>

The wireless <abbr title="Access Point">AP</abbr>&#039;s address should be on the same subnet as your main router, but outside the <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> range used when assigning addresses to connected devices.<br/>

Assuming that the <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server is running on an upstream OpenWrt device, this means that by default the wireless <abbr title="Access Point">AP</abbr> router <abbr title="Internet Protocol">IP</abbr> should be between 192.168.1.2 and 192.168.1.99. But be sure to check the <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> pool range on your <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server to ensure that the address you use does not conflict with the <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server.<br/>

When adding multiple wireless APs, you could use 192.168.1.3, 192.168.1.4, etc.<br/>

Set the new <em><abbr title="Internet Protocol version 4">IPv4</abbr> address</em>, and click <strong>Save</strong> and <strong>Save &amp; Apply</strong>.
</p>

<p>
For OpenWrt One devices, now connect via wifi to continue setup.
</p>

<p>
<a href="/_detail/media/docs/howto/dumbap_2_interface_changed.jpg?id=docs%3Aguide-user%3Anetwork%3Awifi%3Awifiextenders%3Abridgedap" class="media" title="media:docs:howto:dumbap_2_interface_changed.jpg"><img src="/_media/media/docs/howto/dumbap_2_interface_changed.jpg?w=750&amp;tok=6a75f3" class="media" loading="lazy" alt="" width="750" /></a>
</p>

<p>
A warning screen will appear because you changed the routers <abbr title="Internet Protocol">IP</abbr> to 192.168.1.2. Click “Apply and keep settings”.
</p>

<p>
<a href="/_detail/media/docs/howto/dumbap_3_connectivity.jpg?id=docs%3Aguide-user%3Anetwork%3Awifi%3Awifiextenders%3Abridgedap" class="media" title="media:docs:howto:dumbap_3_connectivity.jpg"><img src="/_media/media/docs/howto/dumbap_3_connectivity.jpg?w=750&amp;tok=3deceb" class="media" loading="lazy" alt="" width="750" /></a>
</p>

<p>
<strong>Re-open the web <abbr title="Graphical User Interface">GUI</abbr>:</strong> Navigate to new address you assigned in the previous step (e.g. <a href="http://192.168.1.2" class="urlextern" title="http://192.168.1.2" rel="ugc nofollow">http://192.168.1.2</a>).<br/>

Make sure your browser uses the new <abbr title="Internet Protocol">IP</abbr> address you assigned in the previous step.<br/>

Why? Because in the next step, the gateway needs to be changed to point to the main router, and LuCI will not allow you to change the gateway to 192.168.1.1 while the wireless <abbr title="Access Point">AP</abbr> router is using that <abbr title="Internet Protocol">IP</abbr> address.<br/>

If things are not working as expected, unplug the network cable from your computer for 10 seconds and plug in again. The currently still active <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server on your wireless <abbr title="Access Point">AP</abbr> will then reassign an <abbr title="Internet Protocol">IP</abbr> to you.<br/>

</p>

<p>
<strong>Change the other <abbr title="Local Area Network">LAN</abbr> settings:</strong> Navigate to <em>Network → Interfaces</em>, <strong>Edit</strong> the <em><abbr title="Local Area Network">LAN</abbr> interface</em>, <em>General Settings</em> tab.<br/>

</p>

<p>
<a href="/_detail/media/docs/howto/dumbap_4_gateway.jpg?id=docs%3Aguide-user%3Anetwork%3Awifi%3Awifiextenders%3Abridgedap" class="media" title="media:docs:howto:dumbap_4_gateway.jpg"><img src="/_media/media/docs/howto/dumbap_4_gateway.jpg?w=750&amp;tok=6db4af" class="media" loading="lazy" alt="" width="750" /></a>
</p>

<p>
<strong>Set the <em><abbr title="Internet Protocol version 4">IPv4</abbr> gateway</em></strong> to your main router, 192.168.1.1 by default. This means wireless <abbr title="Access Point">AP</abbr> router will use the main router as gateway to the internet.<br/>

</p>

<p>
<a href="/_detail/media/docs/howto/dumbap_5_dns.jpg?id=docs%3Aguide-user%3Anetwork%3Awifi%3Awifiextenders%3Abridgedap" class="media" title="media:docs:howto:dumbap_5_dns.jpg"><img src="/_media/media/docs/howto/dumbap_5_dns.jpg?w=750&amp;tok=c27dcf" class="media" loading="lazy" alt="" width="750" /></a>
</p>

<p>
<strong>Set the <abbr title="Domain Name System">DNS</abbr> Server:</strong> Same page but the <em>Advanced Settings</em> tab. Enter the <abbr title="Internet Protocol">IP</abbr> of your main router in the <em>Use custom <abbr title="Domain Name System">DNS</abbr> servers</em> field and click <em>+</em>. The Wireless <abbr title="Access Point">AP</abbr> will use the main router for <abbr title="Domain Name System">DNS</abbr> lookups.
</p>

<p>
<a href="/_detail/media/docs/howto/dumbap_6_dhcp.jpg?id=docs%3Aguide-user%3Anetwork%3Awifi%3Awifiextenders%3Abridgedap" class="media" title="media:docs:howto:dumbap_6_dhcp.jpg"><img src="/_media/media/docs/howto/dumbap_6_dhcp.jpg?w=750&amp;tok=8c2238" class="media" loading="lazy" alt="" width="750" /></a>
</p>

<p>
<strong>Disable DHCPv4:</strong> Same page again, now the <em><abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> Server</em> tab. Ensure the <em>Ignore interface</em> checkbox is checked. The wireless <abbr title="Access Point">AP</abbr> will <em>not</em> provide <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> addresses, but will defer to the main router. <br/>

</p>

<p>
<a href="/_detail/media/docs/howto/dumbap_7_dhcp_ip6.jpg?id=docs%3Aguide-user%3Anetwork%3Awifi%3Awifiextenders%3Abridgedap" class="media" title="media:docs:howto:dumbap_7_dhcp_ip6.jpg"><img src="/_media/media/docs/howto/dumbap_7_dhcp_ip6.jpg?w=750&amp;tok=f69ae0" class="media" loading="lazy" alt="" width="750" /></a>
</p>

<p>
<strong>Disable <abbr title="Internet Protocol version 6">IPv6</abbr> <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>:</strong> Same page, <em><abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> Server</em> tab, click on the <em><abbr title="Internet Protocol version 6">IPv6</abbr> Settings</em> sub-tab. Set the <em>RA-Service</em>, <em>DHCPv6-Service</em>, and <em>NDP-Proxy</em> dropdowns to <em>disabled</em>.<br/>

</p>

<p>
Click <strong>Save</strong> and <strong>Save &amp; Apply</strong>.
</p>

<p>
<a href="/_detail/media/docs/howto/dumbap_8_dhcp_sanda.jpg?id=docs%3Aguide-user%3Anetwork%3Awifi%3Awifiextenders%3Abridgedap" class="media" title="media:docs:howto:dumbap_8_dhcp_sanda.jpg"><img src="/_media/media/docs/howto/dumbap_8_dhcp_sanda.jpg?w=750&amp;tok=b3c5d6" class="media" loading="lazy" alt="" width="750" /></a>
</p>

<p>
The most important steps are done, your wireless <abbr title="Access Point">AP</abbr> works!<br/>

</p>

<p>
For OpenWrt One devices, now consider editing devices and edit br-lan to also include, Ethernet Adapter: “ethO” (wan, wan6), which will allow (viewing from the rear) right-hand-side port as a regular ethernet to access the existing network. See “Optional: Add wan port to the lan bridge” earlier.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Changing configuration for Bridged AP&quot;,&quot;hid&quot;:&quot;changing_configuration_for_bridged_ap&quot;,&quot;codeblockOffset&quot;:7,&quot;secid&quot;:14,&quot;range&quot;:&quot;10993-14765&quot;} -->
<h3 class="sectionedit15" id="fine_tuning">Fine Tuning</h3>
<div class="level3">

<p>
Read next steps for some fine tuning, enabling <abbr title="Wireless Local Area Network">WLAN</abbr>, or adding a Guest Network:<br/>

</p>

<p>
It is generally recommended to leave the dnsmasq and firewall services enabled. Some users may decide to disable these services as a means of saving resources, but the actual benefit is minimal and it is best to leave them running, while explicitly disabling the <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> server as shown above. Importantly, there is no need to modify the firewall configuration. Leave that as-is. 
</p>

<p>
If you plan to add a “GUEST” network on your wireless <abbr title="Access Point">AP</abbr> (see this guide: <a href="/docs/guide-user/network/wifi/guestwifi/guestwifi_dumbap" class="wikilink1" title="docs:guide-user:network:wifi:guestwifi:guestwifi_dumbap" data-wiki-id="docs:guide-user:network:wifi:guestwifi:guestwifi_dumbap">guestwifi_dumbap</a>), it is critical that the firewall and dnsmasq services are enabled.
</p>
<ul>
<li class="level1"><div class="li"> Note that by default OpenWrt does not enable wireless access. So, from a default installation, at minimum will need to review the wireless SSIDs, enable wireless security, set country code, and then enable the wireless radios from the <em>Network → Wireless</em> page. More information on wifi can found on <a href="/docs/guide-quick-start/basic_wifi" class="wikilink1" title="docs:guide-quick-start:basic_wifi" data-wiki-id="docs:guide-quick-start:basic_wifi">basic_wifi</a>. Additional wifi guides can be found on <a href="/docs/guide-user/network/wifi/start" class="wikilink1" title="docs:guide-user:network:wifi:start" data-wiki-id="docs:guide-user:network:wifi:start">wifi</a>.</div>
</li>
<li class="level1"><div class="li"> Click the <em>Save and Apply</em> button.</div>
</li>
</ul>

<p>
Use an Ethernet cable to connect one of the <abbr title="Local Area Network">LAN</abbr> ports on your main router to one of the <abbr title="Local Area Network">LAN</abbr> ports (<strong>not</strong> the <em><abbr title="Wide Area Network">WAN</abbr></em><em>/Internet</em> port) of the wireless <abbr title="Access Point">AP</abbr>.
You may need to reboot either or both routers, the device connecting your main router to the Internet, and potentially any connected devices. In many cases this will not be necessary.<br/>

Done!<br/>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Fine Tuning&quot;,&quot;hid&quot;:&quot;fine_tuning&quot;,&quot;codeblockOffset&quot;:7,&quot;secid&quot;:15,&quot;range&quot;:&quot;14766-16278&quot;} -->
<h2 class="sectionedit16" id="populate_hostnames_in_associated_stations">Populate Hostnames in Associated Stations</h2>
<div class="level2">

<p>
Bridged APs will not have the data to display hostnames of the associated devices.  Only MAC addresses are known to it.  Users wanting to see the corresponding hostnames in the Associated Stations display in LuCI can manually populate <code>/etc/ethers</code> on the dumb <abbr title="Access Point">AP</abbr>:
</p>

<p>
On the router, one can extract these data with the following one-liner:
</p>
<pre class="code">&lt; dhcp.leases | awk &#039;{print $2&quot; &quot;$4}&#039;
# or
awk &#039;$4 != &quot;*&quot;{print $2&quot; &quot;$4}&#039; /tmp/dhcp.leases</pre>

<p>
See the following discussion threads for additional approaches:
</p>
<ul>
<li class="level1"><div class="li"> Using fping to populate ethers file: <a href="https://forum.openwrt.org/t/associated-stations-list-in-ap-how-to-show-host-names/63475/6" class="urlextern" title="https://forum.openwrt.org/t/associated-stations-list-in-ap-how-to-show-host-names/63475/6" rel="ugc nofollow">https://forum.openwrt.org/t/associated-stations-list-in-ap-how-to-show-host-names/63475/6</a></div>
</li>
<li class="level1"><div class="li"> An improved fping approach: <a href="https://forum.openwrt.org/t/second-device-not-getting-dns-entries-from-first-device-to-show-in-associated-stations/57005/14" class="urlextern" title="https://forum.openwrt.org/t/second-device-not-getting-dns-entries-from-first-device-to-show-in-associated-stations/57005/14" rel="ugc nofollow">https://forum.openwrt.org/t/second-device-not-getting-dns-entries-from-first-device-to-show-in-associated-stations/57005/14</a></div>
</li>
<li class="level1"><div class="li"> Propagating dhcp.leases to secondary (dumb) access points: <a href="https://forum.openwrt.org/t/associated-stations-making-hostnames-visible-across-multiple-aps/92593" class="urlextern" title="https://forum.openwrt.org/t/associated-stations-making-hostnames-visible-across-multiple-aps/92593" rel="ugc nofollow">https://forum.openwrt.org/t/associated-stations-making-hostnames-visible-across-multiple-aps/92593</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Populate Hostnames in Associated Stations&quot;,&quot;hid&quot;:&quot;populate_hostnames_in_associated_stations&quot;,&quot;codeblockOffset&quot;:7,&quot;secid&quot;:16,&quot;range&quot;:&quot;16279-17293&quot;} -->
<h2 class="sectionedit17" id="multicast">Multicast</h2>
<div class="level2">

<p>
DLNA and UPnP clients, and printer or SMB discovery protocols tend to work by using multicast packets. For example PlayStation, Xbox, and TVs use DLNA to detect, communicate with and stream audio/video over the network. By default on bridged interfaces on OpenWrt multicast snooping is turned off. This means all network interfaces connected to a bridge (such as a WiFi SSID and ethernet <abbr title="Virtual Local Area Network">VLAN</abbr>) will receive multicast packets as if they were broadcast packets.
</p>

<p>
On WiFi the <em>slowest</em> modulation available is used for multicast packets (so that everyone can hear them). If you have “enabled legacy 802.11b rates” on your WiFi (Advanced settings checkbox in LuCI under the WiFi settings, or <code>option legacy_rates &#039;1</code>&#039; in /etc/config/wireless file) then 1Mbps is the rate that will be used. This can completely use up the WiFi airtime with even fairly light multicast streaming. 
</p>

<p>
There are two possible fixes for this, one is to <em>enable</em> multicast snooping: <code>option igmp_snooping &#039;1</code>&#039; under the appropriate /etc/config/network settings for the bridge. This will cause the bridge to forward only on bridge ports that have requested to receive the particular multicast group. On the other hand, if someone on WiFi requests the group, it will still flood the multicast there, and some people have reported problems with certain devices such as android phones and with ipv6 when igmp_snooping is enabled (requires further debugging to identify if there is really a problem or not). By <em>disabling</em> legacy 802.11b rates (<code>option legacy_rates &#039;0</code>&#039;) you can at least force the use of 6Mbps or more on the WiFi multicast packets, and this opens up more airtime for other uses. 
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Multicast&quot;,&quot;hid&quot;:&quot;multicast&quot;,&quot;codeblockOffset&quot;:8,&quot;secid&quot;:17,&quot;range&quot;:&quot;17294-18994&quot;} -->
<h2 class="sectionedit18" id="external_videos">External Videos</h2>
<div class="level2">

<p>
Several videos are available on the topic which may be useful for background information.<br/>

Bare in mind they are somewhat outdated and generally do not take into account everything.
</p>

<p>
Using OpenWrt v21 with DSA example:
</p>
<iframe src="//www.youtube-nocookie.com/embed/qeuZqRqH-ug?" width="425" height="239" style="width:425px;height:239px;" class="vshare vshare__none" allowfullscreen="" frameborder="0" scrolling="no" data-domain="www.youtube-nocookie.com"><h3></h3></iframe>
<p>
Two videos which are outdated but explain firewall and APs:
</p>
<iframe src="//www.youtube-nocookie.com/embed/UvniZs8q3eU?" width="425" height="239" style="width:425px;height:239px;" class="vshare vshare__none" allowfullscreen="" frameborder="0" scrolling="no" data-domain="www.youtube-nocookie.com"><h3></h3></iframe><iframe src="//www.youtube-nocookie.com/embed/4t_S2oWsBpE?" width="425" height="239" style="width:425px;height:239px;" class="vshare vshare__none" allowfullscreen="" frameborder="0" scrolling="no" data-domain="www.youtube-nocookie.com"><h3></h3></iframe>
<p>
WiFi roaming is much improved in newer mobile devices so configuring Fast Roaming, aka 802.11r, may not be required.<br/>

This video can be misleading as 802.11r has nothing to do with mesh networking.
</p>
<iframe src="//www.youtube-nocookie.com/embed/kMgs2XFClaM?" width="425" height="239" style="width:425px;height:239px;" class="vshare vshare__none" allowfullscreen="" frameborder="0" scrolling="no" data-domain="www.youtube-nocookie.com"><h3></h3></iframe>
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;External Videos&quot;,&quot;hid&quot;:&quot;external_videos&quot;,&quot;codeblockOffset&quot;:8,&quot;secid&quot;:18,&quot;range&quot;:&quot;18995-19607&quot;} -->
<h2 class="sectionedit19" id="notes">Notes</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> Dumb <abbr title="Access Point">AP</abbr> wireless can be configured to control access via Open/WPA/WPA2/WPA3. However MAC-based access control is controlled by the main router.</div>
</li>
<li class="level1"><div class="li"> Static <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> is not covered here. This procedure creates an <abbr title="Access Point">AP</abbr> that provides wired/wireless access and won&#039;t interfere with Static <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>.</div>
</li>
<li class="level1"><div class="li"> Firewall bridge mode support in OpenWrt is provided by the <a href="/packages/pkgdata/kmod-br-netfilter" class="wikilink1" title="packages:pkgdata:kmod-br-netfilter" data-wiki-id="packages:pkgdata:kmod-br-netfilter">kmod-br-netfilter</a> module.</div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Notes&quot;,&quot;hid&quot;:&quot;notes&quot;,&quot;codeblockOffset&quot;:8,&quot;secid&quot;:19,&quot;range&quot;:&quot;19608-&quot;} -->