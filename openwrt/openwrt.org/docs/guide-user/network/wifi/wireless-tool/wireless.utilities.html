
<h1 class="sectionedit1" id="wireless_utilities">Wireless Utilities</h1>
<div class="level1">

<p>
As explained at <a href="/docs/guide-user/network/wifi/wireless.overview" class="wikilink1" title="docs:guide-user:network:wifi:wireless.overview" data-wiki-id="docs:guide-user:network:wifi:wireless.overview">wireless.overview</a> the Linux IEEE 802.11 subsystem is fragmented. The available tools depend entirely on the <a href="https://wireless.wiki.kernel.org/en/users/drivers" class="urlextern" title="https://wireless.wiki.kernel.org/en/users/drivers" rel="ugc nofollow">driver</a> associated with your wireless device. These have an <abbr title="Application Programming Interface">API</abbr> different from that of Ethernet devices because the specifications of IEEE 802.11 regulate quite precisely the communications process. Therefore it makes sense to <em>not</em> implement these requirements in each driver but only once for all drivers, and also because there is the problem of diverging frequency regulations worldwide.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Wireless Utilities&quot;,&quot;hid&quot;:&quot;wireless_utilities&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-638&quot;} -->
<h2 class="sectionedit2" id="mac80211_based_drivers">mac80211 based drivers</h2>
<div class="level2">

<p>
Common drivers based on this kernel subsystem include most of <a href="/docs/techref/driver.wlan/start" class="wikilink1" title="docs:techref:driver.wlan:start" data-wiki-id="docs:techref:driver.wlan:start">driver.wlan</a>: ath11k, mt76, rtl819x, mwlwifi, brcmfmac, etc.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;mac80211 based drivers&quot;,&quot;hid&quot;:&quot;mac80211_based_drivers&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;639-819&quot;} -->
<h3 class="sectionedit3" id="iwinfo">iwinfo</h3>
<div class="level3">

<p>
<code>iwinfo</code> is a CLI frontend to the custom library, which assembles information from various places. It is also used by <a href="/doc/howto/luci" class="wikilink2" title="doc:howto:luci" rel="nofollow" data-wiki-id="doc:howto:luci">LuCI</a>
</p>
<ul>
<li class="level1"><div class="li"> When in <abbr title="Access Point">AP</abbr>-mode, obtain a list of connected clients in STA-mode:<pre class="code bash">iwinfo wlan0<span class="sy0">/</span>wl0<span class="sy0">/</span>ath0 assoclist</pre>
</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;iwinfo&quot;,&quot;hid&quot;:&quot;iwinfo&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;820-1095&quot;} -->
<h3 class="sectionedit4" id="iw">iw</h3>
<div class="level3">

<p>
<code><a href="https://manpages.debian.org/man/8/iw" class="urlextern" title="https://manpages.debian.org/man/8/iw" rel="ugc nofollow">iw</a></code> is the configuration utility for the <a href="https://wireless.wiki.kernel.org/en/developers/documentation/nl80211" class="urlextern" title="https://wireless.wiki.kernel.org/en/developers/documentation/nl80211" rel="ugc nofollow">nl80211</a> <abbr title="Application Programming Interface">API</abbr>.
</p>
<ul>
<li class="level1"><div class="li"> Add a new virtual interface with the given configuration:<pre class="code">iw dev &lt;devname&gt; interface add &lt;name&gt; type &lt;type&gt; [mesh_id &lt;meshid&gt;] [4addr on|off] [flags &lt;flag&gt;*]</pre>

<p>
 Valid interface types are: managed, ibss, monitor, mesh, wds. See →<a href="https://wireless.wiki.kernel.org/en/users/documentation/modes" class="urlextern" title="https://wireless.wiki.kernel.org/en/users/documentation/modes" rel="ugc nofollow">wireless modes</a><br/>
The flags are only used for monitor interfaces, valid flags are: none, fcsfail, control, otherbss, cook
</p>
</div>
</li>
<li class="level1"><div class="li"> Add a new virtual interface with the given configuration:<pre class="code">iw phy &lt;phyname&gt; interface add &lt;name&gt; type &lt;type&gt; [flags &lt;flag&gt;*]</pre>
</div>
</li>
<li class="level1"><div class="li"> Getting the currently set regulatory domain:<pre class="code">iw reg get</pre>
</div>
</li>
<li class="level1"><div class="li"> When in <abbr title="Access Point">AP</abbr>-mode, obtain a list of connected clients in STA-mode:<pre class="code">iw dev wlan0 station dump</pre>

<p>
 The above also lists retry and fail packet counts, which are helpful in determining if wireless congestion (e.g. from many nearby 2.4GHz networks on the same channel in an apartment complex) is the source of throughput issues.
</p>
</div>
</li>
<li class="level1"><div class="li"> Setting regulatory domain. Set your country <a href="https://en.wikipedia.org/wiki/ISO 3166-1 alpha-2" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/ISO 3166-1 alpha-2">ISO 3166-1 alpha-2</a> in capital letters:<pre class="code">iw reg set XX</pre>
</div>
</li>
</ul>

<p>
<strong><code>Note:</code></strong> The <code>ath9k</code> driver (and all other softmac drivers?) sets its own regulatory restrictions based on its EEPROM, i.e. the <a href="/docs/techref/flash.layout" class="wikilink1" title="docs:techref:flash.layout" data-wiki-id="docs:techref:flash.layout">ART (Atheros Radio Test) partition</a> on flash. Setting the domain from userland can only further restrict the regulatory settings. So if EEPROM says Japan, you can use all 14 channels, if you then set it to US, you can use merely the 12. It does not work the other way around, i.e. if EEPROM says US, you only can use the allowed 12 channels, no matter what you set in userspace! The value <code>98</code> represents a synthesized regulatory domain, based on the intersection of the available source of regulatory information (which can include the EEPROM, the userland setting, and a country <abbr title="Internet Explorer">IE</abbr> from your <abbr title="Access Point">AP</abbr>).
</p>
<ul>
<li class="level1"><div class="li"> Question: Is there any way to get/set these raw settings (like, whatever it has in EEPROM)?</div>
</li>
<li class="level1 node"><div class="li"> Answer: Your “expectation” of having the freedom to modify the EEPROM is valid as I agree with it too but current (US) legislation does not allow for it. So to support upstream drivers we just cannot allow for those type of changes. You won&#039;t get any support if you try to mess with that stuff unless we get a change in legislation that says otherwise. Please refer to:</div>
<ul>
<li class="level2"><div class="li"> <a href="https://wireless.wiki.kernel.org/en/vendors/VendorSupport" class="urlextern" title="https://wireless.wiki.kernel.org/en/vendors/VendorSupport" rel="ugc nofollow">https://wireless.wiki.kernel.org/en/vendors/VendorSupport</a></div>
</li>
<li class="level2"><div class="li"> <a href="https://wireless.wiki.kernel.org/en/developers/Regulatory/statement" class="urlextern" title="https://wireless.wiki.kernel.org/en/developers/Regulatory/statement" rel="ugc nofollow">https://wireless.wiki.kernel.org/en/developers/Regulatory/statement</a></div>
</li>
<li class="level2"><div class="li"> <a href="https://wireless.wiki.kernel.org/en/developers/Regulatory" class="urlextern" title="https://wireless.wiki.kernel.org/en/developers/Regulatory" rel="ugc nofollow">https://wireless.wiki.kernel.org/en/developers/Regulatory</a></div>
</li>
<li class="level2"><div class="li"> <a href="https://git.kernel.org/pub/scm/linux/kernel/git/sforshee/wireless-regdb.git/tree/db.txt" class="urlextern" title="https://git.kernel.org/pub/scm/linux/kernel/git/sforshee/wireless-regdb.git/tree/db.txt" rel="ugc nofollow">Regulations per country</a></div>
</li>
</ul>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;iw&quot;,&quot;hid&quot;:&quot;iw&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:4,&quot;range&quot;:&quot;1096-3942&quot;} -->
<h3 class="sectionedit5" id="iwconfig">iwconfig</h3>
<div class="level3">

<p>
<code><a href="https://manpages.debian.org/man/8/iwconfig" class="urlextern" title="https://manpages.debian.org/man/8/iwconfig" rel="ugc nofollow">iwconfig</a></code> (and <code>/proc/net/wireless</code>) is the configuration utility for the now <span style='color:red; '>obsolete</span> <a href="https://wireless.wiki.kernel.org/en/developers/documentation/wireless-extensions" class="urlextern" title="https://wireless.wiki.kernel.org/en/developers/documentation/wireless-extensions" rel="ugc nofollow">Wext</a> <abbr title="Application Programming Interface">API</abbr> scheduled for removal. Use <code>iw</code> or <code>iwinfo</code>.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;iwconfig&quot;,&quot;hid&quot;:&quot;iwconfig&quot;,&quot;codeblockOffset&quot;:6,&quot;secid&quot;:5,&quot;range&quot;:&quot;3943-4263&quot;} -->
<h3 class="sectionedit6" id="hostapd">Hostapd</h3>
<div class="level3">

<p>
The mac80211 subsystem moves all aspects of <em>master mode</em> (a.k.a. <abbr title="Access Point">AP</abbr> mode) into user space, thus it depends on <code><a href="http://man.cx/hostapd" class="interwiki iw_man" title="http://man.cx/hostapd">hostapd</a></code> (also read <a href="http://www.linuxwireless.org/en/users/Documentation/hostapd" class="urlextern" title="http://www.linuxwireless.org/en/users/Documentation/hostapd" rel="ugc nofollow">Hostapd</a>) to
</p>
<ul>
<li class="level1"><div class="li"> handle authenticating clients,</div>
</li>
<li class="level1"><div class="li"> set encryption keys,</div>
</li>
<li class="level1"><div class="li"> establishing key rotation policy,</div>
</li>
<li class="level1"><div class="li"> handle other aspects of the wireless infrastructure.</div>
</li>
</ul>

<p>
Due to this, the old method of issuing <code>iwconfig &lt;wireless interface&gt; mode master</code> no longer works. Userspace programs like hostapd now use <a href="https://en.wikipedia.org/wiki/netlink" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/netlink">netlink</a> (the nl80211 driver) to create a master mode interface for your traffic and a monitor mode interface for receiving and transmitting management frames. 
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Hostapd&quot;,&quot;hid&quot;:&quot;hostapd&quot;,&quot;codeblockOffset&quot;:6,&quot;secid&quot;:6,&quot;range&quot;:&quot;4264-4967&quot;} -->
<h3 class="sectionedit7" id="wpad">wpad</h3>
<div class="level3">

<p>
Is a hostapd + <a href="/doc/howto/wireless.utilities_wpa-supplicant" class="wikilink2" title="doc:howto:wireless.utilities_wpa-supplicant" rel="nofollow" data-wiki-id="doc:howto:wireless.utilities_wpa-supplicant">wpa_supplicant</a> multicall binary.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;wpad&quot;,&quot;hid&quot;:&quot;wpad&quot;,&quot;codeblockOffset&quot;:6,&quot;secid&quot;:7,&quot;range&quot;:&quot;4968-5079&quot;} -->
<h3 class="sectionedit8" id="hostapd-mini_and_wpad-mini">hostapd-mini and wpad-mini</h3>
<div class="level3">

<p>
Are stripped down versions without OpenSSL dependency.
</p>
<div class="table sectionedit9"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign" colspan="3"> Available Packages  </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> hostapd             </td><td class="col1 rightalign">   232.885 </td><td class="col2 leftalign"> This package contains a full featured IEEE 802.1x/WPA/EAP/RADIUS Authenticator. <br/>
<code>/etc/hostapd.conf</code> is generated by <code>hostapd.sh</code>  </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> hostapd-utils       </td><td class="col1 rightalign">    10.198 </td><td class="col2 leftalign"> This package contains a command line utility to control the IEEE 802.1x/WPA/EAP/RADIUS Authenticator.  </td>
	</tr>
	<tr class="row3">
		<th class="col0" colspan="3"> </th>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> hostapd-mini        </td><td class="col1 rightalign">   134.598 </td><td class="col2"> This package contains a minimal IEEE 802.1x/WPA Authenticator (Alles Version: 20110527-2) </td>
	</tr>
	<tr class="row5">
		<th class="col0" colspan="3"> </th>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> wpad                </td><td class="col1 rightalign">   355.463 </td><td class="col2 leftalign"> This package contains a full featured IEEE 802.1x/WPA/EAP/RADIUS Authenticator and Supplicant  </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <a href="/doc/howto/wireless.utilities_wpa-supplicant" class="wikilink2" title="doc:howto:wireless.utilities_wpa-supplicant" rel="nofollow" data-wiki-id="doc:howto:wireless.utilities_wpa-supplicant">wpa-supplicant</a>      </td><td class="col1 rightalign">   220.602 </td><td class="col2 leftalign"> WPA Supplicant  </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> wpa-cli             </td><td class="col1 rightalign">    19.887 </td><td class="col2 leftalign"> WPA Supplicant command line interface  </td>
	</tr>
	<tr class="row9">
		<th class="col0" colspan="3"> </th>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> wpad-mini           </td><td class="col1 rightalign">   203.085 </td><td class="col2 leftalign"> This package contains a minimal IEEE 802.1x/WPA Authenticator and Supplicant (WPA-PSK only).  </td>
	</tr>
	<tr class="row11">
		<td class="col0"> wpa-supplicant-mini </td><td class="col1 rightalign">   111.984 </td><td class="col2 leftalign"> WPA Supplicant (minimal version)  </td>
	</tr>
	<tr class="row12">
		<th class="col0" colspan="3"> </th>
	</tr>
	<tr class="row13">
		<td class="col0 leftalign"> libnl-tiny          </td><td class="col1 rightalign">    13.529 </td><td class="col2 leftalign"> This package contains a stripped down version of libnl; all packages in hostapd depend on it  </td>
	</tr>
	<tr class="row14">
		<td class="col0 leftalign"> libnl               </td><td class="col1 rightalign">   107.504 </td><td class="col2 leftalign"> This package contains a library for applications dealing with <a href="https://en.wikipedia.org/wiki/netlink" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/netlink">netlink</a> sockets  </td>
	</tr>
	<tr class="row15">
		<td class="col0 leftalign"> xsupplicant         </td><td class="col1 rightalign">   122.996 </td><td class="col2"> This software allows a host to authenticate with a RADIUS server using 802.1x and various EAP protocols. </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:9,&quot;range&quot;:&quot;5173-6581&quot;} --><div class="table sectionedit10"><table class="inline">
	<tr class="row0">
		<td class="col0"><img src="/_media/meta/icons/tango/dialog-information.png" class="media" loading="lazy" alt="" /></td><td class="col1"> <strong><code>wpad</code></strong> package is a full featured IEEE 802.1x authenticator/supplicant (<a href="https://en.wikipedia.org/wiki/Wi-Fi Protected Access" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Wi-Fi Protected Access">WPA</a>/<a href="https://en.wikipedia.org/wiki/Extensible Authentication Protocol" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Extensible Authentication Protocol">EAP</a>/<a href="https://en.wikipedia.org/wiki/Remote Authentication Dial In User Service" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Remote Authentication Dial In User Service">RADIUS</a>), while <strong><code>wpad-mini</code></strong> only supports WPA-PSK (Pre-shared key). <strong><code>wpad</code></strong> obsoletes <strong><code>hostapd</code></strong> and <code><a href="/doc/howto/wireless.utilities_wpa-supplicant" class="wikilink2" title="doc:howto:wireless.utilities_wpa-supplicant" rel="nofollow" data-wiki-id="doc:howto:wireless.utilities_wpa-supplicant">wpa_supplicant</a></code> as it offers both authentication service for the access point mode and supplicant services for the wireless client mode in one package. </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table1&quot;,&quot;secid&quot;:10,&quot;range&quot;:&quot;6583-7165&quot;} -->
<p>
Also see <a href="/docs/guide-user/network/wifi/encryption#atherosandgenericmac80211wifi" class="wikilink1" title="docs:guide-user:network:wifi:encryption" data-wiki-id="docs:guide-user:network:wifi:encryption">atheros.and.generic.mac80211.wifi</a>
</p>

<p>
<img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />:
</p>
<ul>
<li class="level1"><div class="li"> As far as I understand, wpad is a wrapper around hostapd with multicall support and <a href="/doc/howto/wireless.utilities_wpa-supplicant" class="wikilink2" title="doc:howto:wireless.utilities_wpa-supplicant" rel="nofollow" data-wiki-id="doc:howto:wireless.utilities_wpa-supplicant">wpa_supplicant</a> built.</div>
</li>
<li class="level1 node"><div class="li"> Both wpad and wpad-mini are just wrappers around &#039;hostapd&#039; with support packages, see <a href="https://dev.openwrt.org/browser/trunk/package/hostapd/Makefile" class="urlextern" title="https://dev.openwrt.org/browser/trunk/package/hostapd/Makefile" rel="ugc nofollow">https://dev.openwrt.org/browser/trunk/package/hostapd/Makefile</a></div>
<ul>
<li class="level2"><div class="li"> <code>wpad-mini</code> is the base system with only WPA(2)-PSK authentication.</div>
</li>
<li class="level2"><div class="li"> <code>wpad</code> supports IEEE 802.1x/WPA/EAP/RADIUS (adds the &#039;WPA supplicant&#039; package with OpenSSL library)</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> The <code>hostapd-utils</code> just adds a small hostapd_cli command line tool for messaging with the daemon.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <a href="/docs/guide-user/network/wifi/encryption#atherosandgenericmac80211wifi" class="wikilink1" title="docs:guide-user:network:wifi:encryption" data-wiki-id="docs:guide-user:network:wifi:encryption">atheros.and.generic.mac80211.wifi</a></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Actually, it&#039;s the other way around: hostapd is symlink to wpad, cf. <code>/usr/sbin/hostapd → wpad</code>.</div>
</li>
<li class="level1"><div class="li"> Turning off debugging for <code><a href="/doc/howto/wireless.utilities_wpa-supplicant" class="wikilink2" title="doc:howto:wireless.utilities_wpa-supplicant" rel="nofollow" data-wiki-id="doc:howto:wireless.utilities_wpa-supplicant">wpa_supplicant</a></code> decreased size of <code>wpad</code>-package from ~365 KiB to ~286 KiB. Turning off debugging for hostapd did nothing. Because it&#039;s a different binary, not included in <code>wpad</code>.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;hostapd-mini and wpad-mini&quot;,&quot;hid&quot;:&quot;hostapd-mini_and_wpad-mini&quot;,&quot;codeblockOffset&quot;:6,&quot;secid&quot;:8,&quot;range&quot;:&quot;5080-8319&quot;} -->
<h2 class="sectionedit11" id="drivers_without_cfg80211-support">drivers without cfg80211-support</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;drivers without cfg80211-support&quot;,&quot;hid&quot;:&quot;drivers_without_cfg80211-support&quot;,&quot;codeblockOffset&quot;:6,&quot;secid&quot;:11,&quot;range&quot;:&quot;8320-8364&quot;} -->
<h3 class="sectionedit12" id="atheros_proprietary_madwifi">Atheros proprietary (madwifi)</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> When in <abbr title="Access Point">AP</abbr>-mode, obtain a list of connected clients in STA-mode<pre class="code">wlanconfig ath0 list sta</pre>
</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Atheros proprietary (madwifi)&quot;,&quot;hid&quot;:&quot;atheros_proprietary_madwifi&quot;,&quot;codeblockOffset&quot;:6,&quot;secid&quot;:12,&quot;range&quot;:&quot;8365-8512&quot;} -->
<h3 class="sectionedit13" id="broadcom_proprietary_wl">Broadcom proprietary (wl)</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> When in <abbr title="Access Point">AP</abbr>-mode, obtain a list of connected clients in STA-mode:<pre class="code">wl assoclist
wl sta_info macaddr</pre>
</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Broadcom proprietary (wl)&quot;,&quot;hid&quot;:&quot;broadcom_proprietary_wl&quot;,&quot;codeblockOffset&quot;:7,&quot;secid&quot;:13,&quot;range&quot;:&quot;8513-&quot;} -->