
<h1 class="sectionedit1" id="kismet">Kismet</h1>
<div class="level1">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Kismet&quot;,&quot;hid&quot;:&quot;kismet&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-22&quot;} -->
<h2 class="sectionedit2" id="introduktion">Introduktion</h2>
<div class="level2">

<p>
<a href="https://en.wikipedia.org/wiki/Kismet (software)" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Kismet (software)">Kismet (software)</a> is an Layer2 IEEE 802.11 network detector and <a href="https://en.wikipedia.org/wiki/Packet analyzer" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Packet analyzer">sniffer</a>. It can be utilized as <a href="https://en.wikipedia.org/wiki/Intrusion detection system" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Intrusion detection system">Intrusion detection system</a>. Kismet works with WNICs in <em>monitor mode</em>, which means it works completely passive! Kismet is split into three separate modules:
</p>
<div class="table sectionedit3"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign"> Package       </th><th class="col1 leftalign"> Version      </th><th class="col2 leftalign"> Dependencies  </th><th class="col3 centeralign">  Size  </th><th class="col4 leftalign"> Description  </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> kismet-drone  </td><td class="col1"> 2010-07-R1-1 </td><td class="col2"> uclibcxx, libnl-tiny, libpcap, libpcre </td><td class="col3 rightalign">  199.510 </td><td class="col4 leftalign"> This package contains the kismet remote sniffing and monitoring drone. The drone is a small program which gets the raw data from the wireless card itself.  </td>
	</tr>
	<tr class="row2">
		<td class="col0"> kismet-server </td><td class="col1"> 2010-07-R1-1 </td><td class="col2"> uclibcxx, libnl-tiny, libpcap, libpcre </td><td class="col3 rightalign">  352.618 </td><td class="col4 leftalign"> This package contains the kismet server. The server is the piece if software that sits in the middle of the drone and the client.  </td>
	</tr>
	<tr class="row3">
		<td class="col0"> kismet-client </td><td class="col1"> 2010-07-R1-1 </td><td class="col2"> uclibcxx, libnl-tiny, libncurses </td><td class="col3 rightalign">  300.376 </td><td class="col4 leftalign"> An 802.11 layer2 wireless network detector, sniffer, and intrusion detection system. This package contains the kismet text interface client. The client is the user interface to display the results on your screen.  </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:3,&quot;range&quot;:&quot;340-1168&quot;} -->
<p>
It is possible and due to limited resources prudent to split the work amongst your OpenWrt-enabled router and a host machine running some Linux distribution!
</p>

<p>
<strong><code>Note1:</code></strong> <code>kismet-drone</code> from OpenWrt repos does not support channel hopping to search through all of the wireless channels! A small script has to be ran to manually do the channel hopping.<br/>

<strong><code>Note2:</code></strong> Also, not all wireless drivers support the reporting of the received signal strength. So the client may not display the correct signal strength.<br/>

<strong><code>Note3:</code></strong> It is not possible to see management frames in monitor mode! Try <a href="/docs/guide-developer/debugging#wireless" class="wikilink1" title="docs:guide-developer:debugging" data-wiki-id="docs:guide-developer:debugging">wireless</a> instead.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Introduktion&quot;,&quot;hid&quot;:&quot;introduktion&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;23-1824&quot;} -->
<h2 class="sectionedit4" id="installation">Installation</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Installation&quot;,&quot;hid&quot;:&quot;installation&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;1825-1849&quot;} -->
<h3 class="sectionedit5" id="the_drone_on_openwrt">The Drone on OpenWrt</h3>
<div class="level3">

<p>
<a href="/docs/guide-user/additional-software/opkg" class="wikilink1" title="docs:guide-user:additional-software:opkg" data-wiki-id="docs:guide-user:additional-software:opkg">opkg</a>
</p>
<pre class="code">opkg update
opkg install kismet-drone</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;The Drone on OpenWrt&quot;,&quot;hid&quot;:&quot;the_drone_on_openwrt&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;1850-1979&quot;} -->
<h3 class="sectionedit6" id="the_server_the_client_on_host_machine">The Server + The Client on host machine</h3>
<div class="level3">
<pre class="code">sudo apt-get update
sudo apt-get install kismet</pre>

<p>
<a href="http://packages.debian.org/search?suite=squeeze&amp;arch=any&amp;searchon=names&amp;keywords=kismet" class="urlextern" title="http://packages.debian.org/search?suite=squeeze&amp;arch=any&amp;searchon=names&amp;keywords=kismet" rel="ugc nofollow">http://packages.debian.org/search?suite=squeeze&amp;arch=any&amp;searchon=names&amp;keywords=kismet</a>
</p>

<p>
If the version available in your distro&#039;s repositories does work with the one in the OpenWrt repos, you may need to install a matching one manually:
</p>
<pre class="code">mkdir ~/kismet
cd ~/kismet
wget http://www.kismetwireless.net/code/kismet-2011-03-R2.tar.gz
tar -zxvf kismet-2011-03-R2.tar.gz
cd &lt;kismet dir&gt;
./configure
make
make install</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;The Server + The Client on host machine&quot;,&quot;hid&quot;:&quot;the_server_the_client_on_host_machine&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:6,&quot;range&quot;:&quot;1980-2523&quot;} -->
<h2 class="sectionedit7" id="configuration">Configuration</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configuration&quot;,&quot;hid&quot;:&quot;configuration&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:7,&quot;range&quot;:&quot;2524-2549&quot;} -->
<h3 class="sectionedit8" id="the_drone_on_openwrt1">The Drone on OpenWrt</h3>
<div class="level3">
<pre class="code">vi /etc/kismet_drone.conf</pre>

<p>
Change the line
</p>
<div class="table sectionedit9"><table class="inline">
	<tr class="row0">
		<td class="col0"><code>allowedhosts=127.0.0.1</code></td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table1&quot;,&quot;secid&quot;:9,&quot;range&quot;:&quot;2639-2668&quot;} -->
<p>
to
</p>
<div class="table sectionedit10"><table class="inline">
	<tr class="row0">
		<td class="col0"><code>allowedhosts=&lt;address of desktop box&gt;</code></td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table2&quot;,&quot;secid&quot;:10,&quot;range&quot;:&quot;2672-2715&quot;} -->
<p>
(You could also allow access to all the machines on your local network by doing &#039;allowedhosts=a.b.c.0/24&#039; where a.b.c are the first three octets of your networks ip address.  This would also make it possible for more than one machine at a time to connect to the drone and display the results.)
</p>

<p>
Next, change the line
</p>
<div class="table sectionedit11"><table class="inline">
	<tr class="row0">
		<td class="col0"><code>source=wrt54g,eth2,Kismet-Drone</code></td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table3&quot;,&quot;secid&quot;:11,&quot;range&quot;:&quot;3034-3071&quot;} -->
<p>
to
</p>
<div class="table sectionedit12"><table class="inline">
	<tr class="row0">
		<td class="col0"><code>source=wrt54g,prism0,Kismet-Drone</code></td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table4&quot;,&quot;secid&quot;:12,&quot;range&quot;:&quot;3075-3115&quot;} -->
<p>
(I have read that this line should be different if running another version of the hardware - this works with v2.2 of the wrt54g).
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;The Drone on OpenWrt&quot;,&quot;hid&quot;:&quot;the_drone_on_openwrt1&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:8,&quot;range&quot;:&quot;2550-3246&quot;} -->
<h3 class="sectionedit13" id="the_server_on_debian">The Server on Debian</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> File: <code>/etc/kismet.conf</code> <strong>or</strong> File: <code>/usr/local/etc/kismet.conf</code></div>
</li>
</ul>

<p>
<strong><code>Note:</code></strong> I found that the config files were in <code>/etc/kismet</code> when installing using apt-get, but they were in <code>/usr/local/etc</code> when installing from source.]
</p>

<p>
First, you need to make a kismet user for the server to run as.
</p>
<pre class="code"> adduser kismet</pre>

<p>
...and fill in the blanks.  Then you need to edit the <code>/usr/local/etc/kismet.conf</code> file and change
</p>
<div class="table sectionedit14"><table class="inline">
	<tr class="row0">
		<td class="col0"><code>suiduser=your_user_here</code></td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table5&quot;,&quot;secid&quot;:14,&quot;range&quot;:&quot;3716-3745&quot;} -->
<p>
to
</p>
<div class="table sectionedit15"><table class="inline">
	<tr class="row0">
		<td class="col0"><code>suiduser=kismet</code></td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table6&quot;,&quot;secid&quot;:15,&quot;range&quot;:&quot;3749-3770&quot;} -->
<p>
Set the wireless source by changing
</p>
<div class="table sectionedit16"><table class="inline">
	<tr class="row0">
		<td class="col0"><code>source=none,none,addme</code></td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table7&quot;,&quot;secid&quot;:16,&quot;range&quot;:&quot;3807-3835&quot;} -->
<p>
to
</p>
<div class="table sectionedit17"><table class="inline">
	<tr class="row0">
		<td class="col0"><code>source=kismet_drone,&lt;wrt ip address&gt;:3501,wrt54g</code></td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table8&quot;,&quot;secid&quot;:17,&quot;range&quot;:&quot;3839-3893&quot;} -->
<p>
I found that kismet couldn&#039;t write its log files to the default directory, so changed the line
</p>
<div class="table sectionedit18"><table class="inline">
	<tr class="row0">
		<td class="col0"><code>logtemplate=%n-%d-%i.%l</code></td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table9&quot;,&quot;secid&quot;:18,&quot;range&quot;:&quot;3989-4018&quot;} -->
<p>
to
</p>
<div class="table sectionedit19"><table class="inline">
	<tr class="row0">
		<td class="col0"><code>logtemplate=%h/%n-%d-%i.%l</code></td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table10&quot;,&quot;secid&quot;:19,&quot;range&quot;:&quot;4022-4054&quot;} -->
<p>
so that the log files get saved in the kismet users directory (<code>/home/kismet</code>).
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;The Server on Debian&quot;,&quot;hid&quot;:&quot;the_server_on_debian&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:13,&quot;range&quot;:&quot;3247-4138&quot;} -->
<h3 class="sectionedit20" id="the_client_on_debian">The Client on Debian</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> File: <code>/etc/kismet.conf</code> <strong>or</strong> File: <code>/usr/local/etc/kismet.conf</code></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;The Client on Debian&quot;,&quot;hid&quot;:&quot;the_client_on_debian&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:20,&quot;range&quot;:&quot;4139-4245&quot;} -->
<h2 class="sectionedit21" id="execution">Execution</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Execution&quot;,&quot;hid&quot;:&quot;execution&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:21,&quot;range&quot;:&quot;4246-4267&quot;} -->
<h3 class="sectionedit22" id="on_openwrt">On OpenWrt</h3>
<div class="level3">
<ol>
<li class="level1 node"><div class="li"> put your WNIC into <em>Monitor mode</em>:</div>
<ol>
<li class="level2"><div class="li"> cfg80211 drivers:<pre class="code">iw bla bla bla</pre>
</div>
</li>
<li class="level2"><div class="li"> Atherors proprietary:<pre class="code">bla bla</pre>
</div>
</li>
<li class="level2"><div class="li"> Broadcom proprietary:<pre class="code">wl ap 0
wl disassoc
wl passive 1
wl promisc 1
wl channel &lt;channel number&gt;</pre>
</div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> start <code>kismet-drone</code>:<pre class="code">./kismet_drone -f kismet_drone.conf</pre>
</div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;On OpenWrt&quot;,&quot;hid&quot;:&quot;on_openwrt&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:22,&quot;range&quot;:&quot;4268-4628&quot;} -->
<h3 class="sectionedit23" id="on_host_machine">On host machine</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> First you will need to start the server in the background<pre class="code">/usr/local/bin/kismet_server &amp;</pre>
</div>
</li>
<li class="level1"><div class="li">  and then start the <abbr title="Graphical User Interface">GUI</abbr> client:<pre class="code">/usr/local/bin/kismet_client</pre>
</div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;On host machine&quot;,&quot;hid&quot;:&quot;on_host_machine&quot;,&quot;codeblockOffset&quot;:9,&quot;secid&quot;:23,&quot;range&quot;:&quot;4629-4840&quot;} -->
<h2 class="sectionedit24" id="troubleshooting">Troubleshooting</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Troubleshooting&quot;,&quot;hid&quot;:&quot;troubleshooting&quot;,&quot;codeblockOffset&quot;:11,&quot;secid&quot;:24,&quot;range&quot;:&quot;4841-4870&quot;} -->
<h2 class="sectionedit25" id="references">References</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://www.kismetwireless.net/documentation.shtm" class="urlextern" title="http://www.kismetwireless.net/documentation.shtm" rel="ugc nofollow">Project Website</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.renderlab.net/projects/wrt54g/openwrt.html" class="urlextern" title="http://www.renderlab.net/projects/wrt54g/openwrt.html" rel="ugc nofollow">http://www.renderlab.net/projects/wrt54g/openwrt.html</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.supertechguy.com/help/security/kismet-drone" class="urlextern" title="http://www.supertechguy.com/help/security/kismet-drone" rel="ugc nofollow">http://www.supertechguy.com/help/security/kismet-drone</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;References&quot;,&quot;hid&quot;:&quot;references&quot;,&quot;codeblockOffset&quot;:11,&quot;secid&quot;:25,&quot;range&quot;:&quot;4871-&quot;} -->