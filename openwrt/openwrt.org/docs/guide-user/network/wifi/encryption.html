
<h1 class="sectionedit1" id="configure_wi-fi_encryption">Configure Wi-Fi encryption</h1>
<div class="level1">

<p>
OpenWrt supports all major <a href="https://en.wikipedia.org/wiki/Wi-Fi_Alliance" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Wi-Fi_Alliance">Wi-Fi_Alliance</a> protocols including <a href="https://en.wikipedia.org/wiki/Wi-Fi_Protected_Access" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Wi-Fi_Protected_Access">Wi-Fi_Protected_Access</a> (WPA), the primary method of securing access to Wi-Fi.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configure Wi-Fi encryption&quot;,&quot;hid&quot;:&quot;configure_wi-fi_encryption&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-197&quot;} -->
<h2 class="sectionedit2" id="encryption_types">Encryption types</h2>
<div class="level2">

<p>
Support for the latest WPA standards is dependent on your devices hardware and related Wi-Fi drivers.
</p>
<ul>
<li class="level1"><div class="li"> WPA3: The current recommended version. Supports many new cryptographic techniques and has strong mitigations built-in for KRACK and other attacks.</div>
</li>
<li class="level1"><div class="li"> WPA2: Use if you have devices (STAs) that do not support WPA3. Enable this with KRACK mitigation, and specify PSK2+AES mode if possible.</div>
</li>
<li class="level1"><div class="li"> WPA1: Deprecated, insecure, and should not be used.</div>
</li>
<li class="level1"><div class="li"> WEP: Deprecated, insecure, and should not be used.</div>
</li>
</ul>

<p>
Others include mixed and enterprise versions of WPA2 and WPA3, OWE, and OWE transition. For a full list of supported encryption types, see: <a href="/docs/guide-user/network/wifi/basic#encryption_modes" class="wikilink1" title="docs:guide-user:network:wifi:basic" data-wiki-id="docs:guide-user:network:wifi:basic">encryption_modes</a>.
</p>

<p>
The configured encryption protocol is defined per network in the <code>wifi-iface</code> sections of the wireless configuration.
</p>

<p>
This can be configured in <a href="/doc/howto/luci" class="wikilink2" title="doc:howto:luci" rel="nofollow" data-wiki-id="doc:howto:luci">LuCI</a> under Network → Wireless → click edit on each radio.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Encryption types&quot;,&quot;hid&quot;:&quot;encryption_types&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;198-1155&quot;} -->
<h3 class="sectionedit3" id="broadcom_proprietary_wi-fi">Broadcom proprietary Wi-Fi</h3>
<div class="level3">

<p>
For Broadcom wireless chips use a proprietary driver that is generally not well supported in upstream Linux kernel. However it does work well enough for some targets and most use the newer mac80211 system.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Broadcom proprietary Wi-Fi&quot;,&quot;hid&quot;:&quot;broadcom_proprietary_wi-fi&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;1156-1399&quot;} -->
<h3 class="sectionedit4" id="atheros_and_generic_mac80211_wi-fi">Atheros and generic mac80211 Wi-Fi</h3>
<div class="level3">

<p>
For Atheros and mac80211 supported wireless chips, the <em>wpad</em>, <em>hostapd</em> or <em>wpa_supplicant</em> package is required.
</p>

<p>
The table below outlines the features supported by the packages and since which OpenWrt version they&#039;re available.
</p>
<div class="table sectionedit5"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Package </th><th class="col1"> <abbr title="Access Point">AP</abbr> support </th><th class="col2"> Client support </th><th class="col3"> WPA Enterprise </th><th class="col4"> OpenWrt Version </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> wpad </td><td class="col1"> yes </td><td class="col2"> yes </td><td class="col3"> yes </td><td class="col4"> 10.03+ </td>
	</tr>
	<tr class="row2">
		<td class="col0"> wpad-mini <strong>(recommended)</strong> </td><td class="col1"> yes </td><td class="col2"> yes </td><td class="col3"> no </td><td class="col4"> 10.03+ </td>
	</tr>
	<tr class="row3">
		<td class="col0"> hostapd </td><td class="col1"> yes </td><td class="col2"> no </td><td class="col3"> yes </td><td class="col4"> 7.06+ </td>
	</tr>
	<tr class="row4">
		<td class="col0"> hostapd-mini </td><td class="col1"> yes </td><td class="col2"> no </td><td class="col3"> no </td><td class="col4"> 8.09+ </td>
	</tr>
	<tr class="row5">
		<td class="col0"> wpa-supplicant </td><td class="col1"> no </td><td class="col2"> yes </td><td class="col3"> yes </td><td class="col4"> 7.06+ </td>
	</tr>
	<tr class="row6">
		<td class="col0"> wpa-supplicant-mini </td><td class="col1"> no </td><td class="col2"> yes </td><td class="col3"> no </td><td class="col4"> 8.09+ </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;1682-2022&quot;} -->
<p>
If not installed yet, choose the appropriate package for the desired configuration.
</p>
<pre class="code bash">opkg update
opkg <span class="kw2">install</span> wpad-mini</pre>

<p>
for x86 and ath10k 
</p>
<pre class="code bash">opkg update
opkg wpad-openssl</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Atheros and generic mac80211 Wi-Fi&quot;,&quot;hid&quot;:&quot;atheros_and_generic_mac80211_wi-fi&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;1400-2236&quot;} -->
<h3 class="sectionedit6" id="configure_wpa_psk">Configure WPA (PSK)</h3>
<div class="level3">

<p>
Configure WPA (PSK) encryption using UCI.
</p>
<pre class="code bash">uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.encryption=psk
uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.key=<span class="st0">&quot;your_password&quot;</span>
uci commit wireless
wifi</pre>

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> The length must be between 8 and 63 characters. If the key length is 64 characters, it is treated as hex encoded.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configure WPA (PSK)&quot;,&quot;hid&quot;:&quot;configure_wpa_psk&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:6,&quot;range&quot;:&quot;2237-2573&quot;} -->
<h3 class="sectionedit7" id="configure_wpa2_psk">Configure WPA2 (PSK)</h3>
<div class="level3">

<p>
Configure WPA2 (PSK) encryption using UCI.
</p>
<pre class="code bash">uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.encryption=psk2
uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.key=<span class="st0">&quot;your_password&quot;</span>
uci commit wireless
wifi</pre>

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> The length must be between 8 and 63 characters. If the key length is 64 characters, it is treated as hex encoded.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configure WPA2 (PSK)&quot;,&quot;hid&quot;:&quot;configure_wpa2_psk&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:7,&quot;range&quot;:&quot;2574-2913&quot;} -->
<h3 class="sectionedit8" id="configure_wpa2_enterprise_eap-tls_with_external_radius_server">Configure WPA2 Enterprise (EAP-TLS with external RADIUS server)</h3>
<div class="level3">

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> The default <code>-mini</code> packages for Atheros hardware will not work with Enterprise mode. (See the <a href="#atherosandgenericmac80211wifi" title="docs:guide-user:network:wifi:encryption ↵" class="wikilink1">table above</a>.)
</p>

<p>
The example below defines WPA2 Enterprise encryption in <abbr title="Access Point">AP</abbr> mode with authentication against an external RADIUS server at 192.168.1.200, port 1812.
</p>
<pre class="code bash">uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.encryption=wpa2
uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.key=<span class="st0">&quot;shared_secret&quot;</span>
uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.server=192.168.1.200
uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.port=<span class="nu0">1812</span>
uci commit wireless
wifi</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configure WPA2 Enterprise (EAP-TLS with external RADIUS server)&quot;,&quot;hid&quot;:&quot;configure_wpa2_enterprise_eap-tls_with_external_radius_server&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:8,&quot;range&quot;:&quot;2914-3531&quot;} -->
<h3 class="sectionedit9" id="configure_wpa2_enterprise_client_peap-gtc_using_one_time_password_otp">Configure WPA2 Enterprise Client, PEAP-GTC using One Time Password (OTP)</h3>
<div class="level3">

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> The default <code>-mini</code> packages for Atheros hardware will not work with Enterprise mode. (See the <a href="#atherosandgenericmac80211wifi" title="docs:guide-user:network:wifi:encryption ↵" class="wikilink1">table above</a>.)
</p>
<ul>
<li class="level1"><div class="li">Enter the following:</div>
</li>
</ul>
<pre class="code bash">uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.encryption=wpa2
uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.mode=<span class="st0">&quot;sta&quot;</span>
uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.ssid=<span class="st0">&quot;SET_AS_NEEDED&quot;</span>
uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.encryption=wpa2+ccmp
uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.eap_type=peap
uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.auth=gtc
uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.identity=<span class="st0">&quot;SET_AS_NEEDED&quot;</span>
uci commit wireless
wifi</pre>
<ul>
<li class="level1"><div class="li">Modify the generated wpa_supplicant.conf file in the /var/run folder to remove the <em>password=“”</em> line using your favorite editor.</div>
</li>
<li class="level1"><div class="li">Enter the following:</div>
</li>
</ul>
<pre class="code bash">wpa_cli <span class="re5">-p</span> <span class="sy0">/</span>var<span class="sy0">/</span>run<span class="sy0">/</span>wpa_supplicant-wlan0
<span class="sy0">&gt;</span>status</pre>
<ul>
<li class="level1"><div class="li">note the id of your interface (usually 0 in single interface systems)</div>
</li>
<li class="level1"><div class="li">Enter the following at the wpa_cli prompt</div>
</li>
</ul>
<pre class="code bash"><span class="sy0">&gt;</span>reconfigure
<span class="sy0">&gt;</span>reassociate</pre>
<ul>
<li class="level1"><div class="li">When prompted for you OTP PIN enter the following at the wpa_cli prompt (if necessary replace the <em>0</em> with your desired interface id):</div>
</li>
</ul>
<pre class="code bash"><span class="sy0">&gt;</span>otp <span class="nu0">0</span> YOUR_PASSWORD_HERE</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configure WPA2 Enterprise Client, PEAP-GTC using One Time Password (OTP)&quot;,&quot;hid&quot;:&quot;configure_wpa2_enterprise_client_peap-gtc_using_one_time_password_otp&quot;,&quot;codeblockOffset&quot;:5,&quot;secid&quot;:9,&quot;range&quot;:&quot;3532-4761&quot;} -->
<h2 class="sectionedit10" id="wep_encryption_not_recommended">WEP encryption (NOT recommended)</h2>
<div class="level2">

<p>
Do not use. This deprecated technology can be cracked in seconds with modern hardware. However some notes on how this works is below.
</p>

<p>
The format for the WEP key for the key1 option is HEX.
</p>

<p>
If you wish to use raw hex keys then you can skip to the UCI commands paragraph below.  Raw hex keys have 10 hex digits (<code>0</code>..<code>9</code>, <code>a</code>..<code>f</code>) for 64-bit WEP keys and 26 hex digits for 128-bit WEP keys.
</p>

<p>
If you do not wish to use raw hex keys then follow the instructions below.
</p>
<ul>
<li class="level1"><div class="li"> The length of a 64bit WEP key must be exact 5 characters</div>
</li>
<li class="level1"><div class="li"> The length of a 128bit WEP key must be exact 13 characters</div>
</li>
<li class="level1"><div class="li"> Allowed characters are letters (upper and lower case) and numbers</div>
</li>
</ul>

<p>
Generate a 64bit WEP key:
</p>
<pre class="code bash"><span class="co0"># echo -n 'awerf' | hexdump -e '5/1 &quot;%02x&quot; &quot;\n&quot;'</span>
<span class="nu0">6177657266</span></pre>

<p>
Generate a 128bit WEP key:
</p>
<pre class="code bash"><span class="co0"># echo -n 'xdhdkkewioddd' | hexdump -e '13/1 &quot;%02x&quot; &quot;\n&quot;'</span>
786468646b6b6577696f646464</pre>

<p>
Now use UCI to configure WEP encryption with the hex key you just generated.
</p>
<pre class="code bash">uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.encryption=wep
uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.key1=<span class="st0">&quot;786468646b6b6577696f646464&quot;</span>
uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.key=<span class="nu0">1</span>
uci commit wireless
wifi</pre>

<p>
You can configure up to four WEP keys.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;WEP encryption (NOT recommended)&quot;,&quot;hid&quot;:&quot;wep_encryption_not_recommended&quot;,&quot;codeblockOffset&quot;:9,&quot;secid&quot;:10,&quot;range&quot;:&quot;4762-&quot;} -->