
<h1 class="sectionedit1" id="connect_to_client_wi-fi_network">Connect to client Wi-Fi network</h1>
<div class="level1">

<p>
This page will explain how to connect your OpenWrt device to another Wi-Fi network by using its own radio. Due to technical limitations, your OpenWrt device will create its own subnet (in the example below it&#039;s <strong>192.168.2.x</strong> while the Wi-Fi router&#039;s subnet is <strong>192.168.1.x</strong> ) just as it would when connected to a modem, your OpenWrt device and devices connected to it will be able to reach the Internet, but won&#039;t see devices connected to the other Wi-Fi/router).
</p>

<p>
If you want to actually set up a Wi-Fi repeater or keep devices connected to this device in the same subnet as the devices connected to the other router, see either
</p>
<ul>
<li class="level1"><div class="li"> <a href="/docs/guide-user/network/wifi/wifiextenders/wds" class="wikilink1" title="docs:guide-user:network:wifi:wifiextenders:wds" data-wiki-id="docs:guide-user:network:wifi:wifiextenders:wds">Wi-Fi Extender/Repeater with WDS</a></div>
</li>
<li class="level1"><div class="li"> or if <abbr title="Wireless distribution system">WDS</abbr> is not supported on both your devices, <a href="/docs/guide-user/network/wifi/relay_configuration" class="wikilink1" title="docs:guide-user:network:wifi:relay_configuration" data-wiki-id="docs:guide-user:network:wifi:relay_configuration">Wi-Fi Extender/Repeater with relayd</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Connect to client Wi-Fi network&quot;,&quot;hid&quot;:&quot;connect_to_client_wi-fi_network&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-912&quot;} -->
<h2 class="sectionedit2" id="web_interface_instructions">Web interface instructions</h2>
<div class="level2">

<p>
<br/>

Refreshed with 21.02 LuCI images. <br/>

<br/>

</p>

<p>
As said above, the <strong><abbr title="Local Area Network">LAN</abbr></strong> interface must be set in a different subnet than the Wi-Fi network you are connecting to. In our example the Wi-Fi network we are connecting to is using <strong>192.168.1.x</strong> addresses, so we will need to change the <abbr title="Internet Protocol">IP</abbr> address of the <abbr title="Local Area Network">LAN</abbr> interface first to <strong>192.168.2.1</strong>
</p>

<p>
<br/>

The <strong><abbr title="Local Area Network">LAN</abbr></strong> interface must be set in a different subnet than the Wi-Fi network you are connecting to.
</p>
<ul>
<li class="level1"><div class="li"> Do NOT wire the router to your main router.</div>
</li>
<li class="level1"><div class="li"> Reset the router to return to default openwrt settings.</div>
</li>
<li class="level1"><div class="li"> Connect a computer to a <abbr title="Local Area Network">LAN</abbr> port and log into LuCI web UI at 192.168.1.1.</div>
</li>
<li class="level1"><div class="li"> Set <strong><abbr title="Local Area Network">LAN</abbr> protocol</strong> as <strong>static address</strong> (default setting)</div>
</li>
<li class="level1"><div class="li"> Assign an <abbr title="Internet Protocol">IP</abbr> address in a <strong>different</strong> subnet (e.g. 192.168.2.1). Click Save.</div>
</li>
<li class="level1"><div class="li"> Click <strong>Save and Apply</strong>.</div>
</li>
</ul>

<p>
<br/>
<a href="/_detail/media/docs/howto/relay_lan_changeip.jpg?id=docs%3Aguide-user%3Anetwork%3Awifi%3Aconnect_client_wifi" class="media" title="media:docs:howto:relay_lan_changeip.jpg"><img src="/_media/media/docs/howto/relay_lan_changeip.jpg?w=400&amp;tok=b39d3a" class="media" loading="lazy" alt="" width="400" /></a> <br/>

</p>
<hr />
<ul>
<li class="level1"><div class="li"> Disconnect and connect again computer to the device to force change of <abbr title="Internet Protocol">IP</abbr> address.</div>
</li>
</ul>

<p>
<br/>

<br/>

<br/>

</p>

<p>
We will now set up the client Wi-Fi network, the configuration needed to connect to another Wi-Fi network.<br/>

<br/>

Once you are logged into the router,
</p>
<ul>
<li class="level1"><div class="li"> go in the wireless networks page, and click on <strong>Scan</strong> button.</div>
</li>
</ul>

<p>

<br/>
<a href="/_detail/media/docs/howto/relay_join_wifi_1.jpg?id=docs%3Aguide-user%3Anetwork%3Awifi%3Aconnect_client_wifi" class="media" title="media:docs:howto:relay_join_wifi_1.jpg"><img src="/_media/media/docs/howto/relay_join_wifi_1.jpg?w=800&amp;tok=039cc5" class="media" loading="lazy" alt="" width="800" /></a> <br/>

<br/>

<br/>

</p>
<ul>
<li class="level1"><div class="li"> Choose the Wi-Fi network you want to connect to from the page and click “Join Network”.<br/>
</div>
</li>
</ul>

<p>
<br/>
<a href="/_detail/media/docs/howto/relay_join_wifi_2.jpg?id=docs%3Aguide-user%3Anetwork%3Awifi%3Aconnect_client_wifi" class="media" title="media:docs:howto:relay_join_wifi_2.jpg"><img src="/_media/media/docs/howto/relay_join_wifi_2.jpg?w=800&amp;tok=3fec8e" class="media" loading="lazy" alt="" width="800" /></a> <br/>

<br/>

<br/>

</p>
<hr />


<ul>
<li class="level1"><div class="li"> Recommend to tick the &#039;Replace wireless configuration&#039; to delete the wireless access point (Master) for the chosen radio.</div>
</li>
<li class="level1"><div class="li"> Enter the wifi password.</div>
</li>
<li class="level1"><div class="li"> The firewall zone should already be set to wan/wan6 (default).</div>
</li>
</ul>

<p>
<br/>
<a href="/_detail/media/docs/howto/wireless_client_wifi_1.jpg?id=docs%3Aguide-user%3Anetwork%3Awifi%3Aconnect_client_wifi" class="media" title="media:docs:howto:wireless_client_wifi_1.jpg"><img src="/_media/media/docs/howto/wireless_client_wifi_1.jpg?w=500&amp;tok=cd7dda" class="media" loading="lazy" alt="" width="500" /></a> <br/>

</p>
<ul>
<li class="level1"><div class="li"> If there is no *wan* firewall zone you need to create it, don&#039;t save the Wi-Fi configuration.  Go to bottom of this section describing how to create *wan* firewall zone.</div>
</li>
<li class="level1"><div class="li"> Enter the Wi-Fi password, leave the “name of new network” as “wwan” and select <strong>wan</strong> firewall zone. </div>
</li>
<li class="level1"><div class="li"> Click Save. </div>
</li>
</ul>

<p>
<br/>

<br/>

</p>
<hr />



<p>
You will land in the client Wi-Fi settings page.  Edit as required.<br/>

The most important settings are on the <strong>Operating Frequency</strong> line.<br/>

</p>
<ul>
<li class="level1"><div class="li"> Set the <strong>Mode</strong> to <strong>Legacy</strong> if you are connecting to a Wi-Fi g network, or <strong>N</strong> if you are connecting to a Wi-Fi n (and so on).<br/>
</div>
</li>
<li class="level1"><div class="li"> Set the <strong>Width</strong> to the same value that you set on the Wi-Fi you are connecting to (to avoid bottlenecking the connection for no reason).</div>
</li>
<li class="level1"><div class="li"> Do <strong>NOT</strong> change the wifi channel number !</div>
</li>
</ul>

<p>
<br/>

<br/>

</p>

<p>
<br/>
<a href="/_detail/media/docs/howto/relay_join_wifi_5.jpg?id=docs%3Aguide-user%3Anetwork%3Awifi%3Aconnect_client_wifi" class="media" title="media:docs:howto:relay_join_wifi_5.jpg"><img src="/_media/media/docs/howto/relay_join_wifi_5.jpg?w=500&amp;tok=1b1988" class="media" loading="lazy" alt="" width="500" /></a> <br/>

<br/>

Press <strong>Save</strong> <br/>

Press <strong>Save &amp; Apply</strong>. <br/>

Configuration is now complete.
<br/>

<br/>

</p>

<p>
This is the final result. Note how the client network has a ? instead of a <abbr title="Internet Protocol">IP</abbr> address. <br/>

The wwan <abbr title="Internet Protocol">IP</abbr> address is only visible in the Network Interfaces page.
</p>

<p>
<br/>
<a href="/_detail/media/docs/howto/relay_status_1.jpg?id=docs%3Aguide-user%3Anetwork%3Awifi%3Aconnect_client_wifi" class="media" title="media:docs:howto:relay_status_1.jpg"><img src="/_media/media/docs/howto/relay_status_1.jpg?w=800&amp;tok=2f7c12" class="media" loading="lazy" alt="" width="800" /></a> <br/>

</p>

<p>
<br/>

<br/>

<br/>

</p>
<hr />

<p>
<br/>

</p>

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> This step should not be necessary if you had reset the router to OpenWrt defaults.  If you have no “wan” firewall zone you must create it.
</p>
<ul>
<li class="level1"><div class="li"> Click on Network and then on Firewall, then click on the Add button, and set up the new zone as you see in the following screenshot (which is a default wan firewall interface),<br/>
</div>
</li>
</ul>

<p>

<br/>
<a href="/_detail/media/docs/howto/wireless_client_wan_zone.jpg?id=docs%3Aguide-user%3Anetwork%3Awifi%3Aconnect_client_wifi" class="media" title="media:docs:howto:wireless_client_wan_zone.jpg"><img src="/_media/media/docs/howto/wireless_client_wan_zone.jpg?w=800&amp;tok=ed3a04" class="media" loading="lazy" alt="" width="800" /></a> <br/>

</p>

<p>
After you have done this, go back and repeat the other steps to add and save the Wi-Fi connection.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Web interface instructions&quot;,&quot;hid&quot;:&quot;web_interface_instructions&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;913-5207&quot;} -->
<h2 class="sectionedit3" id="command-line_instructions">Command-line instructions</h2>
<div class="level2">

<p>
Before doing any actual configuration, the Wi-Fi interface must be enabled in order to be able to scan for networks in the vicinity:
</p>
<pre class="code bash">uci <span class="kw1">set</span> wireless.<span class="sy0">@</span>wifi-device<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.disabled=<span class="st0">&quot;0&quot;</span>
uci commit wireless
wifi</pre>

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> if you have more than one Wi-Fi radio in your device, then you can use the others in this tutorial instead by substituting their number. For example to enable the second Wi-Fi radio (usually a 5Ghz radio) you would need to <strong>uci set wireless.@wifi-device[1].disabled=0</strong> and then use <strong>wlan1</strong> instead of <strong>wlan0</strong> in the command below.
</p>
<ul>
<li class="level1"><div class="li"> Set the disabled option to 0 (to enable wireless)</div>
</li>
<li class="level1"><div class="li"> Save changed configuration file</div>
</li>
<li class="level1"><div class="li"> Start wireless using the <em>wifi</em> command</div>
</li>
</ul>

<p>
Now we can list networks in range substituting your actual wireless interface for <code>wlan0</code>:
</p>
<pre class="code bash">iw dev
iw dev wlan0 scan</pre>

<p>
Example output:
</p>
<pre class="code bash"><span class="co0"># iw dev wlan0 scan</span>
BSS c8:d5:fe:c8:<span class="nu0">61</span>:b0<span class="br0">&#40;</span>on wlan0<span class="br0">&#41;</span> <span class="re5">--</span> associated
        TSF: <span class="nu0">24324848870</span> usec <span class="br0">&#40;</span>0d, 06:<span class="nu0">45</span>:<span class="nu0">24</span><span class="br0">&#41;</span>
        freq: <span class="nu0">2412</span>
        beacon interval: <span class="nu0">100</span> TUs
        capability: ESS <span class="br0">&#40;</span>0x0411<span class="br0">&#41;</span>
        signal: -<span class="nu0">72.00</span> dBm
        <span class="kw2">last</span> seen: <span class="nu0">140</span> ms ago
        Information elements from Probe Response frame:
        SSID: Violetta
        RSN:     <span class="sy0">*</span> Version: <span class="nu0">1</span>
                 <span class="sy0">*</span> Group cipher: CCMP
                 <span class="sy0">*</span> Pairwise ciphers: CCMP
                 <span class="sy0">*</span> Authentication suites: PSK
                 <span class="sy0">*</span> Capabilities: <span class="nu0">1</span>-PTKSA-RC <span class="nu0">1</span>-GTKSA-RC <span class="br0">&#40;</span>0x0000<span class="br0">&#41;</span>
BSS f8:<span class="nu0">35</span>:dd:eb:<span class="nu0">20</span>:f8<span class="br0">&#40;</span>on wlan0<span class="br0">&#41;</span>
        TSF: <span class="nu0">24225790925</span> usec <span class="br0">&#40;</span>0d, 06:<span class="nu0">43</span>:<span class="nu0">45</span><span class="br0">&#41;</span>
        freq: <span class="nu0">2457</span>
        beacon interval: <span class="nu0">100</span> TUs
        capability: ESS <span class="br0">&#40;</span>0x0431<span class="br0">&#41;</span>
        signal: -<span class="nu0">90.00</span> dBm
        <span class="kw2">last</span> seen: <span class="nu0">1450</span> ms ago
        Information elements from Probe Response frame:
        SSID: GOinternet_EB20FB
        HT capabilities:
                Capabilities: 0x11ee
                        HT20<span class="sy0">/</span>HT40
                        SM Power Save disabled
                        RX HT20 SGI
                        RX HT40 SGI
                        TX STBC
                        RX STBC <span class="nu0">1</span>-stream
                        Max AMSDU length: <span class="nu0">3839</span> bytes
                        DSSS<span class="sy0">/</span>CCK HT40
                Maximum RX AMPDU length <span class="nu0">65535</span> bytes <span class="br0">&#40;</span>exponent: 0x003<span class="br0">&#41;</span>
                Minimum RX AMPDU <span class="kw1">time</span> spacing: <span class="nu0">4</span> usec <span class="br0">&#40;</span>0x05<span class="br0">&#41;</span>
                HT RX MCS rate indexes supported: <span class="nu0">0</span>-<span class="nu0">15</span>, <span class="nu0">32</span>
                HT TX MCS rate indexes are undefined
        HT operation:
                 <span class="sy0">*</span> primary channel: <span class="nu0">10</span>
                 <span class="sy0">*</span> secondary channel offset: below
                 <span class="sy0">*</span> STA channel width: any
        RSN:     <span class="sy0">*</span> Version: <span class="nu0">1</span>
                 <span class="sy0">*</span> Group cipher: TKIP
                 <span class="sy0">*</span> Pairwise ciphers: TKIP CCMP
                 <span class="sy0">*</span> Authentication suites: PSK
                 <span class="sy0">*</span> Capabilities: <span class="nu0">1</span>-PTKSA-RC <span class="nu0">1</span>-GTKSA-RC <span class="br0">&#40;</span>0x0000<span class="br0">&#41;</span></pre>

<p>
In the example, there are two networks, a Wi-Fi g one called Violetta and a Wi-Fi n one called GOinternet_EB20FB.
The device was configured to connect to the one called Violetta.
</p>

<p>
These are the uci values that were added or changed by the configuration procedure.<br/>

For SSID, BSSID, and encryption you must use the info you got from the Wi-Fi scan above.<br/>

For an explanation of why these values were changed, please read the luci tutorial above.<br/>

</p>
<pre class="code bash">network.lan.ipaddr=<span class="st_h">'192.168.2.1'</span>
network.wwan=interface
network.wwan.proto=<span class="st_h">'dhcp'</span>
firewall.<span class="sy0">@</span>zone<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>=zone
firewall.<span class="sy0">@</span>zone<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.name=<span class="st_h">'wwan'</span>
firewall.<span class="sy0">@</span>zone<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.input=<span class="st_h">'REJECT'</span>
firewall.<span class="sy0">@</span>zone<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.output=<span class="st_h">'ACCEPT'</span>
firewall.<span class="sy0">@</span>zone<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.forward=<span class="st_h">'REJECT'</span>
firewall.<span class="sy0">@</span>zone<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.masq=<span class="st_h">'1'</span>
firewall.<span class="sy0">@</span>zone<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.mtu_fix=<span class="st_h">'1'</span>
firewall.<span class="sy0">@</span>zone<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.network=<span class="st_h">'wwan'</span>
wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>=wifi-iface
wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.network=<span class="st_h">'wwan'</span>
wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.ssid=<span class="st_h">'Violetta'</span>
wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.encryption=<span class="st_h">'psk2'</span>
wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.device=<span class="st_h">'radio0'</span>
wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.mode=<span class="st_h">'sta'</span>
wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.bssid=<span class="st_h">'C8:D5:FE:C8:61:B0'</span>
wireless.<span class="sy0">@</span>wifi-iface<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.key=<span class="st_h">'myWifiPasswordHere'</span></pre>

<p>
<br/>

</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Command-line instructions&quot;,&quot;hid&quot;:&quot;command-line_instructions&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;5208-9119&quot;} -->
<h2 class="sectionedit4" id="known_issues">Known Issues</h2>
<div class="level2">

<p>
<a href="https://forum.openwrt.org/t/how-to-use-openwrt-as-a-wi-fi-repeater-using-a-different-ssid/136177" class="urlextern" title="https://forum.openwrt.org/t/how-to-use-openwrt-as-a-wi-fi-repeater-using-a-different-ssid/136177" rel="ugc nofollow">Cannot enable client and AP on same radio</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Known Issues&quot;,&quot;hid&quot;:&quot;known_issues&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:4,&quot;range&quot;:&quot;9120-&quot;} -->