
<h2 class="sectionedit1" id="identify_wi-fi_connection_as_metered_on_linux_automatically">Identify Wi-Fi connection as metered on Linux automatically</h2>
<div class="level2">

<p>
<a href="https://networkmanager.dev/" class="urlextern" title="https://networkmanager.dev/" rel="ugc nofollow">NetworkManager</a> (<strong>NM</strong>) has <a href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/commit/5307b1ed733fd0b91a1ef8bd5c58d8c68312ee2c" class="urlextern" title="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/commit/5307b1ed733fd0b91a1ef8bd5c58d8c68312ee2c" rel="ugc nofollow">implemented</a> detection of metered connnection based on <code>MS-NCT</code> protocol nearly same as <a href="/docs/guide-user/network/wifi/ms-meteredconnection" class="wikilink1" title="docs:guide-user:network:wifi:ms-meteredconnection" data-wiki-id="docs:guide-user:network:wifi:ms-meteredconnection">Microsoft Windows</a> does.
</p>

<p>
To implement metered connection detection, set <strong>cost level</strong> to <code>0x02</code> or <code>0x03</code> as described in <a href="/docs/guide-user/network/wifi/ms-meteredconnection" class="wikilink1" title="docs:guide-user:network:wifi:ms-meteredconnection" data-wiki-id="docs:guide-user:network:wifi:ms-meteredconnection">Microsoft Windows article</a>.
</p>
<hr />

<p>
<img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> <strong>NM 1.31.5 and before</strong> has a <a href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/issues/734" class="urlextern" title="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/issues/734" rel="ugc nofollow">bug</a> in MS-NCT implementation because second <code>Reserved</code> byte is used instead of <code>Cost_Level</code> byte. <br/>

According to <strong>NM</strong> code, value of this byte must be <strong>greater</strong> than <code>0x01</code> to make <strong>NM</strong> think connection is metered. <br/>

<span style='color:#ed1c24; '>According to <a href="https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-nct/" class="urlextern" title="https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-nct/" rel="ugc nofollow">[MS-NCT]</a>, the byte used by <strong>NM</strong> <strong>SHOULD</strong> always be 0x00, so it may cause compatibility errors, so you can change it on your own risk.</span>
</p>
<pre class="code bash">DD 08 00 <span class="nu0">50</span> F2 <span class="nu0">11</span> 02 00 02 00
                            ^
                            <span class="sy0">|</span>
               Only this byte is 
           taken into account by NM</pre>

<p>
Please refer to <strong><a href="/docs/guide-user/network/wifi/ms-meteredconnection" class="wikilink1" title="docs:guide-user:network:wifi:ms-meteredconnection" data-wiki-id="docs:guide-user:network:wifi:ms-meteredconnection">Identify Wi-Fi connection as metered on Windows automatically</a></strong> page for details.
</p>

</div>
