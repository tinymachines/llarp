
<h1 class="sectionedit1" id="qos_network_traffic_control">QoS (Network Traffic Control)</h1>
<div class="level1">

<p>
Traffic Control is the umbrella term for packet prioritizing, traffic <a href="#shaping" title="docs:guide-user:network:traffic-shaping:packet.scheduler ↵" class="wikilink1">shaping</a>, bandwidth limiting, AQM (Active Queue Management), <abbr title="Quality of Service">QoS</abbr> (Quality of Service), etc. This HowTo will help you understand and set up traffic control on your router. It is one strategy to address problems caused by <a href="https://en.wikipedia.org/wiki/Network congestion" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Network congestion">Network congestion</a>.
</p>

<p>
<em>Note: As of late 2016, the OpenWrt SQM-<abbr title="Quality of Service">QoS</abbr> algorithms using cake or fq_codel have nearly eliminated bufferbloat. <br/>

<strong>SQM frequently performs better in all cases - upload and download - than arduous manual <abbr title="Quality of Service">QoS</abbr> settings described below.</strong> <br/>

SQM is simple to set up, and if it solves your problems, you&#039;re done. Check out the <a href="/docs/guide-user/network/traffic-shaping/sqm" class="wikilink1" title="docs:guide-user:network:traffic-shaping:sqm" data-wiki-id="docs:guide-user:network:traffic-shaping:sqm">SQM HOWTO</a>. </em>
</p>
<div class="table sectionedit2"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="/_media/meta/icons/tango/dialog-information.png" class="media" loading="lazy" alt="" /> </td><td class="col1"> You <em>can</em> control, i.e. prioritize and/or shape, ANY <strong>upload traffic</strong>, i.e. traffic being sent from your router to the Internet. Doing so <em>will</em> solve problems that occur with congestion, i.e. <a href="https://en.wikipedia.org/wiki/Jitter#Packet_jitter_in_computer_networks" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Jitter#Packet_jitter_in_computer_networks">jitter</a> and delay. </td>
	</tr>
	<tr class="row1">
		<td class="col0"> <img src="/_media/meta/icons/tango/dialog-information.png" class="media" loading="lazy" alt="" /> </td><td class="col1"> You do NOT have the same level of control over <strong>download traffic</strong>, i.e. traffic arriving at your router from the Internet. Here, you can only drop packets but not rearrange them.<br/>
The dropping of <abbr title="Transmission Control Protocol">TCP</abbr> packets causes the sending site to reduce its transmission rate. The dropping of <abbr title="User Datagram Protocol">UDP</abbr> packets however, will only help to keep the buffer empty. </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:2,&quot;range&quot;:&quot;765-1492&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;QoS (Network Traffic Control)&quot;,&quot;hid&quot;:&quot;qos_network_traffic_control&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-1493&quot;} -->
<h2 class="sectionedit3" id="preparations">Preparations</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> Read about <a href="/docs/guide-user/network/traffic-shaping/packet.scheduler.theory" class="wikilink1" title="docs:guide-user:network:traffic-shaping:packet.scheduler.theory" data-wiki-id="docs:guide-user:network:traffic-shaping:packet.scheduler.theory">Linux packet scheduling</a> </div>
</li>
<li class="level1"><div class="li"> Learn about the<code><a href="http://man.cx/tc" class="interwiki iw_man" title="http://man.cx/tc">tc command</a></code></div>
</li>
<li class="level1 node"><div class="li"> Determine the characteristics of the connection you are configuring the packet scheduler for:</div>
<ul>
<li class="level2"><div class="li"> whether it is a full-duplex or a half-duplex line <a href="https://en.wikipedia.org/wiki/duplex" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/duplex">duplex</a></div>
</li>
<li class="level2"><div class="li"> the actual available upload bandwidth! The Linux packet scheduler works on Layer 2, thus you should always work with the actual bandwidth for the Layer-2-Payload:</div>
</li>
<li class="level2 node"><div class="li"> ie: when you employ the Layer 1 protocol “BASE100-TX”:</div>
<ul>
<li class="level3"><div class="li"> you have 100Mbit/s of theoretically available bandwidth</div>
</li>
<li class="level3"><div class="li"> Physical factors such as interference, substandard cabling or faulty hardware can reduce that bandwidth.</div>
</li>
<li class="level3"><div class="li"> The Layer 2 protocol you use adds <a href="/docs/guide-developer/networking/datagram.structures" class="wikilink1" title="docs:guide-developer:networking:datagram.structures" data-wiki-id="docs:guide-developer:networking:datagram.structures">protocol overhead</a>. In the case of “Ethernet”, it adds about 2,5%, so a maximum of 97,5Mbit/s remain for the Layer-2-payload.</div>
</li>
<li class="level3"><div class="li"> Download testing sites usually refer to Layer 4 bandwidth, which includes Layer 3 and 4 protocol overhead.</div>
</li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Be prepared to adjust your configuration. It can take some time and experimentation to find what works best for your circumstances.</div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Preparations&quot;,&quot;hid&quot;:&quot;preparations&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;1494-2685&quot;} -->
<h3 class="sectionedit4" id="required_packages">Required Packages</h3>
<div class="level3">
<ul>
<li class="level1 node"><div class="li"><strong><code>tc</code></strong> (<code>traffic control</code>, program to configure the Linux packet scheduler)</div>
<ul>
<li class="level2"><div class="li"><strong><code>kmod-sched-core</code></strong> (dependency of <em>tc</em>), package containing most used or advanced (QDiscs) and classifiers</div>
</li>
<li class="level2"><div class="li"><strong><code>kmod-sched</code></strong> (optional), package containing other schedulers and <a href="#classifier" title="docs:guide-user:network:traffic-shaping:packet.scheduler ↵" class="wikilink1">classifiers</a> (those not included in the previous)</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"><strong><code>iptables-mod-ipopt</code></strong> optional! Contains some matches and TARGETs for iptables:  CLASSIFY, dscp/DSCP, ecn/ECN, length, mac, mark/MARK, statistic, tcpmms, tos/TOS, ttl/<abbr title="Time To Live">TTL</abbr>, unclean</div>
<ul>
<li class="level2"><div class="li"><strong><code>kmod-ipt-ipopt</code></strong> (module; dependency of corresponding user space module;</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"><strong><code>iptables-mod-*</code></strong> optional! (modules for iptables)</div>
<ul>
<li class="level2"><div class="li"><strong><code>kmod-ipt-*</code></strong> (kernel modules for iptables)</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"><strong><code>l7-protocols</code></strong> optional! If you want to match Layer 7 content</div>
</li>
<li class="level1"><div class="li"><strong><code>l7-protocols-testing</code></strong> optional! If you want to test. Check the projects own <a href="http://l7-filter.clearfoundation.com/" class="urlextern" title="http://l7-filter.clearfoundation.com/" rel="ugc nofollow">Homepage</a>.</div>
</li>
</ul>

<p>
As long as your <abbr title="Internet Service Provider">ISP</abbr> does not give you access to the DSL-AC so you can install a simple TC-script, you will have to settle with <a href="#policing" title="docs:guide-user:network:traffic-shaping:packet.scheduler ↵" class="wikilink1">policing</a> the download:
</p>
<ul>
<li class="level1"><div class="li"> <code>kmod-ifb</code> and act_connmark</div>
</li>
</ul>
<div class="table sectionedit5"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="/_media/meta/icons/tango/48px-outdated.svg.png" class="media" loading="lazy" alt="" /> </td><td class="col1 leftalign"> In <a href="https://dev.openwrt.org/changeset/25641/trunk" class="urlextern" title="https://dev.openwrt.org/changeset/25641/trunk" rel="ugc nofollow">r25641</a> <code>iptables-mod-imq</code> (Intermediate Queueing Device) was removed and is not supported any longer. It&#039;s successor is <code>kmod-ifb</code>. See <a href="http://www.linuxfoundation.org/collaborate/workgroups/networking/ifb" class="urlextern" title="http://www.linuxfoundation.org/collaborate/workgroups/networking/ifb" rel="ugc nofollow">Intermediate Functional Block device</a>  </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table1&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;3854-4214&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Required Packages&quot;,&quot;hid&quot;:&quot;required_packages&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;2686-4215&quot;} -->
<h2 class="sectionedit6" id="installation">Installation</h2>
<div class="level2">

<p>
<a href="/docs/guide-user/additional-software/opkg" class="wikilink1" title="docs:guide-user:additional-software:opkg" data-wiki-id="docs:guide-user:additional-software:opkg">opkg</a>
</p>
<pre class="code bash">opkg update
opkg <span class="kw2">install</span> tc iptables-mod-ipopt</pre>

<p>
Since the description of <code>kmod-sched-core</code> (<code>kmod-sched-core</code> is a dependency of <code>tc</code>) does not contain any information regarding its content, after installation list the currently installed QDisc modules (try installing <code>kmod-sched</code> for other modules):
</p>
<pre class="code bash"><span class="kw2">ls</span> <span class="re5">-lha</span> <span class="sy0">/</span>lib<span class="sy0">/</span>modules<span class="sy0">/</span>$<span class="br0">&#40;</span><span class="kw2">uname</span> -r<span class="br0">&#41;</span><span class="sy0">/</span> <span class="sy0">|</span> <span class="kw2">grep</span> sch</pre>

<p>
To use a particular one, you need to load the kernel module into memory:
</p>
<pre class="code bash">insmod sch_hfsc</pre>

<p>
You need to do this after every reboot.
List of currently loaded kernel modules and to remove a module:
</p>
<pre class="code bash"><span class="kw2">lsmod</span>
rmmod sch_hfsc</pre>

<p>
After thoroughly reading this wiki page, you are going to write a shell script which will invoke <code>tc</code> a couple of times and configure the packet scheduler.
Please also see the available <a href="#examples" title="docs:guide-user:network:traffic-shaping:packet.scheduler ↵" class="wikilink1">examples</a>.
When everything works good enough, proceed with <a href="#start_on_boot" title="docs:guide-user:network:traffic-shaping:packet.scheduler ↵" class="wikilink1">Start on boot</a> and <a href="#hotplug" title="docs:guide-user:network:traffic-shaping:packet.scheduler ↵" class="wikilink1">Hotplug</a>.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Installation&quot;,&quot;hid&quot;:&quot;installation&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;4216-5230&quot;} -->
<h2 class="sectionedit7" id="configuration">Configuration</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configuration&quot;,&quot;hid&quot;:&quot;configuration&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:7,&quot;range&quot;:&quot;5231-5256&quot;} -->
<h3 class="sectionedit8" id="hierarchynesting_of_qdiscs_classes">Hierarchy: Nesting of qdiscs &amp; classes</h3>
<div class="level3">

<p>
There are two types of scheduling algorithms <a href="#queueingdisciplineqdisc" title="docs:guide-user:network:traffic-shaping:packet.scheduler ↵" class="wikilink1">(QDiscs)</a> - <a href="#classfulqdisc" title="docs:guide-user:network:traffic-shaping:packet.scheduler ↵" class="wikilink1">classful</a> and <a href="#classlessqdisc" title="docs:guide-user:network:traffic-shaping:packet.scheduler ↵" class="wikilink1">classless</a>. If you choose to employ a classful <a href="#rootqdisc" title="docs:guide-user:network:traffic-shaping:packet.scheduler ↵" class="wikilink1">root QDisc</a>, you will be able to tailor the configuration very closely to your needs, by constructing a hierarchy of “nesting entities” and then further tune each branch of the tree separately.
</p>

<p>
 <code>tc</code> is the only user space program available to set up, maintain and inspect the configuration of the Linux packet scheduler. Where <code>iptables</code>, <code>ip6tables</code> are for netfilter, <code>tc</code> is for the Linux packet scheduler. Generally only one change is made to the packet scheduler each time <code>tc</code> is executed. A small shell script containing multiple invocations of <code>tc</code> is required to achieve a meaningful overall configuration.
</p>
<div class="table sectionedit9"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign" colspan="4">         </th><th class="col4 centeralign" colspan="2">  nesting  </th><th class="col6 centeralign" colspan="2">  configuration  </th>
	</tr>
	<tr class="row1">
		<th class="col0"> tc </th><th class="col1"> what </th><th class="col2"> command </th><th class="col3"> <a href="/docs/guide-developer/networking/network.interfaces" class="wikilink1" title="docs:guide-developer:networking:network.interfaces" data-wiki-id="docs:guide-developer:networking:network.interfaces">interface</a> </th><th class="col4"> parent qdisc-id </th><th class="col5"> classid </th><th class="col6"> QDisc </th><th class="col7 leftalign"> QDisc specific parameters  </th>
	</tr>
	</thead>
	<tr class="row2">
		<td class="col0 leftalign" rowspan="7"> <code>tc</code>  </td><td class="col1 leftalign" rowspan="4"> <code>qdisc</code>  </td><td class="col2 leftalign"> <code>add</code>     </td><td class="col3"> <code>dev</code> eth0 </td><td class="col4 leftalign"> <code>root</code>       </td><td class="col5 leftalign"> <code>handle</code> 1:    </td><td class="col6 centeralign">  <code>hfsc</code>  </td><td class="col7 leftalign"> default 20  </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <code>change</code>  </td><td class="col1"> <code>dev</code> eth0 </td><td class="col2 leftalign"> <code>root</code>       </td><td class="col3 leftalign"> <code>handle</code> 1:    </td><td class="col4 centeralign">  <code>hfsc</code>  </td><td class="col5 leftalign"> default 20  </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>replace</code> </td><td class="col1"> <code>dev</code> eth0 </td><td class="col2 leftalign"> <code>root</code>       </td><td class="col3 leftalign"> <code>handle</code> 1:    </td><td class="col4 centeralign">  <code>hfsc</code>  </td><td class="col5 leftalign"> default 20  </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <code>link</code>    </td><td class="col1"> <code>dev</code> eth0 </td><td class="col2 leftalign"> <code>root</code>       </td><td class="col3 leftalign"> <code>handle</code> 1:    </td><td class="col4 centeralign">  <code>hfsc</code>  </td><td class="col5 leftalign"> default 20  </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign" rowspan="3"> <code>class</code>  </td><td class="col1 leftalign"> <code>add</code>     </td><td class="col2"> <code>dev</code> eth0 </td><td class="col3 leftalign"> <code>parent</code> 1:  </td><td class="col4 leftalign"> <code>classid</code> 1:1  </td><td class="col5 centeralign">  <code>hfsc</code>  </td><td class="col6 leftalign"> ls rate 750kbit ul rate 1000kbit  </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <code>change</code>  </td><td class="col1"> <code>dev</code> eth0 </td><td class="col2"> <code>parent</code> 1:1 </td><td class="col3"> <code>classid</code> 1:10 </td><td class="col4 centeralign">  <code>hfsc</code>  </td><td class="col5 leftalign"> ls rate 250kbit ul rate 1000kbit  </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <code>replace</code> </td><td class="col1"> <code>dev</code> eth0 </td><td class="col2"> <code>parent</code> 1:1 </td><td class="col3"> <code>classid</code> 1:20 </td><td class="col4 centeralign">  <code>hfsc</code>  </td><td class="col5 leftalign"> ls rate 250kbit ul rate 1000kbit  </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table2&quot;,&quot;secid&quot;:9,&quot;range&quot;:&quot;6139-7226&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Hierarchy: Nesting of qdiscs &amp; classes&quot;,&quot;hid&quot;:&quot;hierarchynesting_of_qdiscs_classes&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:8,&quot;range&quot;:&quot;5257-7227&quot;} -->
<h3 class="sectionedit10" id="qdiscs_packet_scheduling_algorithms">Qdiscs (Packet Scheduling Algorithms)</h3>
<div class="level3">

<p>
Once you decide what your entire configuration will look like, look up the <em>specific configuration of the QDisc algorithm</em> you intend to use. Each Qdisc aka Scheduling Algorithm gives you parameters to tune:
</p>
<div class="table sectionedit11"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign" colspan="2"> Queueing Discipline  </th><th class="col2 centeralign">  Classfull  </th><th class="col3 leftalign"> Description  </th><th class="col4 centeralign">  kmod-sched-core  </th><th class="col5 rightalign">  kmod-sched </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> →   sch_atm      </td><td class="col1 centeralign">  name                                 </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> bla  </td><td class="col4 leftalign">  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row2">
		<td class="col0"> →   sch_blackhole</td><td class="col1 centeralign">  Black hole queue                 </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> bla  </td><td class="col4 leftalign">  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> → <a href="/docs/guide-user/network/traffic-shaping/sch_cbq" class="wikilink1" title="docs:guide-user:network:traffic-shaping:sch_cbq" data-wiki-id="docs:guide-user:network:traffic-shaping:sch_cbq">sch_cbq</a>    </td><td class="col1 centeralign">  Class-Based Queueing discipline      </td><td class="col2 centeralign">  ☑  </td><td class="col3 leftalign"> very complex  </td><td class="col4 leftalign">  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> → <a href="/docs/guide-user/network/traffic-shaping/sch_choke" class="wikilink1" title="docs:guide-user:network:traffic-shaping:sch_choke" data-wiki-id="docs:guide-user:network:traffic-shaping:sch_choke">sch_choke</a>  </td><td class="col1 centeralign">  CHOKe scheduler                      </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> bla  </td><td class="col4 leftalign">  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> → <a href="/docs/guide-user/network/traffic-shaping/sch_codel" class="wikilink1" title="docs:guide-user:network:traffic-shaping:sch_codel" data-wiki-id="docs:guide-user:network:traffic-shaping:sch_codel">sch_codel</a>  </td><td class="col1 centeralign">  The Controlled-Delay Active Queue Management   </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> available since <a href="https://dev.openwrt.org/changeset/31756" class="urlextern" title="https://dev.openwrt.org/changeset/31756" rel="ugc nofollow">r31756</a> and <a href="https://dev.openwrt.org/changeset/31757" class="urlextern" title="https://dev.openwrt.org/changeset/31757" rel="ugc nofollow">r31757</a>, mainlined in Kernel 3.5  </td><td class="col4 centeralign">  ☑  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> → <a href="/docs/guide-user/network/traffic-shaping/sch_drr" class="wikilink1" title="docs:guide-user:network:traffic-shaping:sch_drr" data-wiki-id="docs:guide-user:network:traffic-shaping:sch_drr">sch_drr</a>    </td><td class="col1 centeralign">  Deficit Round Robin scheduler        </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> can handle packets of variable size without knowing their mean size.   </td><td class="col4 leftalign">  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> →   sch_dsmark   </td><td class="col1 centeralign">  Differentiated Services field marker  </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> bla  </td><td class="col4 leftalign">  </td><td class="col5 centeralign">  ☑  </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> → <a href="/doc/howto/packet.scheduler/sch_esfq" class="wikilink2" title="doc:howto:packet.scheduler:sch_esfq" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:sch_esfq">sch_esfq</a>   </td><td class="col1 centeralign">  Enhanced Stochastic Fairness Queueing  </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> removed in mainline kernel, but still available in OpenWrt  </td><td class="col4 leftalign">  </td><td class="col5 centeralign">  ☑  </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> → <a href="/doc/howto/packet.scheduler/sch_fifo" class="wikilink2" title="doc:howto:packet.scheduler:sch_fifo" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:sch_fifo">sch_fifo</a>   </td><td class="col1 centeralign">  The simplest FIFO queue                </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> bla  </td><td class="col4 leftalign">  </td><td class="col5 centeralign">  ☑  </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> → <a href="/docs/guide-user/network/traffic-shaping/sch_fq_codel" class="wikilink1" title="docs:guide-user:network:traffic-shaping:sch_fq_codel" data-wiki-id="docs:guide-user:network:traffic-shaping:sch_fq_codel">sch_fq_codel</a>  </td><td class="col1 centeralign">  Fair Queue CoDel discipline         </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> available since <a href="https://dev.openwrt.org/changeset/31756" class="urlextern" title="https://dev.openwrt.org/changeset/31756" rel="ugc nofollow">r31756</a> and <a href="https://dev.openwrt.org/changeset/31757" class="urlextern" title="https://dev.openwrt.org/changeset/31757" rel="ugc nofollow">r31757</a>, mainlined in Kernel 3.5  </td><td class="col4 centeralign">  ☑  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row11">
		<td class="col0"> → <a href="/doc/howto/packet.scheduler/sch_generic" class="wikilink2" title="doc:howto:packet.scheduler:sch_generic" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:sch_generic">sch_generic</a> </td><td class="col1 centeralign">  Generic packet scheduler routines   </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> bla  </td><td class="col4 leftalign">  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row12">
		<td class="col0 leftalign"> → <a href="/doc/howto/packet.scheduler/sch_gred" class="wikilink2" title="doc:howto:packet.scheduler:sch_gred" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:sch_gred">sch_gred</a>   </td><td class="col1 centeralign">  Generic Random Early Detection       </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> bla  </td><td class="col4 leftalign">  </td><td class="col5 centeralign">  ☑  </td>
	</tr>
	<tr class="row13">
		<td class="col0 leftalign"> → <a href="/docs/guide-user/network/traffic-shaping/sch_hfsc" class="wikilink1" title="docs:guide-user:network:traffic-shaping:sch_hfsc" data-wiki-id="docs:guide-user:network:traffic-shaping:sch_hfsc">sch_hfsc</a>   </td><td class="col1 centeralign">  Hierarchical Fair Service Curve      </td><td class="col2 centeralign">  ☑  </td><td class="col3 leftalign"> link sharing and low delay at the same time  </td><td class="col4 centeralign">  ☑  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row14">
		<td class="col0 leftalign"> → <a href="/docs/guide-user/network/traffic-shaping/sch_htb" class="wikilink1" title="docs:guide-user:network:traffic-shaping:sch_htb" data-wiki-id="docs:guide-user:network:traffic-shaping:sch_htb">sch_htb</a>    </td><td class="col1 centeralign">  Hierarchy Token Bucket               </td><td class="col2 centeralign">  ☑  </td><td class="col3 leftalign"> easiest configuration of link sharing, derived from CBQ, high CPU usage  </td><td class="col4 leftalign">  </td><td class="col5 centeralign">  ☑  </td>
	</tr>
	<tr class="row15">
		<td class="col0 leftalign"> → <a href="/doc/howto/packet.scheduler/sch_ingress" class="wikilink2" title="doc:howto:packet.scheduler:sch_ingress" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:sch_ingress">sch_ingress</a>  </td><td class="col1 centeralign">  Ingress qdisc                      </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> bla  </td><td class="col4 centeralign">  ☑  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row16">
		<td class="col0 leftalign"> → <a href="/doc/howto/packet.scheduler/sch_mq" class="wikilink2" title="doc:howto:packet.scheduler:sch_mq" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:sch_mq">sch_mq</a>     </td><td class="col1 centeralign">  Classful multiqueue dummy scheduler  </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> bla  </td><td class="col4 leftalign">  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row17">
		<td class="col0"> → <a href="/doc/howto/packet.scheduler/sch_mqprio" class="wikilink2" title="doc:howto:packet.scheduler:sch_mqprio" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:sch_mqprio">sch_mqprio</a> </td><td class="col1 centeralign">  name                                 </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> bla  </td><td class="col4 leftalign">  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row18">
		<td class="col0"> → <a href="/doc/howto/packet.scheduler/sch_multiq" class="wikilink2" title="doc:howto:packet.scheduler:sch_multiq" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:sch_multiq">sch_multiq</a> </td><td class="col1 centeralign">  name                                 </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> bla  </td><td class="col4 leftalign">  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row19">
		<td class="col0 leftalign"> → <a href="/docs/guide-user/network/traffic-shaping/sch_netem" class="wikilink1" title="docs:guide-user:network:traffic-shaping:sch_netem" data-wiki-id="docs:guide-user:network:traffic-shaping:sch_netem">sch_netem</a>  </td><td class="col1 centeralign">  Network emulator                     </td><td class="col2 centeralign">  ☒  </td><td class="col3 leftalign"> Drop, delay, bla packets  </td><td class="col4 leftalign">  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row20">
		<td class="col0 leftalign"> → <a href="/doc/howto/packet.scheduler/sch_pfifo_fast" class="wikilink2" title="doc:howto:packet.scheduler:sch_pfifo_fast" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:sch_pfifo_fast">sch_pfifo_fast</a>  </td><td class="col1 centeralign">  FIFO with prioritizing          </td><td class="col2 centeralign">  ☒  </td><td class="col3 leftalign"> DEFAULT, usually build-into the kernel  </td><td class="col4 leftalign">  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row21">
		<td class="col0 leftalign"> → <a href="/doc/howto/packet.scheduler/sch_prio" class="wikilink2" title="doc:howto:packet.scheduler:sch_prio" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:sch_prio">sch_prio</a>   </td><td class="col1 centeralign">  Simple 3-band priority scheduler     </td><td class="col2 centeralign">  ☒  </td><td class="col3 leftalign"> allows packet prioritization  </td><td class="col4 leftalign">  </td><td class="col5 centeralign">  ☑  </td>
	</tr>
	<tr class="row22">
		<td class="col0 leftalign"> → <a href="/doc/howto/packet.scheduler/sch_qfq" class="wikilink2" title="doc:howto:packet.scheduler:sch_qfq" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:sch_qfq">sch_qfq</a>    </td><td class="col1 centeralign">  Quick Fair Queueing Scheduler        </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> bla  </td><td class="col4 leftalign">  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row23">
		<td class="col0 leftalign"> → <a href="/docs/guide-user/network/traffic-shaping/sch_red" class="wikilink1" title="docs:guide-user:network:traffic-shaping:sch_red" data-wiki-id="docs:guide-user:network:traffic-shaping:sch_red">sch_red</a>    </td><td class="col1 centeralign">  Random Early Detection               </td><td class="col2 centeralign">  ☒  </td><td class="col3 leftalign"> bla  </td><td class="col4 leftalign">  </td><td class="col5 centeralign">  ☑  </td>
	</tr>
	<tr class="row24">
		<td class="col0 leftalign"> → <a href="/doc/howto/packet.scheduler/sch_sfb" class="wikilink2" title="doc:howto:packet.scheduler:sch_sfb" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:sch_sfb">sch_sfb</a>    </td><td class="col1 centeralign">  Stochastic Fair Blue                 </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> bla  </td><td class="col4 leftalign">  </td><td class="col5 leftalign">  </td>
	</tr>
	<tr class="row25">
		<td class="col0 leftalign"> → <a href="/docs/guide-user/network/traffic-shaping/sch_sfq" class="wikilink1" title="docs:guide-user:network:traffic-shaping:sch_sfq" data-wiki-id="docs:guide-user:network:traffic-shaping:sch_sfq">sch_sfq</a>    </td><td class="col1 centeralign">  Stochastic Fairness Queueing         </td><td class="col2 centeralign">  ☒  </td><td class="col3 leftalign"> distibutes bandwidth for known tcp-connections fairly  </td><td class="col4 leftalign">  </td><td class="col5 centeralign">  ☑  </td>
	</tr>
	<tr class="row26">
		<td class="col0"> → <a href="/doc/howto/packet.scheduler/sch_sfqred" class="wikilink2" title="doc:howto:packet.scheduler:sch_sfqred" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:sch_sfqred">sch_sfqred</a> </td><td class="col1 centeralign">  mixture of qfq and red               </td><td class="col2 centeralign">  ?  </td><td class="col3 leftalign">       </td><td class="col4"> </td><td class="col5"> </td>
	</tr>
	<tr class="row27">
		<td class="col0 leftalign"> → <a href="/docs/guide-user/network/traffic-shaping/sch_tbf" class="wikilink1" title="docs:guide-user:network:traffic-shaping:sch_tbf" data-wiki-id="docs:guide-user:network:traffic-shaping:sch_tbf">sch_tbf</a>    </td><td class="col1 centeralign">  Token Bucket Filter                  </td><td class="col2 centeralign">  ☒  </td><td class="col3 leftalign"> limit bandwidth, does not work above 1mbit  </td><td class="col4 leftalign">  </td><td class="col5 centeralign">  ☑  </td>
	</tr>
	<tr class="row28">
		<td class="col0 leftalign"> → <a href="/doc/howto/packet.scheduler/sch_teql" class="wikilink2" title="doc:howto:packet.scheduler:sch_teql" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:sch_teql">sch_teql</a>   </td><td class="col1 centeralign">  True/Trivial Link Equalizer          </td><td class="col2 centeralign">  ??  </td><td class="col3 leftalign"> bla  </td><td class="col4 leftalign">  </td><td class="col5 centeralign">  ☑  </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table3&quot;,&quot;secid&quot;:11,&quot;range&quot;:&quot;7487-11473&quot;} -->
<p>
<strong><code>Note:</code></strong> The PRIO QDisc does contain three classes, but since they cannot be configured further, PRIO is considered to be a classless QDisc. Its classes are sometimes called bands.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Qdiscs (Packet Scheduling Algorithms)&quot;,&quot;hid&quot;:&quot;qdiscs_packet_scheduling_algorithms&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:10,&quot;range&quot;:&quot;7228-11661&quot;} -->
<h3 class="sectionedit12" id="actions">Actions</h3>
<div class="level3">
<div class="table sectionedit13"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign" colspan="2"> Action  </th><th class="col2 centeralign">  Description  </th><th class="col3 centeralign">  kmod-sched-core  </th><th class="col4 rightalign">  kmod-sched </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> <a href="/doc/howto/packet.scheduler/act_police" class="wikilink2" title="doc:howto:packet.scheduler:act_police" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:act_police">act_police</a>  </td><td class="col1 leftalign"> Input police filter        </td><td class="col2 leftalign">  </td><td class="col3 leftalign">  </td><td class="col4"></td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <a href="/doc/howto/packet.scheduler/act_nat" class="wikilink2" title="doc:howto:packet.scheduler:act_nat" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:act_nat">act_nat</a>     </td><td class="col1 leftalign"> Stateless <abbr title="Network Address Translation">NAT</abbr> actions      </td><td class="col2"> </td><td class="col3"> </td><td class="col4"></td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <a href="/doc/howto/packet.scheduler/act_mirred" class="wikilink2" title="doc:howto:packet.scheduler:act_mirred" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:act_mirred">act_mirred</a>  </td><td class="col1"> packet mirroring and redirect actions </td><td class="col2"> </td><td class="col3"> </td><td class="col4"></td>
	</tr>
	<tr class="row4">
		<td class="col0"> <a href="/doc/howto/packet.scheduler/act_skbedit" class="wikilink2" title="doc:howto:packet.scheduler:act_skbedit" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:act_skbedit">act_skbedit</a> </td><td class="col1"> </td><td class="col2"> </td><td class="col3"> </td><td class="col4"></td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table4&quot;,&quot;secid&quot;:13,&quot;range&quot;:&quot;11681-12049&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Actions&quot;,&quot;hid&quot;:&quot;actions&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:12,&quot;range&quot;:&quot;11662-12051&quot;} -->
<h3 class="sectionedit14" id="filters">Filters</h3>
<div class="level3">

<p>
This is where you configure which network packet belongs to which queue/bucket. A rule used to allocate a group of <abbr title="Internet Protocol">IP</abbr> packets to a certain classid consists of a number of classifiers (match) and one connected action (TARGET or VERDICT). 
</p>
<ul>
<li class="level1"><div class="li"> In principle it works exactly like <a href="/docs/guide-user/firewall/netfilter-iptables/netfilter#configuration" class="wikilink2" title="docs:guide-user:firewall:netfilter-iptables:netfilter" rel="nofollow" data-wiki-id="docs:guide-user:firewall:netfilter-iptables:netfilter">netfilter rules</a>, the only difference is that <span style='color:blue; '>matches</span> are called <span style='color:blue; '>classifiers</span> and the <span style='color:red; '>TARGET</span> are called <span style='color:red; '>VERDICT</span> in available documentation. However, since it is possible to do the filtering <del>entirely</del> with netfilter (almost, doesn&#039;t forget Layer 2 packets like arp), this does not really matter.</div>
</li>
</ul>
<div class="table sectionedit15"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign" colspan="2"> Filter (Classifier)  </th><th class="col2 centeralign">  Description  </th><th class="col3 centeralign">  kmod-sched-core  </th><th class="col4 rightalign">  kmod-sched </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> → <a href="http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=commit;h=e5dfb815181fcb186d6080ac3a091eadff2d98fe" class="urlextern" title="http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=commit;h=e5dfb815181fcb186d6080ac3a091eadff2d98fe" rel="ugc nofollow">cls_flow</a>    </td><td class="col1 leftalign"> flow classifier  </td><td class="col2 leftalign"> bla  </td><td class="col3 centeralign">  ☑  </td><td class="col4 leftalign">  </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> → <a href="/doc/howto/packet.scheduler/cls_fw" class="wikilink2" title="doc:howto:packet.scheduler:cls_fw" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:cls_fw">cls_fw</a>    </td><td class="col1 leftalign"> firewall classifier  </td><td class="col2 leftalign"> bla  </td><td class="col3 centeralign">  ☑  </td><td class="col4 leftalign">  </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> → <a href="/doc/howto/packet.scheduler/cls_route" class="wikilink2" title="doc:howto:packet.scheduler:cls_route" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:cls_route">cls_route</a>    </td><td class="col1 leftalign"> route classifier  </td><td class="col2 leftalign"> bla  </td><td class="col3 centeralign">  ☑  </td><td class="col4 leftalign">  </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> → <a href="/doc/howto/packet.scheduler/cls_tcindex" class="wikilink2" title="doc:howto:packet.scheduler:cls_tcindex" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:cls_tcindex">cls_tcindex</a>    </td><td class="col1"> tcindex classifier </td><td class="col2 leftalign"> bla  </td><td class="col3 centeralign">  ☑  </td><td class="col4 leftalign">  </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> → <a href="/doc/howto/packet.scheduler/cls_u32" class="wikilink2" title="doc:howto:packet.scheduler:cls_u32" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:cls_u32">cls_u32</a>    </td><td class="col1 leftalign"> u32 classifier  </td><td class="col2 leftalign"> bla  </td><td class="col3 centeralign">  ☑  </td><td class="col4 leftalign">  </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> → <a href="/doc/howto/packet.scheduler/cls_basic" class="wikilink2" title="doc:howto:packet.scheduler:cls_basic" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:cls_basic">cls_basic</a>    </td><td class="col1 leftalign"> basic classifier  </td><td class="col2 leftalign"> bla  </td><td class="col3 leftalign">  </td><td class="col4 centeralign">  ☑  </td>
	</tr>
	<tr class="row7">
		<td class="col0"> → <a href="/doc/howto/packet.scheduler/cls_cgroup" class="wikilink2" title="doc:howto:packet.scheduler:cls_cgroup" rel="nofollow" data-wiki-id="doc:howto:packet.scheduler:cls_cgroup">cls_cgroup</a> </td><td class="col1"> <a href="https://en.wikipedia.org/wiki/cgroups" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/cgroups">cgroups</a> (Control Group) Classifier </td><td class="col2 leftalign">   </td><td class="col3 leftalign">   </td><td class="col4"></td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table5&quot;,&quot;secid&quot;:15,&quot;range&quot;:&quot;12802-13596&quot;} -->
</div>

<h4 id="filter_with_packet_scheduler">Filter with packet scheduler</h4>
<div class="level4">

<p>
A filter is used by a classfull QDisc to determine in which bucket a packet will be enqueued. Whenever traffic arrives at a class with subclasses, it needs to be classified. Various methods may be used, one of which is filters. All filters attached to the class are called until one of them returns with a verdict. If no verdict is declared, other criteria may be considered. This behaviour varies between different QDiscs.
</p>
<div class="table sectionedit16"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign" colspan="3">                   </th><th class="col3 centeralign" colspan="2">  location  </th><th class="col5"> </th><th class="col6 centeralign" colspan="3">  match  </th><th class="col9 centeralign">  verdict/target  </th>
	</tr>
	<tr class="row1">
		<th class="col0"> tc </th><th class="col1"> what </th><th class="col2"> command </th><th class="col3"> interface </th><th class="col4"> target </th><th class="col5"> priority </th><th class="col6"> protocol </th><th class="col7"> filtertype </th><th class="col8"> [ filtertype specific parameters ] </th><th class="col9"> flowid </th>
	</tr>
	</thead>
	<tr class="row2">
		<td class="col0 leftalign" rowspan="3"> tc  </td><td class="col1" rowspan="3"> filter </td><td class="col2 leftalign"> add     </td><td class="col3"> dev eth0 </td><td class="col4"> <code>parent</code> 1: </td><td class="col5"> <code>prio</code> 10 </td><td class="col6"> <code>protocol</code> ip </td><td class="col7 leftalign"> <code>u32</code>    </td><td class="col8"> <code>match</code> ip <code>dport</code> 22 0xffff </td><td class="col9"> <code>classid</code> 1:202 </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> change  </td><td class="col1"> dev eth0 </td><td class="col2"> <code>parent</code> 1: </td><td class="col3"> <code>prio</code> 20 </td><td class="col4"> <code>protocol</code> ip </td><td class="col5 leftalign"> <code>u32</code>    </td><td class="col6"> <code>match</code> ip <code>dport</code> 22 0xffff </td><td class="col7"> <code>classid</code> 1:202 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> replace </td><td class="col1"> dev eth0 </td><td class="col2"> <code>parent</code> 1: </td><td class="col3"> <code>prio</code> 99 </td><td class="col4"> <code>protocol</code> ip </td><td class="col5"> <code>handle</code> </td><td class="col6 leftalign"> 202 fw                           </td><td class="col7"> <code>flowid</code> 1:202 </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table6&quot;,&quot;secid&quot;:16,&quot;range&quot;:&quot;14060-14717&quot;} -->
<p>
Rules:
</p>
<ul>
<li class="level1"><div class="li"> It is important to notice that filters reside within QDiscs - they are not masters of what happens. <span style='color:red; '>hä?</span><br/>
</div>
</li>
<li class="level1"><div class="li"> A filter always belongs to a qdisc and never to a class!</div>
</li>
</ul>

<p>
Notes:
</p>
<ul>
<li class="level1"><div class="li"> <code>packet scheduler</code> classifying is slower then <code>netfilter</code> classifying!<br/>
</div>
</li>
<li class="level1"><div class="li"> If you are using <abbr title="Network Address Translation">NAT</abbr>, <del>you cannot use the packet scheduler to filter for the source <abbr title="Internet Protocol">IP</abbr> address of different internal hosts</del>, because they are being replaced with the router&#039;s external <abbr title="Internet Protocol">IP</abbr> address before the packets enter the packet scheduler! Actually you can use cls_flow classifier, with option like nfct-src,nfct-dst,nfct-proto-src,nfct-proto-dst, it will retrieve original information from conntrack.</div>
</li>
</ul>

</div>

<h4 id="filter_with_packet_scheduler_and_netfilter">Filter with packet scheduler and netfilter</h4>
<div class="level4">

<p>
Using <code><a href="/docs/guide-user/firewall/netfilter-iptables/netfilter#configuration" class="wikilink2" title="docs:guide-user:firewall:netfilter-iptables:netfilter" rel="nofollow" data-wiki-id="docs:guide-user:firewall:netfilter-iptables:netfilter">iptables</a></code> and <code>tc filter</code>. <em>deprecated?</em> We first match wanted packets with netfilter and mark them, then match the mark (<em>handle 202</em>) and connect it with a certain classid (<em>flowid 1:202</em>):
</p>
<pre class="code bash">iptables <span class="re5">-t</span> mangle <span class="re5">-A</span> POSTROUTING <span class="re5">-j</span> MARK <span class="re5">--set-mark</span> <span class="nu0">202</span> <span class="re5">-p</span> udp <span class="re5">--dport</span> <span class="nu0">22</span>
tc filter add dev pppoe-dsl parent <span class="nu0">1</span>: prio <span class="nu0">1</span> protocol <span class="kw2">ip</span> handle <span class="nu0">202</span> fw flowid <span class="nu0">1</span>:<span class="nu0">202</span></pre>

</div>

<h4 id="filter_with_netfilter_only">Filter with netfilter only</h4>
<div class="level4">

<p>
It is possible, more efficient and comes with the most options to use netfilter to match and then directly classify network packets:
</p>
<pre class="code bash">iptables <span class="re5">-t</span> mangle <span class="re5">-A</span> POSTROUTING <span class="re5">-j</span> CLASSIFY <span class="re5">--set-class</span> <span class="nu0">1</span>:<span class="nu0">202</span> <span class="re5">-p</span> tcp <span class="re5">--dport</span> <span class="nu0">22</span></pre>

<p>
Here we match the combination of source <abbr title="Internet Protocol">IP</abbr> address, transport protocol, destination port and packet (not payload) length:
</p>
<pre class="code bash">iptables <span class="re5">-t</span> mangle <span class="re5">-A</span> POSTROUTING <span class="re5">-j</span> CLASSIFY <span class="re5">--set-class</span> <span class="nu0">1</span>:<span class="nu0">303</span> <span class="re5">-s</span> 192.168.0.15 <span class="re5">-p</span> tcp <span class="re5">--dport</span> <span class="nu0">80</span> <span class="re5">-m</span> length <span class="re5">--length</span> :<span class="nu0">512</span></pre>

<p>
Notes:
</p>
<ul>
<li class="level1"><div class="li"> You may read on the internet that you can use target CLASSIFY only on POSTROUTING, but it&#039;s not true since at least 2006, you can also use it on FORWARD and OUTPUT. From kernel 2.6.39, you are no longer restricted to the mangle table, and can classify with arptables (on OUTPUT and FORWARD)(<a href="http://comments.gmane.org/gmane.comp.security.firewalls.netfilter.devel/36340" class="urlextern" title="http://comments.gmane.org/gmane.comp.security.firewalls.netfilter.devel/36340" rel="ugc nofollow">http://comments.gmane.org/gmane.comp.security.firewalls.netfilter.devel/36340</a>).</div>
</li>
<li class="level1"><div class="li"> The already broken layer7 filtering functionality was removed by <a href="https://dev.openwrt.org/changeset/45423" class="urlextern" title="https://dev.openwrt.org/changeset/45423" rel="ugc nofollow">r45423</a> and <a href="https://dev.openwrt.org/changeset/45424" class="urlextern" title="https://dev.openwrt.org/changeset/45424" rel="ugc nofollow">r45424</a>.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Filters&quot;,&quot;hid&quot;:&quot;filters&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:14,&quot;range&quot;:&quot;12052-17033&quot;} -->
<h2 class="sectionedit17" id="approach_to_our_own_configuration">Approach to our own configuration</h2>
<div class="level2">

<p>
The configuration of the packet scheduler has to be tailored to your situation. Bear in mind what you are actually doing - controlling the behaviour of the packet scheduler managing the egress queue of a network interface.
</p>

<p>
We can:
</p>
<ol>
<li class="level1"><div class="li"> Manipulate the order of packets leaving the egress queue (re-order/prioritize) which reduces <a href="https://en.wikipedia.org/wiki/jitter" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/jitter">jitter</a> that occurs with congestion.</div>
</li>
<li class="level1"><div class="li"> Divide the queue into sub-queues, and then drop packets when they are full (traffic shaping) which shares available bandwidth between traffic types and/or users.</div>
</li>
</ol>

<p>
So, let&#039;s check your situation and then let&#039;s configure your packet scheduler accordingly:
</p>
<ol>
<li class="level1 node"><div class="li"> Do you require traffic control?</div>
<ul>
<li class="level2"><div class="li"> IF you generate more outgoing traffic than available upload bandwidth, STOP This will only clog your egress buffer and cause serious problems with jitter.</div>
</li>
</ul>
<ol>
<li class="level2"><div class="li"> IF your roommate is responsible for the excess traffic, and you cannot change this, THEN yes</div>
</li>
<li class="level2"><div class="li"> IF you do not generate more traffic then what can go through the line, but have problems with jitter then you could benefit from traffic prioritization.</div>
</li>
</ol>
</li>
</ol>
<ol>
<li class="level1 node"><div class="li"> What can you configure?</div>
<ol>
<li class="level2"><div class="li"> You can determine the behaviour of the packet scheduler through exactly three choices: the nesting (only in case the root qdisc is a classfull one), the particular algorithm(s) to be applied and particular parameters of the employed algorithm(s)</div>
</li>
</ol>
</li>
<li class="level1 node"><div class="li"> are you alone or is there traffic generated by multiple users at the same time?</div>
<ol>
<li class="level2"><div class="li"> in case you are alone, the configuration could look very simple. See →<a href="#examples" title="docs:guide-user:network:traffic-shaping:packet.scheduler ↵" class="wikilink1">Examples</a>.</div>
</li>
<li class="level2"><div class="li"> in case of multiple users, there are couple of methods only for the nesting.</div>
</li>
</ol>
</li>
<li class="level1 node"><div class="li"> what kind of traffic is being generated?</div>
<ol>
<li class="level2"><div class="li"> Given the fact that the packet scheduler can only do so much, it makes sense to distinguish between exactly only two types of traffic: traffic susceptible to jitter and time delay, and traffic that is not! Yes, can subdivide this two types further, but whether this makes sense, depends on the employed algorithm, on how full the egress buffer is and on your available upload bandwidth.</div>
</li>
</ol>
</li>
</ol>
<ul>
<li class="level1"><div class="li"> classfull or classless? → <a href="/docs/guide-user/network/traffic-shaping/packet.scheduler.theory#implementation_of_classfull_with_2_levels" class="wikilink1" title="docs:guide-user:network:traffic-shaping:packet.scheduler.theory" data-wiki-id="docs:guide-user:network:traffic-shaping:packet.scheduler.theory">implementation</a> that matches your situation best. Alone, use neither. Use classless.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Approach to our own configuration&quot;,&quot;hid&quot;:&quot;approach_to_our_own_configuration&quot;,&quot;codeblockOffset&quot;:7,&quot;secid&quot;:17,&quot;range&quot;:&quot;17034-19329&quot;} -->
<h2 class="sectionedit18" id="examples">Examples</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"><a href="/docs/guide-user/network/traffic-shaping/packet.scheduler.example1" class="wikilink1" title="docs:guide-user:network:traffic-shaping:packet.scheduler.example1" data-wiki-id="docs:guide-user:network:traffic-shaping:packet.scheduler.example1">packet.scheduler.example1</a> PRIO; one user, simple prioritizing</div>
</li>
<li class="level1"><div class="li"><a href="/docs/guide-user/network/traffic-shaping/packet.scheduler.example2" class="wikilink1" title="docs:guide-user:network:traffic-shaping:packet.scheduler.example2" data-wiki-id="docs:guide-user:network:traffic-shaping:packet.scheduler.example2">packet.scheduler.example2</a> HTB;  plain simple bandwidth sharing without concern for delay</div>
</li>
<li class="level1"><div class="li"><a href="/docs/guide-user/network/traffic-shaping/packet.scheduler.example3" class="wikilink1" title="docs:guide-user:network:traffic-shaping:packet.scheduler.example3" data-wiki-id="docs:guide-user:network:traffic-shaping:packet.scheduler.example3">packet.scheduler.example3</a> HFSC; several user with all sorts of traffic</div>
</li>
<li class="level1"><div class="li"><a href="/docs/guide-user/network/traffic-shaping/packet.scheduler.example4" class="wikilink1" title="docs:guide-user:network:traffic-shaping:packet.scheduler.example4" data-wiki-id="docs:guide-user:network:traffic-shaping:packet.scheduler.example4">packet.scheduler.example4</a> HFSC + FQ_CODEL + FLOW classifier; basic fair sharing behind triple play box </div>
</li>
<li class="level1"><div class="li"><a href="/docs/guide-user/network/traffic-shaping/packet.scheduler.example5" class="wikilink1" title="docs:guide-user:network:traffic-shaping:packet.scheduler.example5" data-wiki-id="docs:guide-user:network:traffic-shaping:packet.scheduler.example5">packet.scheduler.example5</a> HTB:  filter ROKU (or other steaming devices) using MAC addresses to save internet bandwidth</div>
</li>
</ul>

<p>
Note: The above examples do not make any use of UCI or anthing else, that is not OpenWrt-specific, so you can simply port them to any other Linux distributions and back.
</p>

<p>
If You are looking for <strong>Per <abbr title="Internet Protocol">IP</abbr>/MAC Download Speed</strong> limiting, be sure to check <a href="https://forum.openwrt.org/t/info-limiting-download-speed-based-on-mac/14092" class="urlextern" title="https://forum.openwrt.org/t/info-limiting-download-speed-based-on-mac/14092" rel="ugc nofollow">this</a> forum post.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Examples&quot;,&quot;hid&quot;:&quot;examples&quot;,&quot;codeblockOffset&quot;:7,&quot;secid&quot;:18,&quot;range&quot;:&quot;19330-20220&quot;} -->
<h3 class="sectionedit19" id="check_results">Check results</h3>
<div class="level3">

<p>
To check on your results, use <code>tc</code> with or without the option <code>-s</code> <code>(statistics)</code>:
</p>
<pre class="code bash">tc <span class="re5">-s</span> qdisc show dev pppoe-dsl
tc class show dev pppoe-dsl
tc filter show dev pppoe-dsl
iptables <span class="re5">-nL</span> <span class="re5">-v</span> <span class="re5">-x</span> <span class="re5">-t</span> mangle</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Check results&quot;,&quot;hid&quot;:&quot;check_results&quot;,&quot;codeblockOffset&quot;:7,&quot;secid&quot;:19,&quot;range&quot;:&quot;20221-20472&quot;} -->
<h2 class="sectionedit20" id="testing">Testing</h2>
<div class="level2">

<p>
Once you managed to set up a working configuration, you need to test it. Thoroughly! Failure to do so could produce unpredictable results and/or problems. 
</p>

<p>
Ideally you should set up your own mini-network that allows you to monitor and control the source, destination and traffic in between. 
</p>

<p>
Produce all kinds of outgoing traffic and measure the bandwidth distribution. 
</p>

<p>
Then measure and compare latency in different situations:
</p>
<ol>
<li class="level1"><div class="li"> with minimal traffic, without <abbr title="Quality of Service">QoS</abbr></div>
</li>
<li class="level1"><div class="li"> with heavy traffic and congestion, without <abbr title="Quality of Service">QoS</abbr></div>
</li>
<li class="level1"><div class="li"> with minimal traffic, with <abbr title="Quality of Service">QoS</abbr></div>
</li>
<li class="level1"><div class="li"> with heavy traffic and congestion, with <abbr title="Quality of Service">QoS</abbr></div>
</li>
</ol>

<p>
If you successful <em>please</em> <strong>share your knowledge</strong>!
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Testing&quot;,&quot;hid&quot;:&quot;testing&quot;,&quot;codeblockOffset&quot;:8,&quot;secid&quot;:20,&quot;range&quot;:&quot;20473-21153&quot;} -->
<h2 class="sectionedit21" id="start_on_boot">Start on boot</h2>
<div class="level2">

<p>
Make <code>init</code> restart your script every boot up.
</p>
<pre class="code bash"><span class="kw2">cat</span> <span class="sy0">&lt;&lt;</span> <span class="st0">&quot;EOF&quot;</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>init.d<span class="sy0">/</span>trafficc
<span class="co0">#!/bin/sh</span>
&nbsp;
<span class="re2">START</span>=<span class="nu0">50</span>
&nbsp;
boot <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="sy0">/</span>etc<span class="sy0">/</span>tc_hfsc.sh start
<span class="br0">&#125;</span>
&nbsp;
start<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="sy0">/</span>etc<span class="sy0">/</span>tc_hfsc.sh start
<span class="br0">&#125;</span>
&nbsp;
stop<span class="br0">&#40;</span><span class="br0">&#41;</span>  <span class="br0">&#123;</span>
        <span class="sy0">/</span>etc<span class="sy0">/</span>tc_hfsc.sh stop
<span class="br0">&#125;</span>
EOF
<span class="kw2">chmod</span> a+x <span class="sy0">/</span>etc<span class="sy0">/</span>init.d<span class="sy0">/</span>traffic
<span class="sy0">/</span>etc<span class="sy0">/</span>init.d<span class="sy0">/</span>traffic start
<span class="sy0">/</span>etc<span class="sy0">/</span>init.d<span class="sy0">/</span>traffic <span class="kw3">enable</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Start on boot&quot;,&quot;hid&quot;:&quot;start_on_boot&quot;,&quot;codeblockOffset&quot;:8,&quot;secid&quot;:21,&quot;range&quot;:&quot;21154-21521&quot;} -->
<h2 class="sectionedit22" id="hotplug">Hotplug</h2>
<div class="level2">

<p>
If you disconnect your dsl-connection, the device <code>pppoe-dsl</code> will close and so will its QDisc. 
</p>

<p>
The following script will restart it whenever you reconnect:
</p>
<pre class="code bash"><span class="kw2">cat</span> <span class="sy0">&lt;&lt;</span> <span class="st0">&quot;EOF&quot;</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>hotplug.d<span class="sy0">/</span>iface<span class="sy0">/</span><span class="nu0">30</span>-trafficc
<span class="co0">#!/bin/sh</span>
<span class="co0"># This script is executed as part of the hotplug event with</span>
<span class="co0"># HOTPLUG_TYPE=iface, triggered by various scripts when an interface</span>
<span class="co0"># is configured (ACTION=ifup) or deconfigured (ACTION=ifdown).  The</span>
<span class="co0"># interface is available as INTERFACE, the real device as DEVICE.</span>
&nbsp;
<span class="br0">&#91;</span> <span class="st0">&quot;<span class="es2">$ACTION</span>&quot;</span> = <span class="kw2">ifup</span> <span class="re5">-a</span> <span class="st0">&quot;<span class="es2">$INTERFACE</span>&quot;</span> = <span class="st0">&quot;dsl&quot;</span> <span class="br0">&#93;</span> 
<span class="sy0">&amp;&amp;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>init.d<span class="sy0">/</span>trafficc enabled <span class="sy0">&amp;&amp;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>tc_hfsc.sh
EOF</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Hotplug&quot;,&quot;hid&quot;:&quot;hotplug&quot;,&quot;codeblockOffset&quot;:9,&quot;secid&quot;:22,&quot;range&quot;:&quot;21522-22147&quot;} -->
<h2 class="sectionedit23" id="statistical_data">Statistical Data</h2>
<div class="level2">

<p>
Once your configuration is up and running, you may want to collect some statistical data:
</p>
<ul>
<li class="level1"><div class="li"> about bandwidth used by the different classes</div>
</li>
<li class="level1"><div class="li"> packets dropped (!)</div>
</li>
<li class="level1"><div class="li"> number of packets, packets size, which protocol was being used, source <abbr title="Internet Protocol">IP</abbr>, ...</div>
</li>
<li class="level1"><div class="li"> the data <code>tc</code> and <code>iptables</code> dispense is of course not sooo well formated.</div>
</li>
<li class="level1"><div class="li"> use a tool to collect and parse data: <a href="/doc/howto/ngn" class="wikilink2" title="doc:howto:ngn" rel="nofollow" data-wiki-id="doc:howto:ngn">NGN</a></div>
</li>
</ul>

<p>
Note: If you do not log only your own traffic data, please mind <strong><span style='color:red; '>data privacy protection laws</span></strong> to prevent you from going to jail or paying a fine.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Statistical Data&quot;,&quot;hid&quot;:&quot;statistical_data&quot;,&quot;codeblockOffset&quot;:10,&quot;secid&quot;:23,&quot;range&quot;:&quot;22148-22736&quot;} -->
<h2 class="sectionedit24" id="tips">Tips</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Leave some bandwidth available in your packet scheduler configuration for unspecified traffic. This will help avoid blocking important low-volume traffic you may have forgetten to consider.</div>
</li>
<li class="level1"><div class="li"> Don&#039;t forget to classify ARP packets! (even if you match all packets in iptables, you won&#039;t match ARP packet, as iptables is layer 3 and ARP is layer 2)</div>
</li>
<li class="level1"><div class="li"> If you use any virtual interfaces, don&#039;t forget to configure the queue size using the txqueuelan traffic. The default is 0. </div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Tips&quot;,&quot;hid&quot;:&quot;tips&quot;,&quot;codeblockOffset&quot;:10,&quot;secid&quot;:24,&quot;range&quot;:&quot;22737-23234&quot;} -->
<h2 class="sectionedit25" id="terminology">Terminology</h2>
<div class="level2">
<div class="table sectionedit26"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> <code>Queueing Discipline (QDisc)</code> </th><th class="col1"> An algorithm that manages the queue of a device, either incoming (ingress) or outgoing (egress). Also referred to as a packet scheduler. </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>Root QDisc</code> </td><td class="col1 leftalign"> Not an actual queuing discipline (QDisc), but rather the location where traffic control structures can be attached to an interface for egress (outbound traffic). It can contain any of the queuing disciplines (qdiscs) with potential classes and class structures.  </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>Ingress QDisc</code> </td><td class="col1"> The location where ingress (incoming traffic) filters can be attached. For practical purposes, the ingress qdisc is merely a convenient object onto which to attach a policer to limit the amount of traffic accepted on a network interface. </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>Classless QDisc</code> </td><td class="col1"> A QDisc with no configurable internal subdivisions. </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>Classful QDisc</code> </td><td class="col1 leftalign"> Contains multiple classes. Some of these classes contain a further QDisc, which may again be classful, but need not be.  </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>Work-Conserving</code> </td><td class="col1"> A work-conserving QDisc never delays packets. It does NOT “shape” packets. </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>Non-Work-Conserving</code> </td><td class="col1"> A non-work-conserving QDiscs may delay packets and “shape” them. This means that they sometimes refuse to pass a packet, even though they have one available. </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>Tail drop Queue</code> </td><td class="col1"> See <a href="https://en.wikipedia.org/wiki/Tail drop" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Tail drop">Tail drop</a>. </td>
	</tr>
	<tr class="row8">
		<th class="col0"> <code>Classes</code> </th><th class="col1"> Classes are sub-QDiscs which allow the user to configure <abbr title="Quality of Service">QoS</abbr> in more detail. Classes can contain additional classes. Classes do not have a queue, do not contain any network packets and cannot contain filters. </th>
	</tr>
	<tr class="row9">
		<td class="col0"> <code>Leaf Class</code> </td><td class="col1"> End class without any child classes. Always contains a QDisc! In case one is not configure, the default pfifo_fast is used. Leaf classes give unused bandwidth back to their parent class. </td>
	</tr>
	<tr class="row10">
		<td class="col0"> <code>Inner Class</code> </td><td class="col1"> Classes which contain leaf-classes. </td>
	</tr>
	<tr class="row11">
		<td class="col0"> <code>Parent Class</code> </td><td class="col1"> Parent class can dynamically pass bandwidth to leaf-classes. </td>
	</tr>
	<tr class="row12">
		<td class="col0"> <code>Child Class</code> </td><td class="col1"> Class that has another class or a QDisc as parent and contains classes. </td>
	</tr>
	<tr class="row13">
		<th class="col0"> <code>Classifier</code> </th><th class="col1"> Determines which class to send a packet. </th>
	</tr>
	<tr class="row14">
		<td class="col0"> <code>Filter</code> </td><td class="col1"> Classification can be performed using filters. A filter contains a number of conditions which if matched, make the filter match. </td>
	</tr>
	<tr class="row15">
		<td class="col0"> <code>Scheduling</code> </td><td class="col1"> A QDisc may, with the help of a classifier, decide that some packets need to leave earlier than others. This process is called scheduling. </td>
	</tr>
	<tr class="row16">
		<td class="col0"> <code>Shaping</code> </td><td class="col1"> <a href="https://en.wikipedia.org/wiki/Traffic_shaping" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Traffic_shaping">Traffic Shaping</a> is the process of delaying packets to limit egress traffic to a maximum rate or smooth bursts. </td>
	</tr>
	<tr class="row17">
		<td class="col0"> <code>Policing</code> </td><td class="col1"> <a href="https://en.wikipedia.org/wiki/Traffic_policing" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Traffic_policing"> Traffic Policing</a> is the practice of dropping, marking or ignoring ingress packets that don&#039;t comply with user-defined criteria. </td>
	</tr>
	<tr class="row18">
		<td class="col0"> <code>Filters</code> </td><td class="col1"> Filters are used by classful QDiscs to determine which class a packet will be queued to. </td>
	</tr>
	<tr class="row19">
		<td class="col0"> <code><abbr title="Transmission Control Protocol">TCP</abbr> Turbo</code> </td><td class="col1"> Yet another <a href="https://en.wikipedia.org/wiki/Buzzword bingo" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Buzzword bingo">Buzzword bingo</a> term; means the prioritization of <abbr title="Transmission Control Protocol">TCP</abbr> ACK-packets on the upload-side. </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table7&quot;,&quot;secid&quot;:26,&quot;range&quot;:&quot;23259-26134&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Terminology&quot;,&quot;hid&quot;:&quot;terminology&quot;,&quot;codeblockOffset&quot;:10,&quot;secid&quot;:25,&quot;range&quot;:&quot;23235-26135&quot;} -->
<h2 class="sectionedit27" id="reference">Reference</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://lartc.org" class="urlextern" title="http://lartc.org" rel="ugc nofollow">Linux Advanced Routing &amp; Traffic Control</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://lartc.org/howto/lartc.qdisc.html" class="urlextern" title="http://lartc.org/howto/lartc.qdisc.html" rel="ugc nofollow">Queueing Disciplines for Bandwidth Management</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://lartc.org/manpages" class="urlextern" title="http://lartc.org/manpages" rel="ugc nofollow">tc man pages</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.bufferbloat.net/projects/bloat/wiki/Linux_Tips" class="urlextern" title="http://www.bufferbloat.net/projects/bloat/wiki/Linux_Tips" rel="ugc nofollow">Linux Tips</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://lxr.free-electrons.com/source/net/sched/" class="urlextern" title="http://lxr.free-electrons.com/source/net/sched/" rel="ugc nofollow">Source code</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://linuxgazette.net/135/pfeiffer.html" class="urlextern" title="http://linuxgazette.net/135/pfeiffer.html" rel="ugc nofollow">TCP and Linux&#039; Pluggable Congestion Control Algorithms</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.mail-archive.com/lartc@mailman.ds9a.nl/msg17009.html" class="urlextern" title="http://www.mail-archive.com/lartc@mailman.ds9a.nl/msg17009.html" rel="ugc nofollow">Packet scheduler and VLANs</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Reference&quot;,&quot;hid&quot;:&quot;reference&quot;,&quot;codeblockOffset&quot;:10,&quot;secid&quot;:27,&quot;range&quot;:&quot;26136-&quot;} -->