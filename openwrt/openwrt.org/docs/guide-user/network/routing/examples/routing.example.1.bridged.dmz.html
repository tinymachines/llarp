
<h1 class="sectionedit1" id="routing_examplebridged_dmz">Routing example: Bridged DMZ</h1>
<div class="level1">

<p>
<a href="/_detail/media/doc/howtos/bridgeddmz2.png?id=docs%3Aguide-user%3Anetwork%3Arouting%3Aexamples%3Arouting.example.1.bridged.dmz" class="media" title="media:doc:howtos:bridgeddmz2.png"><img src="/_media/media/doc/howtos/bridgeddmz2.png" class="media" loading="lazy" alt="" /></a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Routing example: Bridged DMZ&quot;,&quot;hid&quot;:&quot;routing_examplebridged_dmz&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-81&quot;} -->
<h2 class="sectionedit2" id="router_a">Router A</h2>
<div class="level2">
<pre class="code bash"><span class="co0"># /etc/config/network</span>
&nbsp;
config switch <span class="st_h">'eth0'</span>
	option <span class="kw3">enable</span>		<span class="st_h">'1'</span>
&nbsp;
config switch_vlan <span class="st_h">'eth0_0'</span>
	option device		<span class="st_h">'eth0'</span>
	option vlan		<span class="st_h">'0'</span>
	option ports		<span class="st_h">'0 5'</span>
&nbsp;
config switch_vlan <span class="st_h">'eth0_1'</span>
	option device		<span class="st_h">'eth0'</span>
	option vlan		<span class="st_h">'1'</span>
	option ports		<span class="st_h">'4 5'</span>
&nbsp;
config switch_vlan <span class="st_h">'eth0_2'</span>
	option device		<span class="st_h">'eth0'</span>
	option vlan		<span class="st_h">'2'</span>
	option ports		<span class="st_h">'1 2 3 5*'</span>
&nbsp;
config interface <span class="st_h">'wan'</span>
	option device		<span class="st_h">'eth0.0'</span>
	option proto		<span class="st_h">'pppoe'</span>
	option username		<span class="st_h">'MikeRophone'</span>
	option password		<span class="st_h">'fnord!'</span>
	option keepalive	<span class="st_h">'10'</span>
	option defaultroute	<span class="st_h">'1'</span>
&nbsp;
config interface <span class="st_h">'lan'</span>
	option device		<span class="st_h">'eth0.2'</span>
	option proto		<span class="st_h">'static'</span>
	option ipaddr		<span class="st_h">'192.168.2.1'</span>
	option netmask		<span class="st_h">'255.255.255.0'</span>
&nbsp;
config interface <span class="st_h">'dmz'</span>
	option device		<span class="st_h">'br-dmz'</span>
	option proto		<span class="st_h">'static'</span>
	option ipaddr		<span class="st_h">'192.168.1.1'</span>
	option netmask		<span class="st_h">'255.255.255.0'</span>
&nbsp;
config device <span class="st_h">'dmz_dev'</span>
	option name		<span class="st_h">'br-dmz'</span>
	option <span class="kw3">type</span>		<span class="st_h">'bridge'</span>
	list ports		<span class="st_h">'eth0.0'</span>
	list ports		<span class="st_h">'eth0.1'</span>
&nbsp;
<span class="co0"># /etc/config/wireless</span>
&nbsp;
config wifi-device <span class="st_h">'wl0'</span>
	option <span class="kw3">type</span>		<span class="st_h">'broadcom'</span>
	option channel		<span class="st_h">'5'</span>
	option disabled		<span class="st_h">'0'</span>
&nbsp;
config wifi-iface <span class="st_h">'dmz'</span>
	option device		<span class="st_h">'wl0'</span>
	option network		<span class="st_h">'dmz'</span>
	option mode		<span class="st_h">'ap'</span>
	option ssid		<span class="st_h">'HeartOfGold'</span>
	option encryption	<span class="st_h">'psk2'</span>
	option key		<span class="st_h">'Beeblebrox'</span>
&nbsp;
<span class="co0"># /etc/config/dhcp</span>
&nbsp;
config dhcp <span class="st_h">'lan'</span>
	option interface	<span class="st_h">'lan'</span>
	option start 		<span class="st_h">'100'</span>
	option limit		<span class="st_h">'50'</span>
	option leasetime	<span class="st_h">'12h'</span>
&nbsp;
config dhcp <span class="st_h">'dmz'</span>
	option interface	<span class="st_h">'dmz'</span>
	option start 		<span class="st_h">'100'</span>
	option limit		<span class="st_h">'50'</span>
	option leasetime	<span class="st_h">'12h'</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Router A&quot;,&quot;hid&quot;:&quot;router_a&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;82-1556&quot;} -->
<h2 class="sectionedit3" id="router_b">Router B</h2>
<div class="level2">
<pre class="code bash"><span class="co0"># /etc/config/network</span>
&nbsp;
config switch <span class="st_h">'eth0'</span>
	option <span class="kw3">enable</span>		<span class="st_h">'1'</span>
&nbsp;
config switch_vlan <span class="st_h">'eth0_0'</span>
	option device		<span class="st_h">'eth0'</span>
	option vlan		<span class="st_h">'0'</span>
	option ports		<span class="st_h">'1 2 5'</span>
&nbsp;
config switch_vlan <span class="st_h">'eth0_1'</span>
	option device		<span class="st_h">'eth0'</span>
	option vlan		<span class="st_h">'1'</span>
	option ports		<span class="st_h">'0 5'</span>
&nbsp;
config switch_vlan <span class="st_h">'eth0_2'</span>
	option device		<span class="st_h">'eth0'</span>
	option vlan		<span class="st_h">'2'</span>
	option ports		<span class="st_h">'3 4 5*'</span>
&nbsp;
config interface <span class="st_h">'wan'</span>
	option device		<span class="st_h">'eth0.2'</span>
	option proto		<span class="st_h">'dhcp'</span>
	option ipaddr		<span class="st_h">'192.168.1.123'</span>
&nbsp;
config interface <span class="st_h">'lan'</span>
	option device		<span class="st_h">'eth0.0'</span>
	option proto		<span class="st_h">'static'</span>
	option ipaddr		<span class="st_h">'192.168.2.1'</span>
	option netmask		<span class="st_h">'255.255.255.0'</span>
&nbsp;
config interface <span class="st_h">'dmz'</span>
	option device		<span class="st_h">'br-dmz'</span>
	option proto		<span class="st_h">'static'</span>
	option ipaddr		<span class="st_h">'192.168.3.1'</span>
	option netmask		<span class="st_h">'255.255.255.0'</span>
&nbsp;
config device <span class="st_h">'dmz_dev'</span>
	option name		<span class="st_h">'br-dmz'</span>
	option <span class="kw3">type</span>		<span class="st_h">'bridge'</span>
	list ports		<span class="st_h">'eth0.1'</span>
	list ports		<span class="st_h">'eth0.2'</span>
&nbsp;
<span class="co0"># /etc/config/wireless</span>
&nbsp;
config wifi-device <span class="st_h">'wl0'</span>
	option <span class="kw3">type</span>		<span class="st_h">'broadcom'</span>
	option channel		<span class="st_h">'5'</span>
	option disabled		<span class="st_h">'0'</span>
&nbsp;
config wifi-iface <span class="st_h">'wan'</span>
	option device		<span class="st_h">'wl0'</span>
	option network		<span class="st_h">'wan'</span>
	option mode		<span class="st_h">'sta'</span>
	option ssid		<span class="st_h">'HeartOfGold'</span>
	option encryption	<span class="st_h">'psk2'</span>
	option key		<span class="st_h">'Beeblebrox'</span>
&nbsp;
config wifi-iface <span class="st_h">'dmz'</span>
	option device		<span class="st_h">'wl0'</span>
	option network		<span class="st_h">'dmz'</span>
	option mode		<span class="st_h">'ap'</span>
	option ssid		<span class="st_h">'FreeBeer'</span>
	option encryption	<span class="st_h">'none'</span>
&nbsp;
<span class="co0"># /etc/config/dhcp</span>
&nbsp;
config dhcp <span class="st_h">'lan'</span>
	option interface	<span class="st_h">'lan'</span>
	option start 		<span class="st_h">'100'</span>
	option limit		<span class="st_h">'50'</span>
	option leasetime	<span class="st_h">'12h'</span>
&nbsp;
config dhcp <span class="st_h">'dmz'</span>
	option interface	<span class="st_h">'dmz'</span>
	option start 		<span class="st_h">'100'</span>
	option limit		<span class="st_h">'50'</span>
	option leasetime	<span class="st_h">'12h'</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Router B&quot;,&quot;hid&quot;:&quot;router_b&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:3,&quot;range&quot;:&quot;1557-&quot;} -->