
<h1 class="sectionedit1" id="accessing_the_modem_through_the_router">Accessing the modem through the router</h1>
<div class="level1">

</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_start&quot;,&quot;name&quot;:&quot;meta:infobox:howto_links&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:2,&quot;range&quot;:&quot;0-&quot;} --><div class="plugin_include_content plugin_include__meta:infobox:howto_links">
<div class="level1">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_info plugin_wrap">
<p>
This article relies on the following:
</p>
<ul>
<li class="level1"><div class="li"> Accessing <a href="/docs/guide-quick-start/walkthrough_login" class="wikilink1" title="docs:guide-quick-start:walkthrough_login" data-wiki-id="docs:guide-quick-start:walkthrough_login">web interface</a> / <a href="/docs/guide-quick-start/sshadministration" class="wikilink1" title="docs:guide-quick-start:sshadministration" data-wiki-id="docs:guide-quick-start:sshadministration">command-line interface</a></div>
</li>
<li class="level1"><div class="li"> Managing <a href="/docs/guide-user/base-system/uci" class="wikilink1" title="docs:guide-user:base-system:uci" data-wiki-id="docs:guide-user:base-system:uci">configs</a> / <a href="/docs/guide-user/additional-software/managing_packages" class="wikilink1" title="docs:guide-user:additional-software:managing_packages" data-wiki-id="docs:guide-user:additional-software:managing_packages">packages</a> / <a href="/docs/guide-user/base-system/managing_services" class="wikilink1" title="docs:guide-user:base-system:managing_services" data-wiki-id="docs:guide-user:base-system:managing_services">services</a> / <a href="/docs/guide-user/base-system/log.essentials" class="wikilink1" title="docs:guide-user:base-system:log.essentials" data-wiki-id="docs:guide-user:base-system:log.essentials">logs</a></div>
</li>
</ul>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;0-&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_end&quot;,&quot;name&quot;:&quot;meta:infobox:howto_links&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:3,&quot;range&quot;:&quot;0-&quot;} --></div>
<div class="level1">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Accessing the modem through the router&quot;,&quot;hid&quot;:&quot;accessing_the_modem_through_the_router&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-135&quot;} -->
<h2 class="sectionedit6" id="introduction">Introduction</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> This how-to describes the method for accessing the modem connected to your OpenWrt router.</div>
</li>
<li class="level1"><div class="li"> It helps to reach the administrative interface of a DSL/DOCSIS modem operating in the bridge mode.</div>
</li>
<li class="level1"><div class="li"> The prerequisite is to know the modem&#039;s <abbr title="Internet Protocol">IP</abbr> address, port/protocol and username/password.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Introduction&quot;,&quot;hid&quot;:&quot;introduction&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;136-452&quot;} -->
<h2 class="sectionedit7" id="goals">Goals</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Access the modem operating in the bridge mode through the router.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Goals&quot;,&quot;hid&quot;:&quot;goals&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;453-541&quot;} -->
<h2 class="sectionedit8" id="web_interface_instructions">Web interface instructions</h2>
<div class="level2">

<p>
Assuming your modem&#039;s <abbr title="Internet Protocol">IP</abbr> address is <code>192.168.100.1</code> and it is connected to the router&#039;s <abbr title="Wide Area Network">WAN</abbr> interface.
</p>
<ol>
<li class="level1"><div class="li"> Navigate to <strong>LuCI → Network → Interfaces</strong>.</div>
</li>
<li class="level1 node"><div class="li"> Click <strong>Add new interface...</strong> and specify:</div>
<ul>
<li class="level2"><div class="li"> Name: <code>modem</code></div>
</li>
<li class="level2"><div class="li"> Protocol: Static address</div>
</li>
<li class="level2"><div class="li"> Interface: <code>@wan</code></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Click <strong>Create interface</strong>.</div>
</li>
<li class="level1 node"><div class="li"> On the <strong>General Settings</strong> tab specify:</div>
<ul>
<li class="level2"><div class="li"> <abbr title="Internet Protocol version 4">IPv4</abbr> address: <code>192.168.100.2</code></div>
</li>
<li class="level2"><div class="li"> <abbr title="Internet Protocol version 4">IPv4</abbr> netmask: <code>255.255.255.0</code></div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> On the <strong>Firewall Settings</strong> tab specify:</div>
<ul>
<li class="level2"><div class="li"> Create / Assign firewall-zone: <code>wan</code></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Click <strong>Save</strong>, then <strong>Save &amp; Apply</strong>.</div>
</li>
</ol>

<p>
Make sure the modem subnet doesn&#039;t overlap with your <abbr title="Local Area Network">LAN</abbr>, otherwise change the <abbr title="Local Area Network">LAN</abbr> subnet.
</p>
<ol>
<li class="level1"><div class="li"> Navigate to <strong>LuCI → Network → Interfaces</strong>.</div>
</li>
<li class="level1 node"><div class="li"> Click <strong>Edit</strong> on the <code>lan</code> interface and change the <abbr title="Internet Protocol">IP</abbr> address:</div>
<ul>
<li class="level2"><div class="li"> <abbr title="Internet Protocol version 4">IPv4</abbr> address: <code>192.168.2.1</code></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Click <strong>Save</strong>, then <strong>Save &amp; Apply</strong> and then <strong>Apply unchecked</strong>.</div>
</li>
</ol>

<p>
At this point the modem should be reachable from any host in the <abbr title="Local Area Network">LAN</abbr>.
</p>

</div>

<h4 id="note">NOTE</h4>
<div class="level4">

<p>
If you are using the BanIP package, make sure to add the <abbr title="Internet Protocol">IP</abbr> to the allowlist. Ex. <code>192.168.100.0/24</code>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Web interface instructions&quot;,&quot;hid&quot;:&quot;web_interface_instructions&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:8,&quot;range&quot;:&quot;542-1667&quot;} -->
<h2 class="sectionedit9" id="command-line_instructions">Command-line instructions</h2>
<div class="level2">

<p>
Assuming your modem&#039;s <abbr title="Internet Protocol">IP</abbr> address is <code>192.168.100.1</code> and it is connected to the router&#039;s <abbr title="Wide Area Network">WAN</abbr> interface.
</p>

<p>
Set up a static <abbr title="Wide Area Network">WAN</abbr> <a href="/docs/guide-user/network/network_interface_alias" class="wikilink1" title="docs:guide-user:network:network_interface_alias" data-wiki-id="docs:guide-user:network:network_interface_alias">alias</a> and assign it to the <abbr title="Wide Area Network">WAN</abbr> zone.
</p>
<pre class="code bash"><span class="co0"># Configure network</span>
uci <span class="re5">-q</span> del network.modem
uci <span class="kw1">set</span> network.modem=<span class="st0">&quot;interface&quot;</span>
uci <span class="kw1">set</span> network.modem.proto=<span class="st0">&quot;static&quot;</span>
uci <span class="kw1">set</span> network.modem.device=<span class="st0">&quot;@wan&quot;</span>
uci <span class="kw1">set</span> network.modem.ipaddr=<span class="st0">&quot;192.168.100.2&quot;</span>
uci <span class="kw1">set</span> network.modem.netmask=<span class="st0">&quot;255.255.255.0&quot;</span>
uci commit network
service network restart
&nbsp;
<span class="co0"># Configure firewall</span>
uci del_list firewall.<span class="sy0">@</span>zone<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.network=<span class="st0">&quot;modem&quot;</span>
uci add_list firewall.<span class="sy0">@</span>zone<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.network=<span class="st0">&quot;modem&quot;</span>
uci commit firewall
service firewall restart</pre>

<p>
Make sure the modem subnet doesn&#039;t overlap with your <abbr title="Local Area Network">LAN</abbr>, otherwise change the <abbr title="Local Area Network">LAN</abbr> subnet.
</p>
<pre class="code bash"><span class="co0"># Configure network</span>
uci <span class="kw1">set</span> network.lan.ipaddr=<span class="st0">&quot;192.168.2.1&quot;</span>
uci commit network
service network restart</pre>

<p>
If the <abbr title="Wide Area Network">WAN</abbr> L2 device doesn&#039;t match L3 device like in case of PPPoE, change the modem interface.
</p>
<pre class="code bash"><span class="co0"># Fetch WAN L2 device</span>
. <span class="sy0">/</span>lib<span class="sy0">/</span>functions<span class="sy0">/</span>network.sh
network_flush_cache
network_find_wan NET_IF
network_get_physdev NET_L2D <span class="st0">&quot;<span class="es3">${NET_IF}</span>&quot;</span>
&nbsp;
<span class="co0"># Configure network</span>
uci <span class="kw1">set</span> network.modem.device=<span class="st0">&quot;<span class="es3">${NET_L2D}</span>&quot;</span>
uci commit network
service network restart</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Command-line instructions&quot;,&quot;hid&quot;:&quot;command-line_instructions&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:9,&quot;range&quot;:&quot;1668-&quot;} -->