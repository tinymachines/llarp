
<h1 class="sectionedit1" id="isp_configurations">ISP Configurations</h1>
<div class="level1">

<p>
This page describes how to connect to networks of different commercial Internet service providers.
At this time, most of the DSL configurations described below only apply to <strong>modem</strong>-router devices using <a href="/docs/techref/hardware/soc/soc.lantiq" class="wikilink1" title="docs:techref:hardware:soc:soc.lantiq" data-wiki-id="docs:techref:hardware:soc:soc.lantiq">Lantiq SoC</a>. <a href="/meta/infobox/broadcom_dsl" class="wikilink1" title="meta:infobox:broadcom_dsl" data-wiki-id="meta:infobox:broadcom_dsl">There is no DSL support for Broadcom devices</a>.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_start&quot;,&quot;name&quot;:&quot;meta:infobox:howto_links&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:2,&quot;range&quot;:&quot;0-&quot;} --><div class="plugin_include_content plugin_include__meta:infobox:howto_links">
<div class="level1">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_important plugin_wrap">
<p>
This article may contain network configuration that depends on migration to DSA in OpenWrt 21.02
</p>
<ul>
<li class="level1"><div class="li"> Check if your device uses DSA or swconfig as not all devices have been migrated</div>
</li>
<li class="level1"><div class="li"> ifname@interface has been moved to device sections</div>
</li>
<li class="level1"><div class="li"> <a href="/docs/guide-user/network/dsa/start" class="wikilink1" title="docs:guide-user:network:dsa:start" data-wiki-id="docs:guide-user:network:dsa:start">DSA Networking</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://forum.openwrt.org/t/mini-tutorial-for-dsa-network-config/96998" class="urlextern" title="https://forum.openwrt.org/t/mini-tutorial-for-dsa-network-config/96998" rel="ugc nofollow">Mini tutorial for DSA network config</a> on the forum</div>
</li>
<li class="level1"><div class="li"> <a href="https://openwrt.org/releases/21.02/notes-21.02.0#new_network_configuration_syntax_and_boardjson_change" class="urlextern" title="https://openwrt.org/releases/21.02/notes-21.02.0#new_network_configuration_syntax_and_boardjson_change" rel="ugc nofollow">DSA in the 21.02 release notes</a></div>
</li>
</ul>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;0-&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_end&quot;,&quot;name&quot;:&quot;meta:infobox:howto_links&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:3,&quot;range&quot;:&quot;0-&quot;} --></div>
<div class="level1">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;ISP Configurations&quot;,&quot;hid&quot;:&quot;isp_configurations&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-458&quot;} -->
<h2 class="sectionedit6" id="algeria">Algeria</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Algeria&quot;,&quot;hid&quot;:&quot;algeria&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;459-479&quot;} -->
<h3 class="sectionedit7" id="adsl_idoom_algerie_telecom">ADSL IDOOM Algerie telecom</h3>
<div class="level3">

<p>
the below config is tested with ADSL 8 mbps subscription and it is confirmed that is working under version OpenWrt 19.07.4
</p>
<pre class="code">config atm-bridge &#039;atm&#039;
        option encaps &#039;llc&#039;
        option nameprefix &#039;dsl&#039;
        option vpi &#039;0&#039;
        option vci &#039;100&#039;
        option payload &#039;bridged&#039;

config dsl &#039;dsl&#039;
        option annex &#039;a&#039;
        option ds_snr_offset &#039;0&#039;

config interface &#039;wan&#039;
        option ifname &#039;dsl0&#039;
        option proto &#039;pppoe&#039;
        option username &#039;YOURADSLUSERNAME&#039;
        option password &#039;YOURADSLPASSWORD&#039;
        list dns &#039;8.8.8.8&#039;
        list dns &#039;8.8.4.4&#039;
        option peerdns &#039;0&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;ADSL IDOOM Algerie telecom&quot;,&quot;hid&quot;:&quot;adsl_idoom_algerie_telecom&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;480-1146&quot;} -->
<h2 class="sectionedit8" id="australia">Australia</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Australia&quot;,&quot;hid&quot;:&quot;australia&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:8,&quot;range&quot;:&quot;1147-1169&quot;} -->
<h3 class="sectionedit9" id="nbn">NBN</h3>
<div class="level3">

</div>

<h4 id="telstra_fttn">Telstra (FTTN)</h4>
<div class="level4">

<p>
Place the supplied Telstra modem into <em>bridge mode</em>, and plug an openwrt router into one of the <abbr title="Local Area Network">LAN</abbr> ports.
No special settings need to be applied, just <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>. The Telstra modem will do the authentication for you.
Note: It may be useful to assign a static <abbr title="Internet Protocol">IP</abbr> to the OpenWrt router from the modem, and optionally place it into a <abbr title="Demilitarized Zone">DMZ</abbr>
</p>

</div>

<h4 id="tpg_hfc">TPG (HFC)</h4>
<div class="level4">

<p>
Plug an openwrt router into the supplied simple DOCSIS modem (or replace modem and call support to authenticate new DOCSIS serial number).
The network settings for openwrt router needs to use <abbr title="Virtual Local Area Network">VLAN</abbr> 2 (ethX.2), probably best to spoof MAC to match supplied router <abbr title="Wide Area Network">WAN</abbr> interface.
</p>
<pre class="code">config interface &#039;wan&#039;
	option ifname &#039;eth1.2&#039;
	option proto &#039;pppoe&#039;
	option username &#039;xxxx@tpg.com.au&#039;
	option password &#039;zzzz&#039;
	option mtu &#039;1500&#039;
	option macaddr &#039;xx:xx:xx:xx:xx:xx&#039;
	option pppd_options &#039;debug&#039;
	option ipv6 &#039;auto&#039;</pre>

</div>

<h4 id="tpg_fttc">TPG (FTTC)</h4>
<div class="level4">

<p>
Simply set the <abbr title="Wide Area Network">WAN</abbr> port to use the PPPoE protocol and enter your TPG username and password. That&#039;s all.  No <abbr title="Virtual Local Area Network">VLAN</abbr> configuration, such as setting <abbr title="Wide Area Network">WAN</abbr> to use VLAN2 was required.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;NBN&quot;,&quot;hid&quot;:&quot;nbn&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:9,&quot;range&quot;:&quot;1170-2278&quot;} -->
<h3 class="sectionedit10" id="legacy_network_adsladsl2">Legacy Network (ADSL/ADSL2+)</h3>
<div class="level3">

</div>

<h4 id="tpg_adsl2">TPG (ADSL2+)</h4>
<div class="level4">

<p>
A good way to configure your internet is using two devices: A dedicated modem that just accepts all ATM traffic and bridges it to its ethernet port, and a second device that acts as a router to your internal <abbr title="Local Area Network">LAN</abbr>, and the <abbr title="Wide Area Network">WAN</abbr> port authenticates to your <abbr title="Internet Service Provider">ISP</abbr> via pppoe, and is physically connected to the first device over ethernet cable.
</p>

<p>
Below, I show two configs, one config for the modem, (here Netgear DM200 ADSL2+/VDSL modem) and the second config showing the necessary authentication to TPG <abbr title="Internet Service Provider">ISP</abbr> for the second device (another OpenWrt router).
</p>
<pre class="code">package network                                                                 
                                                                                
config atm-bridge &#039;atm&#039;                                                         
        option vpi &#039;8&#039;                                                          
        option vci &#039;35&#039;                                                         
        option encaps &#039;llc&#039;                                                     
        option payload &#039;bridged&#039;                                                
                                                                                
config dsl &#039;dsl&#039;                                                                
        option annex &#039;a2p&#039;                                                      
        option fwannex &#039;a&#039;                                                      
        option firmware &#039;/lib/firmware/lantiq-vrx200-a.bin&#039;                     
        option xfer_mode &#039;atm&#039;                                                  
                                                                                
config interface &#039;lan&#039;                                                          
        option type &#039;bridge&#039;                                                    
        option ifname &#039;eth0 nas0&#039;                                               
        option proto &#039;none&#039;                                                     
        option auto &#039;1&#039;                                                         
                                                                                
config device &#039;lan_dev&#039;                                                         
        option name &#039;eth0&#039;                                                      
        option macaddr &#039;yy.yy.yy.yy.yy.yy&#039;                                      
                                                                                
config device &#039;wan_dev&#039;                                                         
        option name &#039;nas0&#039;                                                      
        option macaddr &#039;xx.xx.xx.xx.xx.xx&#039;</pre>

<p>
Second device authenticates to <abbr title="Internet Service Provider">ISP</abbr> with:
</p>
<pre class="code">config interface &#039;wan&#039;
	option ifname &#039;eth1&#039;
	option proto &#039;pppoe&#039;
	option username &#039;xxxx@tpg.com.au&#039;
	option password &#039;zzzz&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Legacy Network (ADSL\/ADSL2+)&quot;,&quot;hid&quot;:&quot;legacy_network_adsladsl2&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:10,&quot;range&quot;:&quot;2279-5241&quot;} -->
<h2 class="sectionedit11" id="austria">Austria</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Austria&quot;,&quot;hid&quot;:&quot;austria&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:11,&quot;range&quot;:&quot;5242-5262&quot;} -->
<h3 class="sectionedit12" id="a1_telekom_austriavdsl2_with_down-_and_upstream_vectoring">A1 Telekom Austria / VDSL2 with down- and upstream vectoring</h3>
<div class="level3">

<p>
on <code>/etc/config/network</code> we have to modify the <abbr title="Wide Area Network">WAN</abbr> section to use vlan2
</p>
<pre class="code">config interface &#039;wan&#039;
        option ifname &#039;dsl0.2&#039;
        option proto &#039;pppoe&#039;
        option username &#039;**********&#039;
        option password &#039;********&#039;
        option ipv6 &#039;1&#039;
        option peerdns &#039;0&#039;
        option keepalive &#039;0&#039;</pre>

<p>
in the DSL section we use the annex b
(and optional if you have/need it, the firmware for your modem. In this case I use a FRITZBox 7362 SL)
</p>
<pre class="code">config dsl &#039;dsl&#039;
        option annex &#039;b&#039;
        option ds_snr_offset &#039;0&#039;
        option firmware &#039;/lib/modules/vr9-B-dsl.bin&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;A1 Telekom Austria \/ VDSL2 with down- and upstream vectoring&quot;,&quot;hid&quot;:&quot;a1_telekom_austriavdsl2_with_down-_and_upstream_vectoring&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:12,&quot;range&quot;:&quot;5263-5946&quot;} -->
<h3 class="sectionedit13" id="fonira_with_static_ipv4_and_fixed_ipv6_prefix">Fonira with static IPv4 and fixed IPv6 prefix</h3>
<div class="level3">

<p>
Fonira provides the option to get rid of carrier-grade <abbr title="Network Address Translation">NAT</abbr> by purchasing a static (and non-NATed) <abbr title="Internet Protocol version 4">IPv4</abbr> address, and then also provides a fixed <abbr title="Internet Protocol version 6">IPv6</abbr> prefix.
</p>
<pre class="code"># /etc/config/network
config interface &#039;wan&#039;
        option proto &#039;pppoe&#039;
        option username &#039;******@fonira.at&#039;  # The PPPoE username provided by Fonira.
        option password &#039;******&#039;  # The PPPoE password provided by Fonira.
        option device &#039;eth&lt;X&gt;.31&#039;  # The VLAN with the ID 31 has to be used.
        option delegate &#039;0&#039;
        option ipv6 &#039;1&#039;

config interface &#039;wan6&#039;
        option device &#039;@wan&#039;
        option proto &#039;dhcpv6&#039;
        option reqaddress &#039;try&#039;
        option reqprefix &#039;no&#039;
        option ip6prefix &#039;.....::/60&#039;  # The IPv6 prefix provided by Fonira.
        option delegate &#039;1&#039;</pre>

<p>
Using the settings above, the static <abbr title="Internet Protocol version 4">IPv4</abbr> address and a dynamic <abbr title="Internet Protocol version 6">IPv6</abbr> address is provided to the router&#039;s <abbr title="Wide Area Network">WAN</abbr> port by the <abbr title="Internet Service Provider">ISP</abbr>, and the fixed <abbr title="Internet Protocol version 6">IPv6</abbr> prefix is used on the <abbr title="Local Area Network">LAN</abbr> side.
</p>

<p>
Setting <code>reqprefix</code> to <code>no</code> is needed to prevent the router from requesting an additional (dynamic) <abbr title="Internet Protocol version 6">IPv6</abbr> prefix from the <abbr title="Internet Service Provider">ISP</abbr>. However, with this option set to <code>no</code>, no <abbr title="Internet Protocol version 6">IPv6</abbr> route to the internet is set. This can be worked around by adding a source-route for the fixed <abbr title="Internet Protocol version 6">IPv6</abbr> prefix:
</p>
<pre class="code"># /etc/config/network
config route6
        option interface &#039;wan6&#039;
        option target &#039;::/0&#039;
        option source &#039;.....::/60&#039;  # The IPv6 prefix provided by Fonira.</pre>

<p>
More details and discussions on this topic can be found in <a href="https://www.lteforum.at/mobilfunk/statisches-ipv6-netz-mit-fonira.13760/" class="urlextern" title="https://www.lteforum.at/mobilfunk/statisches-ipv6-netz-mit-fonira.13760/" rel="ugc nofollow">this thread at LTEForum.at</a> (in german).
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Fonira with static IPv4 and fixed IPv6 prefix&quot;,&quot;hid&quot;:&quot;fonira_with_static_ipv4_and_fixed_ipv6_prefix&quot;,&quot;codeblockOffset&quot;:6,&quot;secid&quot;:13,&quot;range&quot;:&quot;5947-7621&quot;} -->
<h2 class="sectionedit14" id="azerbaijan">Azerbaijan</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Azerbaijan&quot;,&quot;hid&quot;:&quot;azerbaijan&quot;,&quot;codeblockOffset&quot;:8,&quot;secid&quot;:14,&quot;range&quot;:&quot;7622-7645&quot;} -->
<h3 class="sectionedit15" id="citynet_fttb">CityNet (FTTB)</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Connection Type: <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> (no PPPoE required)</div>
</li>
<li class="level1"><div class="li"> Authentication: MAC address binding (required)</div>
</li>
</ul>

<p>
<strong>1. <abbr title="Wide Area Network">WAN</abbr> Interface (<abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>)</strong>
</p>

<p>
In LuCI:
</p>
<ol>
<li class="level1"><div class="li"> Navigate to <code>Network &gt; Interfaces &gt; <abbr title="Wide Area Network">WAN</abbr></code></div>
</li>
<li class="level1"><div class="li"> Set the protocol to <code><abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> Client</code></div>
</li>
<li class="level1"><div class="li"> Select the correct <abbr title="Wide Area Network">WAN</abbr> device (e.g., `eth0`)</div>
</li>
</ol>

<p>
In `/etc/config/network`:
</p>
<pre class="code">config interface &#039;wan&#039;
    option ifname &#039;eth0&#039;
    option proto &#039;dhcp&#039;</pre>

<p>
<strong>2. MAC Address Binding</strong>
</p>

<p>
CityNet assigns your internet access to a specific MAC address (the first device connected).
</p>
<ul>
<li class="level1"><div class="li"> If you replace your router, you’ll need to contact CityNet support to update the MAC address on their side.</div>
</li>
<li class="level1"><div class="li"> If you know the previously registered MAC address, you can clone it on your OpenWRT device to avoid waiting.</div>
</li>
</ul>

<p>
Example:
</p>
<pre class="code">config interface &#039;wan&#039;
    option ifname &#039;eth0&#039;
    option proto &#039;dhcp&#039;
    option macaddr &#039;XX:XX:XX:XX:XX:XX&#039;  # Insert the old MAC address here</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;CityNet (FTTB)&quot;,&quot;hid&quot;:&quot;citynet_fttb&quot;,&quot;codeblockOffset&quot;:8,&quot;secid&quot;:15,&quot;range&quot;:&quot;7646-8583&quot;} -->
<h3 class="sectionedit16" id="katv1_fttb">KATV1 (FTTB)</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Connection Type: <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr></div>
</li>
<li class="level1"><div class="li"> Authentication: MAC address binding (mandatory)</div>
</li>
</ul>

<p>
<strong>1. <abbr title="Wide Area Network">WAN</abbr> Interface (<abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>)</strong>
</p>

<p>
In LuCI:
</p>
<ol>
<li class="level1"><div class="li"> Go to <code>Network &gt; Interfaces &gt; <abbr title="Wide Area Network">WAN</abbr></code></div>
</li>
<li class="level1"><div class="li"> Set protocol to <code><abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> Client</code></div>
</li>
<li class="level1"><div class="li"> Choose the <abbr title="Wide Area Network">WAN</abbr> device (e.g., `eth0`)</div>
</li>
</ol>

<p>
In `/etc/config/network`:
</p>
<pre class="code">config interface &#039;wan&#039;
    option ifname &#039;eth0&#039;
    option proto &#039;dhcp&#039;</pre>

<p>
<strong>2. MAC Address Binding</strong>
</p>

<p>
KATV1 locks your internet access to the MAC address of the first connected device.
</p>
<ul>
<li class="level1"><div class="li"> When switching to a new router (such as OpenWRT), you must contact KATV1 support  and ask them to register the new MAC address of your router.</div>
</li>
<li class="level1"><div class="li"> Alternatively, you can clone the MAC address of your previous router.</div>
</li>
</ul>

<p>
Example:
</p>
<pre class="code">config interface &#039;wan&#039;
    option ifname &#039;eth0&#039;
    option proto &#039;dhcp&#039;
    option macaddr &#039;XX:XX:XX:XX:XX:XX&#039;  # Replace with previously registered MAC</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;KATV1 (FTTB)&quot;,&quot;hid&quot;:&quot;katv1_fttb&quot;,&quot;codeblockOffset&quot;:10,&quot;secid&quot;:16,&quot;range&quot;:&quot;8584-9473&quot;} -->
<h2 class="sectionedit17" id="belgium">Belgium</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Belgium&quot;,&quot;hid&quot;:&quot;belgium&quot;,&quot;codeblockOffset&quot;:12,&quot;secid&quot;:17,&quot;range&quot;:&quot;9474-9494&quot;} -->
<h3 class="sectionedit18" id="edpnet_vdsl">EDPnet (VDSL)</h3>
<div class="level3">

<p>
EDPnet provides VDSL services through PPPoE and <abbr title="Virtual Local Area Network">VLAN</abbr> tagging. Keep in mind the DSL state monopolist (Proximus) still manages the backbone and keeps a whitelist of allowed modems (a few third party models, mostly AVM FRITZ!Box, and their own Proximus B-Box models).
</p>

<p>
The <abbr title="Virtual Local Area Network">VLAN</abbr> tagging is as follows:
</p>
<ul>
<li class="level1"><div class="li"> Internet: PPPoE over <abbr title="Virtual Local Area Network">VLAN</abbr> 10.</div>
</li>
<li class="level1"><div class="li"> <abbr title="Voice over Internet Protocol">VoIP</abbr>: unclear.</div>
</li>
<li class="level1"><div class="li"> TV: EDPnet does not offer TV.</div>
</li>
</ul>

<p>
The following works for an <a href="/toh/avm/avm_7362_sl" class="wikilink1" title="toh:avm:avm_7362_sl" data-wiki-id="toh:avm:avm_7362_sl">AVM FRITZ!Box 7362 SL</a> running master (stable support won&#039;t appear with a post 18.06 release) with the whitelisted Lantiq blobs pulled off my <a href="/toh/avm/fritz.box.7490" class="wikilink1" title="toh:avm:fritz.box.7490" data-wiki-id="toh:avm:fritz.box.7490">7490</a>. Besides this, the default VDSL values OpenWrt uses seem to be OK. You get reset to a fallback profile after a while, so there might be some additional background checks going on that go beyond the Lantiq driver version.
</p>

<p>
Also a TPLink WR8890 was successfully tested with firmware taken from the xDarklight repository. Testing has shown that the &#039;certified&#039; blobs perform worse on these models and should be avoided as they seem to make the line unstable. A patch can be done in the VDSL driver method to return a &#039;certified&#039; version string so the modem can stay on a high speed profile.
</p>
<pre class="code">config interface &#039;wan&#039;
    option ifname &#039;dsl0.10&#039;
    option proto &#039;pppoe&#039;
    option username &#039;b1xxxxxx&#039;
    option password &#039;xxxxxx&#039;
    option ipv6 &#039;1&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;EDPnet (VDSL)&quot;,&quot;hid&quot;:&quot;edpnet_vdsl&quot;,&quot;codeblockOffset&quot;:12,&quot;secid&quot;:18,&quot;range&quot;:&quot;9495-10890&quot;} -->
<h3 class="sectionedit19" id="edpnet_fiber">EDPnet (Fiber)</h3>
<div class="level3">

<p>
EDPnet provides Fiber services through PPPoE and <abbr title="Virtual Local Area Network">VLAN</abbr> tagging as well. The state monopolist (Proximus) still manages the backbone, as with VDSL, and will install an ONT to which you connect your router of choice (!) directly.
</p>

<p>
The following works on a <a href="/toh/mikrotik/rb5009ug_s_in" class="wikilink1" title="toh:mikrotik:rb5009ug_s_in" data-wiki-id="toh:mikrotik:rb5009ug_s_in">MikroTik RB5009UG+S+IN</a> with OpenWrt 22.03 and <strong>DSA</strong>. At this point `/etc/config/network` makes a distinction between &#039;device&#039; and &#039;interface&#039; definitions (the latter relying on the former). I am using port 8 as <abbr title="Wide Area Network">WAN</abbr> port and am using &#039;fiber&#039; as a fancy recognisable name instead of the mundane &#039;p8.10&#039; (which would be default based on the port being port 8 tagged with <abbr title="Virtual Local Area Network">VLAN</abbr> 10).
</p>
<pre class="code">config device                                                            
        option name &#039;p8&#039;                                                 
                                                                         
config device                                                            
        option type &#039;8021q&#039;                                              
        option ifname &#039;p8&#039;                                               
        option vid &#039;10&#039;                                                  
        option name &#039;fiber&#039;

config interface &#039;wan&#039;
	option proto &#039;pppoe&#039;
	option username &#039;blabla@EDPNET&#039;
	option password &#039;..............&#039;
	option ipv6 &#039;1&#039;
	option device &#039;fiber&#039;

config interface &#039;wan6&#039;
	option proto &#039;dhcpv6&#039;
	option device &#039;@wan&#039;</pre>

<p>
If you are using swconfig rather than DSA, the following is an example configuration working on an <a href="/toh/tp-link/archer_c7" class="wikilink1" title="toh:tp-link:archer_c7" data-wiki-id="toh:tp-link:archer_c7">TP-Link Archer C7</a>:
</p>
<pre class="code">config interface &#039;wan&#039;
        option device &#039;eth0.10&#039;
        option proto &#039;pppoe&#039;
        option username &#039;xxx&#039;
        option password &#039;xxx&#039;

config interface &#039;wan6&#039;
        option device &#039;@wan&#039;
        option proto &#039;dhcpv6&#039;

config switch
        option name &#039;switch0&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;1&#039;
        option ports &#039;2 3 4 5 0t&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;10&#039;
        option ports &#039;1t 6t&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;EDPnet (Fiber)&quot;,&quot;hid&quot;:&quot;edpnet_fiber&quot;,&quot;codeblockOffset&quot;:13,&quot;secid&quot;:19,&quot;range&quot;:&quot;10891-13070&quot;} -->
<h2 class="sectionedit20" id="bosnia_and_herzegovina">Bosnia and Herzegovina</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Bosnia and Herzegovina&quot;,&quot;hid&quot;:&quot;bosnia_and_herzegovina&quot;,&quot;codeblockOffset&quot;:15,&quot;secid&quot;:20,&quot;range&quot;:&quot;13071-13106&quot;} -->
<h3 class="sectionedit21" id="bh_telecom">BH Telecom</h3>
<div class="level3">

<p>
BH Telecom provides a combination of Internet, <abbr title="Internet Protocol Television">IPTV</abbr> and <abbr title="Voice over Internet Protocol">VoIP</abbr> xDSL services via copper twisted pair.
</p>

</div>

<h4 id="adsl2">ADSL2(+)</h4>
<div class="level4">

<p>
The following was tested on TP-Link TD-W8980 OpenWRT v22.03.4, using “MojaTV povremeno 1” plan via ADSL2+ connection, using default annex A xDSL firmware.
</p>

<p>
Internet PPPoE over 8/60 ATM bridge
</p>
<pre class="code">config dsl &#039;dsl&#039;
    option annex &#039;a&#039;
    option tone &#039;av&#039;
    option ds_snr_offset &#039;0&#039;

config atm-bridge &#039;atm&#039;
    option encaps &#039;llc&#039;
    option payload &#039;bridged&#039;
    option nameprefix &#039;dsl&#039;
    option vci &#039;60&#039;
    option vpi &#039;8&#039;
    option atmdev &#039;0&#039;
    option unit &#039;0&#039;

config device
    option name &#039;dsl0&#039;

config interface &#039;wan&#039;
    option device &#039;dsl0&#039;
    option proto &#039;pppoe&#039;
    option username &#039;name.surname&#039;
    option password &#039;**********&#039;
    option ipv6 &#039;auto&#039;</pre>

<p>
<abbr title="Internet Protocol Television">IPTV</abbr> ATM 8/40 bridge
</p>
<pre class="code"># Remove some switch ports from br-lan so they can be used for bridge to IPTV STB device(s)
config device
    option name &#039;br-lan&#039;
    option type &#039;bridge&#039;
    list ports &#039;lan1&#039;
    list ports &#039;lan2&#039;
    option stp &#039;1&#039;
    option igmp_snooping &#039;1&#039;

config atm-bridge
    option encaps &#039;llc&#039;
    option payload &#039;bridged&#039;
    option nameprefix &#039;dsl&#039;
    option vci &#039;40&#039;
    option vpi &#039;8&#039;
    option atmdev &#039;0&#039;
    option unit &#039;1&#039;

config device
    option name &#039;dsl1&#039;
    option ipv6 &#039;0&#039;

config device
    option name &#039;iptv&#039;
    option type &#039;bridge&#039;
    list ports &#039;dsl1&#039;
    list ports &#039;lan3&#039;
    list ports &#039;lan4&#039;
    option multicast &#039;1&#039;
    option multicast_querier &#039;1&#039;
    option promisc &#039;0&#039;
    option ipv6 &#039;0&#039;</pre>

</div>

<h4 id="vdsl2">VDSL2</h4>
<div class="level4">

<p>
The following was tested on TP-Link TD-W8980 OpenWRT v22.03.4, using “MojaTV povremeno 2” plan over VDSL2 connection, using default annex A xDSL firmware.
</p>

<p>
The <abbr title="Virtual Local Area Network">VLAN</abbr> tagging is as follows:
</p>
<ul>
<li class="level1"><div class="li"> Internet: PPPoE over <abbr title="Virtual Local Area Network">VLAN</abbr> 100.</div>
</li>
<li class="level1"><div class="li"> <abbr title="Internet Protocol Television">IPTV</abbr>: Bridge to STB via <abbr title="Virtual Local Area Network">VLAN</abbr> 930.</div>
</li>
<li class="level1"><div class="li"> <abbr title="Voice over Internet Protocol">VoIP</abbr>: Bridge via uknown <abbr title="Virtual Local Area Network">VLAN</abbr> id.</div>
</li>
</ul>

<p>
Internet PPPoE <abbr title="Virtual Local Area Network">VLAN</abbr> 100
</p>
<pre class="code">config dsl &#039;dsl&#039;
    option line_mode &#039;vdsl&#039;
    option ds_snr_offset &#039;0&#039;
    option annex &#039;a&#039;

config device
    option name &#039;dsl0&#039;

config interface &#039;wan&#039;
    option device &#039;dsl0.100&#039;
    option proto &#039;pppoe&#039;
    option username &#039;name.surname&#039;
    option password &#039;**********&#039;
    option ipv6 &#039;auto&#039;</pre>

<p>
<abbr title="Internet Protocol Television">IPTV</abbr> <abbr title="Virtual Local Area Network">VLAN</abbr> 930
</p>
<pre class="code"># Remove some switch ports from br-lan so they can be used for bridge to IPTV STB device(s)
config device
    option name &#039;br-lan&#039;
    option type &#039;bridge&#039;
    option stp &#039;1&#039;
    option igmp_snooping &#039;1&#039;
    list ports &#039;lan1&#039;
    list ports &#039;lan2&#039;

config device
    option name &#039;iptv&#039;
    option type &#039;bridge&#039;
    list ports &#039;lan3&#039;
    list ports &#039;lan4&#039;
    list ports &#039;dsl0.930&#039;
    option multicast &#039;1&#039;
    option multicast_querier &#039;1&#039;
    option promisc &#039;0&#039;
    option ipv6 &#039;0&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;BH Telecom&quot;,&quot;hid&quot;:&quot;bh_telecom&quot;,&quot;codeblockOffset&quot;:15,&quot;secid&quot;:21,&quot;range&quot;:&quot;13107-15852&quot;} -->
<h2 class="sectionedit22" id="canada">Canada</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Canada&quot;,&quot;hid&quot;:&quot;canada&quot;,&quot;codeblockOffset&quot;:19,&quot;secid&quot;:22,&quot;range&quot;:&quot;15853-15872&quot;} -->
<h3 class="sectionedit23" id="bell_canada_fibe">Bell Canada Fibe</h3>
<div class="level3">

<p>
Bell Canada Fibe provides for fiber to the home (FTTH).
</p>

<p>
They use <abbr title="Virtual Local Area Network">VLAN</abbr> tagging and PPPoE protocol. 
</p>

<p>
The <abbr title="Virtual Local Area Network">VLAN</abbr> tagging is usually as follows:
</p>
<ul>
<li class="level1"><div class="li"> Phone: <abbr title="Virtual Local Area Network">VLAN</abbr> 34</div>
</li>
<li class="level1"><div class="li"> Internet: PPPoE over <abbr title="Virtual Local Area Network">VLAN</abbr> 35 </div>
</li>
<li class="level1"><div class="li"> TV:  <abbr title="Virtual Local Area Network">VLAN</abbr> 36</div>
</li>
</ul>
<pre class="code">config interface &#039;wan&#039;
    option ifname &#039;eth1.35&#039;
    option proto &#039;pppoe&#039;
    option username &#039;b1xxxxxx&#039;
    option password &#039;xxxxxx&#039;
    option ipv6 &#039;auto&#039;

config interface &#039;wan6&#039;
    option proto &#039;dhcpv6&#039;
    option reqaddress &#039;try&#039;
    option reqprefix &#039;auto&#039;
    option ifname &#039;@wan&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Bell Canada Fibe&quot;,&quot;hid&quot;:&quot;bell_canada_fibe&quot;,&quot;codeblockOffset&quot;:19,&quot;secid&quot;:23,&quot;range&quot;:&quot;15873-16419&quot;} -->
<h3 class="sectionedit24" id="mtu_settings">MTU Settings</h3>
<div class="level3">

<p>
<a href="https://www.dslreports.com/forum/r31118482-Yes-you-CAN-bypass-the-HomeHub-3000" class="urlextern" title="https://www.dslreports.com/forum/r31118482-Yes-you-CAN-bypass-the-HomeHub-3000" rel="ugc nofollow">Follow the MTU recommendations here</a>:
</p>
<ul>
<li class="level1"><div class="li"> Fiddle with your <abbr title="Maximum Transmission Unit">MTU</abbr> settings to make sure that your router doesn&#039;t have to fragment <abbr title="Internet Protocol">IP</abbr> packets. (<abbr title="Internet Protocol">IP</abbr> fragmentation will use more CPU on your router, increase overhead on your <abbr title="Wide Area Network">WAN</abbr> connection, slightly degrade performance, and cause problems when connecting to networks behind misconfigured firewalls on the Internet). </div>
</li>
<li class="level1"><div class="li"> At first I used all the default settings and was getting an <abbr title="Maximum Transmission Unit">MTU</abbr> of 1480. </div>
</li>
<li class="level1"><div class="li"> I increased the <abbr title="Maximum Transmission Unit">MTU</abbr> on both my SFP interface and <abbr title="Virtual Local Area Network">VLAN</abbr> to 1520 and then set the advertised <abbr title="Maximum Transmission Unit">MTU</abbr> and MRU settings on my PPPoE interface to 1500 and was able to get an actual <abbr title="Maximum Transmission Unit">MTU</abbr> of 1500 on my <abbr title="Wide Area Network">WAN</abbr> link. </div>
</li>
<li class="level1"><div class="li"> You can verify your <abbr title="Maximum Transmission Unit">MTU</abbr> value using ping or a webservice such as the <abbr title="Maximum Transmission Unit">MTU</abbr> test at Let Me Check.it.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;MTU Settings&quot;,&quot;hid&quot;:&quot;mtu_settings&quot;,&quot;codeblockOffset&quot;:20,&quot;secid&quot;:24,&quot;range&quot;:&quot;16420-17272&quot;} -->
<h3 class="sectionedit25" id="references">References</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> How to get Bell Fibe in Quebec/Ontario (Internet and <abbr title="Internet Protocol Television">IPTV</abbr>) working with pfSense <a href="https://forum.netgate.com/topic/78892/how-to-get-bell-fibe-in-quebec-ontario-internet-and-iptv-working-with-pfsense" class="urlextern" title="https://forum.netgate.com/topic/78892/how-to-get-bell-fibe-in-quebec-ontario-internet-and-iptv-working-with-pfsense" rel="ugc nofollow">https://forum.netgate.com/topic/78892/how-to-get-bell-fibe-in-quebec-ontario-internet-and-iptv-working-with-pfsense</a></div>
</li>
<li class="level1"><div class="li"> How to bypass Bell hub and use your own Route <a href="http://forums.redflagdeals.com/please-sticky-how-bypass-bell-hub-use-your-own-router-1993629/" class="urlextern" title="http://forums.redflagdeals.com/please-sticky-how-bypass-bell-hub-use-your-own-router-1993629/" rel="ugc nofollow">http://forums.redflagdeals.com/please-sticky-how-bypass-bell-hub-use-your-own-router-1993629/</a></div>
</li>
<li class="level1"><div class="li"> Bell PPPoE and <abbr title="Internet Protocol Television">IPTV</abbr> with FTTH, Guide, configuration and tidbits. <a href="https://community.ubnt.com/t5/EdgeRouter/Bell-PPPoE-and-IPTV-with-FTTH-Guide-configuration-and-tidbits/td-p/1686977" class="urlextern" title="https://community.ubnt.com/t5/EdgeRouter/Bell-PPPoE-and-IPTV-with-FTTH-Guide-configuration-and-tidbits/td-p/1686977" rel="ugc nofollow">https://community.ubnt.com/t5/EdgeRouter/Bell-PPPoE-and-IPTV-with-FTTH-Guide-configuration-and-tidbits/td-p/1686977</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://www.idscomm.ca/blog/bell-fibe-with-your-own-router" class="urlextern" title="https://www.idscomm.ca/blog/bell-fibe-with-your-own-router" rel="ugc nofollow">Bell Fibe with your own Router</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;References&quot;,&quot;hid&quot;:&quot;references&quot;,&quot;codeblockOffset&quot;:20,&quot;secid&quot;:25,&quot;range&quot;:&quot;17273-17934&quot;} -->
<h2 class="sectionedit26" id="croatia">Croatia</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Croatia&quot;,&quot;hid&quot;:&quot;croatia&quot;,&quot;codeblockOffset&quot;:20,&quot;secid&quot;:26,&quot;range&quot;:&quot;17935-17955&quot;} -->
<h3 class="sectionedit27" id="terrakom">Terrakom</h3>
<div class="level3">

<p>
Terrakom runs their own FTTH infrastructure and uses PPPoE to connect. Previously they required setting just the username and password, but for recent upgrades they also set the <abbr title="Virtual Local Area Network">VLAN</abbr> tag to 905:
</p>
<pre class="code">config interface &#039;PPPoE&#039;
	option proto &#039;pppoe&#039;
	option username &#039;xxxxxx@terrakom.hr&#039;
	option password &#039;xxxxxxxxxx&#039;
	option peerdns &#039;0&#039;
	option ipv6 &#039;auto&#039;
	option device &#039;wan.905&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Terrakom&quot;,&quot;hid&quot;:&quot;terrakom&quot;,&quot;codeblockOffset&quot;:20,&quot;secid&quot;:27,&quot;range&quot;:&quot;17956-18367&quot;} -->
<h3 class="sectionedit28" id="instructions_to_get_pppoe_parameters">Instructions to get PPPoE parameters</h3>
<div class="level3">

<p>
For the username and password, asking the customer support nicely will do the trick.
</p>

<p>
To discover the <abbr title="Virtual Local Area Network">VLAN</abbr> tag (in case it&#039;s not 905 anymore), you need to trick the provided modem into trying to connect with your own PPPoE server.
Here&#039;s one way how to do that:
</p>
<ol>
<li class="level1"><div class="li"> Prepare a <a href="https://www.kali.org/get-kali/#kali-live" class="urlextern" title="https://www.kali.org/get-kali/#kali-live" rel="ugc nofollow">Kali Linux Live USB</a> and boot into it</div>
</li>
<li class="level1"><div class="li"> Download and compile <a href="https://github.com/Distrotech/rp-pppoe" class="urlextern" title="https://github.com/Distrotech/rp-pppoe" rel="ugc nofollow">rp-pppoe</a></div>
</li>
<li class="level1"><div class="li"> Open wireshark and start listening on the ethernet port</div>
</li>
<li class="level1"><div class="li"> Connect the (initially powered down) modem (use the <abbr title="Wide Area Network">WAN</abbr>/intenet port) to your computer running Kali Linux via ethernet cable</div>
</li>
<li class="level1"><div class="li"> Power the modem up and look at the packages sent by the modem, you should see some packages od type pppoed or similar, checking the details should give you the <abbr title="Virtual Local Area Network">VLAN</abbr> ID, mac address, service name and other parameters that may be important.</div>
</li>
</ol>

<p>
Another way to do this is to use a <abbr title="Local Area Network">LAN</abbr> hub to connect the modem (<abbr title="Wide Area Network">WAN</abbr>/internet port), your computer running wireshark and the upstream connection.
That way you can see packets for the whole process of establishing a session as exchanged between your modem and the operator infrastructure.
</p>

<p>
Both of these procedures should really work for any operator using PPPoE.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Instructions to get PPPoE parameters&quot;,&quot;hid&quot;:&quot;instructions_to_get_pppoe_parameters&quot;,&quot;codeblockOffset&quot;:21,&quot;secid&quot;:28,&quot;range&quot;:&quot;18368-19648&quot;} -->
<h2 class="sectionedit29" id="cyprus">Cyprus</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Cyprus&quot;,&quot;hid&quot;:&quot;cyprus&quot;,&quot;codeblockOffset&quot;:21,&quot;secid&quot;:29,&quot;range&quot;:&quot;19649-19668&quot;} -->
<h3 class="sectionedit30" id="epic_vdsl2">Epic (VDSL2+)</h3>
<div class="level3">

<p>
Epic provides VDSL2+ services through PPPoE and <abbr title="Virtual Local Area Network">VLAN</abbr> tagging (<code><abbr title="Virtual Local Area Network">VLAN</abbr> 35</code>, but to be sure sniff for a while with <code>tcpdump -e</code> option).
</p>

<p>
Example configuration for AVM FritzBox 7360 V2: 
</p>
<pre class="code">config dsl &#039;dsl&#039;
        option annex &#039;b&#039;
        option ds_snr_offset &#039;0&#039;
        option firmware &#039;/lib/firmware/vr9-B-dsl.bin&#039; # Annex B Firmware for this device
        option tone &#039;av&#039;
config interface &#039;wan&#039;
	option proto &#039;pppoe&#039;
	option ifname &#039;dsl0.35&#039;
	option username &#039;bits*****@home&#039;
	option password &#039;*******&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Epic (VDSL2+)&quot;,&quot;hid&quot;:&quot;epic_vdsl2&quot;,&quot;codeblockOffset&quot;:21,&quot;secid&quot;:30,&quot;range&quot;:&quot;19669-20217&quot;} -->
<h3 class="sectionedit31" id="cyta_fiber">Cyta (Fiber)</h3>
<div class="level3">

<p>
Besides ADSL2+ and VDSL, Cyta provides Fiber services through PPPoE and <abbr title="Virtual Local Area Network">VLAN</abbr> tagging (<code><abbr title="Virtual Local Area Network">VLAN</abbr> 42</code>, but to be sure sniff for a while with <code>tcpdum -e</code> option). For connection following devices are used:
</p>
<ul>
<li class="level1"><div class="li"> ONT like Huawei OptiXstar HG8245X6</div>
</li>
<li class="level1"><div class="li"> GPON Terminal like Huawei OptiXstar HG8010HV6 and provider&#039;s device like ZTE ZXHN H268A or your own device</div>
</li>
</ul>

<p>
Example configuration for <a href="/toh/xiaomi/mi_router_ac2100" class="wikilink1" title="toh:xiaomi:mi_router_ac2100" data-wiki-id="toh:xiaomi:mi_router_ac2100">Xiaomi Mi Router AC2100</a> with OpenWrt 21.02.1, DSA and settings missed in <a href="https://www.cyta.com.cy/mp/informational/docs/settingforthirdpartymodem.pdf" class="urlextern" title="https://www.cyta.com.cy/mp/informational/docs/settingforthirdpartymodem.pdf" rel="ugc nofollow">guide</a> (<code>username</code> and <code>password</code> are really dummy but not empty fields):
</p>
<pre class="code">config interface &#039;wan&#039;
	option proto &#039;dhcp&#039;
	option hostname &#039;*&#039;
	option device &#039;wan&#039;
	option delegate &#039;0&#039;

config device
	option name &#039;wan&#039;
	option ipv6 &#039;0&#039;

config device
	option type &#039;8021q&#039;
	option ifname &#039;wan&#039;
	option vid &#039;42&#039;
	option name &#039;wan.42&#039;

config interface &#039;cyta_eth&#039;
	option proto &#039;pppoe&#039;
	option device &#039;wan.42&#039;
	option username &#039;cyta&#039;
	option password &#039;cyta&#039;
	option ipv6 &#039;0&#039;
	option peerdns &#039;0&#039;
	list dns &#039;1.1.1.1&#039;
	option delegate &#039;0&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Cyta (Fiber)&quot;,&quot;hid&quot;:&quot;cyta_fiber&quot;,&quot;codeblockOffset&quot;:22,&quot;secid&quot;:31,&quot;range&quot;:&quot;20218-21357&quot;} -->
<h3 class="sectionedit32" id="cablenet_fiber">Cablenet (Fiber)</h3>
<div class="level3">

<p>
Cablenet most probably is renting Cyta&#039;s GPON to provide Fiber services through PPPoE and <abbr title="Virtual Local Area Network">VLAN</abbr> tagging (<code><abbr title="Virtual Local Area Network">VLAN</abbr> 42</code>, but to be sure sniff for a while with <code>tcpdump -e</code> option). For connection following devices are used:
</p>
<ul>
<li class="level1"><div class="li"> GPON Terminal like Huawei OptiXstar HG8010HV6 and provider&#039;s device like Mikrotik RB750Gr3 (provider doesn&#039;t announce usage of your own device and doesn&#039;t provide any settings as Cyta does)</div>
</li>
</ul>

<p>
As PPPoE <code>username</code> and <code>password</code> are not dummy and not empty fields it may require to intercept them using a sniffer, setting up the <abbr title="Virtual Local Area Network">VLAN</abbr> and the PPPoE server on a device connected to the router&#039;s <abbr title="Wide Area Network">WAN</abbr> port. Usually, the login is the same as the Subscription Number (SLA).
</p>

<p>
Example configuration for <a href="/toh/mikrotik/rb750gr3" class="wikilink1" title="toh:mikrotik:rb750gr3" data-wiki-id="toh:mikrotik:rb750gr3">MikroTik RB750Gr3</a> with OpenWrt 22.03.5 and DSA:
</p>
<pre class="code">config interface &#039;wan&#039;
	option proto &#039;dhcp&#039;
	option hostname &#039;*&#039;
	option device &#039;wan&#039;
	option delegate &#039;0&#039;

config device
	option name &#039;wan&#039;
	option ipv6 &#039;0&#039;

config device
	option type &#039;8021q&#039;
	option ifname &#039;wan&#039;
	option vid &#039;42&#039;
	option name &#039;wan.42&#039;

config interface &#039;cablenet_eth&#039;
	option proto &#039;pppoe&#039;
	option device &#039;wan.42&#039;
	option username &#039;&lt;username&gt;&#039;
	option password &#039;&lt;password&gt;&#039;
	option ipv6 &#039;0&#039;
	option peerdns &#039;0&#039;
	list dns &#039;1.1.1.1&#039;
	option delegate &#039;0&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Cablenet (Fiber)&quot;,&quot;hid&quot;:&quot;cablenet_fiber&quot;,&quot;codeblockOffset&quot;:23,&quot;secid&quot;:32,&quot;range&quot;:&quot;21358-22671&quot;} -->
<h3 class="sectionedit33" id="primetel_fiber">Primetel (Fiber)</h3>
<div class="level3">

<p>
Primetel most probably is renting Cyta&#039;s GPON to provide Fiber services through PPPoE and <abbr title="Virtual Local Area Network">VLAN</abbr> tagging (<code><abbr title="Virtual Local Area Network">VLAN</abbr> 42</code>, but to be sure sniff for a while with <code>tcpdump -e</code> option). For connection following devices are used:
</p>
<ul>
<li class="level1"><div class="li"> GPON Terminal like Huawei OptiXstar HG8010HV6 and provider&#039;s device like ZTE ZXHN H268Q (provider doesn&#039;t announce usage of your own device and doesn&#039;t provide any settings as Cyta does)</div>
</li>
</ul>

<p>
As PPPoE <code>username</code> and <code>password</code> are not dummy and not empty fields it may require to intercept them using a sniffer, setting up the <abbr title="Virtual Local Area Network">VLAN</abbr> and the PPPoE server on a device connected to the router&#039;s <abbr title="Wide Area Network">WAN</abbr> port. Usually, the login looks like <code>provider&#039;s_router_mac_address@cpe.prime-tel.com</code>.
</p>

<p>
Example configuration for <a href="/toh/xiaomi/mi_router_ac2100" class="wikilink1" title="toh:xiaomi:mi_router_ac2100" data-wiki-id="toh:xiaomi:mi_router_ac2100">Xiaomi Mi Router AC2100</a> with OpenWrt 21.02.1 and DSA:
</p>
<pre class="code">config interface &#039;wan&#039;
	option proto &#039;dhcp&#039;
	option hostname &#039;*&#039;
	option device &#039;wan&#039;
	option delegate &#039;0&#039;

config device
	option name &#039;wan&#039;
	option ipv6 &#039;0&#039;

config device
	option type &#039;8021q&#039;
	option ifname &#039;wan&#039;
	option vid &#039;42&#039;
	option name &#039;wan.42&#039;

config interface &#039;primetel_eth&#039;
	option proto &#039;pppoe&#039;
	option device &#039;wan.42&#039;
	option username &#039;&lt;provider&#039;s_router_mac_address&gt;@cpe.prime-tel.com&#039;
	option password &#039;&lt;password&gt;&#039;
	option ipv6 &#039;0&#039;
	option peerdns &#039;0&#039;
	list dns &#039;1.1.1.1&#039;
	option delegate &#039;0&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Primetel (Fiber)&quot;,&quot;hid&quot;:&quot;primetel_fiber&quot;,&quot;codeblockOffset&quot;:24,&quot;secid&quot;:33,&quot;range&quot;:&quot;22672-24052&quot;} -->
<h2 class="sectionedit34" id="czech_republic">Czech Republic</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Czech Republic&quot;,&quot;hid&quot;:&quot;czech_republic&quot;,&quot;codeblockOffset&quot;:25,&quot;secid&quot;:34,&quot;range&quot;:&quot;24053-24080&quot;} -->
<h3 class="sectionedit35" id="o2">O2</h3>
<div class="level3">

<p>
O2 provides documentation for Internet <a href="https://www.o2.cz/osobni/techzona-modemy-pro-adsl-vdsl/273154-ostatni_modemy_nikoli_od_o2.html?article=550534" class="urlextern" title="https://www.o2.cz/osobni/techzona-modemy-pro-adsl-vdsl/273154-ostatni_modemy_nikoli_od_o2.html?article=550534" rel="ugc nofollow">here</a>.
</p>

</div>

<h4 id="vdsl">VDSL</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> Protocol: PPPoE</div>
</li>
<li class="level1"><div class="li"> <abbr title="Virtual Local Area Network">VLAN</abbr>: 848</div>
</li>
<li class="level1"><div class="li"> Username: O2</div>
</li>
<li class="level1"><div class="li"> Password: O2</div>
</li>
</ul>
<pre class="code">config interface &#039;wan&#039;
        option proto &#039;pppoe&#039;
        option username &#039;O2&#039;
        option ifname &#039;dsl0.848&#039;
        option ipv6 &#039;auto&#039;
        option password &#039;O2&#039;
        
config dsl &#039;dsl&#039;
        option annex &#039;b&#039;
        option ds_snr_offset &#039;0&#039;
        option line_mode &#039;vdsl&#039;
        option tone &#039;bv&#039;
        option xfer_mode &#039;ptm&#039;        </pre>

</div>

<h4 id="o2tv_iptv">O2TV (IPTV)</h4>
<div class="level4">

<p>
O2 provides documentation for <abbr title="Internet Protocol Television">IPTV</abbr> <a href="https://www.o2.cz/osobni/techzona-modemy-pro-adsl-vdsl/273154-ostatni_modemy_nikoli_od_o2.html?article=550539" class="urlextern" title="https://www.o2.cz/osobni/techzona-modemy-pro-adsl-vdsl/273154-ostatni_modemy_nikoli_od_o2.html?article=550539" rel="ugc nofollow">here</a>.
</p>
<ul>
<li class="level1"><div class="li"> Bridge mode</div>
</li>
<li class="level1"><div class="li"> <abbr title="Virtual Local Area Network">VLAN</abbr>: 835</div>
</li>
</ul>

<p>
Example configuration on TP-Link TD-W8980B / TD-9980B. <abbr title="Internet Protocol Television">IPTV</abbr> is plugged in port &#039;LAN2&#039;.
</p>
<pre class="code">config interface &#039;iptv&#039;
        option type &#039;bridge&#039;
        option proto &#039;dhcp&#039;
        option hostname &#039;O2TV&#039;
        option peerdns &#039;0&#039;
        option defaultroute &#039;0&#039;
        option ifname &#039;dsl0.835 eth0.835&#039;
        
config switch
        option name &#039;switch0&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;1&#039;
        option ports &#039;6t 5 2 4&#039;
        option vid &#039;1&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;2&#039;
        option vid &#039;835&#039;
        option ports &#039;6t 0&#039;        </pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;O2&quot;,&quot;hid&quot;:&quot;o2&quot;,&quot;codeblockOffset&quot;:25,&quot;secid&quot;:35,&quot;range&quot;:&quot;24081-25605&quot;} -->
<h2 class="sectionedit36" id="egypt">Egypt</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Egypt&quot;,&quot;hid&quot;:&quot;egypt&quot;,&quot;codeblockOffset&quot;:27,&quot;secid&quot;:36,&quot;range&quot;:&quot;25606-25624&quot;} -->
<h3 class="sectionedit37" id="adsl">ADSL</h3>
<div class="level3">

</div>

<h4 id="we_te_data">WE (TE Data)</h4>
<div class="level4">

<p>
<em>(If using <abbr title="Internet Service Provider">ISP</abbr>-provided router-modem)</em>
</p>
<ul>
<li class="level1"><div class="li"> Delete the <abbr title="Wide Area Network">WAN</abbr> connection form your <abbr title="Internet Service Provider">ISP</abbr> router. Create another one as <strong>Bridge</strong>. Use the following data for the connection:<br/>
<pre class="code">VPI/VCI: 0/35
Encapsulation Type: LLC
Service Type: UBR
Type: Bridge Connection</pre>
</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> For OpenWrt, you will need to add or edit the following in <code>/etc/config/network</code> for interface <abbr title="Wide Area Network">WAN</abbr>. You should replace the username and password with those given to you by your <abbr title="Internet Service Provider">ISP</abbr>.<br/>
<pre class="code">config interface &#039;WAN&#039;
        option proto &#039;pppoe&#039;
        option ifname &#039;eth0.2&#039;
        option username &#039;******@tedata.net.eg&#039;
        option password &#039;********&#039;
        option ipv6 &#039;auto&#039;
        option mtu &#039;1500&#039;
        option auto &#039;0&#039;</pre>
</div>
</li>
</ul>

<p>
<strong>Note</strong>: Technical support say <abbr title="Maximum Transmission Unit">MTU</abbr> should be 1420, but 1500 seem to do just fine.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;ADSL&quot;,&quot;hid&quot;:&quot;adsl&quot;,&quot;codeblockOffset&quot;:27,&quot;secid&quot;:37,&quot;range&quot;:&quot;25625-26463&quot;} -->
<h2 class="sectionedit38" id="france">France</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;France&quot;,&quot;hid&quot;:&quot;france&quot;,&quot;codeblockOffset&quot;:29,&quot;secid&quot;:38,&quot;range&quot;:&quot;26464-26482&quot;} -->
<h3 class="sectionedit39" id="bouygues_telecom">Bouygues Telecom</h3>
<div class="level3">

</div>

<h4 id="ftth">FTTH</h4>
<div class="level4">

</div>

<h5 id="ipv4">IPv4</h5>
<div class="level5">

<p>
You have to use <abbr title="Virtual Local Area Network">VLAN</abbr> 100 and spoof the bbox MAC address.
</p>
<pre class="code">config device
	option name &#039;wan&#039;
	option macaddr &#039;01:23:45:67:89:ab&#039;

config device
	option type &#039;8021q&#039;
	option ifname &#039;wan&#039;
	option vid &#039;100&#039;
	option name &#039;wan.100&#039;
	option macaddr &#039;01:23:45:67:89:ab&#039;

config interface &#039;wan&#039;
	option proto &#039;dhcp&#039;
	option ifname &#039;wan.100&#039;
	option clientid &#039;0123456789AB&#039;
	option vendorid &#039;BYGTELIAD&#039;
	option hostname &#039;*&#039;
	option macaddr &#039;01:23:45:67:89:ab&#039;</pre>

</div>

<h5 id="ipv6">IPv6</h5>
<div class="level5">

<p>
you can get a ipv6 /60 prefix with <abbr title="Internet Protocol version 6">IPv6</abbr>-PD.
</p>
<pre class="code">config interface &#039;wan6&#039;
	option proto &#039;dhcpv6&#039;
	option reqaddress &#039;try&#039;
	option macaddr &#039;01:23:45:67:89:ab&#039;
	option clientid &#039;0123456789AB&#039;
	option device &#039;wan.100&#039;
	option reqprefix &#039;auto&#039;
	option ip6assign &#039;64&#039;
	list ip6class &#039;wan6&#039;

config interface &#039;lan&#039;
	[…]
	option ip6assign &#039;64&#039;
	option delegate &#039;0&#039;</pre>
<pre class="code">config dhcp &#039;wan6&#039;
	option interface &#039;wan6&#039;
	option master &#039;1&#039;
	option ra &#039;hybrid&#039;
	option dhcpv6 &#039;hybrid&#039;
	option ndp &#039;hybrid&#039;

config dhcp &#039;lan&#039;
	option interface &#039;lan&#039;
	[…]
	option ra &#039;hybrid&#039;
	option dhcpv6 &#039;hybrid&#039;
	option ndp &#039;hybrid&#039;
	list ra_flags &#039;managed-config&#039;
	list ra_flags &#039;other-config&#039;
	option ra_default &#039;1&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Bouygues Telecom&quot;,&quot;hid&quot;:&quot;bouygues_telecom&quot;,&quot;codeblockOffset&quot;:29,&quot;secid&quot;:39,&quot;range&quot;:&quot;26483-27723&quot;} -->
<h2 class="sectionedit40" id="germany">Germany</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Germany&quot;,&quot;hid&quot;:&quot;germany&quot;,&quot;codeblockOffset&quot;:32,&quot;secid&quot;:40,&quot;range&quot;:&quot;27724-27743&quot;} -->
<h3 class="sectionedit41" id="deutsche_telekom">Deutsche Telekom</h3>
<div class="level3">

<p>
Deutsche Telekom provides a documentation for their network here:
<a href="https://www.telekom.de/hilfe/geraete-zubehoer/telefone-und-anlagen/informationen-zu-telefonanlagen/schnittstellenbeschreibungen-fuer-hersteller" class="urlextern" title="https://www.telekom.de/hilfe/geraete-zubehoer/telefone-und-anlagen/informationen-zu-telefonanlagen/schnittstellenbeschreibungen-fuer-hersteller" rel="ugc nofollow">https://www.telekom.de/hilfe/geraete-zubehoer/telefone-und-anlagen/informationen-zu-telefonanlagen/schnittstellenbeschreibungen-fuer-hersteller</a>
</p>

</div>

<h4 id="adsl1">ADSL</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> ADSL LINK</div>
</li>
<li class="level1 node"><div class="li"> ATM</div>
<ul>
<li class="level2"><div class="li"> VPI (Virtual Path Identifier): 1</div>
</li>
<li class="level2"><div class="li"> VCI (Virtual Channel Identifier): 32</div>
</li>
</ul>
</li>
</ul>

</div>

<h5 id="deutsche_telekom_bng">Deutsche Telekom BNG</h5>
<div class="level5">

<p>
BNG is short for Broadband Network Gateway and Deutsche Telekom&#039;s new platform. Customers are successively migrated and usually receive a letter in the mail announcing the change.
</p>

<p>
On the old platform the customer can just setup PPPOE and the Internet connection comes up. With BNG the traffic that leaves the <abbr title="Wide Area Network">WAN</abbr> port needs to be tagged with <abbr title="Virtual Local Area Network">VLAN</abbr> 7 (<a href="https://www.telekom.de/hilfe/netzumschaltung" class="urlextern" title="https://www.telekom.de/hilfe/netzumschaltung" rel="ugc nofollow">Details</a>).
</p>

<p>
As an example suppose you have a modem in bridge mode that is unable to handle <abbr title="Virtual Local Area Network">VLAN</abbr> tagging. The router connected to the modem needs to add the <abbr title="Virtual Local Area Network">VLAN</abbr> tag in this case. Example for Archer C7 V2 below.
</p>

<p>
Old platform:
</p>
<pre class="code">config interface &#039;wan&#039;
        option proto &#039;pppoe&#039;
        option username &#039;...@t-online.de&#039;
        option password &#039;...&#039;
        option ipv6 &#039;auto&#039;
        option ifname &#039;eth0.2&#039;

config switch_vlan             
        option device &#039;switch0&#039;
        option vlan &#039;2&#039;        
        option ports &#039;1 6t&#039;</pre>

<p>
BNG platform:
</p>
<pre class="code">config interface &#039;wan&#039;
        option proto &#039;pppoe&#039;
        option username &#039;...@t-online.de&#039;
        option password &#039;...&#039;
        option ipv6 &#039;auto&#039;
        option ifname &#039;eth0.7&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;7&#039;
        option ports &#039;1t 6t&#039;</pre>

<p>
So if you receive a letter about the platform change and your Internet access goes down, try adding the <abbr title="Virtual Local Area Network">VLAN</abbr> tag to the <abbr title="Wide Area Network">WAN</abbr> port and see if it comes up again.
</p>

<p>
Some more details that may be of interest:
</p>
<ul>
<li class="level1"><div class="li"> When you login into <a href="https://www.telekom.de/kundencenter/startseite" class="urlextern" title="https://www.telekom.de/kundencenter/startseite" rel="ugc nofollow">Telekom Kundencenter</a> there are various configuration options available (<abbr title="Domain Name System">DNS</abbr> behavior, Easy Login, Auto Login, phone service configuration etc.).</div>
</li>
<li class="level1"><div class="li"> When using a SIP client from your Telekom landline connection you usually don&#039;t need to authenticate. Details are available on the Internet, for instance <a href="https://telekomhilft.telekom.de/t5/Telefonie-Internet/VoIP-Authentifizierung-nur-noch-ein-Fake/td-p/1379200" class="urlextern" title="https://telekomhilft.telekom.de/t5/Telefonie-Internet/VoIP-Authentifizierung-nur-noch-ein-Fake/td-p/1379200" rel="ugc nofollow">here</a>. That means when connected to your <abbr title="Local Area Network">LAN</abbr> you (or somebody else) may be able to configure one of your landline phone numbers (for instance your main phone number) on a SIP client and make calls without a valid password. <span style='color:#ed1c24; '>This may be disturbing to some. <img src="/lib/images/smileys/lol.svg" class="icon smiley" alt="LOL" /></span></div>
</li>
</ul>

</div>

<h5 id="talde_taldsl_max_vdsl2_on_a_telekom_line">TAL.de TALDSL MAX VDSL2 on a Telekom line</h5>
<div class="level5">
<div class="table sectionedit42"><table class="inline">
	<tr class="row0">
		<td class="col0">VPI</td><td class="col1">1</td>
	</tr>
	<tr class="row1">
		<td class="col0">VCI</td><td class="col1">32</td>
	</tr>
	<tr class="row2">
		<td class="col0"><abbr title="Virtual Local Area Network">VLAN</abbr>-ID</td><td class="col1">7</td>
	</tr>
	<tr class="row3">
		<td class="col0">DCHPv4</td><td class="col1">n/a</td>
	</tr>
	<tr class="row4">
		<td class="col0">DHCPv6</td><td class="col1">n/a</td>
	</tr>
	<tr class="row5">
		<td class="col0">Encapsulation</td><td class="col1">PPPoE</td>
	</tr>
	<tr class="row6">
		<td class="col0"><abbr title="Internet Protocol version 4">IPv4</abbr> address</td><td class="col1">PPPoE</td>
	</tr>
	<tr class="row7">
		<td class="col0"><abbr title="Internet Protocol version 4">IPv4</abbr> gateway</td><td class="col1">PPPoE</td>
	</tr>
	<tr class="row8">
		<td class="col0"><abbr title="Internet Protocol version 4">IPv4</abbr> nameserver</td><td class="col1">PPPoE</td>
	</tr>
	<tr class="row9">
		<td class="col0"><abbr title="Internet Protocol version 6">IPv6</abbr> address</td><td class="col1">PPPoE (link-local with dynamic sub-prefix)</td>
	</tr>
	<tr class="row10">
		<td class="col0"><abbr title="Internet Protocol version 6">IPv6</abbr> gateway</td><td class="col1">n/a (static route to <abbr title="Wide Area Network">WAN</abbr> device needed)</td>
	</tr>
	<tr class="row11">
		<td class="col0"><abbr title="Internet Protocol version 6">IPv6</abbr> nameserver</td><td class="col1">2a01:170::1</td>
	</tr>
	<tr class="row12">
		<td class="col0"><abbr title="Internet Protocol version 6">IPv6</abbr> prefix delegation</td><td class="col1">n/a (assign 2a01:170:xxxx::/48 manually to <abbr title="Local Area Network">LAN</abbr> device(s))</td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:42,&quot;range&quot;:&quot;30418-30786&quot;} --><pre class="code">config interface &#039;wan&#039;
	option proto &#039;pppoe&#039;
	option ifname &#039;eth0.7&#039;
	option ipv6 &#039;1&#039;
	option username &#039;...#tal@bsa-vdsl&#039;
	option password &#039;...&#039;

config route6
	option interface &#039;wan&#039;
	option target &#039;::0/0&#039;

config interface &#039;lan&#039;
	option type &#039;bridge&#039;
	option proto &#039;static&#039;
	option ipaddr &#039;192.168.1.1&#039;
	option netmask &#039;255.255.255.0&#039;
	option ifname &#039;br-lan&#039;
	option ip6addr &#039;2a01:170:xxxx:yyyy::1/64&#039;</pre>

</div>

<h5 id="or_o_on_a_telekom_line_with_annex_j">1&amp;1 or O² on a Telekom line with Annex J</h5>
<div class="level5">

<p>
When migrating from Annex B to Annex J, connection properties seem to have changed to require using <abbr title="Virtual Local Area Network">VLAN</abbr> 7.
</p>

<p>
The complete username (as opposed to the simplified form used by Fritz!Boxes &#039;1und1/1234-567@t-online.de&#039;) can be obtained from a packet capture from a Fritz!Box (if internet is so far provided via one).
</p>
<ul>
<li class="level1"><div class="li"> Go to <a href="http://fritz.box/html/capture.html" class="urlextern" title="http://fritz.box/html/capture.html" rel="ugc nofollow">http://fritz.box/html/capture.html</a></div>
</li>
<li class="level1"><div class="li"> Press start on the &#039;1. Internetverbindung&#039;</div>
</li>
<li class="level1"><div class="li"> Log into the main Fritz!Box UI and press the reconnect button</div>
</li>
<li class="level1"><div class="li"> Wait until the connection is re-established</div>
</li>
<li class="level1"><div class="li"> Stop the capture and open it in Wireshark</div>
</li>
<li class="level1"><div class="li"> Use &#039;pap&#039; as filter. You should be able to read the complete username and password in the detail view</div>
</li>
</ul>

<p>
The configuration of the interfaces should look like this (tested on r6788-7ff31bed98):
</p>
<pre class="code">config dsl &#039;dsl&#039;
	option tone &#039;bv&#039;
	option annex &#039;j&#039;

config interface &#039;wan&#039;
	option proto &#039;pppoe&#039;
	option password &#039;***&#039;
	option delegate &#039;0&#039;
	option ipv6 &#039;auto&#039;
	option username &#039;1und1/(***)1234-567@t-online.de&#039;
#or     option username &#039;DSL***@s92.bbi-o2.de&#039;
	option ifname &#039;dsl0.7&#039;

config device &#039;wan_dev&#039;
	option macaddr &#039;***&#039;
	option name &#039;dsl0&#039;</pre>

</div>

<h4 id="vdsl1">VDSL</h4>
<div class="level4">

<p>
The network protocols are layered in this way:
</p>
<ol>
<li class="level1"><div class="li"> VDSL link (17a profile, G.993.5 depending on the DSLAM)</div>
</li>
<li class="level1"><div class="li"> PTM (Packet Transfer Mode)</div>
</li>
<li class="level1"><div class="li"> Ethernet with <abbr title="Virtual Local Area Network">VLAN</abbr> 7 (data + voice)</div>
</li>
<li class="level1 node"><div class="li"> PPPoE</div>
<ol>
<li class="level2"><div class="li"> For some resale accounts an “H” has to be added in front of the pppoe user name, for 1und1 it looks like this “H1und1/1234-567@t-online.de”</div>
</li>
</ol>
</li>
</ol>

<p>
You global routed <abbr title="Internet Protocol version 4">IPv4</abbr> address and a some <abbr title="Internet Protocol version 6">IPv6</abbr> subnets
</p>

<p>
When the network supports VDSL vectoring, but the VDSL modem does not support it, the device will be put into a fall back mode using only the lower 2.2 <abbr title="Megahertz">MHz</abbr> of the band, this results in reduced rates like 13 MBit/s down and 1.4 MBit/s up instead of 50 MBit/s. Details: <a href="https://telekomhilft.telekom.de/t5/Telefonie-Internet/Fallbackprofil-bei-Vectoring/ta-p/2431567" class="urlextern" title="https://telekomhilft.telekom.de/t5/Telefonie-Internet/Fallbackprofil-bei-Vectoring/ta-p/2431567" rel="ugc nofollow">https://telekomhilft.telekom.de/t5/Telefonie-Internet/Fallbackprofil-bei-Vectoring/ta-p/2431567</a>
</p>

<p>
Example VDSL configuration for Lantiq based devices:
</p>
<pre class="code">config dsl &#039;dsl&#039;
	option annex &#039;b&#039;
	option tone &#039;bv&#039;
	option xfer_mode &#039;ptm&#039;

config interface &#039;wan&#039;
	option proto &#039;pppoe&#039;
	option _orig_ifname &#039;ptm0&#039;
	option _orig_bridge &#039;false&#039;
	option ifname &#039;dsl0.7&#039; # OpenWrt 18
	# option ifname &#039;ptm0.7&#039; # LEDE 17
        option username &#039;H1und1/1234-567@t-online.de&#039;
	option password &#039;abcdefghijklm&#039;
	option ipv6 &#039;auto&#039;</pre>

</div>

<h4 id="vdsl_ds-lite">1&amp;1 VDSL DS-Lite</h4>
<div class="level4">

<p>
1and1 is migrating (new customers) towards DSlite (Dual-Stack Lite RFC6333), 
</p>
<ol>
<li class="level1"><div class="li"> PPPoe as above (VLAN7)</div>
</li>
</ol>
<pre class="code">config interface &#039;wan&#039;
        option device &#039;eth0.7&#039;
        option proto &#039;pppoe&#039;
        option password &#039;test123&#039;
        option username &#039;1und1/ui1234-567@t-online.de&#039;
        option ipv6 &#039;1&#039;

config interface &#039;wan6&#039;
        option proto &#039;dhcpv6&#039;
        option reqaddress &#039;try&#039;
        option reqprefix &#039;auto&#039;
        option device &#039;pppoe-wan&#039;
        option norelease &#039;1&#039;
        option iface_dslite &#039;wan4&#039;
        option zone_dslite &#039;wan&#039;</pre>

<p>
(ifnames in example for router with external modem)
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Deutsche Telekom&quot;,&quot;hid&quot;:&quot;deutsche_telekom&quot;,&quot;codeblockOffset&quot;:32,&quot;secid&quot;:41,&quot;range&quot;:&quot;27744-34233&quot;} -->
<h3 class="sectionedit43" id="deutsche_glasfaser">Deutsche Glasfaser</h3>
<div class="level3">

<p>
Deutsche Glasfaser locally known as <strong>DG</strong> and in English the <strong>German Fiber</strong> uses IPoE for private customers with the support of <strong>DHCPv4</strong> (<abbr title="Request for Comments">RFC</abbr> 2131) and <strong>DHCPv6</strong> (<abbr title="Request for Comments">RFC</abbr> 8415) for all new connections.
</p>

<p>
If you are an OpenWrt user means that you are using your own router (Kundeneigener Router) whose <abbr title="Wide Area Network">WAN</abbr> interface is connected to the DG&#039;s <strong>ONT</strong> (Optical Network Terminal) directly.
</p>

<p>
The minimal <strong>wan</strong> and <strong>wan6</strong> configuration needed is shown below. The DG supplies a CG-<abbr title="Network Address Translation">NAT</abbr> <abbr title="Internet Protocol version 4">IPv4</abbr> address and a public <abbr title="Internet Protocol version 6">IPv6</abbr> address in addition to the <code>/56</code> <abbr title="Internet Protocol version 6">IPv6</abbr> prefix for further delegation.
</p>
<pre class="code">config interface &#039;wan&#039;
	option proto &#039;dhcp&#039;
	option device &#039;eth1&#039;

config interface &#039;wan6&#039;
	option proto &#039;dhcpv6&#039;
	option device &#039;@wan&#039;
	option reqaddress &#039;try&#039;
	option reqprefix &#039;auto&#039;
	option norelease &#039;1&#039; # optional</pre>

<p>
Note: in this example it&#039;s assumed that <code>eth1</code> is your <abbr title="Wide Area Network">WAN</abbr> interface; the optional option <code>option norelease &#039;1&#039; </code> is supported by OpenWrt version <strong>23.05.2</strong> and above and can be used to avoid missing PD for some hours after often restarts.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Deutsche Glasfaser&quot;,&quot;hid&quot;:&quot;deutsche_glasfaser&quot;,&quot;codeblockOffset&quot;:38,&quot;secid&quot;:43,&quot;range&quot;:&quot;34234-35329&quot;} -->
<h3 class="sectionedit44" id="dnsnet">DNS:NET</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Date of Documentation: 26.07.2025</div>
</li>
<li class="level1"><div class="li"> Hardware Router: <a href="/inbox/toh/sinovoip/bananapi_bpi-r4" class="wikilink1" title="inbox:toh:sinovoip:bananapi_bpi-r4" data-wiki-id="inbox:toh:sinovoip:bananapi_bpi-r4">Sinovoip BananaPi BPI-R4</a></div>
</li>
<li class="level1"><div class="li"> Hardware GPON: <a href="https://www.luleey.com/2-5g-gpon-onu-solution/?srsltid=AfmBOooxeQKVtN11jaOS316fVCS77aJnOYh8DCrm2cef6jnAOC1TSJ4m" class="urlextern" title="https://www.luleey.com/2-5g-gpon-onu-solution/?srsltid=AfmBOooxeQKVtN11jaOS316fVCS77aJnOYh8DCrm2cef6jnAOC1TSJ4m" rel="ugc nofollow">https://www.luleey.com/2-5g-gpon-onu-solution/?srsltid=AfmBOooxeQKVtN11jaOS316fVCS77aJnOYh8DCrm2cef6jnAOC1TSJ4m</a></div>
</li>
</ul>

<p>
The selected GPON has the ability to modify various parameters that are normally hard-wired, such as the serial number. This eliminates the need to report hardware replacements to the <abbr title="Internet Service Provider">ISP</abbr>. The goal of this approach was to eliminate the need to report a change to the ONT (Optical Network Termination), for example, the Fritz!Box, and thus ensure a replacement is available in the event of a defect.
I will also document and link the configuration and commissioning process. 
</p>

</div>

<h4 id="ftth1">FTTH</h4>
<div class="level4">

<p>
<abbr title="Domain Name System">DNS</abbr>:NET provides a documentation for their network here:
</p>
<ul>
<li class="level1"><div class="li"> <a href="https://www.dns-net.de/service/technische-dokumentation" class="urlextern" title="https://www.dns-net.de/service/technische-dokumentation" rel="ugc nofollow">https://www.dns-net.de/service/technische-dokumentation</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://www.dns-net.de/hubfs/Technische%20Dokumentation/Schnittstellenbeschreibung_GPON_v2.3.pdf" class="urlextern" title="https://www.dns-net.de/hubfs/Technische%20Dokumentation/Schnittstellenbeschreibung_GPON_v2.3.pdf" rel="ugc nofollow">https://www.dns-net.de/hubfs/Technische%20Dokumentation/Schnittstellenbeschreibung_GPON_v2.3.pdf</a></div>
</li>
</ul>

<p>
/etc/config/network
</p>
<pre class="code">config interface &#039;gpon&#039;                                                  
        option proto &#039;pppoe&#039;                                             
        option device &#039;eth2.37&#039;                                          
        option username &#039;&lt;USERNAME&gt;@dnsnet&#039;                               
        option password &#039;&lt;PASSWORD&gt;&#039;                           
        option ipv6 &#039;auto&#039;                                               
                                                                         
config device                                                            
        option type &#039;8021q&#039;                                              
        option ifname &#039;eth2&#039;                                             
        option vid &#039;37&#039;                                                  
        option name &#039;eth2.37&#039;</pre>

<p>
/etc/config/firewall
</p>
<pre class="code">config zone
        option name &#039;wan&#039;
        option input &#039;REJECT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;
        option masq &#039;1&#039;
        option mtu_fix &#039;1&#039;
        option family &#039;ipv4&#039;
        list network &#039;wan&#039;
        list network &#039;gpon&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;DNS:NET&quot;,&quot;hid&quot;:&quot;dnsnet&quot;,&quot;codeblockOffset&quot;:39,&quot;secid&quot;:44,&quot;range&quot;:&quot;35330-37494&quot;} -->
<h3 class="sectionedit45" id="vodafone">Vodafone</h3>
<div class="level3">

</div>

<h4 id="ftth2">FTTH</h4>
<div class="level4">

<p>
/etc/config/network
</p>
<pre class="code">config interface &#039;wan&#039;
        option device &#039;eth0.7&#039;
        option proto &#039;pppoe&#039;
        option username &#039;vodafone-ftth.komplett/***&#039;
        option password &#039;***&#039;
        option ipv6 &#039;1&#039;

config interface &#039;wan6&#039;
        option proto &#039;dhcpv6&#039;
        option reqaddress &#039;try&#039;
        option reqprefix &#039;auto&#039;
        option device &#039;pppoe-wan&#039;

config interface &#039;wan4&#039;
        option proto &#039;dslite&#039;
        option peeraddr &#039;::&#039;
        option encaplimit &#039;ignore&#039;</pre>

<p>
/etc/config/firewall
</p>
<pre class="code">config zone
        option name &#039;wan&#039;
        option input &#039;REJECT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;
        option masq &#039;1&#039;
        option mtu_fix &#039;1&#039;
        list network &#039;wan&#039;
        list network &#039;wan4&#039;
        list network &#039;wan6&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Vodafone&quot;,&quot;hid&quot;:&quot;vodafone&quot;,&quot;codeblockOffset&quot;:41,&quot;secid&quot;:45,&quot;range&quot;:&quot;37495-38329&quot;} -->
<h3 class="sectionedit46" id="netcolognenetaachen">NetCologne/NetAachen</h3>
<div class="level3">

</div>

<h4 id="ftth_gpon">FTTH (GPON)</h4>
<div class="level4">

<p>
NetCologne/NetAachen provides the technical documentation for their FTTH (GPON) deployment here:
</p>
<ul>
<li class="level1"><div class="li"> <a href="https://www.netcologne.de/privatkunden/schnittstellenbeschreibung/" class="urlextern" title="https://www.netcologne.de/privatkunden/schnittstellenbeschreibung/" rel="ugc nofollow">Schnittstellenbeschreibung</a></div>
</li>
<li class="level2"><div class="li"> <a href="https://www.netcologne.de/cms/api/fileadmin/user_upload/privatkunden/pdf/weitere-formulare/Schnittstellenbeschreibung_2024.pdf" class="urlextern" title="https://www.netcologne.de/cms/api/fileadmin/user_upload/privatkunden/pdf/weitere-formulare/Schnittstellenbeschreibung_2024.pdf" rel="ugc nofollow">Schnittstellenbeschreibung_2024.pdf</a></div>
</li>
</ul>

<p>
As NetCologne only provides an <abbr title="Internet Protocol version 4">IPv4</abbr> connection via DS-Lite over <abbr title="Internet Protocol version 6">IPv6</abbr>, the <code>ds-lite</code> package must be installed.
</p>

<p>
The following configuration assumes your <strong><abbr title="Wide Area Network">WAN</abbr></strong> interface is <code>eth1</code>, which is connected to the <strong>ONT</strong> (provided free of charge by NetCologne in my case, but their website has <a href="https://www.netcologne.de/privatkunden/hilfe/eigenen-router-einrichten/glasfaser/" class="urlextern" title="https://www.netcologne.de/privatkunden/hilfe/eigenen-router-einrichten/glasfaser/" rel="ugc nofollow">contradictory information</a>) terminating the fiber connection.
</p>
<pre class="code">config interface &#039;wan&#039;
        option proto &#039;pppoe&#039;
        option device &#039;eth1.10&#039;
        option username &#039;nc-*******@netcologne.de&#039;
        option password &#039;******&#039;
        option ipv6 &#039;auto&#039;

config interface &#039;wan6&#039;
        option proto &#039;dhcpv6&#039;
        option device &#039;@wan&#039;
        option reqaddress &#039;try&#039;
        option reqprefix &#039;auto&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;NetCologne\/NetAachen&quot;,&quot;hid&quot;:&quot;netcolognenetaachen&quot;,&quot;codeblockOffset&quot;:43,&quot;secid&quot;:46,&quot;range&quot;:&quot;38330-39556&quot;} -->
<h2 class="sectionedit47" id="greece">Greece</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Greece&quot;,&quot;hid&quot;:&quot;greece&quot;,&quot;codeblockOffset&quot;:44,&quot;secid&quot;:47,&quot;range&quot;:&quot;39557-39575&quot;} -->
<h3 class="sectionedit48" id="nova">Nova</h3>
<div class="level3">

<p>
This <abbr title="Internet Service Provider">ISP</abbr> is little more involved to set up. Users who wish to use their own CPEs need to get ahold of:
</p>
<ul>
<li class="level1"><div class="li"> The PPPoE credentials</div>
</li>
<li class="level1"><div class="li"> The telephony credentials</div>
</li>
</ul>

<p>
This can either be done by formally requesting the credentials from the <abbr title="Internet Service Provider">ISP</abbr> or by acquiring them from the router that the <abbr title="Internet Service Provider">ISP</abbr> provides.
</p>

<p>
The <abbr title="Internet Service Provider">ISP</abbr> provides internet connectivity on <abbr title="Virtual Local Area Network">VLAN</abbr> 835 (PPPoE) and voip telephony on <abbr title="Virtual Local Area Network">VLAN</abbr> 837 (<abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>).
</p>

<p>
For internet access, one must create a <abbr title="Virtual Local Area Network">VLAN</abbr> 835 and tag CPU and <abbr title="Wide Area Network">WAN</abbr>. Then create a PPPoE interface, bind it on the 835 <abbr title="Virtual Local Area Network">VLAN</abbr> device, enter the credentials and enable “Use default gateway”.
</p>

<p>
Example configuration for internet access:
</p>
<pre class="code">config device
        option name &#039;eth0.835&#039;
        option type &#039;8021q&#039;
        option ifname &#039;eth0&#039;
        option vid &#039;835&#039;

config interface &#039;wan&#039;
        option device &#039;eth0.835&#039;
        option proto &#039;pppoe&#039;
        option username &#039;{pppoe_username}&#039;
        option password &#039;{pppoe_password}&#039;
        option ipv6 &#039;0&#039;</pre>

<p>
For telephony, one must create a <abbr title="Virtual Local Area Network">VLAN</abbr> 837 and tag CPU and <abbr title="Wide Area Network">WAN</abbr>. Then create a <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> interface, bind it on the 837 <abbr title="Virtual Local Area Network">VLAN</abbr>, disable “Use default gateway” and provide the client id for dhcp option 61 (this is usually <em>30xxxxxxxxxx_cid.ims.wind.gr</em> where <em>xxxxxxxxxx</em> is the phone number). Please note that it has to be converted to HEX (and remove any separator) in order for OpenWRT to understand it.
</p>

<p>
Example configuration for telephony:
</p>
<pre class="code">config device
        option name &#039;eth0.837&#039;
        option type &#039;8021q&#039;
        option ifname &#039;eth0&#039;
        option vid &#039;837&#039;
        option ipv6 &#039;0&#039;
        
config interface &#039;wan_voip&#039;
        option proto &#039;dhcp&#039;
        option device &#039;eth0.837&#039;
        option clientid &#039;{30xxxxxxxxxx_cid.ims.wind.gr or 30xxxxxxxxxx_cid.byod.nova.gr or the option 61 they communicated to you you converted to hex and removing spaces}&#039;
        option delegate &#039;0&#039;
        option defaultroute &#039;0&#039;</pre>

<p>
The <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> client will fetch the ip and the proper classless routes.
</p>

<p>
<strong>Make sure you disable Rebind protection. Whitelisting the sip service domain will not suffice.</strong>
</p>

<p>
<strong>Additionally for this method you have to clone the original routers MAC if using the original credentials</strong>
</p>

<p>
SIP Configuration:
</p>

<p>
Depending on whether you have fetched the credentials from the <abbr title="Internet Service Provider">ISP</abbr>&#039;s original router or whether you have applied for a “bring your own device” configuration, the settings will differ. For the first case, the SIP client configuration should be:
</p>
<ul>
<li class="level1"><div class="li"> Domain: `sip-voice.forthnet.gr`</div>
</li>
<li class="level1"><div class="li"> Username: Your phone number (`30xxxxxxxxxx`)</div>
</li>
<li class="level1"><div class="li"> Password: Your voip password (as fetched from the <abbr title="Internet Service Provider">ISP</abbr>&#039;s router)</div>
</li>
<li class="level1"><div class="li"> Server: `sip-voice.forthnet.gr`</div>
</li>
<li class="level1"><div class="li"> Port: `5060`</div>
</li>
<li class="level1"><div class="li"> SIP Transport: `<abbr title="User Datagram Protocol">UDP</abbr>`</div>
</li>
<li class="level1"><div class="li"> SIP Address: `30xxxxxxxxxx@sip-voice.forthnet.gr`</div>
</li>
<li class="level1"><div class="li"> Registry Server: `sip-voice.forthnet.gr`</div>
</li>
<li class="level1"><div class="li"> Qualify Frequency: 0 (Nova does not handle SIP Options)</div>
</li>
</ul>

<p>
<strong>Note some UserAgents are blocked from making calls or receiving them on the non-byod configuration, notably the FreePBX one, instead you need to spoof the useragent of a router or something instead of using that.</strong>
</p>

<p>
For the second case the following is what needs to be the client configuration
</p>
<ul>
<li class="level1"><div class="li"> Domain: `byod.nova.gr`</div>
</li>
<li class="level1"><div class="li"> Username: Your phone number (`30xxxxxxxxxx`)</div>
</li>
<li class="level1"><div class="li"> Password: Your voip password (from the communication)</div>
</li>
<li class="level1"><div class="li"> Server: `byod.nova.gr`</div>
</li>
<li class="level1"><div class="li"> Port: `5060`</div>
</li>
<li class="level1"><div class="li"> SIP Transport: `<abbr title="User Datagram Protocol">UDP</abbr>`</div>
</li>
<li class="level1"><div class="li"> SIP Address: `30xxxxxxxxxx@byod.nova.gr`</div>
</li>
<li class="level1"><div class="li"> Registry Server: `byod.nova.gr`</div>
</li>
<li class="level1"><div class="li"> Audio Codec: `PCMA` ONLY</div>
</li>
<li class="level1"><div class="li"> Qualify Frequency: 0 (Nova does not handle SIP Options)</div>
</li>
</ul>

<p>
<strong>Caution, the byod.nova.gr domain is only configured on the <abbr title="Domain Name System">DNS</abbr> servers of the telephony <abbr title="Virtual Local Area Network">VLAN</abbr>, </strong>
</p>

<p>
Alternatively you can do a custom <abbr title="Domain Name System">DNS</abbr> record if you don&#039;t want to use the <abbr title="Internet Service Provider">ISP</abbr> <abbr title="Domain Name System">DNS</abbr>
the <abbr title="Internet Protocol version 4">IPv4</abbr> for byod.nova.gr is 10.50.131.150
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Nova&quot;,&quot;hid&quot;:&quot;nova&quot;,&quot;codeblockOffset&quot;:44,&quot;secid&quot;:48,&quot;range&quot;:&quot;39576-43323&quot;} -->
<h3 class="sectionedit49" id="deippc">DEI/PPC</h3>
<div class="level3">

<p>
This isp is easy to setup and offers RDNS with their static IPs
They use CGNAT for both static and CGNAT customers with the difference that the static customers have a 1-1 mapping over their CGNAT implementation
</p>

<p>
You will generally not experience issues with the inbound connections to the Static <abbr title="Internet Protocol">IP</abbr>. However their CGNAT is unreliable for <abbr title="Internet Protocol version 4">IPv4</abbr> Peer2Peer connections due to missing CGNAT components. 
</p>

<p>
It is required you bridge their router with a request that can be scheduled during weekdays from 9am - 3pm when the NOC is in office. <abbr title="Demilitarized Zone">DMZ</abbr> and other setups are broken on their router.
</p>

<p>
<strong>They do not yet provide ONTs so there is no other option other than bridging.</strong>
</p>

<p>
CGNAT sample Config
</p>
<pre class="code">config device
        option name &#039;eth0.835&#039;
        option type &#039;8021q&#039;
        option ifname &#039;eth0&#039;
        option vid &#039;835&#039;

config interface &#039;wan&#039;
        option device &#039;eth0.835&#039;
        option proto &#039;dhcp&#039;</pre>

<p>
Static <abbr title="Internet Protocol">IP</abbr> sample config 
</p>
<pre class="code">config device
        option name &#039;eth0.836&#039;
        option type &#039;8021q&#039;
        option ifname &#039;eth0&#039;
        option vid &#039;836&#039;

config interface &#039;wan&#039;
        option device &#039;eth0.836&#039;
        option proto &#039;dhcp&#039;</pre>

<p>
<strong>Note: Only static <abbr title="Internet Protocol">IP</abbr> customers have access to both CGNAT and Static VLANS. If odd problems arise with the Static Configuration it has been adviced to try the CGNATed network too</strong>
</p>

<p>
<strong>Note: NATHelper will rewrite the address correctly but using SNAT to your public <abbr title="Internet Protocol">IP</abbr> will not go through their firewall, the effect is that contact headers will always be wrong.</strong>
</p>

<p>
<strong> Troubleshooting: If you see a address different than the usual 100.x.x.x then you probably have not setup vlans correctly and are probably getting <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> from the semi-bricked router. 
Usually you see a 192.168.1.0/24 address in this case</strong>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;DEI\/PPC&quot;,&quot;hid&quot;:&quot;deippc&quot;,&quot;codeblockOffset&quot;:46,&quot;secid&quot;:49,&quot;range&quot;:&quot;43324-45117&quot;} -->
<h2 class="sectionedit50" id="india">India</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;India&quot;,&quot;hid&quot;:&quot;india&quot;,&quot;codeblockOffset&quot;:48,&quot;secid&quot;:50,&quot;range&quot;:&quot;45118-45136&quot;} -->
<h3 class="sectionedit51" id="act_fibernet">ACT Fibernet</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> ACT Fibernet in Bangalore works with PPOE configuration.</div>
</li>
<li class="level1"><div class="li"> There is no MAC binding done by <abbr title="Internet Service Provider">ISP</abbr> (So you can easily switch routers without <abbr title="Internet Service Provider">ISP</abbr> involved).</div>
</li>
<li class="level1"><div class="li"> Their <abbr title="Internet Protocol version 4">IPv4</abbr> <abbr title="Wide Area Network">WAN</abbr> address is CGNAT&#039;d. Which means you cannot host services at home with <abbr title="Internet Protocol version 4">IPv4</abbr> public <abbr title="Internet Protocol">IP</abbr>.</div>
</li>
<li class="level1"><div class="li"> However, they also provide <abbr title="Internet Protocol version 6">IPv6</abbr> with PD. Which is not CGNAT&#039;d. Using <abbr title="Internet Protocol version 6">IPv6</abbr> you should be able host service at home by placing necessary firewall rules in OpenWrt router.</div>
</li>
<li class="level1"><div class="li"> Configuration wan config as below,</div>
</li>
</ul>
<pre class="code">config interface &#039;wan&#039;
        option proto &#039;pppoe&#039;
        option device &#039;eth1&#039;
        option username &#039;xxxx&#039;
        option password &#039;xxxx&#039;
        option ipv6 &#039;auto&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;ACT Fibernet&quot;,&quot;hid&quot;:&quot;act_fibernet&quot;,&quot;codeblockOffset&quot;:48,&quot;secid&quot;:51,&quot;range&quot;:&quot;45137-45838&quot;} -->
<h2 class="sectionedit52" id="ireland">Ireland</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Ireland&quot;,&quot;hid&quot;:&quot;ireland&quot;,&quot;codeblockOffset&quot;:49,&quot;secid&quot;:52,&quot;range&quot;:&quot;45839-45859&quot;} -->
<h3 class="sectionedit53" id="vodafone_siro_1g">Vodafone SIRO 1G</h3>
<div class="level3">

<p>
* igmpproxy need to be installed for TV
for my setup im using separated interface for STB, you can connect your and into <abbr title="Local Area Network">LAN</abbr> (but then plz change configuration of igmpproxy to point to <abbr title="Local Area Network">LAN</abbr> instead of eth3)
config files:
</p>

<p>
<code>/etc/config/network</code>
</p>
<pre class="code">config interface &#039;loopback&#039;
	option ifname &#039;lo&#039;
	option proto &#039;static&#039;
	option ipaddr &#039;127.0.0.1&#039;
	option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
	option ula_prefix &#039;fda0:8093:6a4c::/48&#039;

config interface &#039;lan&#039;
	option type &#039;bridge&#039;
	option proto &#039;static&#039;
	option netmask &#039;255.255.255.0&#039;
	option ip6assign &#039;60&#039;
	option ipaddr &#039;192.168.0.1&#039;
	option stp &#039;1&#039;
	option igmp_snooping &#039;1&#039;
	option ifname &#039;eth1 eth3&#039;

config interface &#039;wan&#039;
	option proto &#039;pppoe&#039;
	option ifname &#039;eth0.10&#039;
	option username &#039;VODAFONE_ROUTER_SERIAL@vfieftth.ie&#039;
	option password &#039;broadband&#039;
	option ipv6 &#039;auto&#039;

config interface &#039;wan6&#039;
	option ifname &#039;eth0&#039;
	option proto &#039;dhcpv6&#039;


config interface &#039;iptv&#039;
	option proto &#039;dhcp&#039;
	option delegate &#039;0&#039;
	option broadcast &#039;1&#039;
	option defaultroute &#039;0&#039;
	option ifname &#039;eth0.10&#039;

config interface &#039;stb&#039;
	option proto &#039;static&#039;
	option ifname &#039;eth2&#039;
	option type &#039;bridge&#039;
	option igmp_snooping &#039;1&#039;
	option ipaddr &#039;192.168.2.1&#039;
	option ip6assign &#039;64&#039;
	option netmask &#039;255.255.255.128&#039;
</pre>

<p>
<code>/etc/config/igmpproxy</code>
</p>
<pre class="code">config igmpproxy
	option quickleave 1
#	option verbose [0-3](none, minimal[default], more, maximum)

config phyint
	option network iptv
	option zone wan
	option direction upstream
	list altnet 0.0.0.0/0

config phyint
	option network stb
	option zone lan
	option direction downstream</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Vodafone SIRO 1G&quot;,&quot;hid&quot;:&quot;vodafone_siro_1g&quot;,&quot;codeblockOffset&quot;:49,&quot;secid&quot;:53,&quot;range&quot;:&quot;45860-47478&quot;} -->
<h3 class="sectionedit54" id="pure_telecom_100mb_siro_fttc">Pure Telecom 100Mb SIRO FTTC</h3>
<div class="level3">
<pre class="code">config atm-bridge &#039;atm&#039;
        option vpi &#039;1&#039;
        option vci &#039;32&#039;
        option encaps &#039;llc&#039;
        option payload &#039;bridged&#039;
        option nameprefix &#039;dsl&#039;

config dsl &#039;dsl&#039;
        option annex &#039;a&#039;
        option line_mode &#039;vdsl&#039;
        option ds_snr_offset &#039;0&#039;
        option xfer_mode &#039;ptm&#039;

config interface &#039;wan&#039;
        option device &#039;dsl0.10&#039;
        option proto &#039;pppoe&#039;
        option username &#039;puretelecom@puretel.ie&#039;
        option password &#039;broadband1&#039;
        option ipv6 &#039;0&#039;
        option service &#039;internet&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Pure Telecom 100Mb SIRO FTTC&quot;,&quot;hid&quot;:&quot;pure_telecom_100mb_siro_fttc&quot;,&quot;codeblockOffset&quot;:51,&quot;secid&quot;:54,&quot;range&quot;:&quot;47479-48066&quot;} -->
<h2 class="sectionedit55" id="italy">Italy</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Italy&quot;,&quot;hid&quot;:&quot;italy&quot;,&quot;codeblockOffset&quot;:52,&quot;secid&quot;:55,&quot;range&quot;:&quot;48067-48084&quot;} -->
<h3 class="sectionedit56" id="aruba_ftth">Aruba FTTH</h3>
<div class="level3">

<p>
This <abbr title="Internet Service Provider">ISP</abbr> in Italy is pretty easy to set up, and it is compliant to Italian law about the utilization of your own (compatible) modem/router. Also ipv6 works and ipv4.
The only thig to setup is a PPPoE connection with a 835 <abbr title="Virtual Local Area Network">VLAN</abbr> on the <abbr title="Wide Area Network">WAN</abbr> port. Note that user and password are not necessary for authentication and can be whatever.
</p>

<p>
With <strong>OpenWrt 21.02</strong> (with DSA):
</p>
<pre class="code">config interface &#039;wan&#039;
	option proto &#039;pppoe&#039;
	option username &#039;aruba&#039;
	option password &#039;aruba&#039;
	option ipv6 &#039;1&#039;
	option device &#039;wan.835&#039;

config interface &#039;wan6&#039;
    option proto &#039;dhcpv6&#039;
    option reqaddress &#039;try&#039;
    option reqprefix &#039;auto&#039;
    option ifname &#039;@wan&#039;</pre>

<p>
With <strong>OpenWrt 19.07</strong> (with swconfig):
</p>
<pre class="code">config interface &#039;wan&#039;
    option ifname &#039;eth0.835&#039;
    option proto &#039;pppoe&#039;
    option username &#039;aruba&#039;
    option password &#039;aruba&#039;
    option ipv6 &#039;1&#039;

config interface &#039;wan6&#039;
    option proto &#039;dhcpv6&#039;
    option reqaddress &#039;try&#039;
    option reqprefix &#039;auto&#039;
    option ifname &#039;@wan&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Aruba FTTH&quot;,&quot;hid&quot;:&quot;aruba_ftth&quot;,&quot;codeblockOffset&quot;:52,&quot;secid&quot;:56,&quot;range&quot;:&quot;48085-49100&quot;} -->
<h3 class="sectionedit57" id="tim">TIM</h3>
<div class="level3">

<p>
TIM (a.k.a. Telecom Italia) uses the following PPPoE connection settings: <a href="https://www.tim.it/assistenza/assistenza-tecnica/guide-manuali/modem-generico#specifiche-tecniche-di-configurazione" class="urlextern" title="https://www.tim.it/assistenza/assistenza-tecnica/guide-manuali/modem-generico#specifiche-tecniche-di-configurazione" rel="ugc nofollow">https://www.tim.it/assistenza/assistenza-tecnica/guide-manuali/modem-generico#specifiche-tecniche-di-configurazione</a>.
<abbr title="Virtual Local Area Network">VLAN</abbr> 835 is required on your <abbr title="Wide Area Network">WAN</abbr> port. In the following example, the phisical name of <abbr title="Wide Area Network">WAN</abbr> interface is &#039;eth0&#039; so with <abbr title="Virtual Local Area Network">VLAN</abbr> 835 will be &#039;eth0.835&#039;, but with different device can be somewhat like &#039;eth1.835&#039;.
</p>

<p>
Configuration with <strong>OpenWrt 21.02</strong> (with DSA):
</p>
<pre class="code">config interface &#039;wan&#039;
    option ifname &#039;eth0.835&#039;
    option proto &#039;pppoe&#039;
    option username &#039;[replace with your phone number]&#039;
    option password &#039;timadsl&#039;
    option ipv6 &#039;auto&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;TIM&quot;,&quot;hid&quot;:&quot;tim&quot;,&quot;codeblockOffset&quot;:54,&quot;secid&quot;:57,&quot;range&quot;:&quot;49101-49767&quot;} -->
<h3 class="sectionedit58" id="tiscali">Tiscali</h3>
<div class="level3">

<p>
Tiscali uses the following ADSL PPPoA connection settings: <a href="https://assistenza.tiscali.it/internet-telefono/modem/guida/parametri-connessione" class="urlextern" title="https://assistenza.tiscali.it/internet-telefono/modem/guida/parametri-connessione" rel="ugc nofollow">https://assistenza.tiscali.it/internet-telefono/modem/guida/parametri-connessione</a>. In order to configure the connection and bring up the dsl port after having flashed the firmware you have to follow these steps:
</p>
<ol>
<li class="level1"><div class="li"> Check if there is a configuration entry that bridges the <abbr title="Local Area Network">LAN</abbr> and the dsl port by accessing the router in its default <abbr title="Internet Protocol">IP</abbr> address, then in the LuCi menu “Interfaces”, tab “atm bridges”, <em class="u">delete</em> any entry.</div>
</li>
<li class="level1"><div class="li"> In the tab “DSL” set Annex = Annex A G.992.1</div>
</li>
<li class="level1"><div class="li"> in the aforementioned tab set tone = auto</div>
</li>
<li class="level1"><div class="li"> set Encapsulation mode = ATM</div>
</li>
<li class="level1"><div class="li"> set DSL lne mode = “ADSL”</div>
</li>
<li class="level1"><div class="li"> leave Downstream SNR offset = 0.0db</div>
</li>
<li class="level1"><div class="li"> leave Firmware File with no entry. </div>
</li>
</ol>

<p>
<strong>NOTE</strong>: there`s no need to upload a firmware or specify its path: the DSL connection works even if you leave it blank.
</p>

<p>
Then, in the “interface” menu, if not already present, create an interface, with these specifications, beginning from the “General Settings” tab:
</p>
<ol>
<li class="level1"><div class="li"> Protocol = PPPoATM</div>
</li>
<li class="level1"><div class="li"> Bring Up on Boot = 1</div>
</li>
<li class="level1"><div class="li"> PPPoA Encapsulaltion = VC-Mux</div>
</li>
<li class="level1"><div class="li"> ATM device number = 0 (leave default)</div>
</li>
<li class="level1"><div class="li"> VCI = 35</div>
</li>
<li class="level1"><div class="li"> VPI = 8</div>
</li>
<li class="level1"><div class="li"> PAP/CHAP user = yourISPmail</div>
</li>
<li class="level1"><div class="li"> PAP/CHAP password = yourPassword</div>
</li>
</ol>

<p>
Then, proceeding to “Advanced Settings” tab:
</p>
<ol>
<li class="level1"><div class="li"> Use Built in <abbr title="Internet Protocol version 6">IPv6</abbr> Management = 0</div>
</li>
<li class="level1"><div class="li"> Force Link = 1</div>
</li>
<li class="level1"><div class="li"> Obtain <abbr title="Internet Protocol version 6">IPv6</abbr>-Adress = disabled</div>
</li>
<li class="level1"><div class="li"> Use Default Gateway = 1</div>
</li>
<li class="level1"><div class="li"> Use <abbr title="Domain Name System">DNS</abbr> advertised by Peer = 1</div>
</li>
<li class="level1"><div class="li"> leave every other settings to default</div>
</li>
</ol>

<p>
<strong>NOTE</strong>: if you want, you can set the “Use <abbr title="Domain Name System">DNS</abbr> advertised by Peer” to disabled: you can enter the <abbr title="Internet Protocol">IP</abbr> address of your favorite <abbr title="Domain Name System">DNS</abbr> provider.
</p>

<p>
Finally, you have to assign the firewall zone in the “firewall setting” tab. For security reasons you should assign it to the <abbr title="Wide Area Network">WAN</abbr> zone.
</p>

<p>
A sample config should look like in OpenWrt version 19.07:
</p>
<pre class="code">config interface &#039;loopback&#039;
	option ifname &#039;lo&#039;
	option proto &#039;static&#039;
	option ipaddr &#039;127.0.0.1&#039;
	option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;

config dsl &#039;dsl&#039;
	option ds_snr_offset &#039;0&#039;
	option annex &#039;admt&#039;
	option xfer_mode &#039;atm&#039;
	option line_mode &#039;adsl&#039;

config interface &#039;lan&#039;
	option type &#039;bridge&#039;
	option ifname &#039;eth0&#039;
	option proto &#039;static&#039;
	option netmask &#039;255.255.255.0&#039;
	option ipaddr &#039;192.168.1.1&#039;

config device &#039;lan_eth0_dev&#039;
	option name &#039;eth0&#039;
	option macaddr &#039;XX:XX:XX:XX:XX:XX&#039;

config interface &#039;wan&#039;
	option ifname &#039;dsl0&#039;
	option proto &#039;pppoa&#039;
	option vpi &#039;8&#039;
	option encaps &#039;vc&#039;
	option vci &#039;35&#039;
	option password &#039;YourISPpassword&#039;
	option username &#039;YourISPUsername&#039;
	option atmdev &#039;0&#039;
	option ipv6 &#039;0&#039;
	option delegate &#039;0&#039;
	option peerdns &#039;1&#039;

config device &#039;wan_dsl0_dev&#039;
	option name &#039;dsl0&#039;
	option macaddr &#039;XX:XX:XX:XX:XX:XX&#039;

</pre>

<p>
<strong>IMPORTANT</strong>: in the aforementioned configuration there`s a <abbr title="Local Area Network">LAN</abbr> bridge between two entries. This bridge has been created during the openWrt firmware installation because the target device is a Netgear DM200 modem/router with only one dsl interface and only one <abbr title="Local Area Network">LAN</abbr> port.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Tiscali&quot;,&quot;hid&quot;:&quot;tiscali&quot;,&quot;codeblockOffset&quot;:55,&quot;secid&quot;:58,&quot;range&quot;:&quot;49768-52719&quot;} -->
<h3 class="sectionedit59" id="sky_wifi">Sky Wifi</h3>
<div class="level3">

<p>
Sky Wifi needs <em>map</em> package to work. You need to download it with a different connection or to personalize the image.
</p>
<pre class="code">config interface &#039;wan&#039;
        option device &#039;(wan_if).101&#039;
        option proto &#039;dhcp&#039;

config interface &#039;wan6&#039;
        option device &#039;eth1.101&#039;
        option proto &#039;dhcpv6&#039;
        option reqaddress &#039;try&#039;
        option reqprefix &#039;auto&#039;

config device
        option type &#039;8021q&#039;
        option ifname &#039;(wan_if)&#039;
        option vid &#039;101&#039;
        option name &#039;(wan_if).101&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Sky Wifi&quot;,&quot;hid&quot;:&quot;sky_wifi&quot;,&quot;codeblockOffset&quot;:56,&quot;secid&quot;:59,&quot;range&quot;:&quot;52720-53250&quot;} -->
<h2 class="sectionedit60" id="netherlands">Netherlands</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Netherlands&quot;,&quot;hid&quot;:&quot;netherlands&quot;,&quot;codeblockOffset&quot;:57,&quot;secid&quot;:60,&quot;range&quot;:&quot;53251-53275&quot;} -->
<h3 class="sectionedit61" id="kpn_ftth">KPN FTTH</h3>
<div class="level3">

<p>
You can connect the <abbr title="Wide Area Network">WAN</abbr> port of your router directly to the fiber termination box delivered by KPN using RJ-45. Internet will be delivered on <abbr title="Virtual Local Area Network">VLAN</abbr> 6 using PPPoE. The username/password combination is internet/internet. To get 1500 <abbr title="Maximum Transmission Unit">MTU</abbr> (PPPoE is 1492 default due to 8 bytes overhead) you need to set the <abbr title="Wide Area Network">WAN</abbr> port&#039;s <abbr title="Maximum Transmission Unit">MTU</abbr> to 1508 bytes and then set the PPPoE interface to 1500 bytes. KPN is compliant with <a href="https://datatracker.ietf.org/doc/html/rfc4638" class="urlextern" title="https://datatracker.ietf.org/doc/html/rfc4638" rel="ugc nofollow">RFC4638</a>.
</p>

<p>
This is an example configuration of /etc/config/network with eth1 as the <abbr title="Wide Area Network">WAN</abbr> port:
</p>
<pre class="code">config device
	option name &#039;eth1&#039;
	option mtu &#039;1508&#039;

config device
	option type &#039;8021q&#039;
	option ifname &#039;eth1&#039;
	option vid &#039;6&#039;
	option name &#039;eth1.6&#039;

config interface &#039;wan&#039;
	option proto &#039;pppoe&#039;
	option device &#039;eth1.6&#039;
	option username &#039;internet&#039;
	option password &#039;internet&#039;
	option mtu &#039;1500&#039;
	option peerdns &#039;0&#039;
	list dns &#039;8.8.8.8&#039;
	list dns &#039;8.8.4.4&#039;
	option ipv6 &#039;1&#039;
	option metric &#039;1&#039;

config interface &#039;wan6&#039;
	option proto &#039;dhcpv6&#039;
	option device &#039;pppoe-wan&#039;
	option reqaddress &#039;try&#039;
	option reqprefix &#039;auto&#039;
	option peerdns &#039;0&#039;
	list dns &#039;2001:4860:4860::8888&#039;
	list dns &#039;2001:4860:4860::8844&#039;
	option metric &#039;0&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;KPN FTTH&quot;,&quot;hid&quot;:&quot;kpn_ftth&quot;,&quot;codeblockOffset&quot;:57,&quot;secid&quot;:61,&quot;range&quot;:&quot;53276-54476&quot;} -->
<h3 class="sectionedit62" id="kpnopenwrt_behind_the_supplied_kpn_box_12_modem_firmware_version_v12c240508">KPN: OpenWrt behind the supplied kpn Box 12 modem (Firmware Version V12.C.24.05.08)</h3>
<div class="level3">

<p>
KPN has released a firmware version for the kpn Box 12 with a completely redesigned UI. As such, the previous chapter for the old stock firmware does not apply anymore.
</p>

<p>
One of the major additions of this firmware version is actually functional <abbr title="Internet Protocol version 6">IPv6</abbr> prefix delegation.
</p>

<p>
Go into your modem&#039;s settings page by going to <a href="http://192.168.2.254" class="urlextern" title="http://192.168.2.254" rel="ugc nofollow">http://192.168.2.254</a> and do the following:
</p>
<ol>
<li class="level1"><div class="li"> Log into the modem using the password on the back of the modem, or with your own password if you set one.</div>
</li>
<li class="level1"><div class="li"> Click on <code>Thuisnetwerk</code> on the sidebar.</div>
</li>
<li class="level1"><div class="li"> Go to the <code><abbr title="Internet Protocol">IP</abbr>-adres reserveren</code> tab at the top.</div>
</li>
<li class="level1"><div class="li"> Select your OpenWrt router in the <code>Apparaat</code> dropdown, or fill in your OpenWrt router&#039;s <abbr title="Internet Protocol">IP</abbr> and MAC address manually. If your desired OpenWrt router address is already occupied by a different device, you can reserve the other devices another <abbr title="Internet Protocol">IP</abbr> address temporarily, after which you can freely reserve the initial address for your OpenWrt router. If you run into this, make sure to restart the modem before continuing with the next steps.</div>
</li>
<li class="level1"><div class="li"> Click <code>Toevoegen</code> to reserve the <abbr title="Internet Protocol">IP</abbr> address. Now your OpenWrt has a predictable <abbr title="Internet Protocol version 4">IPv4</abbr> address that we can use for other settings.</div>
</li>
<li class="level1"><div class="li"> Go to the <code><abbr title="Internet Protocol version 6">IPv6</abbr></code> tab at the top.</div>
</li>
<li class="level1"><div class="li"> Click the <code><abbr title="Internet Protocol version 6">IPv6</abbr> prefix delegation</code> dropdown box and select <code>Aan met DHCPv6</code>.</div>
</li>
<li class="level1"><div class="li"> Click <code>Toepassen</code> to apply the change.</div>
</li>
<li class="level1"><div class="li"> Click on <code>Beveiliging</code> on the sidebar.</div>
</li>
<li class="level1"><div class="li"> Go to the <code><abbr title="Demilitarized Zone">DMZ</abbr></code> tab at the top.</div>
</li>
<li class="level1"><div class="li"> On the <code><abbr title="Internet Protocol version 4">IPv4</abbr></code> tab, click the <code>Apparaat</code> dropdown box and select your OpenWrt router, or fill in the <abbr title="Internet Protocol">IP</abbr> address manually below.</div>
</li>
<li class="level1"><div class="li"> Click <code>Opslaan</code> to apply the change.</div>
</li>
<li class="level1"><div class="li"> On the <code><abbr title="Internet Protocol version 6">IPv6</abbr></code> tab, select the <code><abbr title="Internet Protocol version 6">IPv6</abbr>-adres</code> input field, and type your OpenWrt&#039;s recently acquired DHCPv6 delegated prefix. If you do not have one at this moment, you may need to configure OpenWrt accordingly, which we will do in a moment. After you know your DHCPv6 delegated prefix, you can come back to this step. As an alternative, it is possible to fill in the entire prefix that you have received from KPN. The format to fill in the prefix is <code>aaaa:bbbb:cccc:ff00::0/56</code> for example. The <code>0/56</code> at the end is important. If you want to disable firewall for your entire KPN prefix, consider using a <code>0/48</code> instead (assuming you are assigned a /48 prefix).</div>
</li>
</ol>

<p>
With this configuration, the KPN modem should now allow our OpenWrt device to pass through without any annoying firewall hurdles in between.
</p>

<p>
Now that we&#039;re done with the modem, we can set up OpenWrt.
Here&#039;s the important snippet from <code>/etc/config/network</code>:
</p>
<pre class="code">config interface &#039;lan&#039;
	option device &#039;br-lan&#039;
	option proto &#039;static&#039;
	option ipaddr &#039;192.168.1.1&#039;
	option netmask &#039;255.255.255.0&#039;
	option ip6assign &#039;60&#039;

config interface &#039;wan&#039;
	option proto &#039;dhcp&#039;
	option device &#039;eth0&#039;
	option hostname &#039;*&#039;
	option peerdns &#039;0&#039;
	list dns &#039;8.8.8.8&#039;
	list dns &#039;8.8.4.4&#039;

config interface &#039;wan6&#039;
	option device &#039;eth0&#039;
	option proto &#039;dhcpv6&#039;
	option reqaddress &#039;try&#039;
	option reqprefix &#039;auto&#039;
	option peerdns &#039;0&#039;
	list dns &#039;2001:4860:4860::8888&#039;
	list dns &#039;2001:4860:4860::8844&#039;
	option clientid &#039;00&#039;</pre>

<p>
I added the <code>clientid</code> option to make the delegated prefix more predictable.
</p>

<p>
Due to proper prefix delegation support in this new firmware version, our <code>/etc/config/dhcp</code> can be greatly simplified. Now it should look more like this:
</p>
<pre class="code">config dhcp &#039;lan&#039;
	option interface &#039;lan&#039;
	option start &#039;100&#039;
	option limit &#039;150&#039;
	option leasetime &#039;12h&#039;
	option dhcpv4 &#039;server&#039;
	option ra &#039;server&#039;
	option dhcpv6 &#039;server&#039;
	list dns &#039;2001:4860:4860::8888&#039;
	list dns &#039;2001:4860:4860::8844&#039;</pre>

<p>
There is no more need to relay anything anymore.
</p>

<p>
After applying these configs, you should take a look at the OpenWrt status overview page, and take note of the <code>Prefix Delegated</code> value in <code><abbr title="Internet Protocol version 6">IPv6</abbr> Upstream</code>. You should copy and paste this value in the <code>Beveiliging → <abbr title="Demilitarized Zone">DMZ</abbr> → <abbr title="Internet Protocol version 6">IPv6</abbr> → <abbr title="Internet Protocol version 6">IPv6</abbr>-adres</code> input field on the KPN modem if it appears to be different. Do note that the KPN modem does not support OpenWrt&#039;s syntax for the prefix. It must end in <code>::0/56</code> instead of <code>::/56</code>.
</p>

<p>
Now you should be done, and you can expect to have <abbr title="User Datagram Protocol">UDP</abbr>, <abbr title="Transmission Control Protocol">TCP</abbr>, and <abbr title="Internet Control Message Protocol">ICMP</abbr> working properly for all your appliances connected to the OpenWrt router.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;KPN: OpenWrt behind the supplied kpn Box 12 modem (Firmware Version V12.C.24.05.08)&quot;,&quot;hid&quot;:&quot;kpnopenwrt_behind_the_supplied_kpn_box_12_modem_firmware_version_v12c240508&quot;,&quot;codeblockOffset&quot;:58,&quot;secid&quot;:62,&quot;range&quot;:&quot;54477-58752&quot;} -->
<h3 class="sectionedit63" id="kpnopenwrt_behind_the_supplied_kpn_box_12_modem_legacy_firmware">KPN: OpenWrt behind the supplied KPN Box 12 modem (legacy firmware)</h3>
<div class="level3">

<p>
If you have the OpenWrt router&#039;s <abbr title="Wide Area Network">WAN</abbr> port connected to your <a href="/toh/sagemcom/fast5359" class="wikilink1" title="toh:sagemcom:fast5359" data-wiki-id="toh:sagemcom:fast5359">KPN Box 12</a> modem, you will notice that it&#039;s behind <abbr title="Network Address Translation">NAT</abbr> and as such you won&#039;t be able to enjoy a proper internet experience.
</p>

<p>
Don&#039;t get sad, though! You can set up the KPN Box 12 so that OpenWrt can automatically expose all ports through the <abbr title="Network Address Translation">NAT</abbr> and also get <abbr title="Internet Protocol version 6">IPv6</abbr> addresses for all your devices, without the modem or its firewall getting in your way.
</p>

<p>
WARNING: This configuration will expose other devices you directly connect to the modem to the internet without any firewall! This won&#039;t be a problem if you connect other devices via your OpenWrt router.
Especially <abbr title="Internet Protocol version 6">IPv6</abbr>-enabled devices would be at risk, as the following modem configuration allows any <abbr title="Internet Protocol version 6">IPv6</abbr> device connected to it to expose any port to the internet. <abbr title="Internet Protocol version 4">IPv4</abbr> devices will be stuck behind <abbr title="Network Address Translation">NAT</abbr>, and all <abbr title="Network Address Translation">NAT</abbr> ports will be reserved for the OpenWrt router.
</p>

<p>
If you use a custom <abbr title="Domain Name System">DNS</abbr> on your computer, consider finding out the <abbr title="Internet Protocol">IP</abbr> address of your KPN modem, which can be done by logging into your OpenWrt router → <code>Status</code> → <code>Overview</code> and scroll down until <code>Network</code> where the <code>Gateway</code> value in <code><abbr title="Internet Protocol version 4">IPv4</abbr> Upstream</code> is the <abbr title="Internet Protocol">IP</abbr> address of your KPN modem.
You can add this <abbr title="Internet Protocol">IP</abbr> address to your computer&#039;s <code>/etc/hosts</code> file like so:
</p>
<pre class="code">192.168.2.254  mijnmodem.kpn</pre>

<p>
where you replace <code>192.168.2.254</code> with the actual <abbr title="Internet Protocol">IP</abbr> address of your KPN modem.
</p>

<p>
Now you can go into your modem&#039;s settings page by going to <a href="http://mijnmodem.kpn" class="urlextern" title="http://mijnmodem.kpn" rel="ugc nofollow">http://mijnmodem.kpn</a> and do the following:
</p>
<ol>
<li class="level1"><div class="li"> Log into the modem.</div>
</li>
<li class="level1"><div class="li"> If this is the first time logging into the modem, it&#039;s going to ask you to change the admin password. DO NOT AT ANY TIME click outside this dialog or cancel, as doing so will soft-brick your modem! If you do soft-brick it, either call KPN, or use a needle to push the reset switch on the device.</div>
</li>
<li class="level1"><div class="li"> Log back into the modem using the new password.</div>
</li>
<li class="level1"><div class="li"> Click <code>My Modem</code>.</div>
</li>
<li class="level1"><div class="li"> Go to the <code><abbr title="Local Area Network">LAN</abbr> <abbr title="Internet Protocol version 4">IPv4</abbr></code> tab.</div>
</li>
<li class="level1"><div class="li"> Scroll down and click <code>Add Reserved Address</code> in the <code><abbr title="Dynamic Host Configuration Protocol">DHCP</abbr></code> section.</div>
</li>
<li class="level1"><div class="li"> Select your OpenWrt router&#039;s MAC address in the <code>Device Name</code> column.</div>
</li>
<li class="level1"><div class="li"> Enter a simple <abbr title="Internet Protocol">IP</abbr> address within the <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> range, for example <code>192.168.2.1</code>.</div>
</li>
<li class="level1"><div class="li"> Click <code>Apply</code> at the bottom of the page.</div>
</li>
<li class="level1"><div class="li"> Go back to the home page by clicking the kpn logo in the top left.</div>
</li>
<li class="level1"><div class="li"> Click <code>Access Control</code>.</div>
</li>
<li class="level1"><div class="li"> Go to the <code><abbr title="Internet Protocol version 6">IPv6</abbr> Pin-holing</code> tab.</div>
</li>
<li class="level1"><div class="li"> Set <code>Name</code> to whatever you like, in my case <code>All</code>.</div>
</li>
<li class="level1"><div class="li"> Set <code>Device</code> to <code>Other</code>.</div>
</li>
<li class="level1"><div class="li"> Leave <code>MAC address</code> empty. Inserting any invalid value into this field will soft-brick the modem, so LEAVE IT EMPTY!</div>
</li>
<li class="level1"><div class="li"> Turn on the <code>DMZv6</code> toggle.</div>
</li>
<li class="level1"><div class="li"> Click <code>Add</code></div>
</li>
<li class="level1"><div class="li"> Now go to the <code><abbr title="Demilitarized Zone">DMZ</abbr></code> tab.</div>
</li>
<li class="level1"><div class="li"> Turn on the <code>Enable</code> toggle.</div>
</li>
<li class="level1"><div class="li"> Select your OpenWrt router from the MAC address dropdown menu.</div>
</li>
<li class="level1"><div class="li"> Your OpenWrt router&#039;s <abbr title="Internet Protocol">IP</abbr> address should automatically appear in the <code>Local host</code> input field.</div>
</li>
<li class="level1"><div class="li"> Click <code>Apply</code>.</div>
</li>
</ol>

<p>
Now that we&#039;re done with the modem, we can set up OpenWrt.
Here&#039;s the important snippet from <code>/etc/config/network</code>:
</p>
<pre class="code">config interface &#039;lan&#039;
	option device &#039;br-lan&#039;
	option proto &#039;static&#039;
	option ipaddr &#039;192.168.1.1&#039;
	option netmask &#039;255.255.255.0&#039;
	option ip6assign &#039;60&#039;

config interface &#039;wan&#039;
	option proto &#039;dhcp&#039;
	option device &#039;eth0&#039;
	option hostname &#039;*&#039;
	option peerdns &#039;0&#039;
	list dns &#039;8.8.8.8&#039;
	list dns &#039;8.8.4.4&#039;

config interface &#039;wan6&#039;
	option device &#039;eth0&#039;
	option proto &#039;dhcpv6&#039;
	option reqaddress &#039;try&#039;
	option reqprefix &#039;auto&#039;
	option peerdns &#039;0&#039;
	list dns &#039;2001:4860:4860::8888&#039;
	list dns &#039;2001:4860:4860::8844&#039;</pre>

<p>
Note that OpenWrt can&#039;t get a prefix through Prefix Delegation, so you may disable it. It&#039;s there in the hopes that KPN someday adds Prefix Delegation support to the kpn Box 12, which would greatly simplify the configuration.
Until KPN fixes this issue, we must relay DHCPv6, RA, and NDP with the following <code>/etc/config/dhcp</code> snippet:
</p>
<pre class="code">config dhcp &#039;lan&#039;
	option interface &#039;lan&#039;
	option start &#039;100&#039;
	option limit &#039;150&#039;
	option leasetime &#039;12h&#039;
	option dhcpv4 &#039;server&#039;
	option dhcpv6 &#039;relay&#039;
	option ra &#039;relay&#039;
	option ndp &#039;relay&#039;

config dhcp &#039;wan&#039;
	option interface &#039;wan&#039;
	option master &#039;1&#039;
	option ra &#039;relay&#039;
	option dhcpv6 &#039;relay&#039;
	option ndp &#039;relay&#039;</pre>

<p>
The important thing to take away from this config is that we essentially set up <code>lan</code> DHCPv6, Router Advertisements, and Neighbor Discovery to be relayed, where <code>wan</code> is the master.
</p>

<p>
And now you should have a proper internet connection again, like you would expect after installing OpenWrt appliances in your network. The kpn Box 12 inserts a <code>:1</code> after the prefix that you got assigned with your subscription. Besides that quirk, everything should work.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;KPN: OpenWrt behind the supplied KPN Box 12 modem (legacy firmware)&quot;,&quot;hid&quot;:&quot;kpnopenwrt_behind_the_supplied_kpn_box_12_modem_legacy_firmware&quot;,&quot;codeblockOffset&quot;:60,&quot;secid&quot;:63,&quot;range&quot;:&quot;58753-63485&quot;} -->
<h3 class="sectionedit64" id="many_isps">Many ISPs</h3>
<div class="level3">

<p>
Many DSL and Fiber ISPs use these settings. At least Telfort, Oxxio and Tweak use these. KPN, XS4ALL and Ziggo don&#039;t.
Tweak <a href="https://www.tweak.nl/support/apparatuur-configureren.html" class="urlextern" title="https://www.tweak.nl/support/apparatuur-configureren.html" rel="ugc nofollow">provides settings</a> for xDSL and glassfiber.
They use <abbr title="Virtual Local Area Network">VLAN</abbr> tagging and IPoE protocol - so <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> in OpenWrt.
</p>

</div>

<h4 id="vdsl3">VDSL</h4>
<div class="level4">

<p>
The network protocols are layered in this way:
</p>
<ol>
<li class="level1"><div class="li"> VDSL link (Annex B, Profile 17a, Line mode G.993.2)</div>
</li>
<li class="level1"><div class="li"> PTM (Packet Transfer Mode)</div>
</li>
<li class="level1"><div class="li"> Ethernet with <abbr title="Virtual Local Area Network">VLAN</abbr> 34 </div>
</li>
<li class="level1"><div class="li"> <abbr title="Internet Protocol Television">IPTV</abbr> with <abbr title="Virtual Local Area Network">VLAN</abbr> 4</div>
</li>
</ol>

<p>
A sample config for VDSL would look like in OpenWrt 18.06.1 r7258-5eb055306f
</p>
<pre class="code">config atm-bridge &#039;atm&#039;
        option encaps &#039;llc&#039;
        option payload &#039;bridged&#039;
        option nameprefix &#039;dsl&#039;
        option vci &#039;34&#039;
        option vpi &#039;0&#039;

config interface &#039;wan&#039;
        option proto &#039;dhcp&#039;
        option ifname &#039;dsl0.34&#039;
        # option ifname &#039;ptm0.34&#039; # LEDE 17
        option type &#039;bridge&#039;        </pre>

<p>
A sample config for VDSL would look like in  OpenWrt 19.07.6, r11278-8055e38794
</p>
<pre class="code">config dsl &#039;dsl&#039;
	option tone &#039;av&#039;
	option annex &#039;b&#039;
	option xfer_mode &#039;ptm&#039;
	option line_mode &#039;vdsl&#039;
	option ds_snr_offset &#039;0&#039;

config interface &#039;wan&#039;
	option ifname &#039;dsl0.34&#039;
	option proto &#039;dhcp&#039;</pre>

</div>

<h4 id="glassfiber">Glassfiber</h4>
<div class="level4">

<p>
A sample config for Ethernet with <abbr title="Virtual Local Area Network">VLAN</abbr> 34 would look like
</p>
<pre class="code">config interface &#039;wan&#039;
        option ifname &#039;wan.34&#039;
        option proto &#039;dhcp&#039;
        option hwaddr &#039;AA:FB:BB:D7:CC:05&#039;

config interface &#039;wan6&#039;
        option ifname &#039;wan.34&#039;
        option proto &#039;dhcpv6&#039;
        option hwaddr &#039;AA:FB:BB:D7:CC:05&#039;</pre>

<p>
Please note that the MAC address has to be set to a real one, this address is present on the physical Experia box, as well as visible via its web interface on the status page.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Many ISPs&quot;,&quot;hid&quot;:&quot;many_isps&quot;,&quot;codeblockOffset&quot;:63,&quot;secid&quot;:64,&quot;range&quot;:&quot;63486-65235&quot;} -->
<h3 class="sectionedit65" id="xs4all_and_probably_kpn">XS4ALL and probably KPN</h3>
<div class="level3">

<p>
XS4ALL is another <abbr title="Internet Service Provider">ISP</abbr> from KPN like Telfort. They offer DSL and FTTH connections. For DSL it is possible to use your own router, but since latest techniques use profile 35b to get 200+ Mbit speeds over a single line, it&#039;s better (for speed) to put the provided FritzBox in bridge mode and use OpenWrt as if directly on FTTH connection.
</p>

</div>

<h4 id="internet">Internet</h4>
<div class="level4">

<p>
FTTH (Fibre) and VDSL connections result in VLANs 6, and 4. That is, connecting the ethernet cable from the fibre&#039;s NTU or from the bridged VDSL modem, to your <abbr title="Wide Area Network">WAN</abbr> port does nothing by itself. Internet is provided over a PPPoE connection over VLAN6, username and password don&#039;t matter here, as long as they are set.  Thus, to bring up your <abbr title="Wide Area Network">WAN</abbr> device which gets your public <abbr title="Internet Protocol">IP</abbr> addresses (XS4ALL does both <abbr title="Internet Protocol version 4">IPv4</abbr> and <abbr title="Internet Protocol version 6">IPv6</abbr>), configure like this:
</p>
<pre class="code">config interface &#039;wan&#039;
    option ifname &#039;eth0.6&#039;
    option proto &#039;pppoe&#039;
    option username &#039;FB7581@xs4all.nl&#039;
    option password &#039;1234&#039;
    option ipv6 &#039;auto&#039;
    option mtu &#039;1508&#039;  # only works for FTTH since FritzBox doesn&#039;t support higher MTU

config interface &#039;wan6&#039;
    option proto &#039;dhcpv6&#039;
    option reqaddress &#039;try&#039;
    option reqprefix &#039;auto&#039;
    option ifname &#039;@wan&#039;</pre>

</div>

<h4 id="telephony">Telephony</h4>
<div class="level4">

<p>
If you use telephony and use FTTH, easiest is to connect the (unused) provided FritzBox as regular client to your OpenWrt lan. You can configure the FritzBox to take internet from there and provide telephony (which is just SIP).
</p>

</div>

<h4 id="iptv">IPTV</h4>
<div class="level4">

<p>
If you use TV, in the old setup (before March 2019) you could just bridge VLAN4 to your STBs (the black receivers provided by XS4ALL): this is called bridged mode. Since March 2019, bridged mode is no longer provided and instead, routed mode has to be setup.  The obvious change visible is the additions of “interactive TV” in the STBs.  Routed mode, is much like described in <a href="/docs/guide-user/network/wan/udp_multicast" class="wikilink1" title="docs:guide-user:network:wan:udp_multicast" data-wiki-id="docs:guide-user:network:wan:udp_multicast">IPTV / UDP multicast</a>.  It has a small specific twist for XS4ALL though.  The official documentation for this can be found <a href="https://www.xs4all.nl/service/diensten/internet/installeren/modem-instellen/hoe-kan-ik-een-ander-modem-dan-fritzbox-instellen.htm" class="urlextern" title="https://www.xs4all.nl/service/diensten/internet/installeren/modem-instellen/hoe-kan-ik-een-ander-modem-dan-fritzbox-instellen.htm" rel="ugc nofollow">at XS4ALL&#039;s modem setup</a> (Dutch).
</p>

<p>
For this to work, you need to install igmpproxy.  For clarity, we use 3 different zones: wan, iptv and stbitv.
</p>
<ul>
<li class="level1"><div class="li"> wan: the ordinary internet connection, used for “interactive” features (e.g. YouTube)</div>
</li>
<li class="level1"><div class="li"> iptv: VLAN4-based connection, mostly used for multicast based live-streams, and STB software, some 10.200.x.x/22</div>
</li>
<li class="level1"><div class="li"> stbitv: the (client) network with the STBs in them, in this example 10.3.0.0/24</div>
</li>
</ul>

<p>
First, configure an interface, <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> client for iptv, the <abbr title="Virtual Local Area Network">VLAN</abbr> 4 interface.  Important, it needs to set Vendor Class Identifier to <abbr title="Internet Protocol Television">IPTV</abbr>_RG, and ignore any default gateway or dns servers advertised.  The <abbr title="Domain Name System">DNS</abbr> is bogus (per the docs), the default route is what we don&#039;t want to use, because we want to use our real internet connection.  In the <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> reply is an additional route, you don&#039;t see this in luci, but it&#039;s correctly added to your routing table, and it basically includes all the traffic that needs to go over <abbr title="Virtual Local Area Network">VLAN</abbr> 4.  This is basically why we don&#039;t need the default route.
</p>
<pre class="code">config interface &#039;iptv&#039;
    option type &#039;bridge&#039;
    option ifname &#039;eth0.4&#039;
    option proto &#039;dhcp&#039;
    option defaultroute &#039;0&#039;
    option peerdns &#039;0&#039;
    option vendorid &#039;IPTV_RG&#039;</pre>

<p>
Also create a firewall zone for this interface, that sets masquerading (like wan, we need to <abbr title="Network Address Translation">NAT</abbr> some traffic over this interface):
</p>
<pre class="code">config zone
    option name &#039;iptv&#039;
    option input &#039;ACCEPT&#039;
    option output &#039;ACCEPT&#039;
    option network &#039;iptv&#039;
    option masq &#039;1&#039;
    option mtu_fix &#039;1&#039;
    option forward &#039;REJECT&#039;</pre>

<p>
Next, configure a new interface for the STBs.  I isolated them on their own <abbr title="Virtual Local Area Network">VLAN</abbr> 7, but I think you could also plug them into an existing client network.  Since there will be multicast traffic over this, you do want to separate the traffic using igmp snooping.  Ensure you enable this, and if you use switches inbetween that they also enable this, else you&#039;ll flood your entire network.  This is particularly bad if you have wlans in your network.  The following is just what I used for this description.
</p>
<pre class="code">config interface &#039;stbitv&#039;
    option type &#039;bridge&#039;
    option proto &#039;static&#039;
    option ifname &#039;eth0.7&#039;
    option ipaddr &#039;10.3.0.1&#039;
    option netmask &#039;255.255.255.0&#039;
    option igmp_snooping &#039;1&#039;</pre>

<p>
The STBs don&#039;t need any special <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> tricks, so you just need to hand out IPs in the normal way. Only <abbr title="Internet Protocol version 4">IPv4</abbr> is supported.
Create firewall zone for this network, and “glue” that zone together with the iptv and wan zones, such that traffic can go both ways:
</p>
<pre class="code">config zone
    option input &#039;ACCEPT&#039;
    option forward &#039;REJECT&#039;
    option output &#039;ACCEPT&#039;
    option name &#039;stbitv&#039;
    option network &#039;stbitv&#039;

config forwarding
    option dest &#039;wan&#039;
    option src &#039;stbitv&#039;

config forwarding
    option dest &#039;iptv&#039;
    option src &#039;stbitv&#039;</pre>

<p>
Now, the last remaining bit needs to be done, which is forwarding the multicast packets that the STBs request. Since the OpenWrt router now is the terminating node as seen from the XS4ALL network, any multicast traffic arriving at the router, needs to be forwarded to the STB in the network that requested it. This is done by igmpproxy. For the proxy, upstream is the XS4ALL network, downstream the STBs in the client network. Quickleave feature is necessary to quickly terminate unnecessary streams (happening when switching between channels, “zapping”). As such, the following configuration is sufficient:
</p>
<pre class="code">config igmpproxy
    option quickleave 1

config phyint
    option network iptv
    option zone iptv
    option direction upstream
    list altnet 0.0.0.0/0

config phyint
    option network stbitv
    option zone stbitv
    option direction downstream</pre>

<p>
Final remaining thing is to enable and start igmpproxy using <code>/etc/init.d/igmpproxy enable</code> and <code>/etc/init.d/igmpproxy start</code>.
</p>

<p>
Once you applied all this, ensure you got a 10.200.x.y <abbr title="Internet Protocol">IP</abbr> address on the iptv interface. Check with <code>netstat -rn</code> that there is a route for destination 213.75.112.0 (could be slightly different) added with gateway your 10.200.x.1 <abbr title="Internet Protocol">IP</abbr> address. Interface should be <code>br-iptv</code> if you followed above example.  If that seems ok, and igmpproxy is running, shutdown your STBs and restart them.  They should come up quite normal and settings/system should now report “routed mode”.  If you get any errors reported by the devices, check the multicast traffic gets forwarded (it attempts this while STB boots) using tcpdump or something.  Also check if regular internet works correctly from the STB client network.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;XS4ALL and probably KPN&quot;,&quot;hid&quot;:&quot;xs4all_and_probably_kpn&quot;,&quot;codeblockOffset&quot;:66,&quot;secid&quot;:65,&quot;range&quot;:&quot;65236-71938&quot;} -->
<h3 class="sectionedit66" id="kpn_ftth_via_luci">KPN FTTH via LuCi</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> open Network → Interfaces</div>
</li>
<li class="level1"><div class="li"> edit your <abbr title="Wide Area Network">WAN</abbr> device</div>
</li>
<li class="level1"><div class="li"> change Protocol to PPPoE then click on the button Switch protocol</div>
</li>
<li class="level1"><div class="li"> open the Device combo box and type &#039;eth0.6&#039;</div>
</li>
<li class="level1"><div class="li"> enter PPP/CHAP username &#039;98-42-xx-xx-xx-xx@internet&#039; (use your KPN router MAC address), PPP/CHAP password &#039;ppp&#039;</div>
</li>
<li class="level1"><div class="li"> hit Save</div>
</li>
<li class="level1"><div class="li"> in the Devices tab change the MAC address of eth0.6 to match your KPN router MAC address (this might be optional)</div>
</li>
<li class="level1"><div class="li"> hit Save&amp;Apply</div>
</li>
<li class="level1"><div class="li"> if the <abbr title="Wide Area Network">WAN</abbr> interface is in error state then reboot the modem</div>
</li>
</ol>

<p>
The <abbr title="Wide Area Network">WAN</abbr> <abbr title="Maximum Transmission Unit">MTU</abbr> will be 1492, don&#039;t try to change it, no other values work.
A <abbr title="Wide Area Network">WAN</abbr>_6 virtual dynamic interface will appear upon successful connection; you can delete any other <abbr title="Wide Area Network">WAN</abbr> device and reset any other unused eth0 virtual device.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;KPN FTTH via LuCi&quot;,&quot;hid&quot;:&quot;kpn_ftth_via_luci&quot;,&quot;codeblockOffset&quot;:72,&quot;secid&quot;:66,&quot;range&quot;:&quot;71939-72704&quot;} -->
<h3 class="sectionedit67" id="ziggo">Ziggo</h3>
<div class="level3">

<p>
First put the modem in bridge mode (disabled routing options) via <a href="https://www.ziggo.nl/klantenservice/internet-wifi/bridge-modus/stappenplan-bridge-modus" class="urlextern" title="https://www.ziggo.nl/klantenservice/internet-wifi/bridge-modus/stappenplan-bridge-modus" rel="ugc nofollow">this website</a>. Then use the following network config:
</p>
<pre class="code">config interface &#039;wan&#039;
	option proto &#039;dhcp&#039;
	option device &#039;eth1&#039;
	option hostname &#039;*&#039;
	option peerdns &#039;0&#039;
	list dns &#039;8.8.8.8&#039;
	list dns &#039;8.8.4.4&#039;

config interface &#039;wan6&#039;
	option proto &#039;dhcpv6&#039;
	option device &#039;eth1&#039;
	option reqaddress &#039;try&#039;
	option reqprefix &#039;auto&#039;
	option peerdns &#039;0&#039;
	list dns &#039;2001:4860:4860::8888&#039;
	list dns &#039;2001:4860:4860::8844&#039;</pre>

<p>
Remove the &#039;peerdns&#039; and &#039;list dns&#039; if you want to use Ziggo&#039;s <abbr title="Domain Name System">DNS</abbr> servers. These servers, however, do impose censorship on certain domains.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Ziggo&quot;,&quot;hid&quot;:&quot;ziggo&quot;,&quot;codeblockOffset&quot;:72,&quot;secid&quot;:67,&quot;range&quot;:&quot;72705-73444&quot;} -->
<h2 class="sectionedit68" id="new_zealand">New Zealand</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;New Zealand&quot;,&quot;hid&quot;:&quot;new_zealand&quot;,&quot;codeblockOffset&quot;:73,&quot;secid&quot;:68,&quot;range&quot;:&quot;73445-73468&quot;} -->
<h3 class="sectionedit69" id="slingshot_fibre">Slingshot Fibre</h3>
<div class="level3">
<div class="plugin_tabbox">
<div class="tabboxtab" id="tab_tab__dsa_migrated_devices">

<h4 class="hl sectionedit70" id="tab__dsa_migrated_devices">DSA migrated devices</h4>
<pre class="code">config interface &#039;wan&#039;
        option proto &#039;dhcp&#039;
        option device &#039;wan.10&#039;
        option hostname &#039;*&#039;

config interface &#039;wan6&#039;
        option proto &#039;dhcpv6&#039;
        option device &#039;wan.10&#039;
        option reqaddress &#039;try&#039;
        option reqprefix &#039;auto&#039;

config device
        option type &#039;8021q&#039;
        option ifname &#039;wan&#039;
        option vid &#039;10&#039;
        option name &#039;wan.10&#039;</pre>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;DSA migrated devices&quot;,&quot;secid&quot;:70,&quot;range&quot;:&quot;73526-73926&quot;} -->
</div>
<div class="tabboxtab" id="tab_tab__swconfig_devices">

<h4 class="hl sectionedit71" id="tab__swconfig_devices">Swconfig devices</h4>
<pre class="code">config interface &#039;wan&#039;
        option proto &#039;dhcp&#039;
        option hostname &#039;*&#039;
        option device &#039;eth0.10&#039;

config interface &#039;wan6&#039;
        option proto &#039;dhcpv6&#039;
        option reqaddress &#039;try&#039;
        option reqprefix &#039;auto&#039;
        option device &#039;eth0.10&#039;

config device
        option name &#039;eth0.10&#039;
        option type &#039;8021q&#039;
        option ifname &#039;eth0&#039;
        option vid &#039;10&#039;
        option ipv6 &#039;0&#039;</pre>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Swconfig devices&quot;,&quot;secid&quot;:71,&quot;range&quot;:&quot;73953-74379&quot;} -->
</div>
</div>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Slingshot Fibre&quot;,&quot;hid&quot;:&quot;slingshot_fibre&quot;,&quot;codeblockOffset&quot;:73,&quot;secid&quot;:69,&quot;range&quot;:&quot;73469-74390&quot;} -->
<h3 class="sectionedit72" id="simply_broadband">Simply Broadband</h3>
<div class="level3">

<p>
The Slingshot Fibre config (above) should work here too.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Simply Broadband&quot;,&quot;hid&quot;:&quot;simply_broadband&quot;,&quot;codeblockOffset&quot;:75,&quot;secid&quot;:72,&quot;range&quot;:&quot;74391-74476&quot;} -->
<h2 class="sectionedit73" id="portugal">Portugal</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Portugal&quot;,&quot;hid&quot;:&quot;portugal&quot;,&quot;codeblockOffset&quot;:75,&quot;secid&quot;:73,&quot;range&quot;:&quot;74477-74498&quot;} -->
<h3 class="sectionedit74" id="altice_meopt_empresas">Altice (MEO/PT Empresas)</h3>
<div class="level3">

</div>

<h4 id="globalconnect_pack">GlobalConnect Pack</h4>
<div class="level4">

<p>
This enterprise <abbr title="Voice over Internet Protocol">VoIP</abbr> and Internet services package includes a Thomson/Technicolor gateway which can be configured (by the tecnician only) in bridge mode, at installation time. In this configuration, the connection presents itself untagged at the gateway&#039;s switch port 4.
The Internet service is somewhat unusual, in the sense that it requires <abbr title="Internet Protocol">IP</abbr> aliasing (it allows the provider to spare one public <abbr title="Internet Protocol">IP</abbr> address per connection). The addressing is static, and the configuration provided is (as an example) something along these lines:
</p>
<ul>
<li class="level1"><div class="li"> Local <abbr title="Wide Area Network">WAN</abbr> <abbr title="Internet Protocol">IP</abbr>:	100.64.194.2</div>
</li>
<li class="level1"><div class="li"> Remote <abbr title="Wide Area Network">WAN</abbr> <abbr title="Internet Protocol">IP</abbr>:	100.64.194.1</div>
</li>
<li class="level1"><div class="li"> Internet <abbr title="Internet Protocol">IP</abbr>:	62.10.20.30/32</div>
</li>
</ul>

<p>
Both the Local and Remote <abbr title="Wide Area Network">WAN</abbr> <abbr title="Internet Protocol">IP</abbr> addresses belong to a /30 subnet. Inbound traffic arrives at the interface with the Internet <abbr title="Internet Protocol">IP</abbr> address as the destination.
To configure this connection on an OpenWrt device (let&#039;s assume interface eth1), on <code>/etc/config/network</code>, we need:
</p>
<pre class="code">config interface &#039;wan&#039;
	option ifname &#039;eth1&#039;
	option proto &#039;static&#039;
	list ipaddr &#039;62.10.20.30/32&#039;
	list ipaddr &#039;100.64.194.2/30&#039;
	option gateway &#039;100.64.194.1&#039;</pre>

<p>
Now, since the addressing is static, we can do source <abbr title="Network Address Translation">NAT</abbr> instead of masquerading. To do so, we configure /etc/config/firewall as follows:
</p>
<pre class="code">config nat
	option name &#039;MEO SNAT&#039;
	option device &#039;eth1&#039;
	option snat_ip &#039;62.10.20.30&#039;
	option src &#039;wan&#039;
	option target &#039;SNAT&#039;</pre>

</div>

<h4 id="residential_fiber_ftth_service">Residential Fiber (FTTH) service</h4>
<div class="level4">

<p>
These settings are over a DSA switch and then over swconfig. You just need to, set <abbr title="Virtual Local Area Network">VLAN</abbr> 12 over <abbr title="Wide Area Network">WAN</abbr> port and then configure the <abbr title="Virtual Local Area Network">VLAN</abbr> in the wan interface with <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> and DHCPv6. No need to clone MAC addresses.
</p>

</div>

<h4 id="dsa_implementation">DSA implementation:</h4>
<div class="level4">

<p>
Just set a <abbr title="Virtual Local Area Network">VLAN</abbr> 12 device over the wan port and then set the device for wan interface with <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> and DHCPv6.
</p>
<pre class="code">config device
	option type &#039;8021q&#039;
	option ifname &#039;wan&#039;
	option vid &#039;12&#039;
	option name &#039;wan.12&#039;

config interface &#039;wan&#039;
        option device &#039;wan.12&#039;
        option proto &#039;dhcp&#039;

config interface &#039;wan6&#039;
        option device &#039;wan.12&#039;
        option proto &#039;dhcpv6&#039;
        option reqaddress &#039;try&#039;
        option reqprefix &#039;auto&#039;
</pre>

</div>

<h4 id="android_and_non-andriod_tv_boxes">Android and non-Andriod TV Boxes:</h4>
<div class="level4">

<p>
# opkg install igmpproxy
</p>

<p>
# nano /etc/config/igmpproxy
</p>
<pre class="code">config igmpproxy
        option quickleave 1

config phyint
        option network wan
        option zone wan
        option direction upstream
        list altnet 0.0.0.0/0

config phyint
        option network lan
        option zone lan
        option direction downstream
</pre>

<p>
Reboot.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Altice (MEO\/PT Empresas)&quot;,&quot;hid&quot;:&quot;altice_meopt_empresas&quot;,&quot;codeblockOffset&quot;:75,&quot;secid&quot;:74,&quot;range&quot;:&quot;74499-77061&quot;} -->
<h2 class="sectionedit75" id="slovakia">Slovakia</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Slovakia&quot;,&quot;hid&quot;:&quot;slovakia&quot;,&quot;codeblockOffset&quot;:79,&quot;secid&quot;:75,&quot;range&quot;:&quot;77062-77083&quot;} -->
<h3 class="sectionedit76" id="orange_slovensko">Orange Slovensko</h3>
<div class="level3">

<p>
<a href="https://www.orange.sk/" class="urlextern" title="https://www.orange.sk/" rel="ugc nofollow">Orange Slovensko</a> (the owner is France-based multinational telecommunications company <a href="https://www.orange.com/" class="urlextern" title="https://www.orange.com/" rel="ugc nofollow">Orange S.A.</a>) offers FTTH service for their customers through the end CPE device.
</p>

</div>

<h4 id="ftth_fiber">FTTH (Fiber)</h4>
<div class="level4">

<p>
Orange Slovensko uses the same <abbr title="Internet Protocol version 6">IPv6</abbr> /64 prefix delegation method as AT&amp;T does.
</p>

<p>
At the present moment (August 2022) there is no known way to get a /60 or /62 <abbr title="Internet Protocol version 6">IPv6</abbr> prefix delegated from the <abbr title="Local Area Network">LAN</abbr> port of the operator&#039;s CPE device. It is only possible to send a multiple PD requests, and to get a pool of multiple /64 blocks to have them assigned into different <abbr title="Local Area Network">LAN</abbr> interfaces on the downstream device. So, it is possible to use these obtained /64 subnets within your OpenWrt configuration and downstream client subnets or VLANs.
</p>

<p>
Initial discussion and working OpenWrt configuration with the Orange Slovensko CPE device can be found in this post: <a href="https://forum.openwrt.org/t/ipv6-pd-60-for-downstream-openwrt-router-after-orange-slovensko-fiber/131707/8?u=alexq" class="urlextern" title="https://forum.openwrt.org/t/ipv6-pd-60-for-downstream-openwrt-router-after-orange-slovensko-fiber/131707/8?u=alexq" rel="ugc nofollow">Link to owrt forum</a>.
</p>

<p>
Сonfiguration details are similar to the <a href="/docs/guide-user/network/wan/isp-configurations#fiber" class="wikilink1" title="docs:guide-user:network:wan:isp-configurations" data-wiki-id="docs:guide-user:network:wan:isp-configurations">AT&amp;T ISP configuration</a>:
all the &#039;magic&#039; will be achieved by the <code>kmod-macvlan</code> that allows to create multiple <em>wan6</em> virtual interfaces (hence to request and obtain multiple <abbr title="Internet Protocol version 6">IPv6</abbr> /64 blocks), and to assign these virtual <em>wan6</em> interfaces into appropriate DHCPv6 clients via <code>ip6class</code> and <code>ip6assign 64</code> settings. 
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Orange Slovensko&quot;,&quot;hid&quot;:&quot;orange_slovensko&quot;,&quot;codeblockOffset&quot;:79,&quot;secid&quot;:76,&quot;range&quot;:&quot;77084-78565&quot;} -->
<h2 class="sectionedit77" id="portugal_spain">Portugal &amp; Spain</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Portugal &amp; Spain&quot;,&quot;hid&quot;:&quot;portugal_spain&quot;,&quot;codeblockOffset&quot;:79,&quot;secid&quot;:77,&quot;range&quot;:&quot;78566-78595&quot;} -->
<h3 class="sectionedit78" id="digi">DIGI</h3>
<div class="level3">

<p>
DIGI uses PPPoE for FTTH connections, just need to call to their support number and ask for the authentication data. They offer optionaly <abbr title="Voice over Internet Protocol">VoIP</abbr> but at the date they don&#039;t provide a way to configure, you must use the provided router if you want to have <abbr title="Voice over Internet Protocol">VoIP</abbr>. At least in Portugal, the network supports RFC4638, giving opportunity to use full <abbr title="Wide Area Network">WAN</abbr> <abbr title="Maximum Transmission Unit">MTU</abbr> 1500 bytes, over PPPoE devices (<abbr title="Maximum Transmission Unit">MTU</abbr> 1508 bytes).
</p>

</div>

<h4 id="ftth_fiber1">FTTH (Fiber)</h4>
<div class="level4">

<p>
These settings are over a DSA switch and then over swconfig. You just need to, set <abbr title="Virtual Local Area Network">VLAN</abbr> 20 over <abbr title="Wide Area Network">WAN</abbr> port and then configure the <abbr title="Virtual Local Area Network">VLAN</abbr> in the wan interface with PPPoE and the authentication data provided by technical support. No need to clone MAC address.
</p>

</div>

<h5 id="dsa">DSA:</h5>
<div class="level5">

<p>
Just set a <abbr title="Virtual Local Area Network">VLAN</abbr> 20 device over the wan port and then set the device for wan interface with the PPPoE authentication data.
</p>
<pre class="code">config device
	option type &#039;8021q&#039;
	option ifname &#039;wan&#039;
	option vid &#039;20&#039;
	option name &#039;wan.20&#039;

config interface &#039;wan&#039;
	option device &#039;wan.20&#039;
	option proto &#039;pppoe&#039;
	option username &#039;*********@digi&#039;
	option password &#039;********&#039;
	option ipv6 &#039;auto&#039;
</pre>

<p>
With ipv6 auto a virtual interface wan_6 is spawned. If you want to rename it to wan6 or configure specific settings there is a way but out of scope in this page so you can refer to <a href="/docs/guide-user/network/ipv6/configuration#native_ipv6_connection" class="wikilink1" title="docs:guide-user:network:ipv6:configuration" data-wiki-id="docs:guide-user:network:ipv6:configuration">Native IPv6 connection</a>.
</p>

</div>

<h5 id="swconfig">swconfig:</h5>
<div class="level5">

<p>
You must check the switch name and also the eth# you have for the wan port, in this example switch0 and eth0:
</p>
<pre class="code">config interface &#039;wan&#039;
	option device &#039;eth0.20&#039;
	option proto &#039;pppoe&#039;
	option username &#039;*********@digi&#039;
	option password &#039;********&#039;
	option ipv6 &#039;auto&#039;

config switch_vlan
	option device &#039;switch0&#039;
	option vlan &#039;3&#039;
	option ports &#039;1t 6t&#039;
	option vid &#039;20&#039;
</pre>

<p>
With ipv6 auto a virtual interface wan_6 is spawned. If you want to rename it to wan6 or configure specific settings there is a way but out of scope in this page so you can refer to <a href="/docs/guide-user/network/ipv6/configuration#native_ipv6_connection" class="wikilink1" title="docs:guide-user:network:ipv6:configuration" data-wiki-id="docs:guide-user:network:ipv6:configuration">Native IPv6 connection</a>.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;DIGI&quot;,&quot;hid&quot;:&quot;digi&quot;,&quot;codeblockOffset&quot;:79,&quot;secid&quot;:78,&quot;range&quot;:&quot;78596-80635&quot;} -->
<h3 class="sectionedit79" id="vodafone_spain">Vodafone Spain</h3>
<div class="level3">

<p>
WIP: Vodafone doesn&#039;t provide PPPoE data, you must, capture it by factory resetting the router, accessing it with generic auth data over internet, configuring port mirroring for the ppp interface to lan1 port and then with wireshark or the tool you want get the autoconfiguration data when you plug the ont rj45 or fiber cable to the router. This can be done for their non-integrated and integrated ont actual routers.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Vodafone Spain&quot;,&quot;hid&quot;:&quot;vodafone_spain&quot;,&quot;codeblockOffset&quot;:81,&quot;secid&quot;:79,&quot;range&quot;:&quot;80636-81081&quot;} -->
<h2 class="sectionedit80" id="turkey">Turkey</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Turkey&quot;,&quot;hid&quot;:&quot;turkey&quot;,&quot;codeblockOffset&quot;:81,&quot;secid&quot;:80,&quot;range&quot;:&quot;81082-81101&quot;} -->
<h3 class="sectionedit81" id="turknet">Turknet</h3>
<div class="level3">

<p>
<a href="https://turk.net/destek/nasil-yaparim/internet-baglantimla-ilgili-sorunlari-nasil-cozebilirim/modemimi-nasil-kurarim/adsl-ve-vdsl-modem-kurulum-degerleri.html" class="urlextern" title="https://turk.net/destek/nasil-yaparim/internet-baglantimla-ilgili-sorunlari-nasil-cozebilirim/modemimi-nasil-kurarim/adsl-ve-vdsl-modem-kurulum-degerleri.html" rel="ugc nofollow">Turknet</a> uses PPPoE for both ADSL and VDSL connections.
</p>

</div>

<h4 id="vdsl4">VDSL</h4>
<div class="level4">

<p>
These settings based on this post <a href="https://forum.openwrt.org/t/isp-configuration/72041" class="urlextern" title="https://forum.openwrt.org/t/isp-configuration/72041" rel="ugc nofollow">Link to owrt forum</a>
</p>
<pre class="code">config dsl &#039;dsl&#039;
	option annex &#039;b&#039;
	option xfer_mode &#039;ptm&#039;
	option line_mode &#039;vdsl&#039;

config interface &#039;wan&#039;
	option proto &#039;pppoe&#039;
	option username &#039;***************@turk.net&#039;
	option password &#039;****&#039;
	option ifname &#039;dsl0.35&#039;  # VLAN ID: 35
</pre>

</div>

<h4 id="adsl3">ADSL</h4>
<div class="level4">
<pre class="code">config dsl &#039;dsl&#039;
	option annex &#039;a&#039;
	option xfer_mode &#039;atm&#039;
	option line_mode &#039;adsl&#039;

config atm-bridge &#039;atm&#039;
	option encaps &#039;llc&#039;
	option payload &#039;bridged&#039;
	option vci &#039;35&#039;
	option vpi &#039;8&#039;

config interface &#039;wan&#039;
	option proto &#039;pppoe&#039;
	option username &#039;***************@turk.net&#039;
	option password &#039;****&#039;
	option ifname &#039;dsl0&#039; 
</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Turknet&quot;,&quot;hid&quot;:&quot;turknet&quot;,&quot;codeblockOffset&quot;:81,&quot;secid&quot;:81,&quot;range&quot;:&quot;81102-82073&quot;} -->
<h3 class="sectionedit82" id="turk_telekom">Turk Telekom</h3>
<div class="level3">

<p>
Turk Telekom (a major <abbr title="Internet Service Provider">ISP</abbr> in Turkey, also known with the name TTNET) provides FTTH and FTTB services through PPPoE with <abbr title="Virtual Local Area Network">VLAN</abbr> tagging. You can ask customer support for your PPPoE username and password.
</p>

<p>
<abbr title="Virtual Local Area Network">VLAN</abbr> tagging is usually as follows:
</p>
<ul>
<li class="level1"><div class="li"> <abbr title="Voice over Internet Protocol">VoIP</abbr>: <abbr title="Virtual Local Area Network">VLAN</abbr> 46</div>
</li>
<li class="level1"><div class="li"> Internet: PPPoE over <abbr title="Virtual Local Area Network">VLAN</abbr> 35</div>
</li>
<li class="level1"><div class="li"> <abbr title="Internet Protocol Television">IPTV</abbr>: <abbr title="Virtual Local Area Network">VLAN</abbr> 55 for <a href="https://www.tivibu.com.tr" class="urlextern" title="https://www.tivibu.com.tr" rel="ugc nofollow">tivibu</a></div>
</li>
</ul>

<p>
A sample config should look like on OpenWrt 21.02 (with DSA):
</p>
<pre class="code">config interface &#039;wan&#039;
    option device &#039;wan.35&#039;
    option proto &#039;pppoe&#039;
    option username &#039;xxxxxxx&#039;
    option password &#039;xxxxxxx&#039;
    option ipv6 &#039;auto&#039;

config device
    option name &#039;wan.35&#039;
    option type &#039;8021q&#039;
    option ifname &#039;wan&#039;
    option vid &#039;35&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Turk Telekom&quot;,&quot;hid&quot;:&quot;turk_telekom&quot;,&quot;codeblockOffset&quot;:83,&quot;secid&quot;:82,&quot;range&quot;:&quot;82074-82791&quot;} -->
<h3 class="sectionedit83" id="turkcell_superonline">Turkcell Superonline</h3>
<div class="level3">

<p>
Turkcell Superonline provides FTTH and FTTB services through PPPoE with <abbr title="Virtual Local Area Network">VLAN</abbr> tagging. In addition, you have to spoof the <abbr title="Wide Area Network">WAN</abbr> MAC address of the stock router.
</p>

<p>
<abbr title="Virtual Local Area Network">VLAN</abbr> tagging is usually as follows:
</p>
<ul>
<li class="level1"><div class="li"> Internet: PPPoE (They only allow registered MAC addresses to authenticate with PPPoE. So you need to clone the <abbr title="Wide Area Network">WAN</abbr> MAC address of the stock router)</div>
</li>
<li class="level1"><div class="li"> <abbr title="Internet Protocol Television">IPTV</abbr>: <abbr title="Virtual Local Area Network">VLAN</abbr> 103 (Priority 4) for <a href="https://tvplus.com.tr" class="urlextern" title="https://tvplus.com.tr" rel="ugc nofollow">TV+</a></div>
</li>
</ul>

<p>
A basic <abbr title="Wide Area Network">WAN</abbr> config should look like on OpenWrt 21.02 and up w/ DSA:
</p>
<pre class="code">config interface &#039;wan&#039;
	option device &#039;wan&#039;
	option proto &#039;pppoe&#039;
	option username &#039;xxxxxxxxxxxx@fiber&#039;
	option password &#039;xxxxxxx&#039;
	option ipv6 &#039;auto&#039;
	option peerdns &#039;0&#039;
	list dns &#039;8.8.8.8&#039;
	list dns &#039;8.8.4.4&#039;

config device
	option name &#039;wan&#039;
	option macaddr &#039;XX:XX:XX:XX:XX:XX&#039;</pre>

<p>
<strong>Note:</strong> Turkcell Superonline does not share PPPoE credentials with you. So you have to capture them yourself from the stock router first.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Turkcell Superonline&quot;,&quot;hid&quot;:&quot;turkcell_superonline&quot;,&quot;codeblockOffset&quot;:84,&quot;secid&quot;:83,&quot;range&quot;:&quot;82792-83744&quot;} -->
<h3 class="sectionedit84" id="turksat_kablonet">Turksat Kablonet</h3>
<div class="level3">

<p>
Kablonet uses <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> for Docsis and PPPoE for FTTH services.
</p>

<p>
Basic <abbr title="Wide Area Network">WAN</abbr> configs should look like:
</p>

</div>

<h4 id="docsis">DOCSIS</h4>
<div class="level4">
<pre class="code">config interface &#039;wan&#039;
	option device &#039;wan&#039;
	option proto &#039;dhcp&#039;
	option ipv6 &#039;auto&#039;
	option peerdns &#039;0&#039;
	option dns &#039;1.1.1.1&#039;
	option dns &#039;1.0.0.1&#039;</pre>

</div>

<h4 id="ftth3">FTTH</h4>
<div class="level4">
<pre class="code">config interface &#039;wan&#039;
	option device &#039;wan&#039;
	option proto &#039;pppoe&#039;
	option username &#039;xxxxxxxx@kablofiber&#039;
	option password &#039;xxxxxxxx&#039;
	option ipv6 &#039;auto&#039;
	option peerdns &#039;0&#039;
	option dns &#039;1.1.1.1&#039;
	option dns &#039;1.0.0.1&#039;</pre>

<p>
<strong>Note(FTTH):</strong> If you are using the stock modem that was given make sure it&#039;s connected to your openwrt router on LAN1.
</p>

<p>
<strong>Note2(FTTH):</strong> PPPoE credentials can be acquired from <a href="https://online.turksatkablo.com.tr/" class="urlextern" title="https://online.turksatkablo.com.tr/" rel="ugc nofollow">TurksatKablo Customer Web Interface</a> or by calling them.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Turksat Kablonet&quot;,&quot;hid&quot;:&quot;turksat_kablonet&quot;,&quot;codeblockOffset&quot;:85,&quot;secid&quot;:84,&quot;range&quot;:&quot;83745-84566&quot;} -->
<h2 class="sectionedit85" id="united_kingdom">United Kingdom</h2>
<div class="level2">

<p>
The information below is reproduced from the &#039;1-OpenWrt/LEDE Installation Guide for the BT Home Hub 5A&#039;, which can be downloaded from:
<a href="https://www.dropbox.com/sh/c8cqmpc6cacs5n8/AAA2f8htk1uMitBckDW8Jq88a?dl=0" class="urlextern" title="https://www.dropbox.com/sh/c8cqmpc6cacs5n8/AAA2f8htk1uMitBckDW8Jq88a?dl=0" rel="ugc nofollow">Dropbox</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;United Kingdom&quot;,&quot;hid&quot;:&quot;united_kingdom&quot;,&quot;codeblockOffset&quot;:87,&quot;secid&quot;:85,&quot;range&quot;:&quot;84567-84817&quot;} -->
<h3 class="sectionedit86" id="adsl4">ADSL</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> ADSL LINK</div>
</li>
<li class="level1"><div class="li"> Annex A, Tone A</div>
</li>
<li class="level1 node"><div class="li"> ATM</div>
<ul>
<li class="level2"><div class="li"> VPI (Virtual Path Identifier): 0</div>
</li>
<li class="level2"><div class="li"> VCI (Virtual Channel Identifier): 38</div>
</li>
</ul>
</li>
</ul>

<p>
Configuration examples for LEDE 17 and OpenWrt 18.
</p>

<p>
Virtually all ISPs in the UK use PPPoA protocol.
</p>
<pre class="code">config dsl &#039;dsl&#039;
    option annex &#039;a&#039;
    option tone &#039;a&#039;
    option xfer_mode &#039;atm&#039;
    option line_mode &#039;adsl&#039;

config interface &#039;wan&#039;
    option proto &#039;pppoa&#039;
    option username &#039;your username&#039;
    option password &#039;your password&#039;
    # option username &#039;bthomehub@btinternet.com&#039; # BT ADSL
    # option password &#039; &#039; # Apparently requires any non-empty password such as a space character or &#039;BT&#039;
    # option username &#039;install@o2broadband.co.uk&#039; # Sky and NOW ADSL on ex-o2 enabled exchanges.
    # option password &#039;&#039;
    option vpi &#039;0&#039;
    option vci &#039;38&#039;
    option encaps &#039;vc&#039;
    option ipv6 &#039;auto&#039; </pre>

<p>
Ensure that ATM Bridge section has been deleted, otherwise PPPoA will not connect to broadband service.  It can be deleted using LuCI.
</p>
<pre class="code">config atm-bridge &#039;atm&#039; # Remove entire section for PPPoA</pre>

<p>
BT group also supports PPPoE protocol.
</p>
<pre class="code">config dsl &#039;dsl&#039;
    option annex &#039;a&#039;
    option tone &#039;a&#039;
    option xfer_mode &#039;atm&#039;
    option line_mode &#039;adsl&#039;

config atm-bridge &#039;atm&#039;
    option encaps &#039;llc&#039;
    option payload &#039;bridged&#039;
    option vci &#039;38&#039;
    option vpi &#039;0&#039;

config interface &#039;wan&#039;
    option ifname &#039;dsl0&#039;
    # option ifname &#039;nas0&#039; # for LEDE 17.01
    option proto &#039;pppoe&#039;
    option username &#039;your username&#039;
    option password &#039;your password&#039;
    # option username &#039;bthomehub@btinternet.com&#039; # BT ADSL
    # option password &#039; &#039; # Apparently requires any non-empty password such as a space character or &#039;BT&#039;</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;ADSL&quot;,&quot;hid&quot;:&quot;adsl4&quot;,&quot;codeblockOffset&quot;:87,&quot;secid&quot;:86,&quot;range&quot;:&quot;84818-86531&quot;} -->
<h3 class="sectionedit87" id="vdsl5">VDSL</h3>
<div class="level3">

<p>
The network protocols are layered in this way:
</p>
<ul>
<li class="level1"><div class="li"> VDSL link (17a profile, G.993.5)</div>
</li>
<li class="level1"><div class="li"> PTM (Packet Transfer Mode)</div>
</li>
<li class="level1"><div class="li"> Annex B, Tone A</div>
</li>
<li class="level1"><div class="li"> <abbr title="Virtual Local Area Network">VLAN</abbr> 101 (GEA lines use <abbr title="Virtual Local Area Network">VLAN</abbr> 2 for voice)</div>
</li>
</ul>

<p>
<a href="https://support.aquiss.net/en/knowledgebase/article/generic-fttc-broadband-setup-and-router-settings" class="urlextern" title="https://support.aquiss.net/en/knowledgebase/article/generic-fttc-broadband-setup-and-router-settings" rel="ugc nofollow">Aquiss</a> uses the PPPoE protocol with authentication required.
</p>

<p>
<abbr title="Internet Protocol version 6">IPv6</abbr> is supported but disabled by default. Once a line goes active, you will need to enable <abbr title="Internet Protocol version 6">IPv6</abbr> within the Aquiss ebilling area and wait for a prefix to be assigned.
</p>
<pre class="code">config dsl &#039;dsl&#039;
    option annex &#039;b&#039;
    option tone &#039;a&#039;

config interface &#039;wan&#039;
    option ifname &#039;dsl0.101&#039;
    # option ifname &#039;ptm0.101&#039; # for LEDE 17.01
    option proto &#039;pppoe&#039;
    option ipv6 &#039;1&#039; # Aquiss has IPv6 but it needs to be enabled on your line first. Replace &#039;0&#039; to disable IPv6
    option mtu &#039;1458&#039;
    option username &#039;abb-username@aquiss.com&#039;
    option password &#039;XXXXXXX&#039; # Provided by email or avaiable in Aquiss ebilling area (Circuit information)</pre>

<p>
<a href="https://www.bt.com/broadband/fibre" class="urlextern" title="https://www.bt.com/broadband/fibre" rel="ugc nofollow">BT Broadband</a> uses PPPoE protocol.
</p>
<pre class="code">config dsl &#039;dsl&#039;
    option annex &#039;b&#039;
    option tone &#039;a&#039;

config interface &#039;wan&#039;
    option ifname &#039;dsl0.101&#039;
    # option ifname &#039;ptm0.101&#039; # for LEDE 17.01
    option proto &#039;pppoe&#039;
    option ipv6 &#039;1&#039; # BT Broadband has IPv6. Replace &#039;0&#039; to disable IPv6
    option mtu &#039;1500&#039;
    option username &#039;bthomehub@btinternet.com&#039;
    option password &#039; &#039; # Apparently requires any non-empty password such as a space character or &#039;BT&#039;.</pre>

<p>
For 22.03.X/23.X builds.
</p>
<pre class="code">config atm-bridge &#039;atm&#039;
	option vpi &#039;0&#039;
	option vci &#039;38&#039;
	option encaps &#039;vc&#039;
	option payload &#039;bridged&#039;
	option nameprefix &#039;dsl&#039;

config dsl &#039;dsl&#039;
	option annex &#039;b&#039;
        option tone &#039;a&#039;
	option ds_snr_offset &#039;0&#039;
	option xfer_mode &#039;ptm&#039;
	option line_mode &#039;vdsl&#039;

config device
	option name &#039;dsl0.101&#039;
	option type &#039;8021q&#039;
	option ifname &#039;dsl0&#039;
	option vid &#039;101&#039;

config interface &#039;wan&#039;
	option device &#039;dsl0.101&#039;
	option proto &#039;pppoe&#039;
	option username &#039;bthomehub@btbroadband.com&#039;
        option password &#039;BT&#039; # Apparently requires any non-empty password such as a space character or &#039;BT&#039;.
	option ipv6 &#039;1&#039; # BT Broadband has IPv6. Replace &#039;0&#039; to disable IPv6
        option multicast &#039;1&#039; # For BT TV, Remember to install imgproxy.
        
config interface &#039;wan6&#039;
        option proto &#039;dhcpv6&#039;
        option reqaddress &#039;try&#039;
        option reqprefix &#039;auto&#039;
        option ifname &#039;dsl0.101&#039;</pre>

<p>
<a href="https://ee.co.uk/help/help-new/broadband-and-landline/home-broadband/how-do-i-use-my-own-router-for-home-broadband" class="urlextern" title="https://ee.co.uk/help/help-new/broadband-and-landline/home-broadband/how-do-i-use-my-own-router-for-home-broadband" rel="ugc nofollow">EE</a> uses PPPoE protocol.
</p>
<pre class="code">config dsl &#039;dsl&#039;
    option annex &#039;b&#039;
    option tone &#039;a&#039;

config interface &#039;wan&#039;
    option ifname &#039;dsl0.101&#039;
    # option ifname &#039;ptm0.101&#039; # for LEDE 17.01
    option proto &#039;pppoe&#039;
    option ipv6 &#039;0&#039; # EE has no IPv6. Replace &#039;1&#039; to enable IPv6
    option username &#039;56@fs&#039; &#039; # see https://ee.co.uk/help/help-new/broadband-and-landline/home-broadband/what-are-my-home-broadband-internet-settings
    option password &#039;XXXXX&#039; # password that came with your EE router</pre>

<p>
OneStream (as of 24.10.X builds):
</p>
<pre class="code">config dsl &#039;dsl&#039;
    option annex &#039;a&#039;
    option tone &#039;a&#039;
    option xfer_mode &#039;ptm&#039;
    option line_mode &#039;vdsl&#039;

config interface &#039;wan&#039;
    option device &#039;dsl0.101&#039;
    option proto &#039;pppoe&#039;
    option username &#039;XXXX&#039;
    option password &#039;XXXX&#039;
    option ipv6 &#039;0&#039;</pre>

<p>
<a href="http://web.archive.org/web/20210505225223/https://help.shellenergy.co.uk/hc/en-us/articles/360001044438-What-if-I-want-to-use-my-own-router-" class="urlextern" title="http://web.archive.org/web/20210505225223/https://help.shellenergy.co.uk/hc/en-us/articles/360001044438-What-if-I-want-to-use-my-own-router-" rel="ugc nofollow">Shell Energy *fibre* (G.993.2=VDSL2)</a> uses the PPPoE protocol:
</p>
<pre class="code">config interface &#039;wan&#039;
    option ifname &#039;dsl0.101&#039;
    # option ifname &#039;ptm0.101&#039; # for LEDE 17.01
    option proto &#039;pppoe&#039;
    option username &#039;&lt;username&gt;&#039; # this is usually &quot;&lt;yourTel&gt;@first-utility.com&quot;
    option password &#039;XXXXX&#039; # password that came with your shell energy router</pre>

<p>
(Shell Energy *copper* (G.992.5=ADSL2+) uses PPPoA. For this, see the generic United Kingdom ADSL section above.)
</p>

<p>
Sky and NOW Broadband use <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> aka. IPoE. Refer to following thread for additional instructions:
</p>

<p>
<a href="http://www.skyuser.co.uk/forum/sky-broadband-fibre-help/50483-generic-open-wrt-sky-fibre-mer-guide.html" class="urlextern" title="http://www.skyuser.co.uk/forum/sky-broadband-fibre-help/50483-generic-open-wrt-sky-fibre-mer-guide.html" rel="ugc nofollow">SkyUser - obsolete instructions</a>
</p>

<p>
<a href="https://forum.openwrt.org/t/bt-homehub-5a-with-nowtv-fibre/50137/2" class="urlextern" title="https://forum.openwrt.org/t/bt-homehub-5a-with-nowtv-fibre/50137/2" rel="ugc nofollow">OpenWrt forum - newer instructions</a> - see example config below
<a href="https://forum.openwrt.org/t/nowtv-openwrt/74624/5" class="urlextern" title="https://forum.openwrt.org/t/nowtv-openwrt/74624/5" rel="ugc nofollow">Additional info for NOW Broadband</a>
</p>
<pre class="code">config dsl &#039;dsl&#039;
        option annex &#039;b&#039;
        option tone &#039;a&#039;
        option xfer_mode &#039;ptm&#039;
        option line_mode &#039;vdsl&#039;


config interface &#039;wan&#039;
        option ifname &#039;dsl0.101&#039;
        # option ifname &#039;ptm0.101&#039; # for LEDE 17.01
        option proto &#039;dhcp&#039;
        option clientid &#039;anythingYouLike&#039;   # Update: it may have to be in hexadecimal and/or of a minimum length
#        option macaddr &#039;AA:BB:CC:DD:EE:FF&#039;  # optional, replace with your Sky/NOW hub&#039;s WAN mac if included

config device &#039;wan_dev&#039;
        option name &#039;dsl0&#039;

config interface &#039;wan6&#039;
        option proto &#039;dhcpv6&#039;
        option reqaddress &#039;try&#039;
        option reqprefix &#039;auto&#039;
        option ifname &#039;dsl0.101&#039;
        option delegate &#039;1&#039;</pre>

<p>
<a href="https://community.talktalk.co.uk/t5/Articles/Set-up-a-non-TalkTalk-router/ta-p/2205383" class="urlextern" title="https://community.talktalk.co.uk/t5/Articles/Set-up-a-non-TalkTalk-router/ta-p/2205383" rel="ugc nofollow">TalkTalk</a> uses <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> protocol. They use automated network authentication so there is no need for a username and password - IGMP V2/V3 proxy needs to be installed for TalkTalk TV for my setup im using separated <abbr title="Local Area Network">LAN</abbr> interface for this.
</p>
<pre class="code">config dsl &#039;dsl&#039;
    option annex &#039;b&#039;
    option tone &#039;a&#039;

config interface &#039;wan&#039;
    option ifname &#039;dsl0.101&#039;
    # option ifname &#039;ptm0.101&#039; # for LEDE 17.01
    option proto &#039;dhcp&#039;
    option mtu &#039;1500&#039;
    option ipv6 &#039;0&#039; # TalkTalk has no IPv6 support. Replace &#039;0&#039; to &#039;1&#039; to enable IPv6 for feature</pre>

<p>
<a href="https://forum.vodafone.co.uk/t5/Other-broadband-queries/How-to-Set-up-a-third-party-router-with-vodafone-2019/m-p/2621214" class="urlextern" title="https://forum.vodafone.co.uk/t5/Other-broadband-queries/How-to-Set-up-a-third-party-router-with-vodafone-2019/m-p/2621214" rel="ugc nofollow">Vodafone UK</a>
uses PPPoE protocol with authentication needed.
</p>
<pre class="code">config dsl &#039;dsl&#039;
    option annex &#039;b&#039;
    option tone &#039;a&#039;

config interface &#039;wan&#039;
    option ifname &#039;dsl0.101&#039;
    # option ifname &#039;ptm0.101&#039; # for LEDE 17.01
    option proto &#039;pppoe&#039;
    option ipv6 &#039;0&#039; # Vodafone UK has no IPv6. Replace &#039;1&#039; to enable IPv6
    option username &#039;XXX@broadband.vodafone.co.uk&#039;
    #option username &#039;XXXX@businessbroadband.vodafone.co.uk # for business customers
    option password &#039; XXXXXX&#039; # Need password for auth</pre>

<p>
<a href="https://www.zen.co.uk/broadband" class="urlextern" title="https://www.zen.co.uk/broadband" rel="ugc nofollow">Zen Internet</a>
uses PPPoE protocol with auth (Username and Password)
</p>
<pre class="code">config dsl &#039;dsl&#039;
    option annex &#039;b&#039;
    option tone &#039;a&#039;

config interface &#039;wan&#039;
    option ifname &#039;dsl0.101&#039;
    # option ifname &#039;ptm0.101&#039; # for LEDE 17.01
    option proto &#039;pppoe&#039;
    option ipv6 &#039;1&#039; # Zen has IPv6. Replace &#039;0&#039; to disable IPv6
    option mtu &#039;1500&#039;
    option username &#039;zenXXXXXX@zen&#039;
    option password &#039; XXXXXX&#039; # Need password for auth, can get this info from Zen Customer Portal or Mobile App.</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;VDSL&quot;,&quot;hid&quot;:&quot;vdsl5&quot;,&quot;codeblockOffset&quot;:90,&quot;secid&quot;:87,&quot;range&quot;:&quot;86532-93605&quot;} -->
<h3 class="sectionedit88" id="fibre_optic">Fibre Optic</h3>
<div class="level3">

</div>

<h4 id="openreach_full_fibre_fttp">Openreach Full Fibre (FTTP)</h4>
<div class="level4">

<p>
Openreach (a subsidiary owned by BT plc) provides fibre optic broadband to the home, <a href="https://www.openreach.com/fibre-broadband/fttp-providers" class="urlextern" title="https://www.openreach.com/fibre-broadband/fttp-providers" rel="ugc nofollow">with various ISPs reselling Openreach services to end users</a>. Any provider using the Openreach FTTP network requires an ONT (Optical Network Terminal) device fitted by Openreach to provide the fibre connection to the premises. This acts as the modem that will then connect to some form of CPE or router at the customer end via ethernet.
</p>

</div>

<h5 id="aquiss">Aquiss</h5>
<div class="level5">

<p>
Aquiss uses PPPoE for static <abbr title="Internet Protocol version 4">IPv4</abbr>. For static <abbr title="Internet Protocol version 6">IPv6</abbr> /56 subnet it is DHCPv6 over PPPoE. A standard PPPoE network interface with your Aquiss abb-xxxxxx@aquiss.com and password should get you connected with your <abbr title="Internet Protocol version 4">IPv4</abbr> address. <abbr title="Internet Protocol version 6">IPv6</abbr> (if enabled) will be automatically configured by a virtual interface with Obtain <abbr title="Internet Protocol version 6">IPv6</abbr> address set to Automatic. You can alternatively set this to manual and create your own alias interface if required.
</p>

<p>
<abbr title="Internet Protocol version 6">IPv6</abbr> must be enabled on the broadband line within the Aquiss ebilling system with a prefix delegated before configuring <abbr title="Internet Protocol version 6">IPv6</abbr>.
</p>

<p>
= Aquiss OpenReach configuration =
</p>

<p>
Updates to /etc/config/network should include the following:
</p>
<pre class="code"># on the eth1 interface that is wired to ONT, we want to enable baby jumbo frame
# this will allow pppoe client to set MTU of 1500 matching ethernet MTU on lan interface
config device
        option name &#039;eth1&#039;
        option mtu &#039;1508&#039;

# IPv4 is provided via PPPoE
config interface &#039;wan&#039;
	option device	&#039;eth1&#039;
	option proto	&#039;pppoe&#039;
	option mtu	&#039;1500&#039;
	option username &#039;abb-xxxxxxxxxx@aquiss.com&#039;
	option password &#039;password&#039;
	option ipv6	&#039;1&#039;
	option peerdns	&#039;0&#039;
	list dns        &#039;8.8.8.8&#039;
	list dns        &#039;8.8.4.4&#039;

# IPv6 is provided via DHCPv6
config interface &#039;wan6&#039;
        option device   &#039;@wan&#039;
        option proto    &#039;dhcpv6&#039;
        option peerdns  &#039;0&#039;
        list dns        &#039;2001:4860:4860::8888&#039;
        list dns        &#039;2001:4860:4860::8844&#039;</pre>

<p>
If you do not need custom <abbr title="Internet Protocol version 6">IPv6</abbr> configuration, just delete wan6 section completely, but also set wan ipv6 option to auto.
</p>

</div>

<h5 id="sky_broadband">Sky Broadband</h5>
<div class="level5">

<p>
Sky used <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> with “clientid authentication”, but any username/password will work. Working configuration, assuming ONT is connected to eth1:
</p>
<pre class="code">config interface &#039;wan&#039;
	option device	&#039;eth1&#039;
	option proto	&#039;dhcp&#039;
	option clientid	&#039;613162326333653466353036406e6f7774767c6131623263336534&#039;
	option peerdns	&#039;0&#039;
	list dns        &#039;8.8.8.8&#039;
	list dns        &#039;8.8.4.4&#039;

config interface &#039;wan6&#039;
	option device	&#039;eth1&#039;
	option proto	&#039;dhcpv6&#039;
	option peerdns	&#039;0&#039;
	list dns	&#039;2001:4860:4860::8888&#039;
	list dns        &#039;2001:4860:4860::8844&#039;</pre>

</div>

<h4 id="alternative_networks">Alternative networks</h4>
<div class="level4">

<p>
Outside of Openreach other connection providers in the UK are referred to as alternative networks (alt-nets), these include:
</p>
<ul>
<li class="level1"><div class="li"> City Fibre</div>
</li>
<li class="level1"><div class="li"> Community Fibre</div>
</li>
<li class="level1"><div class="li"> HyperOptic</div>
</li>
<li class="level1"><div class="li"> Giganet</div>
</li>
<li class="level1"><div class="li"> Virgin Media (Uses both HFC and FTTP in some areas with DOCSIS)</div>
</li>
<li class="level1"><div class="li"> Gigaclear</div>
</li>
</ul>

</div>

<h5 id="city_fibre">City Fibre</h5>
<div class="level5">

<p>
City Fibre provide fibre networks to business and residential customers, with selected ISPs reselling the connection to end users. These include ISPs such as Vodafone, Giganet, TalkTalk and Zen Internet.
</p>

<p>
<abbr title="Virtual Local Area Network">VLAN</abbr>: all traffic on the CityFibre network must be tagged as <abbr title="Virtual Local Area Network">VLAN</abbr> 911 or traffic will not flow.
</p>

</div>

<h5 id="giganet">Giganet</h5>
<div class="level5">

<p>
Giganet are a CityFibre and BT Openreach fibre reseller. They provide <abbr title="Internet Protocol version 4">IPv4</abbr> and <abbr title="Internet Protocol version 6">IPv6</abbr> connectivity to business and residential customers. They provide a static <abbr title="Internet Protocol version 4">IPv4</abbr> address and a static <abbr title="Internet Protocol version 6">IPv6</abbr> router address, with a /48 prefix for the client&#039;s network.
</p>

<p>
DHCPv6 is used to <abbr title="Internet Protocol version 6">IPv6</abbr> prefix delegation, but the <abbr title="Internet Protocol version 6">IPv6</abbr> prefix must be released by the router before the prefix will be issued again to either the same router or to another router. If this doesn&#039;t happen, an error of NoPrefixAvail during DHCPv6 negotiation, and odhcpd will complain that there is a local route, but no prefix, so it doesn&#039;t issue <abbr title="Internet Protocol version 6">IPv6</abbr> addresses to <abbr title="Local Area Network">LAN</abbr> clients.
</p>

</div>

<h5 id="gigabit_networks">Gigabit Networks</h5>
<div class="level5">

<p>
Gigabit networks provide residential broadband through Cityfibre. They operate CGNat and operate a <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> based service. Their requirements web pag is here: <a href="https://support.gigabitnetworks.co.uk/portal/en/kb/articles/can-i-use-my-own-router-with-your-service" class="urlextern" title="https://support.gigabitnetworks.co.uk/portal/en/kb/articles/can-i-use-my-own-router-with-your-service" rel="ugc nofollow">https://support.gigabitnetworks.co.uk/portal/en/kb/articles/can-i-use-my-own-router-with-your-service</a> You need to contact their order desk to confirm the required <abbr title="Virtual Local Area Network">VLAN</abbr>. They do filter based on the MAC address and you need to contact their support team to clear this binding. The engineer called this “Clear the <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> Binding process for the ONT interface.”
</p>

<p>
These are a set of working steps with a Belkin RT3200.
</p>
<ul>
<li class="level1"><div class="li"> <abbr title="Wide Area Network">WAN</abbr> <abbr title="Virtual Local Area Network">VLAN</abbr> tagging on the appropriate <abbr title="Virtual Local Area Network">VLAN</abbr></div>
</li>
<li class="level1"><div class="li"> Disabled <abbr title="Internet Protocol version 6">IPv6</abbr></div>
</li>
<li class="level1"><div class="li"> No hostname required.</div>
</li>
<li class="level1"><div class="li"> Contact their support and ask for “Clear the <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> Binding process for the ONT interface.”</div>
</li>
</ul>

</div>

<h5 id="community_fibre">Community Fibre</h5>
<div class="level5">

<p>
The Adtran ONT connects to any <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> enabled router. Recommended to spoof the MAC of your router so it follows the provider one.
</p>

</div>

<h5 id="gigaclear">GigaClear</h5>
<div class="level5">

<p>
GigaClear use DHCP4, MAC spoofing not required.
For <abbr title="Internet Protocol version 6">IPv6</abbr>, set the DUID (named “Client ID to send when requesting <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>” in the wan6 interface settings) to that of the provider-router and request a /48, otherwise their DHCP6 server doesn&#039;t seem to respond (even with these settings, it took &gt;60 secs to get an <abbr title="Internet Protocol">IP</abbr>). 
</p>
<pre class="code">config interface &#039;wan&#039;
        option device &#039;eth1&#039;
        option proto &#039;dhcp&#039;
        option force_link &#039;0&#039;
        option classlessroute &#039;0&#039;
        option metric &#039;10&#039;
        option ipv6 &#039;1&#039;

config interface &#039;wan6&#039;
        option proto &#039;dhcpv6&#039;
        option device &#039;@wan&#039;
        option disabled &#039;0&#039;
        option peerdns &#039;0&#039;
        option reqaddress &#039;try&#039;
        option clientid &#039;0002030...&#039; # DUID of the ISP-provided router (from &quot;Connectivity&quot; &gt; &quot;Internet Settings&quot; &gt; &quot;IPv6&quot;)
        option reqprefix &#039;48&#039;</pre>

</div>

<h5 id="internetty">InternetTY</h5>
<div class="level5">

<p>
InternetTY use PPPoE. Contact support for PAP/CHAP credentials or copy from provided router - password is same as default WiFi password. <abbr title="Internet Protocol version 6">IPv6</abbr> is unsupported (unconfirmed).
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Fibre Optic&quot;,&quot;hid&quot;:&quot;fibre_optic&quot;,&quot;codeblockOffset&quot;:100,&quot;secid&quot;:88,&quot;range&quot;:&quot;93606-99523&quot;} -->
<h2 class="sectionedit89" id="united_states">United States</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;United States&quot;,&quot;hid&quot;:&quot;united_states&quot;,&quot;codeblockOffset&quot;:103,&quot;secid&quot;:89,&quot;range&quot;:&quot;99524-99550&quot;} -->
<h3 class="sectionedit90" id="at_t">AT&amp;T</h3>
<div class="level3">

<p>
<a href="https://www.att.com/internet/" class="urlextern" title="https://www.att.com/internet/" rel="ugc nofollow">AT&amp;T Internet</a> no longer offers DSL connections, but is offering FTTH service in certain markets.
</p>

</div>

<h4 id="fiber">Fiber</h4>
<div class="level4">

<p>
These settings based on this post <a href="https://forum.openwrt.org/t/configure-dhcpv6c-on-wan-for-multiple-pd-requests-for-at-t-fiber/99371/39?u=_failsafe" class="urlextern" title="https://forum.openwrt.org/t/configure-dhcpv6c-on-wan-for-multiple-pd-requests-for-at-t-fiber/99371/39?u=_failsafe" rel="ugc nofollow">Link to owrt forum</a>
</p>

<p>
AT&amp;T Fiber connectivity with OpenWrt is most easily achieved via setting the AT&amp;T gateway device into “<abbr title="Internet Protocol">IP</abbr> passthrough” mode. The <abbr title="Internet Protocol">IP</abbr> passthrough mode type should be set as <em>DHCPS-fixed</em> with the passthrough fixed MAC address set to the MAC address of the <abbr title="Wide Area Network">WAN</abbr> interface to which your OpenWrt device is connected to the AT&amp;T gateway device. In this configuration you will not be operating in a double-<abbr title="Network Address Translation">NAT</abbr> mode as you would if you use the <em>DHCPS-dynamic</em> type of passthrough.
</p>

<p>
Additionally, if you intend for the AT&amp;T gateway device to act as transparently as possible while allowing your OpenWrt device to perform all typical firewall, <abbr title="Network Address Translation">NAT</abbr>, and routing functions, you will also want to disable packet filters and turn off all firewall advanced features within your AT&amp;T gateway device&#039;s Firewall settings sections. This may vary by AT&amp;T gateway model, so please refer to available guides online as to how to disable those features for your particular AT&amp;T gateway device.
</p>

<p>
By default, AT&amp;T enables <abbr title="Internet Protocol version 6">IPv6</abbr> connectivity, but AT&amp;T&#039;s <abbr title="Internet Protocol version 6">IPv6</abbr> handling is suboptimal in that while it is DHCPv6-PD, the <abbr title="Internet Protocol version 6">IPv6</abbr> subnet they provide to each customer is a /60 instead of a more desireable /56 (or even /48). Further, the AT&amp;T gateway device is assigned the /60 prefix delegation (PD) and it does not pass that /60 PD down to the passthrough connected device. The AT&amp;T gateway reserves eight (8) of the sixteen (16) /64 subnets within the /60 (64 - 60 = 4, so 2^4 = 16) for its own purposes. However, while certainly not as straight-forward as a true /56 PD granted to the OpenWrt <abbr title="Wide Area Network">WAN</abbr> interface, it is possible to still use the remaining eight (8) /64 subnets within your OpenWrt configuration and downstream client subnets.
</p>

<p>
In order to achieve the goal of requesting the additional /64 subnets from the PD, a separate /64 PD request must be sent to the AT&amp;T gateway device, with a unique MAC address, for each /64 you wish to obtain. To meet this objective with odhcp6c, you need to create additional devices and interfaces stemming from the OpenWrt <abbr title="Wide Area Network">WAN</abbr> interface. This requires <strong>kmod-macvlan</strong>:
</p>
<pre class="code">opkg update &amp;&amp; opkg install kmod-macvlan</pre>

<p>
With kmod-macvlan installed, in your /etc/config/network file create a &#039;macvlan&#039; type device for each /64 subnet you wish to pull from the AT&amp;T gateway. In this example, we will pull and use three /64 subnets, each for a separate client <abbr title="Virtual Local Area Network">VLAN</abbr>/subnet that OpenWrt handles:
</p>

<p>
<em>Note: The &#039;macaddr&#039; values in this example are arbitrary and can be set to any MAC address you choose. The key is to ensure each is unique within your entire OpenWrt device.</em>
</p>
<pre class="code">config device &#039;vwan1&#039;
	option name &#039;vwan1&#039;
	option type &#039;macvlan&#039;
	option ifname &#039;eth0&#039;
	option macaddr &#039;70:e7:cf:ae:f2:00&#039;

config device &#039;vwan2&#039;
	option name &#039;vwan2&#039;
	option type &#039;macvlan&#039;
	option ifname &#039;eth0&#039;
	option macaddr &#039;70:e7:cf:ae:f2:01&#039;

config device &#039;vwan3&#039;
	option name &#039;vwan3&#039;
	option type &#039;macvlan&#039;
	option ifname &#039;eth0&#039;
	option macaddr &#039;70:e7:cf:ae:f2:02&#039;</pre>

<p>
The next step is to create a corresponding interface for each of the newly added devices. Again, in this example we are creating three where one is for &#039;<abbr title="Local Area Network">LAN</abbr>&#039;, one is for &#039;GUEST&#039;, and the third is for &#039;IOT&#039;:
</p>
<pre class="code">config interface &#039;WAN6LAN&#039;
	option proto &#039;dhcpv6&#039;
	option peerdns &#039;0&#039;
	option device &#039;vwan1&#039;
	option reqprefix &#039;64&#039;
	option reqaddress &#039;none&#039;

config interface &#039;WAN6GUEST&#039;
	option proto &#039;dhcpv6&#039;
	option device &#039;vwan2&#039;
	option reqprefix &#039;64&#039;
	option peerdns &#039;0&#039;
	option reqaddress &#039;none&#039;

config interface &#039;WAN6IOT&#039;
	option proto &#039;dhcpv6&#039;
	option device &#039;vwan3&#039;
	option reqaddress &#039;none&#039;
	option reqprefix &#039;64&#039;
	option peerdns &#039;0&#039;</pre>

<p>
Finally, each of the client subnet interfaces needs to be set to hand out <abbr title="Internet Protocol version 6">IPv6</abbr> addresses from its corresponding WAN6* <abbr title="Internet Protocol version 6">IPv6</abbr> pool. This is achieved by using the <em>list ip6class</em> setting and <em>option ip6assign</em> option for a client facing interface in /etc/config/network:
</p>
<pre class="code">config interface &#039;LAN&#039;
	option proto &#039;static&#039;
	option netmask &#039;255.255.255.0&#039;
	option ipaddr &#039;192.168.1.1&#039;
	option device &#039;eth1&#039;
	list ip6class &#039;WAN6LAN&#039;
	option ip6assign &#039;64&#039;

config interface &#039;GUEST&#039;
	option proto &#039;static&#039;
	option netmask &#039;255.255.255.0&#039;
	option ipaddr &#039;192.168.9.1&#039;
	option device &#039;eth1.9&#039;
	list ip6class &#039;WAN6GUEST&#039;
        option ip6assign &#039;64&#039;

config interface &#039;IOT&#039;
	option proto &#039;static&#039;
	option netmask &#039;255.255.255.0&#039;
	option ipaddr &#039;192.168.99.1&#039;
	option device &#039;eth1.99&#039;
	list ip6class &#039;WAN6IOT&#039;
        option ip6assign &#039;64&#039;</pre>

<p>
Bonus step: Because you no longer will be assigning addresses based on your <abbr title="Wide Area Network">WAN</abbr> interface&#039;s PD, you can disable the request to pull a PD on your <abbr title="Wide Area Network">WAN</abbr> interface by adding this to your /etc/config/network file (on your <abbr title="Wide Area Network">WAN</abbr> interface):
</p>
<pre class="code">option reqprefix &#039;no&#039;</pre>

<p>
Your <abbr title="Wide Area Network">WAN</abbr> interface will still request a usable <abbr title="Internet Protocol version 6">IPv6</abbr> (SLAAC) address from the AT&amp;T gateway for OpenWrt purposes.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;AT&amp;T&quot;,&quot;hid&quot;:&quot;at_t&quot;,&quot;codeblockOffset&quot;:103,&quot;secid&quot;:90,&quot;range&quot;:&quot;99551-104748&quot;} -->
<h2 class="sectionedit91" id="general_xdsl_configuration_step_by_step">General xDSL configuration (step by step)</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> Connect to box:<pre class="code">ssh root@192.168.1.1</pre>
</div>
</li>
<li class="level1"><div class="li"> (optional) Patch DSL Firmware to appropriate Annex (not at all boxes):<pre class="code">cd /lib/firmware/
ls
bspatch lantiq-vrx200-a.bin firmware-b.bin lantiq-vrx200-a-to-b.bspatch</pre>

<p>
Note that since <a href="https://github.com/openwrt/openwrt/commit/a937e160c8f7d8ac11f615c1d0cd5eea1c049247" class="urlextern" title="https://github.com/openwrt/openwrt/commit/a937e160c8f7d8ac11f615c1d0cd5eea1c049247" rel="ugc nofollow">March 2016</a>, <strong>manually</strong> patching the “annex a” firmware is <strong>not</strong> necessary. Simply include:
</p>
<pre class="code">config dsl &#039;dsl&#039;
  option annex &#039;b&#039;</pre>

<p>
in /etc/config/network, and the “annex a” firmware will be <a href="https://github.com/openwrt/openwrt/blob/master/package/network/config/ltq-vdsl-app/files/dsl_control#L254" class="urlextern" title="https://github.com/openwrt/openwrt/blob/master/package/network/config/ltq-vdsl-app/files/dsl_control#L254" rel="ugc nofollow">&quot;automagically&quot; patched</a> when the wan interface is created.
</p>
</div>
</li>
<li class="level1"><div class="li"> set Annex:<pre class="code">vi /etc/config/network

config dsl &#039;dsl&#039;
	option annex &#039;j&#039;	# try &#039;b&#039; or &#039;j&#039; in Germany/Austria
	option firmware &#039;..&#039;	# (optional) set to &#039;/lib/firmware/firmware-b.bin&#039;</pre>

<p>
vi press: [d] → delete line; [i] → insert mode; [ESC] → [:] → [w][q] → [return] → write and quit
</p>
</div>
</li>
<li class="level1"><div class="li"> Connect DSL	→ f.e. Germany: TAE middle port to box DSL port (cable both middle pins populated)</div>
</li>
<li class="level1"><div class="li"> Restart DSL-modem:<pre class="code">/etc/init.d/dsl_control restart</pre>

<p>
O²Box6431: did not need box reboot / SpeedportW504VTypeA: had to reboot box for DSL connection
</p>
</div>
</li>
<li class="level1"><div class="li"> Check if firmware is loaded (if Annex is already set right there will be more values), repeat a few times:<pre class="code">(O²Box6431)
root@OpenWrt:~# /etc/init.d/dsl_control status

ATU-C Vendor ID:                          
ATU-C System Vendor ID:                   
Chipset:                                  Lantiq-VRX200
Firmware Version:                         5.7.9.9.0.6
API Version:                              4.17.18.6
XTSE Capabilities:                        , , , , , , , 
Annex:                                    
Line Mode:                                
Profile:                                  
Line State:                               DOWN [0x200: silent]</pre>
</div>
</li>
<li class="level1"><div class="li"> Check connection attempts - repeat a few times:<pre class="code">/etc/init.d/dsl_control status

Line State:

DOWN [0x100: idle]
DOWN [0x200: silent]

[..]
DOWN [0x300: handshake]

[..]
DOWN [0xff: idle request]

[..]
DOWN [0x300: handshake]

[..till]
UP [0x801: showtime_tc_sync]</pre>

<p>
Try an other Annex if it loops between idle and handshake → f.e. O²Box6431: AnnexA not working due AnnexB/J in Germany → Patch DSL Firmware to appropriate Annex
</p>
</div>
</li>
<li class="level1"><div class="li"> Working DSL connection (SpeedportW504VTypeA, O² DSL):<pre class="code">/etc/init.d/dsl_control status	

ATU-C Vendor ID:                          Broadcom 178.17
ATU-C System Vendor ID:                   0F,00,4E,4F,4B,42,00,00
Chipset:                                  Ifx-Danube
Firmware Version:                         2.4.1.7.0.2
API Version:                              3.24.4.4
XTSE Capabilities:                        0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0
Annex:                                    J
Line Mode:                                G.992.5 (ADSL2+)
Profile:                                  
Line State:                               UP [0x801: showtime_tc_sync]
Forward Error Correction Seconds (FECS):  Near: 0 / Far: 1
Errored seconds (ES):                     Near: 0 / Far: 2
Severely Errored Seconds (SES):           Near: 0 / Far: 0
Loss of Signal Seconds (LOSS):            Near: 0 / Far: 0
Unavailable Seconds (UAS):                Near: 60 / Far: 60
Header Error Code Errors (HEC):           Near: 0 / Far: 81
Non Pre-emtive CRC errors (CRC_P):        Near:  / Far: 
Pre-emtive CRC errors (CRCP_P):           Near:  / Far: 
Power Management Mode:                    L0 - Synchronized
Latency [Interleave Delay]:               8.0 ms [Interleave]   7.50 ms [Interleave]
Data Rate:                                Down: 19.926 Mb/s / Up: 1.901 Mb/s
Line Attenuation (LATN):                  Down: 15.2 dB / Up: 24.2 dB
Signal Attenuation (SATN):                Down: 13.8 dB / Up: 9.8 dB
Noise Margin (SNR):                       Down: 6.1 dB / Up: 24.2 dB
Aggregate Transmit Power (ACTATP):        Down: 18.2 dB / Up: 12.8 dB
Max. Attainable Data Rate (ATTNDR):       Down: 19.956 Mb/s / Up: 1.901 Mb/s
Line Uptime Seconds:                      418
Line Uptime:                              6m 58s</pre>
</div>
</li>
<li class="level1"><div class="li"> Set specific <abbr title="Internet Service Provider">ISP</abbr> Configuration → <img src="/lib/images/smileys/exclaim.svg" class="icon smiley" alt=":!:" /> <abbr title="Virtual Local Area Network">VLAN</abbr> for working <abbr title="Wide Area Network">WAN</abbr>/Uplink</div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;General xDSL configuration (step by step)&quot;,&quot;hid&quot;:&quot;general_xdsl_configuration_step_by_step&quot;,&quot;codeblockOffset&quot;:108,&quot;secid&quot;:91,&quot;range&quot;:&quot;104749-&quot;} -->