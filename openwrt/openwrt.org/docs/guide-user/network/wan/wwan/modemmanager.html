
<h1 class="sectionedit1" id="modemmanager">ModemManager</h1>
<div class="level1">

<p>
ModemManager is a service that automatically sets up and connects 2G/3G/4G/5G modems and provides a high level of abstraction when interacting with modems.
</p>

<p>
A few examples of functionality offered by ModemManager are:
</p>
<ul>
<li class="level1"><div class="li"> initialisation of the modem</div>
</li>
<li class="level1"><div class="li"> connecting to the Internet</div>
</li>
<li class="level1"><div class="li"> sending/receiving SMS</div>
</li>
<li class="level1"><div class="li"> firmware upgrades for select QMI-based modems.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;ModemManager&quot;,&quot;hid&quot;:&quot;modemmanager&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-388&quot;} -->
<h2 class="sectionedit2" id="installing">Installing</h2>
<div class="level2">

<p>
In <code>menuconfig</code>, ModemManager is located under the Network section.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Installing&quot;,&quot;hid&quot;:&quot;installing&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;389-483&quot;} -->
<h2 class="sectionedit3" id="kernel_modules">Kernel modules</h2>
<div class="level2">

<p>
You probably need to include the kernel module for your modem in your firmware image, or on running firmware via <a href="/docs/guide-user/additional-software/opkg" class="wikilink1" title="docs:guide-user:additional-software:opkg" data-wiki-id="docs:guide-user:additional-software:opkg">opkg</a>.
</p>

<p>
Common ones which should get most modems working to some extent are: 
</p>
<pre class="code">opkg update &amp;&amp; opkg install kmod-usb-serial kmod-usb-net kmod-usb-serial-wwan kmod-usb-serial-option kmod-usb-net-qmi-wwan kmod-usb-net-cdc-mbim</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Kernel modules&quot;,&quot;hid&quot;:&quot;kernel_modules&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;484-899&quot;} -->
<h2 class="sectionedit4" id="mbim_support">MBIM Support</h2>
<div class="level2">

<p>
ModemManager supports MBIM modems.  You can include MBIM support by selecting it under the Configuration section in ModemManager&#039;s <code>menuconfig</code> entry.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;MBIM Support&quot;,&quot;hid&quot;:&quot;mbim_support&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:4,&quot;range&quot;:&quot;900-1079&quot;} -->
<h2 class="sectionedit5" id="qmi_support">QMI Support</h2>
<div class="level2">

<p>
ModemManager supports QMI modems.  You can include QMI support by selecting it under the Configuration section in ModemManager&#039;s <code>menuconfig</code> entry.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;QMI Support&quot;,&quot;hid&quot;:&quot;qmi_support&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:5,&quot;range&quot;:&quot;1080-1256&quot;} -->
<h2 class="sectionedit6" id="use">Use</h2>
<div class="level2">

<p>
ModemManager abstracts the configuration of your modems into standard Linux network interfaces.  The example below illustrates a typical configuration:
</p>

<p>
<strong>/etc/config/network</strong>
</p>
<pre class="code">config interface &#039;broadband&#039;
    option device   &#039;/sys/devices/platform/soc/20980000.usb/usb1/1-1/1-1.2/1-1.2.1&#039;
    option proto    &#039;modemmanager&#039;
    option apn      &#039;ac.vodafone.es&#039;
    option username &#039;vodafone&#039;
    option password &#039;vodafone&#039;
    option pincode  &#039;7423&#039;
    option lowpower &#039;1&#039; </pre>

<p>
The available options are
</p>
<div class="table sectionedit7"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> option</th><th class="col1">type</th><th class="col2">required</th><th class="col3">description</th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0">device</td><td class="col1">string</td><td class="col2">X</td><td class="col3">Full sysfs path of the device, for example <code>/sys/devices/platform/soc/20980000.usb/usb1/1-1/1-1.2/1-1.2.1</code>. Do not use <code>/dev/cdc-wdm0</code>. </td>
	</tr>
	<tr class="row2">
		<td class="col0">apn</td><td class="col1">string</td><td class="col2">X</td><td class="col3">The GPRS Access Point Name specifying the APN used when establishing a data session with the GSM-based network</td>
	</tr>
	<tr class="row3">
		<td class="col0">allowedauth</td><td class="col1">list(string)</td><td class="col2"> </td><td class="col3">Authentication method to use. A list of <code>none, pap, chap, mschap, mschapv2, eap</code></td>
	</tr>
	<tr class="row4">
		<td class="col0">username</td><td class="col1">string</td><td class="col2"> </td><td class="col3">The username used to authenticate with the network, if required</td>
	</tr>
	<tr class="row5">
		<td class="col0">password</td><td class="col1">string</td><td class="col2"> </td><td class="col3">The password used to authenticate with the network, if required</td>
	</tr>
	<tr class="row6">
		<td class="col0">pincode</td><td class="col1">string</td><td class="col2"> </td><td class="col3">If the SIM is locked with a PIN it must be unlocked before any other operations are requested</td>
	</tr>
	<tr class="row7">
		<td class="col0">iptype</td><td class="col1">string</td><td class="col2">X</td><td class="col3"><code>ipv4v6</code> or <code>ipv4</code> or <code>ipv6</code></td>
	</tr>
	<tr class="row8">
		<td class="col0">signalrate</td><td class="col1">int</td><td class="col2"> </td><td class="col3">Signal refresh rate to <code>signalrate</code> second (see mmcli --signal-setup)</td>
	</tr>
	<tr class="row9">
		<td class="col0">lowpower</td><td class="col1">boolean</td><td class="col2"> </td><td class="col3">See mmcli --set-power-state-low</td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:7,&quot;range&quot;:&quot;1793-2703&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Use&quot;,&quot;hid&quot;:&quot;use&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:6,&quot;range&quot;:&quot;1257-2704&quot;} -->
<h2 class="sectionedit8" id="luci_support">Luci support</h2>
<div class="level2">

<p>
It is possible to install <code>luci-proto-modemmanager</code> to configure an interface with <code>ModemManager</code> protocol via Luci.
</p>

<p>
<a href="/_detail/media/luci_proto_modemmanager.png?id=docs%3Aguide-user%3Anetwork%3Awan%3Awwan%3Amodemmanager" class="media" title="media:luci_proto_modemmanager.png"><img src="/_media/media/luci_proto_modemmanager.png" class="media" loading="lazy" alt="" /></a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Luci support&quot;,&quot;hid&quot;:&quot;luci_support&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:8,&quot;range&quot;:&quot;2705-&quot;} -->