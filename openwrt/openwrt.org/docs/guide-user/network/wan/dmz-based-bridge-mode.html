
<h1 class="sectionedit1" id="poor_man_s_bridge_mode">Poor Man&#039;s Bridge Mode</h1>
<div class="level1">

</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_start&quot;,&quot;name&quot;:&quot;meta:infobox:howto_links&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:2,&quot;range&quot;:&quot;0-&quot;} --><div class="plugin_include_content plugin_include__meta:infobox:howto_links">
<div class="level1">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_important plugin_wrap">
<p>
This article may contain network configuration that depends on migration to DSA in OpenWrt 21.02
</p>
<ul>
<li class="level1"><div class="li"> Check if your device uses DSA or swconfig as not all devices have been migrated</div>
</li>
<li class="level1"><div class="li"> ifname@interface has been moved to device sections</div>
</li>
<li class="level1"><div class="li"> <a href="/docs/guide-user/network/dsa/start" class="wikilink1" title="docs:guide-user:network:dsa:start" data-wiki-id="docs:guide-user:network:dsa:start">DSA Networking</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://forum.openwrt.org/t/mini-tutorial-for-dsa-network-config/96998" class="urlextern" title="https://forum.openwrt.org/t/mini-tutorial-for-dsa-network-config/96998" rel="ugc nofollow">Mini tutorial for DSA network config</a> on the forum</div>
</li>
<li class="level1"><div class="li"> <a href="https://openwrt.org/releases/21.02/notes-21.02.0#new_network_configuration_syntax_and_boardjson_change" class="urlextern" title="https://openwrt.org/releases/21.02/notes-21.02.0#new_network_configuration_syntax_and_boardjson_change" rel="ugc nofollow">DSA in the 21.02 release notes</a></div>
</li>
</ul>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;0-&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;plugin_include_end&quot;,&quot;name&quot;:&quot;meta:infobox:howto_links&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:3,&quot;range&quot;:&quot;0-&quot;} --></div>
<div class="level1">

<p>
When you don&#039;t have hardware that can do true bridging due to various reasons (many 3G/4G and quite a few DSL or fibre lines don&#039;t allow this, especially if there is also VoiP telephone lines involved), you can still do a poor man&#039;s bridge mode to have most services that need to be on the Internet facing router to work.<br/>

Dynamic <abbr title="Domain Name System">DNS</abbr> services are (currently) an exception to this as the LEDE router will only know the internal <abbr title="Internet Protocol">IP</abbr> of the gateway, but not your true public <abbr title="Internet Protocol">IP</abbr> given by the <abbr title="Internet Service Provider">ISP</abbr>. There are command line tools (bind-dig but also others) in LEDE repository that can allow the LEDE router to get the public <abbr title="Internet Protocol">IP</abbr> given by the <abbr title="Internet Service Provider">ISP</abbr> (with the command dig +short myip.opendns.com @resolver1.opendns.com ), but for now the Dynamic <abbr title="Domain Name System">DNS</abbr> package isn&#039;t set to use them. 
</p>

<p>
You must configure and enable <abbr title="Demilitarized Zone">DMZ</abbr> feature on the gateway router. <abbr title="Demilitarized Zone">DMZ</abbr> stands for De-Militarized Zone, and means that all traffic that reaches the gateway will be allowed to reach the devices in the <abbr title="Demilitarized Zone">DMZ</abbr> without being blocked by <abbr title="Network Address Translation">NAT</abbr>. This is a safe thing to do ONLY if the devices in the <abbr title="Demilitarized Zone">DMZ</abbr> are router/firewalls/servers connected through <abbr title="Wide Area Network">WAN</abbr> (or equivalent) ports/interfaces so they are configured to deal with it.<br/>

In the following tutorial, the LEDE device will be called “router”, and the other device we are connecting it to will be called “gateway”.
I will also assume that you know how to use the LEDE interface (either from <abbr title="Secure Shell">SSH</abbr> or the web interface).
</p>
<ol>
<li class="level1"><div class="li"> find the gateway device&#039;s documentation (manual or online tutorials) to know how to do what will be discussed in the following points. Due to dramatic differences in how the web interfaces of devices of different brands are arranged, I can&#039;t say where exactly this feature has been placed in yours.<br/>
<br/>
</div>
</li>
<li class="level1 node"><div class="li"> configure the gateway to be on a subnet that is not the same used in your <abbr title="Local Area Network">LAN</abbr> network</div>
<ul>
<li class="level2 node"><div class="li"> Example: the gateway&#039;s <abbr title="Local Area Network">LAN</abbr> settings will become</div>
<ul>
<li class="level3"><div class="li"> <abbr title="Internet Protocol">IP</abbr> 192.168.2.1 </div>
</li>
<li class="level3"><div class="li"> netmask 255.255.255.0 <br/>
<br/>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"> turn off WiFi function on your gateway (you can keep DDNS settings on the gateway)<br/>
<br/>
</div>
</li>
<li class="level1"><div class="li"> remove all existing port forwarding rules on the gateway. Any port forwarding should be set in the router, later.<br/>
<br/>
</div>
</li>
<li class="level1 node"><div class="li"> in the gateway&#039;s settings, enable <abbr title="Demilitarized Zone">DMZ</abbr> feature and put the Router <abbr title="Wide Area Network">WAN</abbr> <abbr title="Internet Protocol">IP</abbr> address into the <abbr title="Demilitarized Zone">DMZ</abbr> address list</div>
<ul>
<li class="level2"><div class="li"> In our example, the router <abbr title="Wide Area Network">WAN</abbr> <abbr title="Internet Protocol">IP</abbr> address is 192.168.2.2<br/>
<br/>
</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> configure the router <abbr title="Local Area Network">LAN</abbr></div>
<ul>
<li class="level2 node"><div class="li"> The router <abbr title="Local Area Network">LAN</abbr> interface should be </div>
<ul>
<li class="level3"><div class="li"> <abbr title="Internet Protocol">IP</abbr> 192.168.1.1 </div>
</li>
<li class="level3"><div class="li"> netmask 255.255.255.0<br/>
<br/>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> the <abbr title="Wide Area Network">WAN</abbr> port of your router should be set as a static <abbr title="Internet Protocol">IP</abbr> in the same subnet of the gateway</div>
<ul>
<li class="level2 node"><div class="li"> Example: the router&#039;s <abbr title="Wide Area Network">WAN</abbr> interface </div>
<ul>
<li class="level3"><div class="li"> <abbr title="Internet Protocol">IP</abbr> 192.168.2.2 </div>
</li>
<li class="level3"><div class="li"> netmask 255.255.255.0</div>
</li>
<li class="level3"><div class="li"> <abbr title="Domain Name System">DNS</abbr> server <abbr title="Internet Protocol">IP</abbr> 8.8.8.8 (or your favourite <abbr title="Domain Name System">DNS</abbr> server <abbr title="Internet Protocol">IP</abbr>)</div>
</li>
<li class="level3"><div class="li"> gateway <abbr title="Internet Protocol">IP</abbr> 192.168.2.1<br/>
<br/>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"> set any port forwarding you need on the router device<br/>
<br/>
</div>
</li>
<li class="level1"><div class="li"> connect an ethernet cable from one of the <abbr title="Local Area Network">LAN</abbr> ports on the gateway to the <abbr title="Wide Area Network">WAN</abbr> port of your router<br/>
<br/>
</div>
</li>
<li class="level1"><div class="li"> reboot both devices<br/>
<br/>
</div>
</li>
</ol>

<p>
This tutorial above follows the steps defined by Steven Frosty in <a href="http://forum.vividwireless.com.au/forum/faqs-lte/faq-lte-bridge-mode-supported" class="urlextern" title="http://forum.vividwireless.com.au/forum/faqs-lte/faq-lte-bridge-mode-supported" rel="ugc nofollow">FAQ -- LTE -- is Bridge Mode supported</a>
</p>

<p>
Firewall bridge mode support in OpenWrt is provided by the <a href="/packages/pkgdata/kmod-br-netfilter" class="wikilink1" title="packages:pkgdata:kmod-br-netfilter" data-wiki-id="packages:pkgdata:kmod-br-netfilter">kmod-br-netfilter</a> module.
</p>

<p>
The following is an example UCI configuration in a LEDE device configured as detailed above.
</p>
<pre class="code">root@LEDE:~# uci show network
network.loopback=interface
network.loopback.ifname=&#039;lo&#039;
network.loopback.proto=&#039;static&#039;
network.loopback.ipaddr=&#039;127.0.0.1&#039;
network.loopback.netmask=&#039;255.0.0.0&#039;
network.globals=globals
network.globals.ula_prefix=&#039;fdee:11e6:2c49::/48&#039;
network.lan=interface
network.lan.type=&#039;bridge&#039;
network.lan.ifname=&#039;eth0.1&#039;
network.lan.proto=&#039;static&#039;
network.lan.netmask=&#039;255.255.255.0&#039;
network.lan.ip6assign=&#039;60&#039;
network.lan.ipaddr=&#039;192.168.1.1&#039;
network.wan=interface
network.wan.ifname=&#039;eth0.2&#039;
network.wan._orig_ifname=&#039;eth0.2&#039;
network.wan._orig_bridge=&#039;false&#039;
network.wan.proto=&#039;static&#039;
network.wan.ipaddr=&#039;192.168.2.2&#039;
network.wan.netmask=&#039;255.255.255.0&#039;
network.wan.gateway=&#039;192.168.2.1&#039;
network.wan.dns=&#039;8.8.8.8&#039;
network.wan6=interface
network.wan6.ifname=&#039;eth0.2&#039;
network.wan6.proto=&#039;dhcpv6&#039;</pre>

</div>
