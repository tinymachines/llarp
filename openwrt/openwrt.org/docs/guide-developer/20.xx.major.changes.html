
<h1 class="sectionedit1" id="major_cosmetic_changes">21.02: Major cosmetic changes</h1>
<div class="level1">

<p>
This page intends to give an overview over major cosmetic changes since 19.07, focusing on those that will require adjustments/adaption downstream.
</p>

<p>
The idea is to give a broad overview like a Table of Contents, without too much details on the specific issues.
</p>

<p>
Note that this page is not even close to being complete.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;21.02: Major cosmetic changes&quot;,&quot;hid&quot;:&quot;major_cosmetic_changes&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-365&quot;} -->
<h2 class="sectionedit2" id="devicetarget_renames">Device/target renames</h2>
<div class="level2">

<p>
Recently, most obvious through the transition from ar71xx to ath79, we tried to make device/image names more systematic by applying a vendor_model-variant scheme.
</p>

<p>
This has already been used in 19.07 in some cases (ath79, ipq40xx, ipq806x, mpc85xx, new ramips devices, ...).
</p>

<p>
After 19.07 had been released, the attempt was made to apply this more widely, and use the momentum to also achieve a more unified and systematic naming scheme for the different locations where the “device name” is used in its variations:
</p>
<ul>
<li class="level1"><div class="li"> device name in image/Makefile (will be used for image name)</div>
</li>
<li class="level1"><div class="li"> DEVICE_TITLE in image/Makefile</div>
</li>
<li class="level1"><div class="li"> DTS file name (soc_vendor_model or soc-vendor-model)</div>
</li>
<li class="level1"><div class="li"> DTS model name</div>
</li>
<li class="level1"><div class="li"> DTS compatible</div>
</li>
<li class="level1"><div class="li"> board_name (which should be derived from compatible instead of setting board names manually)</div>
</li>
<li class="level1"><div class="li"> SUPPORTED_DEVICES</div>
</li>
</ul>

<p>
The following subchapters will provide details on which changes have been applied to which targets so far.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Device\/target renames&quot;,&quot;hid&quot;:&quot;devicetarget_renames&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;366-1337&quot;} -->
<h3 class="sectionedit3" id="arc770">arc770</h3>
<div class="level3">

<p>
Manual board names (/tmp/sysinfo/board_name) have been replaced by compatible (vendor,model-variant)
</p>

<p>
So, all local scripts using the board name need to be updated.
</p>

<p>
<a href="https://github.com/openwrt/openwrt/commit/0a5d74fa68bce598302236ca0f3eb2db2bc1592d" class="urlextern" title="https://github.com/openwrt/openwrt/commit/0a5d74fa68bce598302236ca0f3eb2db2bc1592d" rel="ugc nofollow">https://github.com/openwrt/openwrt/commit/0a5d74fa68bce598302236ca0f3eb2db2bc1592d</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;arc770&quot;,&quot;hid&quot;:&quot;arc770&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;1338-1606&quot;} -->
<h3 class="sectionedit4" id="archs38">archs38</h3>
<div class="level3">

<p>
Manual board names (/tmp/sysinfo/board_name) have been replaced by compatible (vendor,model-variant)
</p>

<p>
So, all local scripts using the board name need to be updated.
</p>

<p>
<a href="https://github.com/openwrt/openwrt/commit/3c190ef112979793cd0e2148c53c6208a642a463" class="urlextern" title="https://github.com/openwrt/openwrt/commit/3c190ef112979793cd0e2148c53c6208a642a463" rel="ugc nofollow">https://github.com/openwrt/openwrt/commit/3c190ef112979793cd0e2148c53c6208a642a463</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;archs38&quot;,&quot;hid&quot;:&quot;archs38&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;1607-1876&quot;} -->
<h3 class="sectionedit5" id="ath79ar71xx">ath79/ar71xx</h3>
<div class="level3">

<p>
In 21.02, ar71xx will finally be dropped. As already relevant in 19.07, ath79 introduces vendor_model-variant scheme for image names. It also drops the board_names used in ar71xx, so the compatible (from DTS) will be used as board name instead (being equivalent to vendor,model-variant, and unique for a specific device).
While creating the new and shiny target, we again took the opportunity to use more systematic names on devices, using less abbreviations and staying closer to the device name. This will it result in several changed names compared to ar71xx additional to just adding the vendor to the name.
</p>

<p>
For downstream, (at least) the following will require adjustment:
</p>
<ul>
<li class="level1"><div class="li"> CONFIG_TARGET_DEVICE_* variables</div>
</li>
<li class="level1"><div class="li"> image names (e.g. if copied)</div>
</li>
<li class="level1"><div class="li"> board names (/tmp/sysinfo/board_name) if used for anything on device</div>
</li>
</ul>

<p>
Note that ath79 might also include several changes after 19.07.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;ath79\/ar71xx&quot;,&quot;hid&quot;:&quot;ath79ar71xx&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;1877-2788&quot;} -->
<h3 class="sectionedit6" id="bcm27xxbrcm2708">bcm27xx/brcm2708</h3>
<div class="level3">

<p>
The whole target has been renamed from “brcm2708” to “bcm27xx”. This will affect all cases where target variables are used, i.e. CONFIG_TARGET_* or TARGET_* dependencies. Despite, image names will change.
The same rename applies to packages brcm2708-userland and brcm2708-gpu-fw.
</p>

<p>
This can be easily addressed downstream by just grepping for “brcm2708”.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;bcm27xx\/brcm2708&quot;,&quot;hid&quot;:&quot;bcm27xxbrcm2708&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;2789-3171&quot;} -->
<h3 class="sectionedit7" id="bcm47xxbrcm47xx">bcm47xx/brcm47xx</h3>
<div class="level3">

<p>
The whole target has been renamed from “brcm47xx” to “bcm47xx”. This will affect all cases where target variables are used, i.e. CONFIG_TARGET_* or TARGET_* dependencies. Despite, image names will change.
</p>

<p>
This can be easily addressed downstream by just grepping for “brcm47xx”.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;bcm47xx\/brcm47xx&quot;,&quot;hid&quot;:&quot;bcm47xxbrcm47xx&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;3172-3479&quot;} -->
<h3 class="sectionedit8" id="bcm63xxbrcm63xx">bcm63xx/brcm63xx</h3>
<div class="level3">

<p>
The whole target has been renamed from “brcm63xx” to “bcm63xx”. This will affect all cases where target variables are used, i.e. CONFIG_TARGET_* or TARGET_* dependencies. Despite, image names will change.
</p>

<p>
This can be easily addressed downstream by just grepping for “brcm63xx”.
</p>

<p>
Despite, this target has also been subject to an ath79-like unification of device names:
</p>
<ul>
<li class="level1"><div class="li"> device/image names and compatible have been adjusted to match device names (using vendor_model-variant scheme)</div>
</li>
<li class="level1"><div class="li"> DTS files have been renamed with soc-vendor-model scheme</div>
</li>
<li class="level1"><div class="li"> manual board names (/tmp/sysinfo/board_name) have been replaced by compatible (vendor,model-variant)</div>
</li>
</ul>

<p>
Patches:
</p>
<ul>
<li class="level1"><div class="li"> <a href="https://github.com/openwrt/openwrt/commit/e4ba8c82947efd39b014496de32ee73e1bec9c71" class="urlextern" title="https://github.com/openwrt/openwrt/commit/e4ba8c82947efd39b014496de32ee73e1bec9c71" rel="ugc nofollow">https://github.com/openwrt/openwrt/commit/e4ba8c82947efd39b014496de32ee73e1bec9c71</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://github.com/openwrt/openwrt/commit/0a3350d908ec466206f58b9e6b300c49e4fb3b13" class="urlextern" title="https://github.com/openwrt/openwrt/commit/0a3350d908ec466206f58b9e6b300c49e4fb3b13" rel="ugc nofollow">https://github.com/openwrt/openwrt/commit/0a3350d908ec466206f58b9e6b300c49e4fb3b13</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://github.com/openwrt/openwrt/commit/d0e8e6db6b22b893da2f3a2cbe84adb753cb3303" class="urlextern" title="https://github.com/openwrt/openwrt/commit/d0e8e6db6b22b893da2f3a2cbe84adb753cb3303" rel="ugc nofollow">https://github.com/openwrt/openwrt/commit/d0e8e6db6b22b893da2f3a2cbe84adb753cb3303</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;bcm63xx\/brcm63xx&quot;,&quot;hid&quot;:&quot;bcm63xxbrcm63xx&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:8,&quot;range&quot;:&quot;3480-4431&quot;} -->
<h3 class="sectionedit9" id="imx6">imx6</h3>
<div class="level3">

<p>
Manual board names (/tmp/sysinfo/board_name) have been replaced by compatible (vendor,model-variant)
</p>

<p>
So, all local scripts using the board name need to be updated.
</p>

<p>
<a href="https://github.com/openwrt/openwrt/commit/8126e572dd4f531c5f105b7197bc119b2b1ebb07" class="urlextern" title="https://github.com/openwrt/openwrt/commit/8126e572dd4f531c5f105b7197bc119b2b1ebb07" rel="ugc nofollow">https://github.com/openwrt/openwrt/commit/8126e572dd4f531c5f105b7197bc119b2b1ebb07</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;imx6&quot;,&quot;hid&quot;:&quot;imx6&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:9,&quot;range&quot;:&quot;4432-4698&quot;} -->
<h3 class="sectionedit10" id="layerscape">layerscape</h3>
<div class="level3">

<p>
Device nodes and thus image names have been changed to apply to vendor_model scheme.
</p>

<p>
This will affect CONFIG_TARGET_DEVICE_* variables and image names.
</p>

<p>
<a href="https://github.com/openwrt/openwrt/commit/0f3c3a5fb2738b25c62eb0ff8ef7d0654c0b9300" class="urlextern" title="https://github.com/openwrt/openwrt/commit/0f3c3a5fb2738b25c62eb0ff8ef7d0654c0b9300" rel="ugc nofollow">https://github.com/openwrt/openwrt/commit/0f3c3a5fb2738b25c62eb0ff8ef7d0654c0b9300</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;layerscape&quot;,&quot;hid&quot;:&quot;layerscape&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:10,&quot;range&quot;:&quot;4699-4959&quot;} -->
<h3 class="sectionedit11" id="mediatek">mediatek</h3>
<div class="level3">

<p>
Device nodes and thus image names have been changed to apply to vendor_model scheme.
</p>

<p>
This will affect CONFIG_TARGET_DEVICE_* variables and image names.
</p>

<p>
<a href="https://github.com/openwrt/openwrt/commit/49d66e0468c14d8a05bd6c33056708d2051437cb" class="urlextern" title="https://github.com/openwrt/openwrt/commit/49d66e0468c14d8a05bd6c33056708d2051437cb" rel="ugc nofollow">https://github.com/openwrt/openwrt/commit/49d66e0468c14d8a05bd6c33056708d2051437cb</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;mediatek&quot;,&quot;hid&quot;:&quot;mediatek&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:11,&quot;range&quot;:&quot;4960-5216&quot;} -->
<h3 class="sectionedit12" id="mpc85xx">mpc85xx</h3>
<div class="level3">

<p>
Device nodes and thus image names have been changed to apply to vendor_model scheme.
</p>

<p>
This will affect CONFIG_TARGET_DEVICE_* variables and image names.
</p>

<p>
<a href="https://github.com/openwrt/openwrt/commit/118749271b311413307f0b6be91786d7ac368f8b" class="urlextern" title="https://github.com/openwrt/openwrt/commit/118749271b311413307f0b6be91786d7ac368f8b" rel="ugc nofollow">https://github.com/openwrt/openwrt/commit/118749271b311413307f0b6be91786d7ac368f8b</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;mpc85xx&quot;,&quot;hid&quot;:&quot;mpc85xx&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:12,&quot;range&quot;:&quot;5217-5473&quot;} -->
<h3 class="sectionedit13" id="octeon">octeon</h3>
<div class="level3">

<p>
Device nodes and thus image names have been changed to apply to vendor_model scheme.
</p>

<p>
This will affect CONFIG_TARGET_DEVICE_* variables and image names.
</p>

<p>
<a href="https://github.com/openwrt/openwrt/commit/1e3bfbafd37ccb32d0ed6618f4886e1dec6643d2" class="urlextern" title="https://github.com/openwrt/openwrt/commit/1e3bfbafd37ccb32d0ed6618f4886e1dec6643d2" rel="ugc nofollow">https://github.com/openwrt/openwrt/commit/1e3bfbafd37ccb32d0ed6618f4886e1dec6643d2</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;octeon&quot;,&quot;hid&quot;:&quot;octeon&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:13,&quot;range&quot;:&quot;5474-5729&quot;} -->
<h3 class="sectionedit14" id="ramips">ramips</h3>
<div class="level3">

<p>
In ramips, the situation in 19.07 can be described as a mix of ar71xx and ath79. After 19.07, the target was updated and the same naming logic as for ath79 was applied. Thus, for this target effectively the same comments as for ath79/ar71xx apply.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;ramips&quot;,&quot;hid&quot;:&quot;ramips&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:14,&quot;range&quot;:&quot;5730-5996&quot;} -->
<h3 class="sectionedit15" id="samsung">samsung</h3>
<div class="level3">

<p>
Device nodes and thus image names have been changed to apply to vendor_model scheme.
</p>

<p>
This will affect CONFIG_TARGET_DEVICE_* variables and image names.
</p>

<p>
<a href="https://github.com/openwrt/openwrt/commit/6e70e4a071b233da83486414e65d15756ede63d2" class="urlextern" title="https://github.com/openwrt/openwrt/commit/6e70e4a071b233da83486414e65d15756ede63d2" rel="ugc nofollow">https://github.com/openwrt/openwrt/commit/6e70e4a071b233da83486414e65d15756ede63d2</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;samsung&quot;,&quot;hid&quot;:&quot;samsung&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:15,&quot;range&quot;:&quot;5997-6253&quot;} -->
<h3 class="sectionedit16" id="sunxi">sunxi</h3>
<div class="level3">

<p>
Device nodes and thus image names have been changed to apply to vendor_model scheme.
</p>

<p>
This will affect CONFIG_TARGET_DEVICE_* variables and image names.
</p>

<p>
<a href="https://github.com/openwrt/openwrt/commit/a4cdb537b17ede9785ddbaef5ed9d69f3ab89052" class="urlextern" title="https://github.com/openwrt/openwrt/commit/a4cdb537b17ede9785ddbaef5ed9d69f3ab89052" rel="ugc nofollow">https://github.com/openwrt/openwrt/commit/a4cdb537b17ede9785ddbaef5ed9d69f3ab89052</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;sunxi&quot;,&quot;hid&quot;:&quot;sunxi&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:16,&quot;range&quot;:&quot;6254-6509&quot;} -->
<h2 class="sectionedit17" id="device_title_split_and_tidy-up">DEVICE_TITLE split and tidy-up</h2>
<div class="level2">

<p>
To make device names more systematic, the DEVICE_TITLE make variable (primarily used for display in make menuconfig) was split into DEVICE_VENDOR, DEVICE_MODEL and DEVICE_VARIANT <em>for all targets.</em>
DEVICE_TITLE is still available as (simplified)
</p>
<pre class="code">DEVICE_TITLE := $(DEVICE_VENDOR) $(DEVICE_MODEL) $(DEVICE_VARIANT)</pre>

<p>
During this update process, we took the opportunity to make names more systematic. Thus, several DEVICE_TITLEs will have changed effectively.
</p>

<p>
Despite, a new syntax to specify alternate device names has been introduced (ALT0 to ALT3):
</p>
<pre class="code">DEVICE_ALT0_VENDOR
DEVICE_ALT0_MODEL
DEVICE_ALT0_VARIANT</pre>

<p>
As for DEVICE_TITLE, those will not affect image names.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;DEVICE_TITLE split and tidy-up&quot;,&quot;hid&quot;:&quot;device_title_split_and_tidy-up&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:17,&quot;range&quot;:&quot;6510-7248&quot;} -->
<h2 class="sectionedit18" id="label_mac_address">Label MAC address</h2>
<div class="level2">

<p>
Many devices supported by OpenWrt bear one or many MAC addresses on them, which allow to identify those devices in large network. This fact has been exploited by downstream communities, which implemented those addresses locally. OpenWrt has now added a mechanism to store and retrieve those addresses:
</p>

<p>
Developer reference: <a href="https://openwrt.org/docs/guide-developer/mac.address#label_mac_address" class="urlextern" title="https://openwrt.org/docs/guide-developer/mac.address#label_mac_address" rel="ugc nofollow">https://openwrt.org/docs/guide-developer/mac.address#label_mac_address</a>
</p>

<p>
Use:
</p>
<pre class="code">. /lib/functions/system.sh
label_mac_addr=$(get_mac_label)</pre>

<p>
The label MAC address has to be provided in OpenWrt on a per-device basis. While a lot of devices has already been covered, there also is still a lot of devices to take care of.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Label MAC address&quot;,&quot;hid&quot;:&quot;label_mac_address&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:18,&quot;range&quot;:&quot;7249-7934&quot;} -->
<h2 class="sectionedit19" id="support_of_ed25519_ssh_keys">Support of Ed25519 SSH keys</h2>
<div class="level2">

<p>
With the commit <a href="https://git.openwrt.org/d0f295837a03f7f52000ae6d395827bdde7996a4" class="interwiki iw_commit" title="https://git.openwrt.org/d0f295837a03f7f52000ae6d395827bdde7996a4">d0f295837a03f7f52000ae6d395827bdde7996a4</a> it is now possible to use Ed25519 <abbr title="Secure Shell">SSH</abbr> keys on regular (aka not tiny) devices. These keys are much shorter than RSA keys while being equally secure. For embedded devices this should speed up the login process as the keys are much faster processed.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Support of Ed25519 SSH keys&quot;,&quot;hid&quot;:&quot;support_of_ed25519_ssh_keys&quot;,&quot;codeblockOffset&quot;:3,&quot;secid&quot;:19,&quot;range&quot;:&quot;7935-&quot;} -->