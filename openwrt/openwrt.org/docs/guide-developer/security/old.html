
<h1 class="sectionedit1" id="security">Security</h1>
<div class="level1">

<p>
This page contains the old content from <a href="/docs/guide-developer/security" class="wikilink1" title="docs:guide-developer:security" data-wiki-id="docs:guide-developer:security">security</a>, please move content to the new page and do not edit this one any more.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Security&quot;,&quot;hid&quot;:&quot;security&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-180&quot;} -->
<h2 class="sectionedit2" id="security_advisories_vulnerability_reporting">Security Advisories &amp; Vulnerability Reporting</h2>
<div class="level2">

<p>
Security bugs seem to not be treated differently than other kinds of bugs, so one should probably follow the normal bug reporting procedures documented in the <a href="/bugs" class="wikilink1" title="bugs" data-wiki-id="bugs">bugs</a> wiki page. On the other hand, the mailing list thread <a href="https://lists.openwrt.org/pipermail/openwrt-devel/2015-March/032169.html" class="urlextern" title="https://lists.openwrt.org/pipermail/openwrt-devel/2015-March/032169.html" rel="ugc nofollow">[OpenWrt-Devel] Security Vulnerability Reporting and Database</a> indicated that security vulnerabilities be reported by sending an email to the public 
<a href="https://lists.openwrt.org/cgi-bin/mailman/listinfo/openwrt-devel" class="urlextern" title="https://lists.openwrt.org/cgi-bin/mailman/listinfo/openwrt-devel" rel="ugc nofollow">openwrt-devel</a> mailing list. Whichever way it is done, it is better to report a vulnerability than not report it.
</p>

<p>
Vulnerabilities in third-party components of OpenWrt, like the Linux kernel, OpenSSL, etc. should be reported directly to the third-party project first unless the vulnerability is somehow OpenWrt-specific (e.g. the vulnerability is in a OpenWrt patch to the third-party component).
</p>
<ul>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: Much of this information is useful for users as well as developers, so the non-developer-specific information should be moved to a more general page, with a link to that page here.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Security Advisories &amp; Vulnerability Reporting&quot;,&quot;hid&quot;:&quot;security_advisories_vulnerability_reporting&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;181-1347&quot;} -->
<h2 class="sectionedit3" id="threat_model">Threat Model</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: Adapt <a href="https://github.com/EFForg/OpenWireless/blob/master/security.txt" class="urlextern" title="https://github.com/EFForg/OpenWireless/blob/master/security.txt" rel="ugc nofollow">OpenWireless&#039;s threat model documentation</a> to OpenWrt.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Threat Model&quot;,&quot;hid&quot;:&quot;threat_model&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;1348-1513&quot;} -->
<h2 class="sectionedit4" id="security_updates">Security Updates</h2>
<div class="level2">

<p>
Most people set up their device once and then don&#039;t touch it, as long as it appears to be working. In particular, very few people make a habit of checking for updates.
</p>
<ul>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: How can updates be made automatic and enabled by default?</div>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: How can automatic updates be done in a non-disruptive way, as Google claims for OnHub?</div>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: OpenWrt supports many routers that come with stock firmware that supports automatic updates. Are any of them based on OpenWrt? Could OpenWrt base an automatic update mechanism on one?</div>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: How can we ensure that updates are failsafe and can be easily rolled back or aborted?</div>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: Does the squashfs+JFFS2 overlay system and the opkg package manager make sense with respect to automatic updates? In particular, if updates are done by writing to the JFFS2 filesystem then the system could easily run out of space over time as the JFFS2 diffs from the squashfs filesystem accumulate. Also, usually OpenWrt firmware is quite small, so it may not be worth trying to do partial system updates when full updates are probably good enough. But then, can we afford to store both the old and new versions of the firmware at the same time? Regardless of all of that, it still may be useful to separate updates of the bootloader and kernel from other updates, because the latter are likely to be more disruptive than the former.</div>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: Automatic updates rely on cryptographic signatures of the updates to ensure that the updates are from a trusted source; i.e. are not malicious. But, in a decentralized project like OpenWrt, there&#039;s no one person that can be trusted with the signing keys. And, also, there are so many different configurations of OpenWrt for various kinds of hardware and user preferences that it would be impossible for one person or organization to properly QA all the updates. Perhaps some kind of voting system for trustworthiness of updates; such a system would almost definitely depend on reproducible builds.</div>
</li>
</ul>

<p>
Background:
</p>
<ul>
<li class="level1"><div class="li"> <a href="/docs/guide-user/installation/generic.sysupgrade" class="wikilink1" title="docs:guide-user:installation:generic.sysupgrade" data-wiki-id="docs:guide-user:installation:generic.sysupgrade">generic.sysupgrade</a> discusses how updates work.</div>
</li>
<li class="level1"><div class="li"> Turris <abbr title="Operating System">OS</abbr> is based on top of OpenWrt and has automatic updates. See <a href="https://www.turris.cz/en/software" class="urlextern" title="https://www.turris.cz/en/software" rel="ugc nofollow">https://www.turris.cz/en/software</a> for the claim and see <a href="https://gitlab.labs.nic.cz/turris/updater" class="urlextern" title="https://gitlab.labs.nic.cz/turris/updater" rel="ugc nofollow">https://gitlab.labs.nic.cz/turris/updater</a> for the code.</div>
</li>
<li class="level1"><div class="li"> Google&#039;s “OnHub automatically updates with new features and the latest security upgrades, without interrupting your connection.” (OnHub is <a href="https://blog.exploitee.rs/2015/gaining-root-on-the-google-onhub/" class="urlextern" title="https://blog.exploitee.rs/2015/gaining-root-on-the-google-onhub/" rel="ugc nofollow">based on Chromium OS</a>, which in turn is <a href="https://www.zdnet.com/article/the-secret-origins-of-googles-chrome-os/" class="urlextern" title="https://www.zdnet.com/article/the-secret-origins-of-googles-chrome-os/" rel="ugc nofollow">based on Gentoo Linux&#039;s Portage System</a>). See <a href="https://www.chromium.org/chromium-os/chromiumos-design-docs/filesystem-autoupdate" class="urlextern" title="https://www.chromium.org/chromium-os/chromiumos-design-docs/filesystem-autoupdate" rel="ugc nofollow">https://www.chromium.org/chromium-os/chromiumos-design-docs/filesystem-autoupdate</a> and <a href="https://www.chromium.org/chromium-os/chromiumos-design-docs/filesystem-autoupdate-supplements" class="urlextern" title="https://www.chromium.org/chromium-os/chromiumos-design-docs/filesystem-autoupdate-supplements" rel="ugc nofollow">https://www.chromium.org/chromium-os/chromiumos-design-docs/filesystem-autoupdate-supplements</a>.</div>
</li>
<li class="level1"><div class="li"> FirefoxOS was based on Android and reuses Android&#039;s update mechanisms for the Linux stuff. However, it also had some features for less disruptive automatic updates of userspace parts that may be worth looking at. </div>
</li>
<li class="level1"><div class="li"> Android itself has a well-studied update mechanism, though it isn&#039;t automatic.</div>
</li>
<li class="level1"><div class="li"> Freifunk&#039;s remote-update tool is in the <a href="https://github.com/openwrt/luci/blob/for-15.05/contrib/package/remote-update/files/usr/sbin/remote-update" class="urlextern" title="https://github.com/openwrt/luci/blob/for-15.05/contrib/package/remote-update/files/usr/sbin/remote-update" rel="ugc nofollow">LuCI repo</a>.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Security Updates&quot;,&quot;hid&quot;:&quot;security_updates&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;1514-4827&quot;} -->
<h2 class="sectionedit5" id="reproducible_builds">Reproducible Builds</h2>
<div class="level2">

<p>
<img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: Write this section.
</p>

<p>
Background info:
</p>
<ul>
<li class="level1"><div class="li"> Motivation (not specific to OpenWrt): <a href="https://reproducible-builds.org/" class="urlextern" title="https://reproducible-builds.org/" rel="ugc nofollow">https://reproducible-builds.org/</a> and <a href="https://wiki.debian.org/ReproducibleBuilds/About" class="urlextern" title="https://wiki.debian.org/ReproducibleBuilds/About" rel="ugc nofollow">https://wiki.debian.org/ReproducibleBuilds/About</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://lists.openwrt.org/pipermail/openwrt-devel/2015-March/032140.html" class="urlextern" title="https://lists.openwrt.org/pipermail/openwrt-devel/2015-March/032140.html" rel="ugc nofollow">https://lists.openwrt.org/pipermail/openwrt-devel/2015-March/032140.html</a></div>
</li>
<li class="level1"><div class="li"> HOWTO (not OpenWrt-specific): <a href="https://reproducible-builds.org/docs/" class="urlextern" title="https://reproducible-builds.org/docs/" rel="ugc nofollow">https://reproducible-builds.org/docs/</a></div>
</li>
<li class="level1"><div class="li"> OpenWrt specifics: <a href="https://reproducible.debian.net/openwrt/openwrt.html" class="urlextern" title="https://reproducible.debian.net/openwrt/openwrt.html" rel="ugc nofollow">https://reproducible.debian.net/openwrt/openwrt.html</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Reproducible Builds&quot;,&quot;hid&quot;:&quot;reproducible_builds&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;4828-5280&quot;} -->
<h2 class="sectionedit6" id="binary-blob-free_builds">Binary-Blob-free Builds</h2>
<div class="level2">

<p>
Many people are interested in OpenWrt because they believe that it being open source improves security because the code has been (in theory) been carefully reviewed. Further, one of the goals of having reproducible builds is to ensure that the binaries downloaded and installed onto a device derived from the carefully-reviewed OpenWrt source code. Obviously, the OpenWrt doesn&#039;t have access to the source code for binary blobs and so it can&#039;t review them, and so binary blobs are counterproductive to security. Yet some hardware doesn&#039;t work as well, or at all, without the binary blobs, and some users don&#039;t care about this issue.
</p>
<ul>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: What can be done to help developers configure a 100%-binary-blob-free build?</div>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: What can be done to document which binary blobs, if any, are used by a particular build?</div>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: What can be done to facilitate better sharing between LibreCMC and OpenWrt? The OpenWrt trunk has more hardening options, has better defaults for security-related build options, and has support for more devices, but it isn&#039;t clear if/when/what closed-source components are included in the build. LibreCMC has already done a lot of great work to get good results without closed-source components, but it has limited device support; in particular, there seem to be devices that aren&#039;t “supported” by LibreCMC but which do--or can be easily made to--work without binary blobs.</div>
</li>
</ul>

<p>
Background:
</p>
<ul>
<li class="level1"><div class="li"> <a href="https://lists.openwrt.org/pipermail/openwrt-devel/2010-July/007556.html" class="urlextern" title="https://lists.openwrt.org/pipermail/openwrt-devel/2010-July/007556.html" rel="ugc nofollow">https://lists.openwrt.org/pipermail/openwrt-devel/2010-July/007556.html</a> - Reading the whole thread is recommended, as options for creating “blob free” builds in OpenWrt without a fork are discussed.</div>
</li>
<li class="level1"><div class="li"> <a href="https://librecmc.org/" class="urlextern" title="https://librecmc.org/" rel="ugc nofollow">https://librecmc.org/</a> - A binary-blob-free OpenWrt fork. LibreWRT and CeroWrt merged into LibreCMC.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Binary-Blob-free Builds&quot;,&quot;hid&quot;:&quot;binary-blob-free_builds&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;5281-7054&quot;} -->
<h2 class="sectionedit7" id="general_concerns_to_address">General Concerns to Address</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: See <a href="https://lwn.net/Articles/649870/" class="urlextern" title="https://lwn.net/Articles/649870/" rel="ugc nofollow">https://lwn.net/Articles/649870/</a>. OpenWrt has many private patches to the kernel and other packages that are applied using the quilt tool. These patches have likely not been as well-reviewed as patches that have been accepted in upstream patches. How can we get all of OpenWrt&#039;s packages reviewed &amp; accepted upstream? How can one get a list of all of OpenWrt&#039;s patches?</div>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: Besides private patches, OpenWrt does many things differently than other Linux distros. Many of these things are done to make OpenWrt fit on the very small devices that it typically runs on. What, exactly, are these differences? How can we audit</div>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: “Everything runs as root.” See <a href="https://forum.openwrt.org/viewtopic.php?pid=287257#p287257" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=287257#p287257" rel="ugc nofollow">https://forum.openwrt.org/viewtopic.php?pid=287257#p287257</a> and <a href="https://lists.openwrt.org/pipermail/openwrt-devel/2015-March/032197.html" class="urlextern" title="https://lists.openwrt.org/pipermail/openwrt-devel/2015-March/032197.html" rel="ugc nofollow">https://lists.openwrt.org/pipermail/openwrt-devel/2015-March/032197.html</a>. Right now it is difficult to tell what even needs to be done.</div>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: <a href="http://blog.oldcomputerjunk.net/tag/openwrt/" class="urlextern" title="http://blog.oldcomputerjunk.net/tag/openwrt/" rel="ugc nofollow">&quot;OpenWrt is using a 2 year old release of uClibc [...]&quot;</a>. Now OpenWrt is using musl libc instead of uClibc to address this. but it is using uClibc++; does uClibc++ have the same maintenance issues as uClibc? </div>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: <a href="http://blog.oldcomputerjunk.net/tag/openwrt/" class="urlextern" title="http://blog.oldcomputerjunk.net/tag/openwrt/" rel="ugc nofollow">&quot;[...] and 1 year old release of binutils, etc.&quot;</a>. How is OpenWrt doing in keeping up-to-date with packages and toolchains?</div>
</li>
<li class="level1"><div class="li"> <a href="https://github.com/EFForg/OpenWireless/issues" class="urlextern" title="https://github.com/EFForg/OpenWireless/issues" rel="ugc nofollow">https://github.com/EFForg/OpenWireless/issues</a> has some good ideas that haven&#039;t been implemented yet.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;General Concerns to Address&quot;,&quot;hid&quot;:&quot;general_concerns_to_address&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;7055-8551&quot;} -->
<h2 class="sectionedit8" id="os_and_package_hardening">OS and Package Hardening</h2>
<div class="level2">

<p>
See the configuration files under <a href="https://github.com/openwrt/openwrt/tree/master/config" class="urlextern" title="https://github.com/openwrt/openwrt/tree/master/config" rel="ugc nofollow"> config/</a> in the source tree for more detailed information about each option, such as the label used in “make menuconfig”, the current default value, and prerequisites and conditions for enabling the feature. In particular, “Yes” in the “Enabled by Default” column is often an oversimplification. Options are listed in the order they are listed in their config/Config-*.in file.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;OS and Package Hardening&quot;,&quot;hid&quot;:&quot;os_and_package_hardening&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:8,&quot;range&quot;:&quot;8552-9060&quot;} -->
<h3 class="sectionedit9" id="using_checksec_to_check_your_build">Using &#039;&#039;checksec&#039;&#039; to Check Your Build</h3>
<div class="level3">

<p>
<code>checksec</code> can be used to verify that some executables and/or libraries have been correctly built with many of these options. To use it:
</p>
<ol>
<li class="level1"><div class="li"> <code>git clone <a href="https://github.com/slimm609/checksec.sh" class="urlextern" title="https://github.com/slimm609/checksec.sh" rel="ugc nofollow">https://github.com/slimm609/checksec.sh</a></code>, somewhere outside your OpenWrt tree.</div>
</li>
<li class="level1"><div class="li"> Build OpenWrt with <code>CONFIG_TARGET_ROOTFS_TARGZ=y</code> so that it generates a tar.gz archive.</div>
</li>
<li class="level1"><div class="li"> Extract the .tar.gz archive to a temporary directory.</div>
</li>
<li class="level1"><div class="li"> Run the <code>checksec</code> script from inside your copy of the repo you cloned in the first step.</div>
</li>
</ol>

<p>
Note that a lot of documentation for this tool--including the README.md in its GitHub repo--suggests running it as <code>checksec.sh</code> but the script was renamed to <code>checksec</code>. See <a href="http://blog.oldcomputerjunk.net/2014/evaluating-the-security-of-openwrt-part-2/" class="urlextern" title="http://blog.oldcomputerjunk.net/2014/evaluating-the-security-of-openwrt-part-2/" rel="ugc nofollow">Evaluating the security of OpenWrt (part 2)</a> for help on analyzing the output; OpenWrt has improved since that blog post was written so your results should be better.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Using &#039;&#039;checksec&#039;&#039; to Check Your Build&quot;,&quot;hid&quot;:&quot;using_checksec_to_check_your_build&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:9,&quot;range&quot;:&quot;9061-10026&quot;} -->
<h3 class="sectionedit10" id="hardening_build_options_in_configconfig-buildin">&quot;Hardening build options&quot; in config/Config-build.in</h3>
<div class="level3">

<p>
Source: <a href="https://github.com/openwrt/openwrt/blob/master/config/Config-build.in" class="urlextern" title="https://github.com/openwrt/openwrt/blob/master/config/Config-build.in" rel="ugc nofollow">config/Config-build.in</a>. Note that individual packages and/or targets may ignore or otherwise not respect the setting.
</p>
<div class="table sectionedit11"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> .config line </th><th class="col1"> Enabled by Default? </th><th class="col2"> Notes </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>CONFIG_PKG_CHECK_FORMAT_SECURITY=y</code> </td><td class="col1"> Yes </td><td class="col2"> <code>-Wformat -Werror=format-security</code> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>CONFIG_PKG_CC_STACKPROTECTOR_STRONG=y</code> </td><td class="col1"> </td><td class="col2"> “Regular” is the default. “Strong” requires GCC 5. </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>CONFIG_KERNEL_CC_STACKPROTECTOR_STRONG=y</code> </td><td class="col1"> </td><td class="col2"> “Regular” is the default. “Strong” requires GCC 5. </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>CONFIG_PKG_FORTIFY_SOURCE_2=y</code> </td><td class="col1"> </td><td class="col2"> <code>CONFIG_PKG_FORTIFY_SOURCE_1=y</code> is the default. </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <code>CONFIG_PKG_RELRO_FULL=y</code> </td><td class="col1"> Yes </td><td class="col2"> </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:11,&quot;range&quot;:&quot;10290-10761&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;\&quot;Hardening build options\&quot; in config\/Config-build.in&quot;,&quot;hid&quot;:&quot;hardening_build_options_in_configconfig-buildin&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:10,&quot;range&quot;:&quot;10027-10762&quot;} -->
<h3 class="sectionedit12" id="more_security-related_kernel_build_options_in_configconfig-kernelin">More Security-related Kernel Build Options in config/Config-kernel.in</h3>
<div class="level3">

<p>
Source: <a href="https://github.com/openwrt/openwrt/blob/master/config/Config-kernel.in" class="urlextern" title="https://github.com/openwrt/openwrt/blob/master/config/Config-kernel.in" rel="ugc nofollow">config/Config-kernel.in</a>
</p>
<div class="table sectionedit13"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> .config line </th><th class="col1"> Enabled by Default? </th><th class="col2"> Notes </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>CONFIG_KERNEL_SECCOMP_FILTER=y</code><br/>
<code>CONFIG_KERNEL_SECCOMP=y</code> </td><td class="col1"> No </td><td class="col2"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: Which services are done? Which services need to be done? How does the JSON-based configuration for procd work? How can the Seccomp BPF configurations be shared upstream? </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>CONFIG_KERNEL_NAMESPACES=y</code><br/>
<code>CONFIG_KERNEL_UTS_NS=y</code><br/>
<code>CONFIG_KERNEL_IPC_NS=y</code><br/>
<code>CONFIG_KERNEL_USER_NS=y</code><br/>
<code>CONFIG_KERNEL_PID_NS=y</code><br/>
<code>CONFIG_KERNEL_NET_NS=y</code> </td><td class="col1"> No </td><td class="col2"> OpenWrt&#039;s procd jail feature uses namespaces. See <a href="https://lwn.net/Articles/531114/" class="urlextern" title="https://lwn.net/Articles/531114/" rel="ugc nofollow">LWN&#039;s series of articles on namespaces</a> for more information. </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table1&quot;,&quot;secid&quot;:13,&quot;range&quot;:&quot;10952-11587&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;More Security-related Kernel Build Options in config\/Config-kernel.in&quot;,&quot;hid&quot;:&quot;more_security-related_kernel_build_options_in_configconfig-kernelin&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:12,&quot;range&quot;:&quot;10763-11588&quot;} -->
<h3 class="sectionedit14" id="todos">TODOs</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Non-executable stack (NX)? MIPS support?</div>
</li>
<li class="level1 node"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: Jails. What configuration options are needed to gets jails to be enabled? Which services are done? Which services need to be done?</div>
<ul>
<li class="level2"><div class="li"> procd reference for jail configuration options: <a href="http://wiki.prplfoundation.org/wiki/Procd_reference#procd_add_jail.28name.2C.5Bjail_options.5D.29" class="urlextern" title="http://wiki.prplfoundation.org/wiki/Procd_reference#procd_add_jail.28name.2C.5Bjail_options.5D.29" rel="ugc nofollow">http://wiki.prplfoundation.org/wiki/Procd_reference#procd_add_jail.28name.2C.5Bjail_options.5D.29</a>.</div>
</li>
<li class="level2"><div class="li"> Bug report stating (unverified) that jails are not working with musl on DD (x86 only?): <a href="https://lists.openwrt.org/pipermail/openwrt-devel/2015-November/037156.html" class="urlextern" title="https://lists.openwrt.org/pipermail/openwrt-devel/2015-November/037156.html" rel="ugc nofollow">https://lists.openwrt.org/pipermail/openwrt-devel/2015-November/037156.html</a> and <a href="https://dev.openwrt.org/ticket/20785" class="urlextern" title="https://dev.openwrt.org/ticket/20785" rel="ugc nofollow">https://dev.openwrt.org/ticket/20785</a>.</div>
</li>
<li class="level2"><div class="li"> Recent jail work: <a href="https://lists.openwrt.org/pipermail/openwrt-devel/2015-November/037154.html" class="urlextern" title="https://lists.openwrt.org/pipermail/openwrt-devel/2015-November/037154.html" rel="ugc nofollow">https://lists.openwrt.org/pipermail/openwrt-devel/2015-November/037154.html</a> and <a href="https://lists.openwrt.org/pipermail/openwrt-devel/2015-November/037511.html" class="urlextern" title="https://lists.openwrt.org/pipermail/openwrt-devel/2015-November/037511.html" rel="ugc nofollow">https://lists.openwrt.org/pipermail/openwrt-devel/2015-November/037511.html</a> (note that there are many patches in that thread) and <a href="https://lists.openwrt.org/pipermail/openwrt-devel/2015-December/037597.html" class="urlextern" title="https://lists.openwrt.org/pipermail/openwrt-devel/2015-December/037597.html" rel="ugc nofollow">https://lists.openwrt.org/pipermail/openwrt-devel/2015-December/037597.html</a> (many patches) and <a href="https://www.mail-archive.com/openwrt-devel@lists.openwrt.org/msg35978.html" class="urlextern" title="https://www.mail-archive.com/openwrt-devel@lists.openwrt.org/msg35978.html" rel="ugc nofollow">https://www.mail-archive.com/openwrt-devel@lists.openwrt.org/msg35978.html</a> (about improving documentation).</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: ASLR. “Assigned” to Steven Barth, according to him. “Probably going to take some hacking into GCC...”, but hacking GCC doesn&#039;t seem realistic. Source: <a href="https://youtu.be/arDdCMYNXQA?t=471" class="urlextern" title="https://youtu.be/arDdCMYNXQA?t=471" rel="ugc nofollow">https://youtu.be/arDdCMYNXQA?t=471</a>.</div>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: What do packages need to do to be compatible with OpenWrt&#039;s hardening configuration?  Create a security checklist for contributing a package or reviewing a contributed package.</div>
</li>
<li class="level1"><div class="li"> According to various discussions, passing hardening options in CPPFLAGS is the “right” thing to do, but more packages actually work correctly if the flags are passed in CFLAGS. It would be nice if the packages could be fixed upstream could be fixed to accept hardening flags in CPPFLAGS so that OpenWrt can switch to using CPPFLAGS for this purpose.</div>
</li>
<li class="level1"><div class="li"> <a href="https://lists.openwrt.org/pipermail/openwrt-devel/2015-March/032197.html" class="urlextern" title="https://lists.openwrt.org/pipermail/openwrt-devel/2015-March/032197.html" rel="ugc nofollow">https://lists.openwrt.org/pipermail/openwrt-devel/2015-March/032197.html</a> - Discusses procd jails and procd seccomp-bpf support, but also has a large wishlist at the end with a lot of good ideas.</div>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: What other projects&#039; guidelines can/should be adopted by OpenWrt? Examples: <a href="https://wiki.archlinux.org/index.php/Security" class="urlextern" title="https://wiki.archlinux.org/index.php/Security" rel="ugc nofollow">https://wiki.archlinux.org/index.php/Security</a> and <a href="https://wiki.gentoo.org/wiki/Hardened/Toolchain" class="urlextern" title="https://wiki.gentoo.org/wiki/Hardened/Toolchain" rel="ugc nofollow">https://wiki.gentoo.org/wiki/Hardened/Toolchain</a>.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;TODOs&quot;,&quot;hid&quot;:&quot;todos&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:14,&quot;range&quot;:&quot;11589-13765&quot;} -->
<h2 class="sectionedit15" id="web_interface_luci_etc_hardening">Web Interface (LuCI, etc.) Hardening</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: How are XSS, CSRF, and other “solved” web security vulnerability classes systematically prevented? (The OpenWireless documentation mentions some measures that they have taken, such as insisting on the use of only “safe” <abbr title="HyperText Markup Language">HTML</abbr> templating patterns.)</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Web Interface (LuCI, etc.) Hardening&quot;,&quot;hid&quot;:&quot;web_interface_luci_etc_hardening&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:15,&quot;range&quot;:&quot;13766-14074&quot;} -->
<h2 class="sectionedit16" id="cryptography">Cryptography</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: How well does the secure random number generator work in practice? Most OpenWrt devices lack a hardware RNG and seem to have few sources of entropy.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> The Jitter RNG is available in Kernel 4.2 and later. DD will be based on Kernel 4.4 according to <a href="https://lists.openwrt.org/pipermail/openwrt-devel/2016-January/038726.html" class="urlextern" title="https://lists.openwrt.org/pipermail/openwrt-devel/2016-January/038726.html" rel="ugc nofollow">this message from John Crispin</a>.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> How well does the Jitter RNG work? What else can be done to improve secure random generation? Background: <a href="https://lkml.org/lkml/2015/6/22/112" class="urlextern" title="https://lkml.org/lkml/2015/6/22/112" rel="ugc nofollow">Crypto Update for 4.2</a> and the <a href="https://lwn.net/Articles/642166/" class="urlextern" title="https://lwn.net/Articles/642166/" rel="ugc nofollow">LWN article on the Jitter RNG</a>.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: Adding and preferring new algorithms &amp; protocol versions. Should OpenWrt make a concerted effort to make a certain set of algorithms (e.g. x25519 + Ed25519 + ChaCha20 + Poly1305, NIST P-{256,384} ECDH &amp; ECDSA + AES-{128,256}GCM) enabled and preferred by default?</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: Some algorithms and protocols are obsolete and/or dangerous. Are there any that should be outright disabled in the default configuration? How should security vs. compatibility in the default configuration be balanced?</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: Document the new Ed25519 package signing mechanism. What, exactly, is signed? Who signs packages? How are the keys managed? How are keys revoked?</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: The build process uses MD5 digests to ensure packages haven&#039;t been tampered with. This  protects against most kinds of tampering, but it wouldn&#039;t protect against someone intentionally developing a public “good” and a private “bad” version of a package, where the “bad” version would have the same MD5 as the “good” version. It would be good to migrate to something stronger like SHA-256 (sha256sum).</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Cryptography&quot;,&quot;hid&quot;:&quot;cryptography&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:16,&quot;range&quot;:&quot;14075-15798&quot;} -->
<h2 class="sectionedit17" id="potential_future_improvements">Potential Future Improvements</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: What security technologies, with what priority, are worth adding to OpenWrt? Full ASLR? SELinux (perhaps based on Android&#039;s policy)? LXC containers?</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Potential Future Improvements&quot;,&quot;hid&quot;:&quot;potential_future_improvements&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:17,&quot;range&quot;:&quot;15799-16002&quot;} -->
<h2 class="sectionedit18" id="lxc_containers">LXC Containers</h2>
<div class="level2">

<p>
See the <a href="https://smallhacks.wordpress.com/2015/07/15/lxc-on-openwrtturris-presentation/" class="urlextern" title="https://smallhacks.wordpress.com/2015/07/15/lxc-on-openwrtturris-presentation/" rel="ugc nofollow">LXC in OpenWrt/Turris</a> presentation (Video and slides) by Alex Samorukov on LXC containers. Important unanswered questions:
</p>
<ul>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: How are LXC containers complementary to other security mechanisms?</div>
</li>
<li class="level1"><div class="li"> <img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" />: How are LXC containers a better alternative for other security mechanisms?</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;LXC Containers&quot;,&quot;hid&quot;:&quot;lxc_containers&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:18,&quot;range&quot;:&quot;16003-&quot;} -->