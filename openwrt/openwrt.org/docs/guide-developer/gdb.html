
<h1 class="sectionedit1" id="gnu_debugger">GNU Debugger</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> <strong><code>Note:</code></strong> This guide is by no means a Howto, just some short instructions to use GDB on OpenWrt.<br/>
Please look upstream for multilingual instructions and manuals, like e.g. here: <a href="https://sourceware.org/gdb/documentation/" class="urlextern" title="https://sourceware.org/gdb/documentation/" rel="ugc nofollow">https://sourceware.org/gdb/documentation/</a></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;GNU Debugger&quot;,&quot;hid&quot;:&quot;gnu_debugger&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-262&quot;} -->
<h2 class="sectionedit2" id="compiling_tools">Compiling Tools</h2>
<div class="level2">

<p>
in <a href="/docs/guide-developer/toolchain/use-buildsystem#image_configuration" class="wikilink1" title="docs:guide-developer:toolchain:use-buildsystem" data-wiki-id="docs:guide-developer:toolchain:use-buildsystem">menuconfig</a> enable gdb
</p>
<pre class="code">Advanced configuration options (for developers) -&gt; Toolchain Options -&gt;  Build gdb</pre>

<p>
and gdbserver
</p>
<pre class="code">Development -&gt; gdbserver</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Compiling Tools&quot;,&quot;hid&quot;:&quot;compiling_tools&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;263-517&quot;} -->
<h2 class="sectionedit3" id="add_debugging_to_a_package">Add debugging to a package</h2>
<div class="level2">

<p>
Add CFLAGS to the package Makefile and recompile it.
</p>
<pre class="code">TARGET_CFLAGS += -ggdb3</pre>

<p>
Alternatively recompile the package with <code>CONFIG_DEBUG</code> set
</p>
<pre class="code">make package/busybox/{clean,compile} V=s CONFIG_DEBUG=y</pre>

<p>
Or you can enable debug info in <a href="/docs/guide-developer/toolchain/use-buildsystem#image_configuration" class="wikilink1" title="docs:guide-developer:toolchain:use-buildsystem" data-wiki-id="docs:guide-developer:toolchain:use-buildsystem">menuconfig</a>
</p>
<pre class="code">Global build settings &gt; Compile packages with debugging info</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Add debugging to a package&quot;,&quot;hid&quot;:&quot;add_debugging_to_a_package&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;518-933&quot;} -->
<h2 class="sectionedit4" id="starting_gnu_debugger">Starting GNU Debugger</h2>
<div class="level2">

<p>
Start gdbserver on target (router)
</p>
<pre class="code">gdbserver :9000 /bin/ping example.org</pre>

<p>
Start gdb on host (in compiling tree)
</p>
<pre class="code">./scripts/remote-gdb 192.168.1.1:9000 ./build_dir/target-*/busybox-*/busybox</pre>

<p>
now you have a gdb shell. Set breakpoints, start program, backtrace etc.
</p>
<pre class="code">(gdb) b source-file.c:123
(gdb) c
(gdb) bt</pre>

<p>
If you want to restart the program, you&#039;ll need to set the remote path and arguments
</p>
<pre class="code">(gdb) set remote exec-file /usr/bin/blah
(gdb) set args -v -x -merry-fishing
(gdb) run</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Starting GNU Debugger&quot;,&quot;hid&quot;:&quot;starting_gnu_debugger&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;934-&quot;} -->