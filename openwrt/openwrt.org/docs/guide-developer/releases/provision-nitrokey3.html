
<h1 class="sectionedit1" id="prepare_nitrokey_3a_mini_for_build_artifact_signing">Prepare Nitrokey 3A Mini for build artifact signing</h1>
<div class="level1">

<p>
These are collected notes of the steps we&#039;ve done during preparation of Nitrokey 3A Mini (nk3) key for use during build artifacts signing. 
</p>

<p>
This guide was written using following environment:
</p>
<ul>
<li class="level1"><div class="li"> Fedora 38 container</div>
</li>
<li class="level1"><div class="li"> gpg (GnuPG) 2.4.0</div>
</li>
<li class="level1"><div class="li"> libgcrypt 1.10.2-unknown</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Prepare Nitrokey 3A Mini for build artifact signing&quot;,&quot;hid&quot;:&quot;prepare_nitrokey_3a_mini_for_build_artifact_signing&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-337&quot;} -->
<h2 class="sectionedit2" id="install_nitropy_toolkit">Install nitropy toolkit</h2>
<div class="level2">
<pre class="code bash">python3.10 <span class="re5">-m</span> venv venv
<span class="kw3">source</span> venv<span class="sy0">/</span>bin<span class="sy0">/</span>activate
pip <span class="kw2">install</span> <span class="re5">-U</span> pip
pip <span class="kw2">install</span> pipx
pipx <span class="kw2">install</span> nitropy
pipx list
...
pynitrokey 0.4.36, installed using Python 3.10.6</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Install nitropy toolkit&quot;,&quot;hid&quot;:&quot;install_nitropy_toolkit&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;338-564&quot;} -->
<h2 class="sectionedit3" id="upgrade_nk3_firmware_to_v140">Upgrade nk3 firmware to v1.4.0</h2>
<div class="level2">
<pre class="code bash">nitropy nk3 update <span class="re5">--version</span> v1.4.0
nitropy nk3 status
 ...
Firmware version:   v1.4.0</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Upgrade nk3 firmware to v1.4.0&quot;,&quot;hid&quot;:&quot;upgrade_nk3_firmware_to_v140&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:3,&quot;range&quot;:&quot;565-716&quot;} -->
<h2 class="sectionedit4" id="perform_nk3_factory_reset_and_enable_kdf-do">Perform nk3 factory reset and enable KDF-DO</h2>
<div class="level2">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_important plugin_wrap">
<p>
Factory default admin PIN is <strong>12345678</strong> and PIN is <strong>123456</strong>
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:6,&quot;range&quot;:&quot;0-&quot;} --><pre class="code bash">gpg <span class="re5">--card-edit</span>
gpg<span class="sy0">/</span>card<span class="sy0">&gt;</span> admin
gpg<span class="sy0">/</span>card<span class="sy0">&gt;</span> factory-reset
gpg<span class="sy0">/</span>card<span class="sy0">&gt;</span> kdf-setup</pre>

<p>
and double check, that KDF is <strong>on</strong>:
</p>
<pre class="code bash">gpg<span class="sy0">/</span>card<span class="sy0">&gt;</span> list
 ...
 KDF setting ......: on</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Perform nk3 factory reset and enable KDF-DO&quot;,&quot;hid&quot;:&quot;perform_nk3_factory_reset_and_enable_kdf-do&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:4,&quot;range&quot;:&quot;717-1062&quot;} -->
<h2 class="sectionedit7" id="generate_gpg_key">Generate GPG key</h2>
<div class="level2">

<p>
Gather some entropy from nk3
</p>
<pre class="code bash">nitropy nk3 rng <span class="re5">--length</span> <span class="nu0">4096</span> <span class="sy0">|</span> <span class="kw2">sudo</span> <span class="kw2">tee</span> <span class="sy0">/</span>dev<span class="sy0">/</span>random <span class="sy0">|</span> <span class="kw2">hexdump</span> <span class="re5">-C</span></pre>

<p>
Generate keys:
</p>
<pre class="code bash"><span class="kw3">export</span> <span class="re2">PASSPHRASE</span>=$<span class="br0">&#40;</span>gpg <span class="re5">--gen-random</span> <span class="re5">--armor</span> <span class="nu0">0</span> <span class="nu0">60</span><span class="br0">&#41;</span>
&nbsp;
<span class="kw3">export</span> <span class="re2">GNUPGHOME</span>=$<span class="br0">&#40;</span><span class="kw2">mktemp</span> <span class="re5">-d</span> <span class="re5">-t</span> gnupg_openwrt_nk3_$<span class="br0">&#40;</span><span class="kw2">date</span> +<span class="sy0">%</span>Y<span class="sy0">%</span>m<span class="sy0">%</span>d<span class="sy0">%</span>H<span class="sy0">%</span>M<span class="br0">&#41;</span>_XXX<span class="br0">&#41;</span>
&nbsp;
<span class="kw2">cat</span> <span class="sy0">&gt;</span> <span class="re1">$GNUPGHOME</span><span class="sy0">/</span>gpg.conf <span class="co2">&lt;&lt; EOF
  personal-cipher-preferences AES256 AES192 AES
  personal-digest-preferences SHA512 SHA384 SHA256
  personal-compress-preferences ZLIB BZIP2 ZIP Uncompressed
  default-preference-list SHA512 SHA384 SHA256 AES256 AES192 AES ZLIB BZIP2 ZIP Uncompressed
  cert-digest-algo SHA512
  s2k-digest-algo SHA512
  s2k-cipher-algo AES256
  charset utf-8
  fixed-list-mode
  no-comments
  no-emit-version
  keyid-format 0xlong
  list-options show-uid-validity
  verify-options show-uid-validity
  with-fingerprint
  require-cross-certification
  no-symkey-cache
  use-agent
  throw-keyids
EOF</span>
&nbsp;
<span class="kw2">cat</span> <span class="sy0">&gt;</span> <span class="re1">$GNUPGHOME</span><span class="sy0">/</span>gpg-generate-nk3-keys.txt <span class="co2">&lt;&lt; EOF
  %echo Generating a Openwrt Build System signing key for Nitrokey3
  Key-Type: eddsa
  Key-Curve: ed25519
  Key-Usage: cert
  SubKey-Type: eddsa
  SubKey-Curve: ed25519
  SubKey-Usage: sign
  Name-Real: OpenWrt Build System
  Name-Comment: Nitrokey3
  Name-Email: contact@openwrt.org
  Expire-Date: 10y
  Passphrase: $PASSPHRASE
  %commit
  %echo done
EOF</span>
&nbsp;
gpg <span class="re5">--batch</span> <span class="re5">--generate-key</span> <span class="re1">$GNUPGHOME</span><span class="sy0">/</span>gpg-generate-nk3-keys.txt
gpg: Generating a Openwrt Build System signing key <span class="kw1">for</span> Nitrokey3
gpg: <span class="sy0">/</span>tmp<span class="sy0">/</span>gnupg_openwrt_nk3_202305130941_eoc<span class="sy0">/</span>trustdb.gpg: trustdb created
gpg: directory <span class="st_h">'/tmp/gnupg_openwrt_nk3_202305130941_eoc/openpgp-revocs.d'</span> created
gpg: revocation certificate stored <span class="kw2">as</span> <span class="st_h">'/tmp/gnupg_openwrt_nk3_202305130941_eoc/openpgp-revocs.d/E9025ED843D0FDC7866F7064CAE438715492B555.rev'</span>
gpg: <span class="kw1">done</span></pre>

<p>
Export public key
</p>
<pre class="code bash"><span class="kw3">export</span> <span class="re2">KEYID</span>=$<span class="br0">&#40;</span>gpg <span class="re5">--list-signatures</span> <span class="re5">--with-colons</span> <span class="sy0">|</span> <span class="kw2">grep</span> sig: <span class="sy0">|</span> <span class="kw2">cut</span> -d: <span class="re5">-f</span> <span class="nu0">5</span> <span class="sy0">|</span> <span class="kw2">head</span> -<span class="nu0">1</span><span class="br0">&#41;</span>
&nbsp;
gpg <span class="re5">--export</span> <span class="re5">--armor</span> <span class="sy0">|</span> <span class="kw2">tee</span> <span class="re1">$GNUPGHOME</span><span class="sy0">/</span>gnupg-openwrt-nk3-<span class="re1">$KEYID</span>.asc</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Generate GPG key&quot;,&quot;hid&quot;:&quot;generate_gpg_key&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:7,&quot;range&quot;:&quot;1063-3032&quot;} -->
<h2 class="sectionedit8" id="setup_nk3_key">Setup nk3 key</h2>
<div class="level2">
<pre class="code bash">gpg <span class="re5">--card-edit</span>
gpg<span class="sy0">/</span>card<span class="sy0">&gt;</span> admin
&nbsp;
gpg<span class="sy0">/</span>card<span class="sy0">&gt;</span> key-attr
ECC <span class="sy0">/</span> Curve <span class="nu0">25519</span>
&nbsp;
gpg<span class="sy0">/</span>card<span class="sy0">&gt;</span> forcesig
&nbsp;
gpg<span class="sy0">/</span>card<span class="sy0">&gt;</span> name
Cardholder<span class="st_h">'s surname: Build System Key 3.
Cardholder'</span>s given name: OpenWrt
&nbsp;
gpg<span class="sy0">/</span>card<span class="sy0">&gt;</span> url
URL to retrieve public key: https:<span class="sy0">//</span>git.openwrt.org<span class="sy0">/</span>?<span class="re2">p</span>=keyring.git;<span class="re2">a</span>=blob_plain;<span class="re2">f</span>=gpg<span class="sy0">/</span>CAE438715492B555.asc;<span class="re2">hb</span>=HEAD</pre>

<p>
Gather some entropy from nk3
</p>
<pre class="code bash">nk3 rng <span class="re5">--length</span> <span class="nu0">4096</span> <span class="sy0">|</span> <span class="kw2">sudo</span> <span class="kw2">tee</span> <span class="sy0">/</span>dev<span class="sy0">/</span>random <span class="sy0">|</span> <span class="kw2">hexdump</span> <span class="re5">-C</span></pre>

<p>
Generate nk3 PIN, Admin PIN and Reset PIN
</p>
<pre class="code bash"><span class="co4">$ </span><span class="kw1">for</span> k <span class="kw1">in</span> $<span class="br0">&#40;</span><span class="kw2">seq</span> <span class="nu0">1</span> <span class="nu0">3</span><span class="br0">&#41;</span>; <span class="kw1">do</span> gpg <span class="re5">--gen-random</span> <span class="re5">--armor</span> <span class="nu0">0</span> <span class="nu0">60</span>; <span class="kw2">sleep</span> <span class="nu0">60</span>; <span class="kw1">done</span></pre>

<p>
Write down the keys and set the keys on the nk3 key
</p>
<pre class="code bash">  gpg<span class="sy0">/</span>card<span class="sy0">&gt;</span> <span class="kw2">passwd</span>
  <span class="nu0">1</span> - change PIN
  <span class="nu0">4</span> - <span class="kw1">set</span> the Reset Code
  <span class="nu0">3</span> - change Admin PIN</pre>

<p>
Verify correct settings
</p>
<pre class="code bash">  gpg<span class="sy0">/</span>card<span class="sy0">&gt;</span> list
  Name of cardholder: OpenWrt Build System Key <span class="nu0">3</span>.
  URL of public key : https:<span class="sy0">//</span>git.openwrt.org<span class="sy0">/</span>?<span class="re2">p</span>=keyring.git;<span class="re2">a</span>=blob_plain;<span class="re2">f</span>=gpg<span class="sy0">/</span>CAE438715492B555.asc;<span class="re2">hb</span>=HEAD
  Signature PIN ....: not forced
  Key attributes ...: ed25519 cv25519 ed25519</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Setup nk3 key&quot;,&quot;hid&quot;:&quot;setup_nk3_key&quot;,&quot;codeblockOffset&quot;:7,&quot;secid&quot;:8,&quot;range&quot;:&quot;3033-4095&quot;} -->
<h2 class="sectionedit9" id="transfer_gpg_keys_to_nk3">Transfer GPG keys to nk3</h2>
<div class="level2">
<pre class="code bash">gpg <span class="re5">--edit-key</span> <span class="re1">$KEYID</span>
&nbsp;
  gpg <span class="br0">&#40;</span>GnuPG<span class="br0">&#41;</span> 2.4.0; Copyright <span class="br0">&#40;</span>C<span class="br0">&#41;</span> <span class="nu0">2021</span> Free Software Foundation, Inc.
&nbsp;
  Secret key is available.
&nbsp;
  sec  ed25519<span class="sy0">/</span>0xCAE438715492B555
       created: <span class="nu0">2023</span>-05-<span class="nu0">13</span>  expires: <span class="nu0">2033</span>-05-<span class="nu0">10</span>  usage: C   
       trust: ultimate      validity: ultimate
  ssb  ed25519<span class="sy0">/</span>0x78BBEC94A894C992
       created: <span class="nu0">2023</span>-05-<span class="nu0">13</span>  expires: <span class="nu0">2033</span>-05-<span class="nu0">10</span>  usage: S   
  <span class="br0">&#91;</span>ultimate<span class="br0">&#93;</span> <span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span>. OpenWrt Build System <span class="br0">&#40;</span>Nitrokey3<span class="br0">&#41;</span> <span class="sy0">&lt;</span>contact<span class="sy0">@</span>openwrt.org<span class="sy0">&gt;</span></pre>

<p>
Select signing key
</p>
<pre class="code bash">  gpg<span class="sy0">&gt;</span> key <span class="nu0">1</span>
&nbsp;
  sec  ed25519<span class="sy0">/</span>0xCAE438715492B555
       created: <span class="nu0">2023</span>-05-<span class="nu0">13</span>  expires: <span class="nu0">2033</span>-05-<span class="nu0">10</span>  usage: C   
       trust: ultimate      validity: ultimate
  ssb<span class="sy0">*</span> ed25519<span class="sy0">/</span>0x78BBEC94A894C992
       created: <span class="nu0">2023</span>-05-<span class="nu0">13</span>  expires: <span class="nu0">2033</span>-05-<span class="nu0">10</span>  usage: S   
  <span class="br0">&#91;</span>ultimate<span class="br0">&#93;</span> <span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span>. OpenWrt Build System <span class="br0">&#40;</span>Nitrokey3<span class="br0">&#41;</span> <span class="sy0">&lt;</span>contact<span class="sy0">@</span>openwrt.org<span class="sy0">&gt;</span></pre>

<p>
Move signing key to card
</p>
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:10,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_important plugin_wrap">
<p>
Transferring keys to nk3 using <em>keytocard</em> is a destructive, one-way operation only. Make sure you&#039;ve made a backup before proceeding: <em>keytocard</em> converts the local, on-disk key into a stub, which means the on-disk copy is no longer usable to transfer to subsequent security key devices or mint additional keys.
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;hid&quot;:&quot;&quot;,&quot;secid&quot;:11,&quot;range&quot;:&quot;0-&quot;} --><pre class="code bash">  gpg<span class="sy0">&gt;</span> keytocard
  Please <span class="kw1">select</span> where to store the key:
    <span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span> Signature key
    <span class="br0">&#40;</span><span class="nu0">3</span><span class="br0">&#41;</span> Authentication key
  Your selection? <span class="nu0">1</span>
&nbsp;
  sec  ed25519<span class="sy0">/</span>0xCAE438715492B555
       created: <span class="nu0">2023</span>-05-<span class="nu0">13</span>  expires: <span class="nu0">2033</span>-05-<span class="nu0">10</span>  usage: C   
       trust: ultimate      validity: ultimate
  ssb<span class="sy0">*</span> ed25519<span class="sy0">/</span>0x78BBEC94A894C992
       created: <span class="nu0">2023</span>-05-<span class="nu0">13</span>  expires: <span class="nu0">2033</span>-05-<span class="nu0">10</span>  usage: S   
  <span class="br0">&#91;</span>ultimate<span class="br0">&#93;</span> <span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span>. OpenWrt Build System <span class="br0">&#40;</span>Nitrokey3<span class="br0">&#41;</span> <span class="sy0">&lt;</span>contact<span class="sy0">@</span>openwrt.org<span class="sy0">&gt;</span>
&nbsp;
  gpg<span class="sy0">&gt;</span> save</pre>

<p>
Check the keyring content
</p>
<pre class="code bash">  $ gpg <span class="re5">-K</span>
  <span class="sy0">/</span>tmp<span class="sy0">/</span>gnupg_openwrt_nk3_202305130941_eoc<span class="sy0">/</span>pubring.kbx
  <span class="re5">---------------------------------------------------</span>
  sec   ed25519<span class="sy0">/</span>0xCAE438715492B555 <span class="nu0">2023</span>-05-<span class="nu0">13</span> <span class="br0">&#91;</span>C<span class="br0">&#93;</span> <span class="br0">&#91;</span>expires: <span class="nu0">2033</span>-05-<span class="nu0">10</span><span class="br0">&#93;</span>
        Key fingerprint = E902 5ED8 43D0 FDC7 866F  <span class="nu0">7064</span> CAE4 <span class="nu0">3871</span> <span class="nu0">5492</span> B555
  uid                   <span class="br0">&#91;</span>ultimate<span class="br0">&#93;</span> OpenWrt Build System <span class="br0">&#40;</span>Nitrokey3<span class="br0">&#41;</span> <span class="sy0">&lt;</span>contact<span class="sy0">@</span>openwrt.org<span class="sy0">&gt;</span>
  ssb<span class="sy0">&gt;</span>  ed25519<span class="sy0">/</span>0x78BBEC94A894C992 <span class="nu0">2023</span>-05-<span class="nu0">13</span> <span class="br0">&#91;</span>S<span class="br0">&#93;</span> <span class="br0">&#91;</span>expires: <span class="nu0">2033</span>-05-<span class="nu0">10</span><span class="br0">&#93;</span></pre>

<p>
Check nk3 card content, secret key <em>sec#</em> and sub-key <em>ssb&gt;</em> means, that key move went fine.
</p>
<pre class="code bash">  $ gpg <span class="re5">--card-status</span> 
  Name of cardholder: OpenWrt Build System Key <span class="nu0">3</span>.
  URL of public key : https:<span class="sy0">//</span>git.openwrt.org<span class="sy0">/</span>?<span class="re2">p</span>=keyring.git;<span class="re2">a</span>=blob_plain;<span class="re2">f</span>=gpg<span class="sy0">/</span>CAE438715492B555.asc;<span class="re2">hb</span>=HEAD
  Signature PIN ....: not forced
  Key attributes ...: ed25519 cv25519 ed25519
  KDF setting ......: off
  Signature key ....: <span class="nu0">6079</span> C3B2 0643 36C9 59E7  B37D 78BB EC94 A894 C992
        created ....: <span class="nu0">2023</span>-05-<span class="nu0">13</span> 08:08:<span class="nu0">40</span>
  Encryption key....: <span class="br0">&#91;</span>none<span class="br0">&#93;</span>
  Authentication key: <span class="br0">&#91;</span>none<span class="br0">&#93;</span>
  General key info..: sub  ed25519<span class="sy0">/</span>0x78BBEC94A894C992 <span class="nu0">2023</span>-05-<span class="nu0">13</span> OpenWrt Build System <span class="br0">&#40;</span>Nitrokey3<span class="br0">&#41;</span> <span class="sy0">&lt;</span>contact<span class="sy0">@</span>openwrt.org<span class="sy0">&gt;</span>
  sec<span class="co0">#  ed25519/0xCAE438715492B555  created: 2023-05-13  expires: 2033-05-10</span>
  ssb<span class="sy0">&gt;</span>  ed25519<span class="sy0">/</span>0x78BBEC94A894C992  created: <span class="nu0">2023</span>-05-<span class="nu0">13</span>  expires: <span class="nu0">2033</span>-05-<span class="nu0">10</span>
                                    card-no: 000F XXXXXXXX</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Transfer GPG keys to nk3&quot;,&quot;hid&quot;:&quot;transfer_gpg_keys_to_nk3&quot;,&quot;codeblockOffset&quot;:12,&quot;secid&quot;:9,&quot;range&quot;:&quot;4096-7184&quot;} -->
<h3 class="sectionedit12" id="cross_sign_new_gpg_key">Cross sign new GPG key</h3>
<div class="level3">

<p>
<img src="/lib/images/smileys/fixme.svg" class="icon smiley" alt="FIXME" /> <a href="http://lists.openwrt.org/pipermail/openwrt-devel/2018-December/020856.html" class="urlextern" title="http://lists.openwrt.org/pipermail/openwrt-devel/2018-December/020856.html" rel="ugc nofollow">http://lists.openwrt.org/pipermail/openwrt-devel/2018-December/020856.html</a>
</p>
<pre class="code bash">  $ gpg <span class="re5">--list-signatures</span> <span class="re1">$KEYID</span>
  pub   ed25519<span class="sy0">/</span>0xCAE438715492B555 <span class="nu0">2023</span>-05-<span class="nu0">13</span> <span class="br0">&#91;</span>C<span class="br0">&#93;</span> <span class="br0">&#91;</span>expires: <span class="nu0">2033</span>-05-<span class="nu0">10</span><span class="br0">&#93;</span>
        Key fingerprint = E902 5ED8 43D0 FDC7 866F  <span class="nu0">7064</span> CAE4 <span class="nu0">3871</span> <span class="nu0">5492</span> B555
  uid                   <span class="br0">&#91;</span>ultimate<span class="br0">&#93;</span> OpenWrt Build System <span class="br0">&#40;</span>Nitrokey3<span class="br0">&#41;</span> <span class="sy0">&lt;</span>contact<span class="sy0">@</span>openwrt.org<span class="sy0">&gt;</span>
  sig <span class="nu0">3</span>        0xCAE438715492B555 <span class="nu0">2023</span>-05-<span class="nu0">13</span>  OpenWrt Build System <span class="br0">&#40;</span>Nitrokey3<span class="br0">&#41;</span> <span class="sy0">&lt;</span>contact<span class="sy0">@</span>openwrt.org<span class="sy0">&gt;</span>
  sig          0xCD84BCED626471F1 <span class="nu0">2023</span>-05-<span class="nu0">13</span>  OpenWrt Build System <span class="br0">&#40;</span>PGP key <span class="kw1">for</span> unattended snapshot builds<span class="br0">&#41;</span> <span class="sy0">&lt;</span>pgpsign-snapshots<span class="sy0">@</span>openwrt.org<span class="sy0">&gt;</span>
  sig          0xCD54E82DADB3684D <span class="nu0">2023</span>-05-<span class="nu0">13</span>  OpenWrt Build System <span class="br0">&#40;</span>GnuPGP key <span class="kw1">for</span> <span class="nu0">22.03</span> release builds<span class="br0">&#41;</span> <span class="sy0">&lt;</span>pgpsign-<span class="nu0">22.03</span><span class="sy0">@</span>openwrt.org<span class="sy0">&gt;</span>
  sig          0x88CA59E88F681580 <span class="nu0">2023</span>-05-<span class="nu0">13</span>  OpenWrt Build System <span class="br0">&#40;</span>PGP key <span class="kw1">for</span> <span class="nu0">21.02</span> release builds<span class="br0">&#41;</span> <span class="sy0">&lt;</span>pgpsign-<span class="nu0">21.02</span><span class="sy0">@</span>openwrt.org<span class="sy0">&gt;</span>
  sub   ed25519<span class="sy0">/</span>0x78BBEC94A894C992 <span class="nu0">2023</span>-05-<span class="nu0">13</span> <span class="br0">&#91;</span>S<span class="br0">&#93;</span> <span class="br0">&#91;</span>expires: <span class="nu0">2033</span>-05-<span class="nu0">10</span><span class="br0">&#93;</span>
  sig          0xCAE438715492B555 <span class="nu0">2023</span>-05-<span class="nu0">13</span>  OpenWrt Build System <span class="br0">&#40;</span>Nitrokey3<span class="br0">&#41;</span> <span class="sy0">&lt;</span>contact<span class="sy0">@</span>openwrt.org<span class="sy0">&gt;</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Cross sign new GPG key&quot;,&quot;hid&quot;:&quot;cross_sign_new_gpg_key&quot;,&quot;codeblockOffset&quot;:17,&quot;secid&quot;:12,&quot;range&quot;:&quot;7185-8271&quot;} -->
<h3 class="sectionedit13" id="upload_public_key_to_various_public_key_servers">Upload public key to various public key servers</h3>
<div class="level3">
<pre class="code bash">gpg <span class="re5">--send-key</span> <span class="re1">$KEYID</span>
gpg <span class="re5">--keyserver</span> pgp.mit.edu <span class="re5">--send-key</span> <span class="re1">$KEYID</span>
gpg <span class="re5">--keyserver</span> keys.gnupg.net <span class="re5">--send-key</span> <span class="re1">$KEYID</span>
gpg <span class="re5">--keyserver</span> hkps:<span class="sy0">//</span>keyserver.ubuntu.com:<span class="nu0">443</span> <span class="re5">--send-key</span> <span class="re1">$KEYID</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Upload public key to various public key servers&quot;,&quot;hid&quot;:&quot;upload_public_key_to_various_public_key_servers&quot;,&quot;codeblockOffset&quot;:18,&quot;secid&quot;:13,&quot;range&quot;:&quot;8272-8535&quot;} -->
<h2 class="sectionedit14" id="add_gpg_key_to_keyringgit_repo">Add GPG key to keyring.git repo</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> <a href="https://git.openwrt.org/?p=keyring.git;a=commit;h=bc4d80f064f2af385a78705d5de0fc8e882c3991" class="interwiki iw_commit" title="https://git.openwrt.org/?p=keyring.git;a=commit;h=bc4d80f064f2af385a78705d5de0fc8e882c3991">gpg: add OpenWrt 21.02 signing key</a></div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Add GPG key to keyring.git repo&quot;,&quot;hid&quot;:&quot;add_gpg_key_to_keyringgit_repo&quot;,&quot;codeblockOffset&quot;:19,&quot;secid&quot;:14,&quot;range&quot;:&quot;8536-8698&quot;} -->
<h3 class="sectionedit15" id="update_packagesystemopenwrt-keyringmakefile_package">Update package/system/openwrt-keyring/Makefile package</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> <a href="https://git.openwrt.org/?p=openwrt/openwrt.git;a=commit;h=1bf6d70e60fdb45d81a8f10b90904cef38c73f70" class="interwiki iw_commit" title="https://git.openwrt.org/?p=openwrt/openwrt.git;a=commit;h=1bf6d70e60fdb45d81a8f10b90904cef38c73f70">openwrt-keyring: add OpenWrt 21.02 GPG/usign keys</a></div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Update package\/system\/openwrt-keyring\/Makefile package&quot;,&quot;hid&quot;:&quot;update_packagesystemopenwrt-keyringmakefile_package&quot;,&quot;codeblockOffset&quot;:19,&quot;secid&quot;:15,&quot;range&quot;:&quot;8699-8905&quot;} -->
<h3 class="sectionedit16" id="add_new_gpg_key_information_to_the_release_signatures_page">Add new GPG key information to the release signatures page</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> Add new key info to <a href="/docs/guide-user/security/signatures" class="wikilink1" title="docs:guide-user:security:signatures" data-wiki-id="docs:guide-user:security:signatures">signatures</a> page</div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Add new GPG key information to the release signatures page&quot;,&quot;hid&quot;:&quot;add_new_gpg_key_information_to_the_release_signatures_page&quot;,&quot;codeblockOffset&quot;:19,&quot;secid&quot;:16,&quot;range&quot;:&quot;8906-&quot;} -->