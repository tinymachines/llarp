
<h1 class="sectionedit1" id="building_openwrt_for_netgear_wndr3700">Building OpenWrt for Netgear WNDR3700</h1>
<div class="level1">

<p>
<strong>WNDR3700 Developers&#039; Overview</strong>
</p>

<p>
This page contains, thus far, one user&#039;s complete notes on how to build a working OpenWrt WNDR3700 image from scratch, including working wireless on 2.4 <abbr title="Gigahertz">GHz</abbr> and 5 <abbr title="Gigahertz">GHz</abbr> bands. This page assumes that you are comfortable with building software and using kernel-style makefile systems, but otherwise, the page describes how to build the system from the ground up (including getting your base <abbr title="Operating System">OS</abbr> ready to build OpenWrt in the first place).
</p>

<p>
This page also describes the method used to unbrick a WNDR3700 (which does NOT require a serial cable), as well as optional instructions for manufacturing a serial cable (should you wish to use it for running ramdisk images).
</p>

<p>
These instructions are working fine as of the relatively-recent trunk revision 19064.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Building OpenWrt for Netgear WNDR3700&quot;,&quot;hid&quot;:&quot;building_openwrt_for_netgear_wndr3700&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-838&quot;} -->
<h2 class="sectionedit2" id="prerequisites">Prerequisites</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="/docs/guide-developer/toolchain/install-buildsystem" class="wikilink1" title="docs:guide-developer:toolchain:install-buildsystem" data-wiki-id="docs:guide-developer:toolchain:install-buildsystem">OpenWrt Buildroot – Installation</a></div>
</li>
<li class="level1"><div class="li"> <a href="/docs/guide-developer/toolchain/start" class="wikilink1" title="docs:guide-developer:toolchain:start" data-wiki-id="docs:guide-developer:toolchain:start">OpenWrt Buildroot – Usage</a></div>
</li>
</ul>

<p>
Until WNDR3700 support is integrated into a release, you&#039;ll need to execute the following commands to pull down the latest bleeding-edge code:
</p>
<pre class="code bash"><span class="kw3">cd</span> ~
<span class="kw2">mkdir</span> openwrt
<span class="kw3">cd</span> openwrt
<span class="kw2">git clone</span> git:<span class="sy0">//</span>git.openwrt.org<span class="sy0">/</span>openwrt.git trunk</pre>

<p>
If you also want to check out the extra packages that can be installed on your system (including the helpful <code>ntpclient</code> and the <em>WebUI LuCI</em>), you can also run this:
</p>
<pre class="code bash"><span class="kw3">cd</span> ~<span class="sy0">/</span>openwrt<span class="sy0">/</span>trunk
.<span class="sy0">/</span>scripts<span class="sy0">/</span>feeds update packages luci
.<span class="sy0">/</span>scripts<span class="sy0">/</span>feeds <span class="kw2">install</span> <span class="re5">-a</span> <span class="re5">-p</span> luci
.<span class="sy0">/</span>scripts<span class="sy0">/</span>feeds <span class="kw2">install</span> <span class="sy0">&lt;</span>package_name<span class="sy0">&gt;</span></pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Prerequisites&quot;,&quot;hid&quot;:&quot;prerequisites&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;839-1601&quot;} -->
<h2 class="sectionedit3" id="configuration">Configuration</h2>
<div class="level2">

<p>
Run the OpenWrt&#039;s BuildRoot menu configuration system to get started:
</p>
<pre class="code bash"><span class="kw3">cd</span> ~<span class="sy0">/</span>openwrt<span class="sy0">/</span>trunk
<span class="kw2">make</span> menuconfig</pre>

<p>
Make the following selections beyond the defaults. You might be able to get away with building things as kernel modules instead of built-in, but the author has not tried.
</p>
<ol>
<li class="level1"><div class="li"> Target System: Atheros AR71xx/AR7240/AR913x</div>
</li>
<li class="level1"><div class="li"> Target Profile: NETGEAR WNDR3700</div>
</li>
<li class="level1"><div class="li"> Target Images: if you want to build a ramdisk image, select “ramdisk” and ensure that LZMA compression is listed. Otherwise, leave the defaults alone (should be jffs2, squashfs and tgz). You seemingly need to rebuild everything except the toolchain if you want to switch from the ramdisk to a firmware image or vice versa.</div>
</li>
<li class="level1 node"><div class="li"> Image Configuration: Use this section to set up the defaults for the <abbr title="Local Area Network">LAN</abbr> ports on your router. If you don&#039;t have a serial cable connected to the router, you&#039;ll need to do this so that you can access the router once your newly-flashed code boots up. I recommend entering values for <abbr title="Domain Name System">DNS</abbr> server (on your <abbr title="Internet Service Provider">ISP</abbr>&#039;s network), <abbr title="Local Area Network">LAN</abbr> network mask (for the addresses to be doled out via <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>), and <abbr title="Local Area Network">LAN</abbr> <abbr title="Internet Protocol">IP</abbr> address (private <abbr title="Internet Protocol">IP</abbr> address on your router&#039;s side). </div>
<ul>
<li class="level2"><div class="li"> eg. <abbr title="Local Area Network">LAN</abbr> <abbr title="Domain Name System">DNS</abbr> = (whatever your <abbr title="Internet Service Provider">ISP</abbr> tells you to use), <abbr title="Local Area Network">LAN</abbr> network mask=255.255.255.0, <abbr title="Local Area Network">LAN</abbr> <abbr title="Internet Protocol">IP</abbr> address=192.168.0.1</div>
</li>
<li class="level2"><div class="li"> NOTE: <strong>pfk3</strong> didn&#039;t do this step and by default OpenWrt was built with 192.168.1.1 &amp; 255.255.255.0 for it&#039;s <abbr title="Local Area Network">LAN</abbr> <abbr title="Internet Protocol">IP</abbr>/subnet.</div>
</li>
<li class="level2"><div class="li"> NOTE: You still have to “*” this option in order for the router to be on the network. You don&#039;t have to change the settings though</div>
</li>
<li class="level2"><div class="li"> NOTE: It is not possible to set this feature in the latest <a href="https://dev.openwrt.org/changeset/31258/" class="urlextern" title="https://dev.openwrt.org/changeset/31258/" rel="ugc nofollow">attitude adjustment</a> release.  See this <a href="http://www.mail-archive.com/openwrt-devel@lists.openwrt.org/msg15992.html" class="urlextern" title="http://www.mail-archive.com/openwrt-devel@lists.openwrt.org/msg15992.html" rel="ugc nofollow">mailing list post</a> for more information.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Network → CRDA = YES (compile as built-in package with “*”, not as a module with “M”)</div>
</li>
<li class="level1"><div class="li"> Kernel Modules → LED Modules → kmod-leds-wndr3700-usb = YES (compile as built-in driver as “*”, not as a module with “M”)</div>
</li>
<li class="level1"><div class="li"> Kernel Modules → Wireless Drivers → kmod-ath → Configuration → Force Atheros drivers to respect the user&#039;s regdomain settings = YES</div>
</li>
</ol>

<p>
If you want to slap a USB memory stick in the back of your router to allow you to install many more packages read the pages <a href="/docs/guide-user/storage/usb-installing" class="wikilink1" title="docs:guide-user:storage:usb-installing" data-wiki-id="docs:guide-user:storage:usb-installing">USB Basic Support</a> and <a href="/docs/guide-user/storage/usb-drives" class="wikilink1" title="docs:guide-user:storage:usb-drives" data-wiki-id="docs:guide-user:storage:usb-drives">USB Storage</a>.
</p>

<p>
A sample .config file is linked to below. If you use this, at the very least, you will need to edit the <abbr title="Domain Name System">DNS</abbr> server address listed in the “image configuration” step (see #4 above).
</p>

<p>
Type 
</p>
<pre class="code">make</pre>

<p>
and it should merrily build away for at least a good half hour (or more). When you&#039;re done, you should have the resulting binaries stored in <code>~/openwrt/trunk/bin/ar71xx</code>. As of trunk revision 25119, separate binaries will be created for the WNDR3700v1 and WNDR3700v2.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configuration&quot;,&quot;hid&quot;:&quot;configuration&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:3,&quot;range&quot;:&quot;1602-4518&quot;} -->
<h2 class="sectionedit4" id="installation">Installation</h2>
<div class="level2">

<p>
Please see <a href="/toh/netgear/wndr3700#installation" class="wikilink1" title="toh:netgear:wndr3700" data-wiki-id="toh:netgear:wndr3700">WNDR3700 - Installation</a> or <a href="/docs/guide-user/installation/generic.flashing" class="wikilink1" title="docs:guide-user:installation:generic.flashing" data-wiki-id="docs:guide-user:installation:generic.flashing">OpenWrt - Installation</a>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Installation&quot;,&quot;hid&quot;:&quot;installation&quot;,&quot;codeblockOffset&quot;:4,&quot;secid&quot;:4,&quot;range&quot;:&quot;4519-&quot;} -->